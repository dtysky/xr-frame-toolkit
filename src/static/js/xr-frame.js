/*! For license information please see xr-frame-webgl.js.LICENSE.txt */
window.wasmLoadPromise.then((wm=>{var xrFrame;window.Phys3D=wm,(()=>{var __webpack_modules__={1617:(e,t,r)=>{var n=null,o=function(){},i=o.stats={all:0,copyIn:0,parse:0,constructOut:0},a=function(e){return n.llparser_create_descriptor(e,1)},s=function(e,t){var r=n.llparser_create_descriptor(e,0),o=!1;"^"===t[0]&&(o=!0);for(var i=o?1:0;i<t.length;i++){var a=t.charCodeAt(i);if("-"===t[i+1]){var s=t.charCodeAt(i+2);a<=s?(n.llparser_descriptor_add_range(r,a,s),i+=2):n.llparser_descriptor_add_char(r,a)}else n.llparser_descriptor_add_char(r,a)}return o&&n.llparser_descriptor_revert(r),r};o.create=function(e,t,i){n||(n=r(8643));var u=new o;i=i||16384;var c=u._llp=n.llparser_create(i,128,128),l={},f={},p="";for(p in l.ALL=n.llparser_create_descriptor(c,0),n.llparser_descriptor_set_all(l.ALL),l.NULL=n.llparser_create_descriptor(c,0),n.llparser_descriptor_set_nil(l.NULL),e)l[p]=a(c);for(p in e)for(var h=e[p],d=l[p],_=0;_<h.length;_++){for(var y=h[_].id,v=h[_].states,m=[],g=0;g<v.length;g++){var b=v[g];l[b]||(l[b]=s(c,b)),m.push(l[b])}var w=0;"_raw"===y?w=1:"_jump"===y?w=65536:"_blank"===y&&(w=65537);var x=n.llparser_add_rule(c,w,d,m.length,m[0],m[1],m[2],m[3],m[4],m[5],m[6],m[7]);0===w&&(f[x]=t[y])}return n.llparser_prepare(c),u._inputPtr=n.llparser_get_input_buffer(c),u._resultPtr=n.llparser_get_result(c),u._stateIdMap=l,u._ruleCbMap=f,u._charCountLimit=i,u},o.prototype.parse=function(e,t){var r=Date.now();!function(e,t,r,n){for(var o=n>e.length?e.length:n,i=0;i<o;i++)t[r+i]=e.charCodeAt(i);t[r+o]=0}(t,new Uint16Array(n.memory.buffer),this._inputPtr>>1,this._charCountLimit),i.copyIn=i.copyIn+Date.now()-r,r=Date.now();var o=n.llparser_parse(this._llp,this._stateIdMap[e]);if(i.parse=i.parse+Date.now()-r,r=Date.now(),o)throw new Error("Parsing failed at character position "+(o-1)+' near "'+t.slice(o-20,o)+'"');var a=function(e,t,r,n,o){for(var i=[],a={i:0,r:0,n:!1,cc:-1,c:[]},s=a,u=o.pos,c=!1,l=!1,f=!1;;){var p=t[u],h=t[u+1];if(h<0?(l=!0,h=-h-1):l=!1,p>=0){f=!0;var d=r.slice(p,h);s.c.push(d),c=l}else{if(-1===p&&0===h)break;f=!1;var _=-p,y=h,v={i:s.c.length-(c?1:0),r:_,n:l,cc:y,c:[]};if(c){var m=s.c.length-1,g=s.c[m];v.c.push(g),s.c[m]=v}else s.c.push(v);i.push(s),s=v,c=!1}if(!f||!c)for(;s.c.length===s.cc;){c=s.n;var b=i.pop();if(b.c[s.i]=n[s.r].call(e,s.c),s=b,c)break}u+=2}return a.c[0]}(this,new Int32Array(n.memory.buffer),t,this._ruleCbMap,{pos:this._resultPtr>>2});return i.constructOut=i.constructOut+Date.now()-r,a},o.prototype.destroy=function(){n.llparser_destroy(this._llp)},e.exports=o},7858:(e,t,r)=>{var n=r(5738),o=r(7124),i=!1,a=[],s=[],u=function(e){var t=a;a=[];var r=s;s=[],i=!0;for(var c=r.length,l=0;l<r.length;l++)r[l].render((function(){if(0==--c){i=!1,a.length&&(n.hasDOMBackend&&"function"==typeof requestAnimationFrame?requestAnimationFrame(u):setTimeout(u,16));for(var e=0;e<t.length;e++)"function"==typeof t[e]&&o.safeCallback("render",t[e],null,[])}}))},c=function(e,t){a.push(t||null),s.indexOf(e)<0&&s.push(e),i||1!==a.length||(n.hasDOMBackend&&"function"==typeof requestAnimationFrame?requestAnimationFrame(u):setTimeout(u,16))};t.triggerRender=function(e,t){"function"==typeof e?"custom"===n.documentBackend&&n.customContext&&c(n.customContext,e):e.__backendContext&&c(e.__backendContext,t)}},1341:(e,t,r)=>{var n=r(7124),o=r(5738),i=r(7842),a=["created","ready","cacheAttached","attached","moved","detached","route","saved","restored","error","listenerChanged","performanceData"],s=[String,Number,Boolean,Object,Array,null],u=function(){},c=i.parseMultiPaths,l=function(){};l.matchTypeWithValue=function(e,t){if(e===String){if("string"!=typeof t)return!1}else if(e===Number){if(!Number.isFinite(t))return!1}else if(e===Boolean){if("boolean"!=typeof t)return!1}else if(e===Object){if(null===t||t.constructor!==Object)return!1}else if(e===Array){if(null===t||t.constructor!==Array)return!1}else if(void 0===t)return!1;return!0};var f=function(e){for(var t=[],r=0;r<e.length;r++)t[r]=e[r];return t},p=function(e){var t={};for(var r in e)t[r]=e[r];return t},h=function(e,t){for(var r in t)hasOwnProperty.call(e,r)?"object"!=typeof e[r]||"object"!=typeof t[r]||null===t[r]||t[r]instanceof Array?e[r]=t[r]:(e[r]instanceof Array?e[r]=f(e[r]):e[r]=p(e[r]),h(e[r],t[r])):e[r]=t[r]};l.create=function(e){var t=new l;return t.is=e.is||"",t.using=e.using||{},t.generics=e.generics||{},t.placeholder=e.placeholder||{},t.template=e.template,t.externalClasses=e.externalClasses||[],t.data="object"==typeof e.data?{}:null,t.properties=Object.create(null),t.methods=Object.create(null),t.listeners=Object.create(null),t.relations=Object.create(null),t.ancestors=[],t.initiator=e.initiator,t.lifetimes=Object.create(null),t.pageLifetimes=Object.create(null),t.observers=[],t.options={publicProperties:!!(e.options&&void 0!==e.options.publicProperties?e.options.publicProperties:o.publicProperties)},t.definitionFilter=e.definitionFilter,t._unprepared=e,(e.options&&void 0!==e.options.lazyRegistration?e.options.lazyRegistration:o.lazyRegistration)||l.prepare(t),e.is&&(l._list[e.is]=t),t},l.prepare=function(e){var t=e._unprepared;if(t){e._unprepared=null;var r=e.ancestors,o="",i=0;for(i=0;i<(t.behaviors||[]).length;i++){var f=t.behaviors[i],p=f;for(o in"string"==typeof p&&(p=l._list[f],n.hasGlobalWarningListeners()&&(p instanceof l||n.triggerWarning('behavior "'+f+'" is not found (when preparing "'+e.is+'").'))),p._unprepared&&l.prepare(p),"object"==typeof p.data&&(null===e.data?e.data=p.data:h(e.data,p.data)),p.generics){var d=p.generics[o];"object"!=typeof d&&(d={}),e.generics[o]={default:d.default}}for(o in p.properties)n.hasGlobalWarningListeners()&&"_"===o.charAt(0)&&void 0!==e.properties[o]&&n.triggerWarning('property "'+o+'" from different behaviors is overriding (when preparing "'+e.is+'").'),e.properties[o]=p.properties[o];for(o in p.relations)e.relations[o]=p.relations[o];for(o in p.methods)n.hasGlobalWarningListeners()&&"_"===o.charAt(0)&&e.methods[o]&&n.triggerWarning('method "'+o+'" from different behaviors is overriding (when preparing "'+e.is+'").'),e.methods[o]=p.methods[o];for(var _=0;_<p.ancestors.length;_++)r.indexOf(p.ancestors[_])<0&&r.push(p.ancestors[_])}for(o in"object"==typeof t.data&&(null===e.data?e.data=t.data:h(e.data,t.data)),t.properties){n.hasGlobalWarningListeners()&&"_"===o.charAt(0)&&void 0!==e.properties[o]&&n.triggerWarning('property "'+o+'" from different behaviors is overriding (when preparing "'+e.is+'").');var y=t.properties[o];s.indexOf(y)>=0?y={type:y}:s.indexOf(y.type)<0&&y.optionalTypes&&y.optionalTypes.length>0&&(y.type=y.optionalTypes[0]),n.hasGlobalWarningListeners()&&s.indexOf(y.type)<0&&n.triggerWarning('the type of property "'+o+'" is illegal (when preparing "'+e.is+'").'),void 0===y.value&&(y.type===String?y.value="":y.type===Number?y.value=0:y.type===Boolean?y.value=!1:y.type===Array?y.value=[]:y.value=null),e.properties[o]={type:y.type,optionalTypes:y.optionalTypes,value:y.value,filter:y.filter,observer:y.observer,public:!!(void 0===y.public?e.options.publicProperties:y.public),availability:y.availability,observeAssignments:!!y.observeAssignments,reflectIdPrefix:!!y.reflectIdPrefix}}if(t.lifetimes&&"object"==typeof t.lifetimes)for(o in t.lifetimes)e.lifetimes[o]=t.lifetimes[o];for(i=0;i<a.length;i++)void 0===e.lifetimes[a[i]]&&(e.lifetimes[a[i]]=t[a[i]]);for(o in t.listeners)e.listeners[o]=t.listeners[o];var v=t.observers;if(v instanceof Array)for(i=0;i<v.length;i++){var m=v[i];e.observers.push({paths:c(m.fields||"**"),observer:m.observer})}else for(o in v)e.observers.push({paths:c(o),observer:v[o]});if(t.pageLifetimes&&"object"==typeof t.pageLifetimes)for(o in t.pageLifetimes)e.pageLifetimes[o]=t.pageLifetimes[o];for(o in t.relations){var g=t.relations[o];e.relations[o]={target:g.target||o,type:g.type,linked:g.linked||u,linkChanged:g.linkChanged||u,unlinked:g.unlinked||u,linkFailed:g.linkFailed||u}}for(o in t.methods)"function"==typeof t.methods[o]&&(n.hasGlobalWarningListeners()&&"_"===o.charAt(0)&&e.methods[o]&&n.triggerWarning('method "'+o+'" from different behaviors is overriding (when preparing "'+e.is+'").'),e.methods[o]=t.methods[o]);r.push(e)}},l._list=Object.create(null),l.prototype.hasBehavior=function(e){this._unprepared&&l.prepare(this);for(var t=0;t<this.ancestors.length;t++)if(e instanceof l){if(this.ancestors[t]===e)return!0}else if(this.ancestors[t]===l._list[e])return!0;return!1},l.prototype._getAllListeners=function(){for(var e={},t=this.ancestors,r=0;r<t.length;r++){var n=this.ancestors[r];for(var o in n.listeners)Object.prototype.hasOwnProperty.call(e,o)?e[o].push(n.listeners[o]):e[o]=[n.listeners[o]]}return e},l.prototype._addObserversToDataProxy=function(e){for(var t=this.ancestors,r=0;r<t.length;r++)for(var n=this.ancestors[r].observers,o=0;o<n.length;o++){var i=n[o];e.addObserver(i.observer,i.paths,this)}},l.prototype._getAllLifeTimeFuncs=function(){var e={},t=this.ancestors;a.forEach((function(t){e[t]=n.create("Lifetime Method")}));for(var r=0;r<t.length;r++){var o=t[r];for(var i in o.lifetimes)o.lifetimes[i]&&(e[i]||(e[i]=n.create("Lifetime Method")),e[i].add(o.lifetimes[i]))}return e},l.prototype._getAllPageLifeTimeFuncs=function(){for(var e={},t=this.ancestors,r=0;r<t.length;r++){var o=t[r];for(var i in o.pageLifetimes)o.pageLifetimes[i]&&(e[i]||(e[i]=n.create("Page Lifetime Method")),e[i].add(o.pageLifetimes[i]))}return e},l.callDefinitionFilter=function(e){var t=e.definitionFilter,r=[];return e.behaviors instanceof Array&&e.behaviors.forEach((function(t){(t="string"==typeof t?l._list[t]:t)&&t.definitionFilter&&(r.push(t.definitionFilter),t.definitionFilter.call(null,e))})),"function"==typeof t?function(e){t(e,r)}:null},e.exports=l},7523:(e,t,r)=>{var n=r(5738),o=r(5190),i=function(){},a=/(~|\^+)?-?[_0-9a-z][-_0-9a-z]*/gi,s=null;i._setElementSystem=function(e){s=e,i._setElementSystem=null};var u=Object.prototype.hasOwnProperty;i.create=function(e,t){var r=new i;for(var n in r._prefix="",r._addOriginalClass=!1,r._alias=t,r._resolvedAlias={},t)r._resolvedAlias[n]="";return r._rawNames=[],r._elem=e,r._owner=null,r._prevGenNames="",r};var c=function(e){var t="",r=e._rawNames,n=e._prefix,o=e._owner?e._owner._resolvedAlias:null,i=e._addOriginalClass;n&&(n+="--");for(var a=0;a<r.length;a++){var s=r[a];if(a&&(t+=" "),o&&u.call(o,s))t+=o[s];else if("~"===s[0])t+=s.slice(1);else if("^"===s[0]){s=s.slice(1);for(var c=e._owner||null;"^"===s[0];)s=s.slice(1),c=c?c._owner:null;var l=c?c._prefix:"";l&&(l+="--"),t+=l+s}else i&&(t+=s+" "),t+=n+s}return t},l=function(e){var t=e._elem.__domElement;if(t){var r=c(e);if("dom"===n.documentBackend)r?t.setAttribute("class",r):t.removeAttribute("class");else if("custom"===n.documentBackend){if(e._prevGenNames===r)return;e._prevGenNames=r,t.setClass(r)}}},f=function(e){var t=e.classList;t instanceof i&&(t._alias&&p(t),l(t));for(var r=e.childNodes,n=0;n<r.length;n++)r[n]instanceof s&&f(r[n])},p=function(e){var t=e._owner;if(!t)return!1;var r=!1;for(var n in e._alias){var o=e._alias[n],i=[];if(o)for(var a=0;a<o.length;a++){var c=o[a];if(u.call(t._alias,c)){var l=t._resolvedAlias[c];i.push(l)}else{var p=e._prefix&&c?e._prefix+"--"+c:c;i.push(p)}}var h=i.join(" ");e._resolvedAlias[n]!==h&&(r=!0,e._resolvedAlias[n]=h)}r&&e._elem.shadowRoot instanceof s&&f(e._elem.shadowRoot)};i.prototype.toggle=function(e,t){var r=this._rawNames.indexOf(e);void 0===t&&(t=r<0);var n=!1;if(t?r<0&&(this._rawNames.push(e),l(this),n=!0):r>=0&&(this._rawNames.splice(r,1),l(this),n=!0),n){var i=this._elem;(i.__propObservers&&!i.__propObservers.empty||i.__subtreeObserversCount)&&o._callObservers(i,"__propObservers",{type:"properties",target:i,propertyName:"class"})}},i.prototype.contains=function(e){for(var t=this._rawNames,r=0;r<t.length;r++){var n=t[r];if("~"===n[0]){if(n.slice(1)===e)return!0}else if("^"===n[0]){for(var o=1;"^"===n[o];)o++;if(n.slice(o)===e)return!0}else if(n===e)return!0}return!1},i.prototype._setOwnerOptions=function(e,t,r){var n=this._prefix;this._prefix=t,n===(t||"")&&this._owner===e||(this._addOriginalClass=r,this._owner=e,this._alias&&p(this),l(this))},i.prototype._setAlias=function(e,t){var r=this._owner,n=String(t).match(a);this._alias[e]=n;var o=[];if(n)for(var i=0;i<n.length;i++){var s=n[i];r&&u.call(r._alias,s)?o.push(r._resolvedAlias[s]):o.push(this._prefix?this._prefix+"--"+s:s)}this._resolvedAlias[e]=o.join(" "),f(this._elem.shadowRoot)},i.prototype.setClassNames=function(e){e=null==e?"":String(e),this._rawNames=e.match(a)||[],l(this)},i.prototype.getClassNames=function(){return c(this)},i.prototype.getPrefix=function(){return this._prefix},i.prototype.getAddOriginalClass=function(){return this._addOriginalClass},i.prototype.getRawNames=function(){return this._rawNames},e.exports=i},5798:(e,t,r)=>{var n=r(7124),o=r(7626),i=r(7244),a=r(6452),s=r(1341),u=r(5577),c=r(7253),l=r(5190),f=r(7523),p=r(612),h=r(5738),d=r(2015),_=r(7842),y=a.addListenerToElement,v=_.parseSinglePath,m=o.deepCopy,g=function(){};g.prototype=Object.create(u.prototype,{constructor:{value:g,writable:!0,configurable:!0},data:{get:function(){return this.__dataProxy._data},set:function(e){var t=this.__dataProxy;for(var r in e)t.scheduleReplace([r],e[r]);t.doUpdates()},configurable:!0},$:{get:function(){return u._updateIdMap(this),this.__idCache},set:function(){}}});var b=function(){};b.prototype=Object.create(Object.prototype),a._setComponent(g);var w=null;g._setDefaultTemplateEngine=function(e){w=e,g._setDefaultTemplateEngine=null},i.setPropUpdater((function(e,t,r,o){var i=e[0],a=this.__propData[i];r=function(e,t,r,o,i){if(r)for(var a=0;a<r.length;a++)if(s.matchTypeWithValue(r[a],e))return e;return t===String?null==e?(n.hasGlobalWarningListeners()&&n.triggerWarning('property "'+i+'" of "'+(o.is||"")+'" received type-uncompatible value: expected <String> but get null value. Use empty string instead.'),""):(n.hasGlobalWarningListeners()&&"object"==typeof e&&n.triggerWarning('property "'+i+'" of "'+(o.is||"")+'" received type-uncompatible value: expected <String> but got object-typed value. Force converted.'),String(e)):t===Number?isFinite(e)?Number(e):(n.hasGlobalWarningListeners()&&("number"==typeof e?n.triggerWarning('property "'+i+'" of "'+(o.is||"")+'" received type-uncompatible value: expected <Number> but got NaN or Infinity. Used 0 instead.'):n.triggerWarning('property "'+i+'" of "'+(o.is||"")+'" received type-uncompatible value: expected <Number> but got non-number value. Used 0 instead.')),0):t===Boolean?!!e:t===Array?e instanceof Array?e:(n.hasGlobalWarningListeners()&&n.triggerWarning('property "'+i+'" of "'+(o.is||"")+'" received type-uncompatible value: expected <Array> but got non-array value. Used empty array instead.'),[]):t===Object?"object"==typeof e?e:(n.hasGlobalWarningListeners()&&n.triggerWarning('property "'+i+'" of "'+(o.is||"")+'" received type-uncompatible value: expected <Object> but got non-object value. Used null instead.'),null):void 0===e?null:e}(r,t.type,t.optionalTypes,this,i);var u=!t.availability||function(e,t,r,o){var i=[e.ownerShadowRoot?e.ownerShadowRoot.__wxHost.__componentOptions.domain:void 0,o?void 0:r];return!!n.safeCallback("Availablity Controller",t,e.__methodCaller,i,e)}(this,t.availability,r,o);if(!u)return n.hasGlobalWarningListeners()&&n.triggerWarning('the new value for property "'+i+'" in component "'+(this.is||"")+'" is currently not available. The value is not changed.'),a;if(t.filter){var c=n.safeCallback("Property Filter",t.filter,this.__methodCaller,o?[]:[r,a,e],this);void 0!==c&&(r=c)}return this.__domElement&&this.__componentOptions.reflectToAttributes&&this.__propPublic[i]&&function(e,t,r,n){if("dom"===h.documentBackend){if(n&&e.ownerShadowRoot){var o=e.ownerShadowRoot.__wxHost.__idPrefix;o&&(r=o+"--"+r)}var i=t.replace(/[A-Z]/g,(function(e){return"-"+e.toLowerCase()})),a=typeof r;"boolean"===a?r?e.__domElement.setAttribute(i,""):e.__domElement.removeAttribute(i):"object"===a?e.__domElement.setAttribute(i,JSON.stringify(r)):e.__domElement.setAttribute(i,r)}}(this,i,r,t.reflectIdPrefix),r})),i.setPropObserver((function(e,t,r,o,i,a){if(o.observeAssignments||e!==t){var s=r[0];this.__propertyChangeListeners&&this.__propertyChangeListeners[s]&&!a&&n.safeCallback("Property Observer",this.__propertyChangeListeners[s],this.__methodCaller,[e],this),o.observer&&n.safeCallback("Property Observer",o.observer,this.__methodCaller,i?[]:[e,t,r],this),o.public&&(this.__propObservers&&!this.__propObservers.empty||this.__subtreeObserversCount)&&l._callObservers(this,"__propObservers",{type:"properties",target:this,propertyName:s})}}));var x=function(e,t,r){t.__relationLinks||(t.__relationLinks={});for(var n=t.__relationLinks[r]=[],o=0;o<e.length;o++)n.push(null)},E=function(e,t,r,o,i){for(var a=g.prototype.hasBehavior,c="parent"===o,l="shadowHost"===o,f=0;f<e.length;f++){var p,h=e[f];if(p="object"!=typeof h.target?s._list[h.target]:h.target){var d=t[f],_=null;if(!i)for(var y=l?r.ownerShadowRoot&&r.ownerShadowRoot.__wxHost:r.parentNode;y;y=l?y.ownerShadowRoot&&y.ownerShadowRoot.__wxHost:y.parentNode)if(u.isSelectable(y)){if(a.call(y,p)){var v;v=c?y.__relationMap.child:l?y.__relationMap.shadowContent:y.__relationMap.descendant;for(var m=0;m<v.length;m++){var b,w=v[m];if((b="object"!=typeof w.target?s._list[w.target]:w.target)&&a.call(r,b)){_={parent:y,relation:w};break}}}if(c||_)break}t[f]=_,!d||_&&d.parent===_.parent||(n.safeCallback("Relation Unlinked Callback",d.relation.unlinked,d.parent.__methodCaller,[r.__methodCaller],d.parent),n.safeCallback("Relation Unlinked Callback",h.unlinked,r.__methodCaller,[d.parent.__methodCaller],r)),!_||d&&d.parent===_.parent||(n.safeCallback("Relation Linked Callback",_.relation.linked,_.parent.__methodCaller,[r.__methodCaller],_.parent),n.safeCallback("Relation Linked Callback",h.linked,r.__methodCaller,[_.parent.__methodCaller],r)),d&&_&&d.parent===_.parent&&(n.safeCallback("Relation Link Changed Callback",_.relation.linkChanged,_.parent.__methodCaller,[r.__methodCaller],_.parent),n.safeCallback("Relation Link Changed Callback",h.linkChanged,r.__methodCaller,[_.parent.__methodCaller],r)),i||_||n.safeCallback("Relation Link Failed Callback",h.linkFailed,r.__methodCaller,[],r)}}},S=function(e,t,r){if(e instanceof u){var n=0,o=null;if(e instanceof g){for(e.__pageLifeTimeFuncs[t]&&e.__pageLifeTimeFuncs[t].call(e.__methodCaller,r||[]),o=e.childNodes,n=0;n<o.length;n++)S(o[n],t,r);e=e.shadowRoot}for(o=e.childNodes,n=0;n<o.length;n++)S(o[n],t,r)}};g._list={},g.register=function(e){var t=e.options||{},r=s.create(e),n=void 0!==t.classPrefix?t.classPrefix:h.classPrefix;null==n&&(n=r.is||"");var o=new b;return o._unprepared=r,o.is=e.is||"",o.behavior=r,o.protoFunc=null,o.props=null,o.template=null,o.innerEvents=null,o.generics=r.generics,o.placeholder=r.placeholder,o.initiator=r.initiator||null,o.options={availability:t.availability||h.availability,domain:t.domain||h.domain,writeOnly:!!(void 0!==t.writeOnly?t.writeOnly:h.writeOnly),allowInWriteOnly:!!(void 0!==t.allowInWriteOnly?t.allowInWriteOnly:h.allowInWriteOnly),classPrefix:n,styleScope:t.styleScope||h.styleScope,addGlobalClass:!!(void 0!==t.addGlobalClass?t.addGlobalClass:h.addGlobalClass),templateEngine:t.templateEngine||h.templateEngine||w,renderingMode:t.renderingMode||h.renderingMode,multipleSlots:!!(void 0!==t.multipleSlots?t.multipleSlots:h.multipleSlots),reflectToAttributes:!!(void 0!==t.reflectToAttributes?t.reflectToAttributes:h.reflectToAttributes),writeFieldsToNode:!!(void 0!==t.writeFieldsToNode?t.writeFieldsToNode:h.writeFieldsToNode),writeIdToDOM:!!(void 0!==t.writeIdToDOM?t.writeIdToDOM:h.writeIdToDOM),idPrefixGenerator:t.idPrefixGenerator||h.idPrefixGenerator,separateInnerData:!!(void 0!==t.separateInnerData?t.separateInnerData:h.separateInnerData),innerDataExclude:t.innerDataExclude||h.innerDataExclude,listenerChangeLifeTimes:!!(void 0!==t.listenerChangeLifeTimes?t.listenerChangeLifeTimes:h.listenerChangeLifeTimes),randomizeTagName:!!(void 0!==t.randomizeTagName?t.randomizeTagName:h.randomizeTagName),virtualHost:!!(void 0!==t.virtualHost?t.virtualHost:h.virtualHost)},r._unprepared||g.prepare(o),void 0!==e.is&&(g._list[r.is]=o),o},g.isPrepared=function(e){return!e._unprepared},g.prepare=function(e){var t=e._unprepared;if(t){e._unprepared=null;var r=e.options,o={};t._unprepared&&s.prepare(t),r.writeOnly&&(o.data={value:null});var a=e.props={};Object.keys(t.properties).forEach((function(e){var n=t.properties[e];a[e]={type:n.type,optionalTypes:n.optionalTypes,value:n.value,filter:"function"==typeof n.filter?n.filter:null==n.filter?null:t.methods[n.filter],observer:"function"==typeof n.observer?n.observer:null==n.observer?null:t.methods[n.observer],public:n.public,availability:n.availability,observeAssignments:n.observeAssignments,reflectIdPrefix:n.reflectIdPrefix},r.writeFieldsToNode&&(o[e]={enumerable:!0,get:function(){return this.__propData[e]},set:function(t){var r=this.__dataProxy;r.scheduleReplace([e],t),r.doUpdates()}})}));var u=function(){};e.protoFunc=u;var c=u.prototype=Object.create(g.prototype,o);if(c.is=e.is,c.__componentOptions=r,c.__using=t.using,e.dataGroupObserverTree=i._createObserverTree(a),t._addObserversToDataProxy(e.dataGroupObserverTree),c.__behavior=t,r.writeFieldsToNode)for(var l in t.methods)c[l]=t.methods[l];c.__lifeTimeFuncs=t._getAllLifeTimeFuncs(),c.__pageLifeTimeFuncs=t._getAllPageLifeTimeFuncs();var f=t.relations,p=c.__relationMap={};for(var h in f){var d=f[h],_=d.type;p[_]?p[_].push(d):p[_]=[d]}var y=[];p.parent&&y.push((function(e){E(this.__relationMap.parent,this.__relationLinks.parent,this,"parent","detached"===e)})),p.ancestor&&y.push((function(e){E(this.__relationMap.ancestor,this.__relationLinks.ancestor,this,"ancestor","detached"===e)})),p.shadowHost&&y.push((function(e){E(this.__relationMap.shadowHost,this.__relationLinks.shadowHost,this,"shadowHost","detached"===e)})),e.relationHandler=function(e){for(var t=0;t<y.length;t++)y[t].call(this,e)};var v={},m={},b=t.data,w="";for(w in b)m[w]=b[w];for(w in a){var x=a[w];n.hasGlobalWarningListeners()&&void 0!==m[w]&&n.triggerWarning('data field "'+w+'" is overwritten by property with the same name (when preparing "'+t.is+'").'),m[w]=x.value,v[w]=x.public}var S=m,T=r.separateInnerData,O=r.innerDataExclude;if(O){for(var A in S={},m)O.test(A)||(S[A]=m[A]);T||(m=S)}var C=r.templateEngine;e.template=C.create(t,m,S,r),c.__propPublic=v;var M=t._getAllListeners(),P=e.innerEvents=[];for(var R in M){for(var D=M[R],N=R.indexOf("."),I=R.slice(N+1),L=N<1?"":R.slice(0,N),F=[],k=0;k<D.length;k++){var U=D[k];"function"!=typeof U&&(U=null==U?null:t.methods[U]),F.push(U)}P.push({id:L,name:I,funcs:F})}}};var T=1,O=Object.prototype.hasOwnProperty,A=function(e,t){return function(r){return e.call(t.__methodCaller,r,t)}},C=g._advancedCreate=function(e,t,r,o,a,s,c){var l=t;l._unprepared&&g.prepare(l);var _=l.options,v=!_.availability||function(e,t,r){var o=[t?t.__wxHost.__componentOptions.domain:void 0];return!!n.safeCallback("Availablity Controller",r,e,o)}(l,r,_.availability);v||(n.hasGlobalWarningListeners()&&n.triggerWarning('the component "'+(l.is||"")+'" is currently not available. The default component is used instead.'),l=g._list[""]);var b=new(0,l.protoFunc);_.idPrefixGenerator&&(b.__idPrefix=String(_.idPrefixGenerator.call(b))),b.__placeholder=function(e,t){var r={};for(var n in t)r[n]=t[n];for(var n in e)r[n]=e[n];return r}(s,l.placeholder);var w=l.generics;b.__generics=w?function(e,t,r){var o={};for(var i in e){var a=e[i],s=t[i];"object"!=typeof s&&O.call(g._list,s)&&(s=g._list[s]),"object"!=typeof s&&null!=a.default&&(s=g._list[a.default]),n.hasGlobalWarningListeners()&&(s||n.triggerWarning('generic "'+i+'" is not instantiated. The default component is used instead.')),s&&(o[i]=s)}if(n.hasGlobalWarningListeners())for(var u in t)void 0===e[u]&&n.triggerWarning('generic "'+u+'" is not defined. It will be ignored.');return o}(w,a||{}):{};var E=null,S=h.documentBackend;if(_.virtualHost){E=null,"dom"!==S&&"custom"!==S||(E=void 0);var C=null;"custom"===S&&(C=void 0===o?h.customContext:o),u.initialize(b,E,r,C),b.__virtual=!0}else"dom"===S?(E=d.backendExtractedDefault?new p(e):document.createElement(e),u.initialize(b,E,r,null)):"custom"===S?((C=void 0===o?h.customContext:o)&&(E=C.createElement("empty",e)),u.initialize(b,E,r,C)):u.initialize(b,null,r,null);var M=0,P=b.__externalClassAlias={};if(l.behavior.externalClasses){var R=l.behavior.externalClasses;for(M=0;M<R.length;M++)P[R[M]]=null}if(b.classList=f.create(b,P),r){var D=r.__wxHost;E&&"custom"===S&&D.__componentOptions.styleScope&&E.setStyleScope(D.__componentOptions.styleScope),b.classList._setOwnerOptions(D.classList,D.__componentOptions.classPrefix,D.__componentOptions.addGlobalClass),h.writeExtraInfoToAttr&&E&&E.setAttribute("exparser:info-class-prefix",D.__componentOptions.classPrefix&&D.__componentOptions.classPrefix+"--")}"dom"===S&&h.writeExtraInfoToAttr&&E&&(b.__componentInstanceId=T++,E.setAttribute("exparser:info-component-id",b.__componentInstanceId));var N=b.__templateInstance=l.template.createInstance(b,c);b.__propData=N.data;var I=_.separateInnerData;b.__innerData=I?m(b.__propData):null;var L=_.innerDataExclude;if(I&&L){var F={};for(var k in b.__innerData)L.test(k)||(F[k]=b.__innerData[k]);b.__innerData=F}b.__dataProxy=i._advancedCreate(b,b.__propData,b.__innerData,L,l.dataGroupObserverTree,(function(e,t,r,n){b.__templateInstance.updateValues(b,I?b.__innerData:b.__propData,e,t,r,n)})),N.beforeMergeValues&&b.__dataProxy.setBeforeMergeCb((function(e,t,r){b.__templateInstance.beforeMergeValues(e,t,r)})),N.beforeUpdateValues&&b.__dataProxy.setBeforeUpdateCb((function(e){b.__templateInstance.beforeUpdateValues(b,I?b.__innerData:b.__propData,e)})),_.writeOnly&&b.__dataProxy.setHidingValue(!0),b.__idCacheDirty=!1,b.__idCache=N.idMap,null===N.slots[""]&&(N.slots[""]=E),l.options.multipleSlots?b.__slots=N.slots:(b.__singleSlot=N.slots[""]||null,b.__singleSlot&&(b.__singleSlot.__wxSlotChildren=b.childNodes)),N.shadowRoot instanceof u?(b.shadowRoot=N.shadowRoot,u._attachShadowRoot(N.shadowRoot)):E instanceof p?(b.shadowRoot=E,E.__wxHost=b,b.__domElement.asShadowRoot=N.shadowRoot,b.__wxSlotChildren=[E],E.__wxSlotParent=b):(b.shadowRoot=E,E.__wxHost=b,""!==h.documentBackend&&b.__domElement.appendChild(N.shadowRoot),b.__wxSlotChildren=[E],E.__wxSlotParent=b);for(var U=N.listeners,B=0;B<U.length;B++){var j=U[B];y(j.target,j.name,A(j.func,b))}var V=l.innerEvents;for(M=0;M<V.length;M++){var z=V[M],G=z.id?"this"===z.id?b:b.__idCache[z.id]:b.shadowRoot;if(G)for(var W=z.name,X=z.funcs,H=0;H<X.length;H++)y(G,W,A(X[H],b))}var q=b.__relationMap;return q.parent&&(x(q.parent,b,"parent"),b.__relationHandler=l.relationHandler),q.ancestor&&(x(q.ancestor,b,"ancestor"),b.__relationHandler=l.relationHandler),q.shadowHost&&(x(q.shadowHost,b,"shadowHost"),b.__relationHandler=l.relationHandler),b.__propertyChangeListeners=null,"custom"===S&&E&&E.associateComponent(b),l.initiator&&n.safeCallback("Component Initiator",l.initiator,b.__methodCaller,[],b),b.__lifeTimeFuncs.created.call(b.__methodCaller,[],b),b};g.createWithGenericsAndContext=function(e,t,r,o,i){if("object"==typeof e)return C(e.is,e,null,o,r,null,i);if(e){if(!t&&!O.call(g._list,e)){if(c.shouldBeNativeNode(e))return c._advancedCreate(e,null,o);n.hasGlobalWarningListeners()&&"virtual"!==e&&n.triggerWarning('component "'+e+'" is not found. The default component is used instead.')}return C(e.toLowerCase(),t||O.call(g._list,e)&&g._list[e]||g._list[""],null,o,r,null,i)}return C("virtual",g._list[""],null,o,r,null,i)},g.createWithGenerics=function(e,t,r,n){return g.createWithGenericsAndContext(e,t,r,void 0,n)},g.createWithContext=function(e,t,r,n){return g.createWithGenericsAndContext(e,t,null,r,n)},g.create=function(e,t,r){return g.createWithGenerics(e,t,null,r)},g.listProperties=function(e){var t=[];for(var r in e.__propPublic)void 0!==e.__propPublic[r]&&t.push(r);return t},g.listPublicProperties=function(e){var t=[];for(var r in e.__propPublic)!0===e.__propPublic[r]&&t.push(r);return t},g.hasProperty=function(e,t){return void 0!==e.__propPublic[t]},g.hasPublicProperty=function(e,t){return!0===e.__propPublic[t]},g.getMethodsFromDef=function(e){return e.behavior._unprepared&&s.prepare(e.behavior),e.behavior.methods},g.getMethod=function(e,t){return e.__behavior.methods[t]},g.getComponentOptions=function(e){return e.__componentOptions},g.prototype.triggerLifeTime=function(e,t){this.__lifeTimeFuncs[e].call(this.__methodCaller,t||[])},g.prototype.triggerPageLifeTime=function(e,t){S(this,e,t)},g.prototype.hasBehavior=function(e){return"object"!=typeof e&&Object.prototype.hasOwnProperty.call(this.__using,e)&&(e=this.__using[e]),!!this.__behavior&&this.__behavior.hasBehavior(e)},g.prototype.getRootBehavior=function(){return this.__behavior},g.prototype.getPlaceholder=function(e){return this.__placeholder[e]},g.prototype.getRelationNodes=function(e){var t=this.__behavior.relations[e];if(!t)return null;if("parent"===t.type||"ancestor"===t.type||"shadowHost"===t.type){for(var r=this.__relationMap[t.type],n=0;n<r.length&&r[n]!==t;n++);return this.__relationLinks[t.type][n]?[this.__relationLinks[t.type][n].parent]:[]}return function(e,t){var r=[],n=t.type,o="child"===n,i="shadowContent"===n,a=function(n){for(var s=n.childNodes,c=0;c<s.length;c++){var l=s[c];if(l instanceof u)if(u.isSelectable(l)){if(l.__relationLinks){var f;if(f=o?l.__relationLinks.parent:i?l.__relationLinks.shadowHost:l.__relationLinks.ancestor)for(var p=0;p<f.length;p++){var h=f[p];if(h&&h.parent===e&&h.relation===t){r.push(l);break}}}i&&l instanceof g&&a(l.shadowRoot),o||a(l)}else a(l)}};return a(i?e.shadowRoot:e),r}(this,t)},g.prototype.hasExternalClass=function(e){return O.call(this.__externalClassAlias,e)},g.prototype.setExternalClass=function(e,t){this.classList._setAlias(e,t)},g.prototype.setPropertyChangeListener=function(e,t){this.__propertyChangeListeners||(this.__propertyChangeListeners={}),this.__propertyChangeListeners[e]=t},g.prototype.replaceDataOnPath=function(e,t){this.__dataProxy.scheduleReplace(e,t)},g.prototype.isInnerDataExcluded=function(e){var t=this.__componentOptions.innerDataExclude;return!!t&&t.test(e)},g.getInnerData=function(e){return e.__innerData},g.getDataProxy=function(e){return e.__dataProxy},g.replaceWholeData=function(e,t,r){e.__propData=t,e.__dataProxy.replaceWholeData(t,r)},g.prototype.applyDataUpdates=function(){this.__dataProxy.doUpdates()},g.prototype.setData=function(e){var t=this.__dataProxy;for(var r in e)t.scheduleReplace(v(r),e[r]);t.doUpdates()},e.exports=g},7244:(e,t,r)=>{var n=r(7124),o=r(7626),i=null,a=null,s=Object.prototype.hasOwnProperty,u=o.deepCopy,c=function(e,t,r,n,o,i){this._data=t,this._innerData=r,this._innerDataExclude=n,this._comp=e,this._updateCb=i,this._beforeMergeCb=null,this._beforeUpdateCb=null,this._hidingValue=!1,this._changes=[],this._doingUpdates=null,this._propFields=o._propFields,this._observers=o._observers,this._observerTree=o._observerTree,this._relatedObserverTreeObj=o,this._observerStatus=[]};c._advancedCreate=function(e,t,r,n,o,i){return new c(e,t,r,n,o,i)};var l=function(e){this._propFields=e,this._observerIdInc=0,this._observers=[],this._observerTree={}};c._createObserverTree=function(e){return new l(e)},c.create=function(e,t,r){var n=new l({});return new c({__methodCaller:e},t,null,null,n,r)},c.setPropUpdater=function(e){i=e},c.setPropObserver=function(e){a=e},c.prototype.replaceWholeData=function(e,t){this._data=e},c.prototype.setHidingValue=function(e){this._hidingValue=!!e},c.prototype.setBeforeMergeCb=function(e){this._beforeMergeCb=e},c.prototype.setBeforeUpdateCb=function(e){this._beforeUpdateCb=e};var f=function(e,t,r,o){for(var i=e,a=0;a<t.length;a++){var s=t[a];if("**"===s)return n.hasGlobalWarningListeners()&&a!==t.length-1&&n.triggerWarning('"**" can only be used at the end of a path descriptor (in "'+o.is+'").'),i["**"]||(i["**"]=[]),void i["**"].push(r);i[s]||(i[s]={}),i=i[s]}i["~"]||(i["~"]=[]),i["~"].push(r)},p=function(e,t,r,n){for(var o=0;o<t.length;o++)f(e,t[o],r,n)},h=function(e,t,r){for(var n=e,o=0,i="";o<t.length&&"**"!==(i=t[o]);o++){if(!n)return;n=n[i]}var a="**"===i?n["**"]:n["~"];if(a)for(o=0;o<a.length;o++)if(a[o]===r){a.splice(o,1);break}},d=function(e,t,r){for(var n=0;n<t.length;n++)h(e,t[n],r)};l.prototype.addObserver=function(e,t,r){var n=this._observerIdInc++;return this._observers[n]={pathObj:t,func:e},p(this._observerTree,t,n,r),n},l.prototype.removeObserver=function(e){var t=this._observers[e];d(this._observerTree,t.pathObj,e),this._observers[e]=null},l.prototype.moveObserver=function(e,t){var r=this._observers[e];d(this._observerTree,r.pathObj,e),r.pathObj=t,p(this._observerTree,t,e)},c.prototype.getObserverTree=function(){return this._relatedObserverTreeObj};var _=function(e,t,r){for(var o=[],i=r.pathObj,a=0;a<i.length;a++){for(var s=i[a],u=t,c=0;c<s.length;c++){var l=s[c];if("**"===l)break;if("object"!=typeof u){u=void 0;break}u=u[l]}o[a]=u}n.safeCallback("Data Observer",r.func,e.__methodCaller,o,e)},y=function(e,t){var r=null,n=0;for(var o in e)if("~"!==o)if("**"!==o)y(e[o],t);else for(r=e["**"],n=0;n<r.length;n++)t[r[n]]=!0;else for(r=e["~"],n=0;n<r.length;n++)t[r[n]]=!0},v=function(e,t,r){for(var n=e,o=0;o<r.length;o++){if(n["**"])for(var i=n["**"],a=0;a<i.length;a++)t[i[a]]=!0;var u=r[o];if("number"==typeof u){if(!s.call(n,u)){n=null;break}}else if(!/^[_a-zA-Z]/.test(u)||!s.call(n,u)){n=null;break}n=n[u]}n&&y(n,t)},m=function(e,t,r,n,o){for(var i=0;i<e.length;i++){var a=e[i],s=t[i];s&&s&&(t[i]=!1,_(r,o?void 0:n,a))}};c.prototype.scheduleReplace=function(e,t,r){this._changes.push([e,t,r])},c.prototype.setChanges=function(e){this._changes=e},c.prototype.getChanges=function(){return this._changes},c.prototype.doUpdates=function(e,t){var r=this._propFields,n=this._comp,o=this._hidingValue,c=this._innerDataExclude,l=!!this._doingUpdates,f=this._relatedObserverTreeObj._observerIdInc,p=null,h=null,d=null;f?(l||(this._doingUpdates={changedPaths:[],changedValues:[],combinedChanges:[],changesTotal:0}),p=this._doingUpdates.changedPaths,h=this._doingUpdates.changedValues,d=this._doingUpdates.combinedChanges):(p=[],h=[],d=[]);var _=this._changes;this._changes=[];var y=[];this._beforeMergeCb&&this._beforeMergeCb(_,y,e);for(var g=0;g<_.length;g++){var b=_[g],w=b[0],x=b[1],E=x,S=void 0,T=w[0],O=!!c&&c.test(T),A=r[T];if(A&&1===w.length)S=this._data[T],x=i.call(this._comp,w,A,x,this._hidingValue),O||(this._innerData?(E=u(x),y[g]||(this._innerData[T]=E)):E=x,b[1]=E),O&&!this._innerData||(this._data[T]=x);else{var C=this._data,M=T,P=null,R=1;if(!O||this._innerData){for(;R<w.length;R++)"number"==typeof(P=w[R])&&isFinite(P)?s.call(C,M)&&C[M]instanceof Array||(C[M]=[]):(!s.call(C,M)||null===C[M]||"object"!=typeof C[M]||C[M]instanceof Array)&&(C[M]={}),C=C[M],M=P;C[M]=x}if(this._innerData&&(C=this._innerData,M=T,!O)){for(R=1;R<w.length;R++)"number"==typeof(P=w[R])&&isFinite(P)?s.call(C,M)&&C[M]instanceof Array||(C[M]=[]):(!s.call(C,M)||null===C[M]||"object"!=typeof C[M]||C[M]instanceof Array)&&(C[M]={}),C=C[M],M=P;E=u(x),y[g]||(C[M]=E),b[1]=E}}v(this._observerTree,this._observerStatus,w),O||(p.push(w),h.push([E,S,x]),d.push(b)),f&&(this._doingUpdates.changesTotal+=1)}if(!l){if(this._beforeUpdateCb&&this._beforeUpdateCb(e),f){var D=0;do{D=this._doingUpdates.changesTotal,m(this._observers,this._observerStatus,n,this._data,o)}while(D!==this._doingUpdates.changesTotal);this._doingUpdates=null}this._updateCb(p,h,d,e);for(var N=0;N<h.length;N++){var I=h[N];if(I){var L=p[N],F=r[L[0]];F&&a.call(n,I[2],I[1],L,F,o,t)}}}},e.exports=c},7842:(e,t,r)=>{var n=r(7124),o=function(e){for(var t=e.str;e.cur<t.length;){var r=t[e.cur];if(" "!==r&&"\n"!==r&&"\r"!==r&&"\t"!==r&&"\f"!==r)break;e.cur+=1}return e.cur<t.length},i=function(e){for(var t=e.str,r="";e.cur<t.length;){var n=t[e.cur];if(!(n>="0"&&n<="9"))break;r+=n,e.cur+=1}if(!r)throw new Error('data path descriptor "'.concat(t,'" is illegal at char ').concat(e.cur," (illegal index)"));return parseInt(r,10)},a=function(e){for(var t=e.str,r="";e.cur<t.length;){var n=t[e.cur];if("\\"===n)e.cur+1===t.length||(r+=t[e.cur+1],e.cur+=1);else if(/^[_a-zA-Z]$/.test(n))r+=n;else{if(!(n>="0"&&n<="9"))break;if(""===r)throw new Error('data path descriptor "'.concat(t,'" is illegal at char ').concat(e.cur," (field name cannot start with digits)"));r+=n}e.cur+=1}return r},s=function(e){for(var t=e.str,r="";e.cur<t.length;){var n=t[e.cur];if("\\"===n)if(e.cur+1===t.length)r+="\\",e.cur+=1;else{var o=t[e.cur+1];"."===o||"["===o||"]"===o||"\\"===o?(r+=o,e.cur+=2):(r+="\\",e.cur+=1)}else{if("."===n||"["===n)break;r+=n,e.cur+=1}}return r},u=function(e){var t=e.str;if(o(e),"*"===t[e.cur]&&"*"===t[e.cur+1])return e.cur+=2,["**"];var r=a(e);if(!r)throw new Error('data path descriptor "'.concat(t,'" is illegal at char ').concat(e.cur," (first field name illegal)"));for(var n=[r];e.cur<t.length&&o(e);){var s=t[e.cur];if("."===s){if(e.cur+=1,o(e),"*"===t[e.cur]&&"*"===t[e.cur+1]){n.push("**"),e.cur+=2;break}var u=a(e);if(!u)throw new Error('data path descriptor "'.concat(t,'" is illegal at char ').concat(e.cur," (field name illegal)"));n.push(u)}else{if("["!==s)break;e.cur+=1,o(e);var c=i(e);if(o(e),"]"!==t[e.cur])throw new Error('data path descriptor "'.concat(t,'" is illegal at char ').concat(e.cur," (illegal index)"));e.cur+=1,n.push(c)}}return n};t.parseSinglePath=function(e){var t=function(e){for(var t=e.str,r=[];e.cur<t.length;){var n=t[e.cur];if("."===n){e.cur+=1;var o=s(e);o&&r.push(o)}else if("["===n){e.cur+=1;var a=i(e);if("]"!==t[e.cur]&&e.cur<t.length)throw new Error('data path descriptor "'.concat(t,'" is illegal at char ').concat(e.cur," (illegal index)"));e.cur+=1,r.push(a)}else{var u=s(e);u&&r.push(u)}}return r}({str:e,cur:0});return t},t.parseMultiPaths=function(e){try{var t={str:e,cur:0},r=function(e){var t=[];for(t.push(u(e)),o(e);","===e.str[e.cur];)e.cur+=1,t.push(u(e)),o(e);return t}(t);if(t.cur!==e.length)throw new Error('data path descriptor "'.concat(e,'" is illegal at char ').concat(t.cur));return r}catch(e){return n.triggerWarning(e.message),[]}}},7626:(e,t)=>{var r=Object.prototype.hasOwnProperty,n=function(e,t){var o=typeof e;if("object"===o&&null!==e){var i=t?t.get(e):void 0;if(void 0!==i)return i;if(e instanceof Array){i=[],t&&t.set(e,i);for(var a=0;a<e.length;a++)i[a]=n(e[a],t)}else for(var s in i={},t&&t.set(e,i),e)r.call(e,s)&&(i[s]=n(e[s],t));return i}if("symbol"!==o)return e};t.deepCopy=function(e,t){var r=t&&"undefined"!=typeof WeakMap?new WeakMap:null;return n(e,r)}},6497:(e,t,r)=>{var n=r(5577),o=r(8888),i=function(){};i.create=function(e,t,r){var a=new i;if(!(e instanceof n||e instanceof o))throw new Error("ElementIterator can only be used for exparser.Element or exparser.TextNode");a._elem=e,a._elemTypeLimit=r||n;var s=t.split("-");if("shadow"===s[0])a._composed=!1;else{if("composed"!==s[0])throw new Error("Unrecognized iterator type: "+t);a._composed=!0}if("ancestors"===s[1])a._relation="ancestors",a._order=0;else{if("descendants"!==s[1])throw new Error("Unrecognized iterator type: "+t);if(a._relation="descendants","root"!==s[2])throw new Error("Unrecognized iterator type: "+t);if("first"===s[3])a._order=-1;else{if("last"!==s[3])throw new Error("Unrecognized iterator type: "+t);a._order=1}}return a};var a=function(e,t,r,n,o){if(n<0&&e instanceof t&&!1===o(e))return!1;var i=r&&e.__wxSlotChildren||e.childNodes;if(i)for(var s=0;s<i.length;s++)if(!1===a(i[s],t,r,n,o))return!1;return!(n>0&&e instanceof t&&!1===o(e))};i.prototype.forEach=function(e){return"ancestors"===this._relation?function(e,t,r,n){for(;e;e=r&&(e.__wxSlotParent||e.__wxHost)||e.parentNode)if(e instanceof t&&!1===n(e))return!1;return!0}(this._elem,this._elemTypeLimit,this._composed,e):a(this._elem,this._elemTypeLimit,this._composed,this._order,e)},e.exports=i},5577:(e,t,r)=>{var n=r(7124),o=r(6452),i=r(5190),a=r(7523),s=r(8888),u=r(612),c=r(5738),l=r(2015),f=function(e){p(this,e||null)};f.prototype=Object.create(Object.prototype,{constructor:{value:f,writable:!0,configurable:!0},id:{get:function(){return this.__id},set:function(e){var t=String(e);if(this.__id!==t){if(this.__id=t,this.ownerShadowRoot){var r=this.ownerShadowRoot.__wxHost;if(r.__idCacheDirty=!0,this.__domElement&&r.__componentOptions.writeIdToDOM){var n=t;r.__idPrefix&&(n=r.__idPrefix+"--"+t),"dom"===c.documentBackend?this.__domElement.id=n:"custom"===c.documentBackend&&this.__domElement.setId(n)}}c.writeExtraInfoToAttr&&this.__domElement&&"dom"===c.documentBackend&&this.__domElement.setAttribute("exparser:info-attr-id",t),(this.__propObservers&&!this.__propObservers.empty||this.__subtreeObserversCount)&&i._callObservers(this,"__propObservers",{type:"properties",target:this,propertyName:"id"})}},configurable:!0},slot:{get:function(){return this.__slot},set:function(e){e=String(e),this.__slot!==e&&(this.__inheritSlots?n.hasGlobalWarningListeners()&&n.triggerWarning('slots-inherited nodes do not support "slot" attribute (in component "'+this.is+'").'):(this.__slot=e,b(this),(this.__propObservers&&!this.__propObservers.empty||this.__subtreeObserversCount)&&i._callObservers(this,"__propObservers",{type:"properties",target:this,propertyName:"slot"})))},configurable:!0},attributes:{get:function(){var e=[];if(!this.__attributes)return e;for(var t in this.__attributes)e.push({name:t,value:this.__attributes[t]});return e},set:function(){},configurable:!0},class:{get:function(){return this.classList.getClassNames()},set:function(e){this.classList&&this.classList.setClassNames(e),(this.__propObservers&&!this.__propObservers.empty||this.__subtreeObserversCount)&&i._callObservers(this,"__propObservers",{type:"properties",target:this,propertyName:"class"})},configurable:!0},style:{get:function(){return this.__domElement?this.__domElement.style:null},set:function(e){return A.call(this,e)},configurable:!0}}),o._setElementSystem(f),a._setElementSystem(f);var p=f.initialize=function(e,t,r,n){e.__id="",e.__slot="",e.__virtual=!1,e.__inheritSlots=!1,e.__attributes=null,e.__marks=null,e.__attached=!1,e.parentNode=null,e.childNodes=[],e.ownerShadowRoot=r,e.__wxSlotParent=null,e.__wxSlotChildren=e.childNodes,e.__subtreeObserversCount=0,e.classList=null,e.__styleSegments=[],e.__methodCaller=e,e.__relationHandler=null,e.__backendContext=n,e.__backendExtracted=l.backendExtractedDefault,e.__domElement=t,e.__autoDestroy=!0,e.$$=t,t&&(t.__wxElement=e)};f._clone=function(e,t,r,n){if(e.__id=t.__id,e.__slot=t.__slot,e.__virtual=t.__virtual,e.__inheritSlots=t.__inheritSlots,e.__marks=t.__marks?{}:null,t.__marks)for(var o in t.__marks)e.__marks[o]=t.__marks[o];for(var i in e.__attributes=Object.create(null),t.__attributes)e.__attributes[i]=t.__attributes[i];e.__attached=!1,e.parentNode=null,e.childNodes=[],e.ownerShadowRoot=n,e.__wxSlotParent=null,e.__wxSlotChildren=e.childNodes,e.__subtreeObserversCount=0,e.classList=null,e.__styleSegments=[],e.__methodCaller=e,e.__relationHandler=null,e.__backendContext=t.__backendContext,e.__backendExtracted=l.backendExtractedDefault,e.__domElement=r,e.$$=r,r&&(r.__wxElement=e)},f.prototype.setAutoDestroy=function(e){this.__autoDestroy=!!e},f.prototype.destroy=function(){"custom"===c.documentBackend&&this.__domElement&&(this.__domElement.release(),this.__domElement=null)};var h=function(e){if(!e.parentNode||e.parentNode.__attached){var t=function(e){if(e instanceof f){e.__attached=!0,e.__lifeTimeFuncs&&e.__lifeTimeFuncs.attached.call(e.__methodCaller,[],e),e.__relationHandler&&e.__relationHandler("attached"),e.__attachedObservers&&!e.__attachedObservers.empty&&i._callSingleObserver(e,"__attachedObservers",{type:"attachStatus",target:e,status:"attached"}),e.shadowRoot instanceof f&&t(e.shadowRoot);for(var r=e.childNodes,n=0;n<r.length;n++)t(r[n])}};t(e)}},d=function(e){if(e.__attached){var t=function(e){if(e instanceof f){for(var r=e.childNodes,n=0;n<r.length;n++)t(r[n]);e.shadowRoot instanceof f&&t(e.shadowRoot),e.__attached=!1,e.__autoDestroy&&e.destroy(),e.__lifeTimeFuncs&&e.__lifeTimeFuncs.detached.call(e.__methodCaller,[],e),e.__relationHandler&&e.__relationHandler("detached"),e.__attachedObservers&&!e.__attachedObservers.empty&&i._callSingleObserver(e,"__attachedObservers",{type:"attachStatus",target:e,status:"detached"})}else e.__autoDestroy&&e.destroy()};t(e)}},_=function(e,t,r){if(e.__childObservers&&!e.__childObservers.empty||e.__subtreeObserversCount){var n,o=[r];n="add"===t?{type:"childList",target:e,addedNodes:o}:"remove"===t?{type:"childList",target:e,removedNodes:o}:{type:"childList",target:e,addedNodes:o,removedNodes:o},i._callObservers(e,"__childObservers",n)}},y=function(e,t){if(e instanceof f&&(!t.__wxHost.__idCacheDirty||!t.__slotCacheDirty)){var r=function(e){e.__id&&(t.__wxHost.__idCacheDirty=!0),void 0!==e.__slotName&&(t.__slotCacheDirty=!0);for(var n=e.childNodes,o=0;o<n.length;o++){var i=n[o];i instanceof f&&r(i)}};r(e)}};f._updateIdMap=function(e){var t=e.shadowRoot;if(e.__idCacheDirty){e.__idCacheDirty=!1;var r=e.__idCache=Object.create(null),n=function(e){e.__id&&(r[e.__id]||(r[e.__id]=e));for(var t=e.childNodes,o=0;o<t.length;o++)t[o]instanceof f&&n(t[o])};n(t)}};var v=function(e){if(e.__hostAssociated&&e.__slotCacheDirty){e.__slotCacheDirty=!1;var t,r=e.__wxHost,o=Object.create(null);t=void 0!==r.__singleSlot?{"":r.__singleSlot}:r.__slots;var i=function(e){void 0!==e.__slotName&&(o[e.__slotName]?n.hasGlobalWarningListeners()&&n.triggerWarning('More than one slot named "'+e.__slotName+'" are found inside a single component instance (in component "'+r.is+'"). The first one was accepted.'):o[e.__slotName]=e);for(var t=e.childNodes,a=0;a<t.length;a++)t[a]instanceof f&&i(t[a])};i(e),void 0!==r.__singleSlot?r.__singleSlot!==o[""]&&(o[""]&&(o[""].__wxSlotChildren=r.childNodes),m(r,o,t,!0),r.__singleSlot&&(r.__singleSlot.__wxSlotChildren=[]),r.__singleSlot=o[""]||null):(m(r,o,t,!1),r.__slots=o)}},m=function(e,t,r,n){var o=e.childNodes,i=0;if(n){var a=t[""];if(a)for(;i<o.length;i++)w(a,o[i],null,!1,!1,!1,-1);else if(a=r[""])for(;i<o.length;i++)w(a,null,o[i],!0,!1,!1,i)}else{var s=function(e){for(var n=0;n<e.length;n++){var o=e[n],i=o.__slot||"",a=t[i],u=r[i];a!==u&&(a?w(a,o,null,!1,!0,!0):w(u,null,o,!0,!0,!0)),o.__inheritSlots&&s(o.childNodes)}};s(o)}},g=function(e,t,r,n){for(var o=function(e,t,n){var i=e.childNodes,a=0;for(t&&(a=i.indexOf(t)+(n?0:1));a<i.length;a++){var s=i[a];if(s.__slot===r)return s;if(s.__inheritSlots){var u=o(s,null,!1);if(u)return u}}return null};t!==e;t=t.parentNode){var i=o(t.parentNode,t,n);if(i)return i;n=!1}return null},b=function(e){for(var t=e.parentNode;t&&t.__inheritSlots;)t=t.parentNode;if(t&&void 0===t.__singleSlot){var r=e.__slot||"",n=t.__slots[r];if(n){var o=g(t,e,r,!1);w(n,e,o,!1,!0,!0)}else(n=e.__wxSlotParent)&&w(n,null,e,!0,!0,!0)}},w=function(e,t,r,n,o,i,a){if(n&&(r.__wxSlotParent=null),o&&(a=e.__wxSlotChildren.indexOf(r)),t){var s=t.__wxSlotParent;if(t.__wxSlotParent=e,s&&i){var u=s.__wxSlotChildren.indexOf(t);s.__wxSlotChildren.splice(u,1),s===e&&u<a&&a--}}var l=!1;(t&&t.__backendExtracted||r&&r.__backendExtracted)&&(l=!0),"dom"===c.documentBackend?l||function(e,t,r,n,o){var i=e;if(i instanceof f){for(;i.__virtual;){var a=i.__wxSlotParent;if(!a){i=null;break}if(t&&!r){var s=a.__wxSlotChildren.indexOf(i);r=a.__wxSlotChildren[s+1]}i=a}i instanceof f&&(i=i.__domElement)}if(i){var u=n,c=null,l=null;if(t)if(t.__virtual){var p=document.createDocumentFragment(),h=function(e){for(var t=0;t<e.__wxSlotChildren.length;t++){var r=e.__wxSlotChildren[t];r.__virtual?h(r):p.appendChild(r.__domElement)}};h(t),c=p}else c=t.__domElement;if(r)if(r.__virtual){var d=e,_=0;if(n){var y=function(e){for(var t=0;t<e.__wxSlotChildren.length;t++){var r=e.__wxSlotChildren[t];r.__virtual?y(r):i.removeChild(r.__domElement)}};y(r),u=!1,_=o+1}else d=r.__wxSlotParent,_=r===t?o:d.__wxSlotChildren.indexOf(r);if(t){var v=function(e,t){for(;t<e.__wxSlotChildren.length;t++){var r=e.__wxSlotChildren[t];if(!r.__virtual)return r;var n=v(r,0);if(n)return n}};r=null;for(var m=d;!(r=v(m,_))&&m.__virtual;m=m.__wxSlotParent)_=m.__wxSlotParent.__wxSlotChildren.indexOf(m)+1;r&&(l=r.__domElement)}}else l=r.__domElement;u?c?i.replaceChild(c,l):i.removeChild(l):c&&(l?i.insertBefore(c,l):i.appendChild(c))}else if(t&&t.__wxSlotParent){var g=function(e){if(e.__virtual)for(var t=0;t<e.__wxSlotChildren.length;t++)g(e.__wxSlotChildren[t]);else{var r=e.__domElement;r&&r.parentNode&&r.parentNode.removeChild(r)}};g(t)}}(e,t,r,n,a):"custom"===c.documentBackend&&e.__backendContext&&function(e,t,r,n,o){var i=e;if(i instanceof f){for(;i.__virtual;){var a=i.__wxSlotParent;if(!a){i=null;break}if(t&&!r){var s=a.__wxSlotChildren.indexOf(i);r=a.__wxSlotChildren[s+1]}i=a}i instanceof f&&(i=i.__domElement)}if(i)if(!t||r||t.__virtual){var u=e.__backendContext.createElement("fragment",""),c=0,l=-1;if(t){var p=function(e){if(e.__virtual)for(var t=0;t<e.__wxSlotChildren.length;t++){var r=e.__wxSlotChildren[t];p(r)}else u.appendChild(e.__domElement)};p(t)}if(r){var h=e,d=0,_=null;if(n){var y=function(e){if(e.__virtual){for(var t=0,r=0;r<e.__wxSlotChildren.length;r++)t+=y(e.__wxSlotChildren[r]);return t}return _||(_=e),1};c=y(r),d=o+1}else h=r.__wxSlotParent,d=r===t?o:h.__wxSlotChildren.indexOf(r);if(t&&!_)for(var v=function(e,t){for(;t<e.__wxSlotChildren.length;t++){var r=e.__wxSlotChildren[t];if(!r.__virtual)return r;var n=v(r,0);if(n)return n}return null},m=h;!(_=v(m,d))&&m.__virtual;m=m.__wxSlotParent)d=m.__wxSlotParent.__wxSlotChildren.indexOf(m)+1;_&&(l=i.findChildPosition(_.__domElement))}i.splice(l,c,u),u.release()}else i.appendChild(t.__domElement);else if(t&&t.__wxSlotParent){var g=t.__backendContext.createElement("fragment",""),b=function(e){if(e.__virtual)for(var t=0;t<e.__wxSlotChildren.length;t++)b(e.__wxSlotChildren[t]);else{var r=e.__domElement;g.appendChild(r)}};b(t),g.release()}}(e,t,r,n,a),c.writeExtraInfoToAttr&&"dom"===c.documentBackend&&(n&&r instanceof f&&r.__domElement&&r.__domElement.removeAttribute("exparser:info-in-slot-of"),t instanceof f&&t.__domElement&&(void 0!==e.__slotName&&e.ownerShadowRoot?t.__domElement.setAttribute("exparser:info-in-slot-of",e.ownerShadowRoot.__wxHost.__componentInstanceId):t.__domElement.removeAttribute("exparser:info-in-slot-of"))),o&&(-1===a&&(a=e.__wxSlotChildren.length),t?e.__wxSlotChildren.splice(a,n?1:0,t):e.__wxSlotChildren.splice(a,n?1:0))},x=function(e,t){for(var r=e.childNodes,n=0;n<r.length;n++){var o=r[n];t(e,o),o.__inheritSlots&&x(o,t)}},E=f.insertChildToElement=function(e,t,r,n){if(void 0!==e.__slotName)return!1;var o=r>=0?e.childNodes[r]:null;n&&t===o&&(n=!1);var a=null,s=e,u=e;if(t){a=t.parentNode,t.parentNode=e;var c=e.__subtreeObserversCount;if(a){var l=a.childNodes.indexOf(t);a.childNodes.splice(l,1),a===e&&l<r&&r--,c-=a.__subtreeObserversCount}c&&i._updateSubtreeCaches(t,c)}for(var p=e;p&&p.__inheritSlots;)p=p.parentNode;for(var m=!p||!p.__slots,b=!m||e.__inheritSlots,E=a;E&&E.__inheritSlots;)E=E.parentNode;var S=!E||!E.__slots,T=!S||a&&a.__inheritSlots;if(m)void 0!==e.__singleSlot&&(s=u=e.__singleSlot),s?w(s,t,o,n,b,T,r):t&&t.__wxSlotParent&&w(t.__wxSlotParent,null,t,!0,T,!1),t&&!S&&t.__inheritSlots&&x(t,(function(e,t){w(e,t,null,!1,!0,!0,-1)}));else{var O="";if(t&&(O=t.__slot||"",s=p.__slots[O]||null),o&&(u=p.__slots[o.__slot||""]||null),o&&u&&n&&w(u,null,o,n,!0,!1),t)if(s){var A=o?g(p,o,O,!n):g(p,e,O,!1);w(s,t,A,!1,!0,T)}else t.__wxSlotParent&&w(t.__wxSlotParent,null,t,!0,T,!1);o&&n&&o.__inheritSlots&&x(o,(function(e,t){w(e,t,null,!1,!0,!0,-1)})),t&&t.__inheritSlots&&x(t,(function(t,r){var i=r.__slot||"",a=p.__slots[i]||null;if(a){var s=o?g(p,o,i,!n):g(p,e,i,!1);w(a,r,s,!1,!0,!0)}else r.__wxSlotParent&&w(r.__wxSlotParent,null,r,!0,!0,!1)}))}return n&&(e.__subtreeObserversCount&&i._updateSubtreeCaches(o,-e.__subtreeObserversCount),o.parentNode=null),-1===r&&(r=e.childNodes.length),t?e.childNodes.splice(r,n?1:0,t):e.childNodes.splice(r,n?1:0),e.ownerShadowRoot&&(n&&y(o,e.ownerShadowRoot),t&&y(t,e.ownerShadowRoot),v(e.ownerShadowRoot)),n&&(d(o),_(e,"remove",o)),t&&(a?function(e){if(!e.__attached)return h(e);var t=function(e){if(e instanceof f){for(var r=e.childNodes,n=0;n<r.length;n++)t(r[n]);e.shadowRoot instanceof f&&t(e.shadowRoot),e.__lifeTimeFuncs&&e.__lifeTimeFuncs.moved.call(e.__methodCaller,[],e),e.__relationHandler&&e.__relationHandler("moved")}};t(e)}(t):h(t),a===e?_(e,"move",t):(a&&_(a,"remove",t),_(e,"add",t))),!0},S=function(e,t,r,n){if(t&&e.ownerShadowRoot!==t.ownerShadowRoot)throw new Error("Cannot move the node from one shadow tree to another shadow tree.");var o=n?r:t,i=-1;return r&&(i=e.childNodes.indexOf(r))<0?null:E(e,t,i,n)?o:null};f._attachShadowRoot=function(e){var t=e.__wxHost;t.__wxSlotChildren=[e],w(t,e,null,!1,!1,0),e.__hostAssociated=!0,v(e)},f.appendChild=function(e,t){return S(e,t,null,!1)},f.insertBefore=function(e,t,r){return S(e,t,r,!1)},f.removeChild=function(e,t){return S(e,null,t,!0)},f.replaceChild=function(e,t,r){return S(e,t,r,!0)},f.prototype.appendChild=function(e){return S(this,e,null,!1)},f.prototype.insertBefore=function(e,t){return S(this,e,t,!1)},f.prototype.removeChild=function(e){return S(this,null,e,!0)},f.prototype.replaceChild=function(e,t){return S(this,e,t,!0)};var T=function(e){var t=!0,r=!0;if(e instanceof f?(e.__backendExtracted=!0,e.$$=e.__domElement=null,r=!1):e instanceof s&&(e.__backendExtracted=!0,e.$$=e.__domElement=null,t=!1,r=!1),t&&e.__wxSlotChildren)for(var n=0;n<e.__wxSlotChildren.length;n++){var o=e.__wxSlotChildren[n];T(o)}else if(r&&e.childNodes)for(var i=0;i<e.childNodes.length;i++)T(e.childNodes[i])};f.extractBackend=function(e){if(e.__backendExtracted)return null;var t=e.__domElement;return T(e),t};var O=function(e,t,r){var n=e instanceof f&&e.__virtual,o=t?t.childNodes[r]:void 0,i=!0,a=!0,c=null;if(e instanceof f)e.__backendExtracted=!1,n||(c=function(e,t){if(!t){var r=u.toElement(e.__domElement);return e.$$=e.__domElement=r,r}if(e.__domElement.tagName.toUpperCase()===t.tagName)e.$$=e.__domElement=t;else{var n=u.toElement(e.__domElement);e.$$=e.__domElement=n,t.parentNode.replaceChild(n,t)}return null}(e,o)),a=!1;else if(e instanceof s)e.__backendExtracted=!1,c=function(e,t){if(!t){var r=document.createTextNode(e.textContent);return e.$$=e.__domElement=r,r}if(void 0!==t.textContent)t.textContent=e.textContent,e.$$=e.__domElement=t;else{var n=document.createTextNode(e.textContent);e.$$=e.__domElement=n,t.parentNode.replaceChild(n,t)}return null}(e,o),i=!1,a=!1;else{var l=document.createDocumentFragment();if(l.__wxSlotChildren=e.__wxSlotChildren,o&&o.childNodes)for(;o.childNodes.length;)l.appendChild(o.childNodes[0]);c=function(e,t){if(!t)return e;for(;e.childNodes&&t.childNodes&&t.childNodes.length;)e.appendChild(t.childNodes[0]);return t.parentNode.replaceChild(e,t),null}(e,o),e=l}c?(t.appendChild(c),o=c):o=t?t.childNodes[r]:void 0;var p=0;if(i&&e.__wxSlotChildren)for(var h=0;h<e.__wxSlotChildren.length;h++){var d=e.__wxSlotChildren[h];if(n)r=O(d,t,r);else if(d.asShadowRoot){for(var _=0;_<d.asShadowRoot.childNodes.length;_++)p=O(d.asShadowRoot.childNodes[_],o,p);e.shadowRoot=o,o.__wxHost=e,e.__wxSlotChildren[0]=o,o.__wxSlotParent=e,e.__singleSlot===d&&(e.__singleSlot=o)}else p=O(d,o,p)}else if(a&&e.childNodes)for(var y=0;y<e.childNodes.length;y++)p=O(e.childNodes[y],o,p);if(n)return r;for(;o.childNodes.length>p;)o.removeChild(o.childNodes[p]);return r+1};f.injectBackend=function(e,t){if(e.__backendExtracted){var r=document.createDocumentFragment();r.appendChild(t),O(e,r,0)}},f.prototype.triggerEvent=function(e,t,r){o.triggerEvent(this,e,t,r)},f.prototype.dispatchEvent=function(e){o.dispatchEvent(this,e)},f.prototype.addListener=function(e,t,r){o.addListenerToElement(this,e,t,r)},f.prototype.removeListener=function(e,t,r){o.removeListenerFromElement(this,e,t,r)},f.setMethodCaller=function(e,t){e.__methodCaller=t},f.getMethodCaller=function(e){return e.__methodCaller},f.prototype.getAttribute=function(e){if(!this.__attributes)return null;var t=this.__attributes[e];return void 0===t?null:t},f.prototype.setAttribute=function(e,t){this.__attributes||(this.__attributes=Object.create(null)),t=String(t),this.__attributes[e]!==t&&(this.__attributes[e]=t,this.__domElement&&this.__domElement.setAttribute&&this.__domElement.setAttribute(e,t))},f.prototype.setStyle=function(e){this.__domElement&&"custom"===c.documentBackend&&this.__domElement.setStyle(e)},f.prototype.removeAttribute=function(e){this.__attributes&&(delete this.__attributes[e],this.__domElement&&this.__domElement.removeAttribute&&this.__domElement.removeAttribute(e))},f.prototype.getBoundingClientRect=function(){return this.__domElement?this.__domElement.getBoundingClientRect():{left:0,top:0,width:0,height:0}},f.prototype.setMark=function(e,t){this.__marks||(this.__marks={}),this.__marks[e]=t},f.prototype.collectMarks=function(){for(var e={},t=this;t;t=t.parentNode)if(t.__marks)for(var r in t.__marks)hasOwnProperty.call(e,r)||(e[r]=t.__marks[r]);return e};var A=f.prototype.setNodeStyle=function(e,t){if(this.__styleSegments[t||0]!==e){this.__styleSegments[t||0]=e;var r=this.__styleSegments.join(";");if(this.__domElement&&this.ownerShadowRoot&&this.ownerShadowRoot.__childrenPropsFilter){var n=this.ownerShadowRoot.__childrenPropsFilter.style;if("function"==typeof n)return void("dom"===c.documentBackend?this.__domElement.setAttribute("style",n.call(this,r)):"custom"===c.documentBackend&&this.__domElement.setStyle(n.call(this,r)))}this.__domElement&&("dom"===c.documentBackend?this.__domElement.setAttribute("style",r):"custom"===c.documentBackend&&this.__domElement.setStyle(r)),(this.__propObservers&&!this.__propObservers.empty||this.__subtreeObserversCount)&&i._callObservers(this,"__propObservers",{type:"properties",target:this,propertyName:"style"})}};f.replaceDocumentElement=function(e,t,r){e.__attached||("dom"===c.documentBackend?t.parentNode.replaceChild(e.__domElement,t):"custom"===c.documentBackend&&t.replaceChild(e.__domElement,r),h(e))},f.pretendAttached=function(e){e.__attached||h(e)},f.pretendDetached=function(e){e.__attached&&d(e)},f.isAttached=function(e){return e.__attached},f.setSlotName=function(e,t){if(t=null==t?"":String(t),void 0===e.__slotName){if(0!==e.childNodes.length||0!==e.__wxSlotChildren.length)return;e.__wxSlotChildren=[]}e.__slotName=t,e.ownerShadowRoot&&(e.ownerShadowRoot.__slotCacheDirty=!0,v(e.ownerShadowRoot))},f.setInheritSlots=function(e){e.__singleSlot||e.__slots||e.__wxSlotChildren.length||(e.__wxSlotChildren=[],e.__inheritSlots=!0)},f.getInheritSlots=function(e){return e.__inheritSlots};var C=function(e,t){var r=e.match(/^(#[_a-zA-Z][-_a-zA-Z0-9:]*|)((?:\.-?[_a-zA-Z][-_a-zA-Z0-9]*)+|)$/);if(!r)return null;var n=r[1].slice(1),o=r[2].split(".");return o.shift(),n||o.length?{id:n,classes:o,relation:t||""}:null},M=f.parseSelector=function(e){for(var t=String(e||"").split(","),r=[],n=!1,o=0;o<t.length;o++){for(var i=t[o].split(/( |\t|>+)/g),a=[],s="",u=0;u<i.length;u++){var c=i[u];if(c&&" "!==c&&"\t"!==c)if(">"!==c[0]){var l=C(c,s);if(s="",!l)break;a.push(l)}else{if(""!==s)break;s=c,">>>"===c&&(n=!0)}}u===i.length&&a.length&&r.push(a)}return r.length?{crossShadow:n,union:r}:null},P=function(e,t,r,n,o){if(t===e)return!1;var i=r[n],a=!0;i.id&&i.id!==t.__id&&(a=!1);for(var s=i.classes,u=0;a&&u<s.length;u++)t.classList.contains(s[u])||(a=!1);if(!a&&">"===o)return!1;var c=t;if(a&&0===n){if(null===e)return!0;for(c=c.parentNode;c;c=c.parentNode)if(c===e)return!0;if(">>>"!==o)return!1;c=t,a=!1}var l=a?i.relation:o;do{c.parentNode?c=c.parentNode:">>>"===l?c=c.__wxHost:">>>"===o?(a=!1,c=c.__wxHost):c=null,c===e&&(c=null)}while(c&&!f.isSelectable(c));if(!c)return!1;if(a){if(P(e,c,r,n-1,l))return!0;if(">>>"!==o)return!1}return P(e,c,r,n,o)},R=function(e,t,r){if(!f.isSelectable(r))return!1;for(var n=e.union,o=0;o<n.length;o++){var i=n[o];if(P(t,r,i,i.length-1,">"))return!0}return!1},D=function(e,t,r,n,o){if(R(t,r,n)&&(e.push(n),o))return!0;if(n.shadowRoot&&t.crossShadow&&(n.ownerShadowRoot?n.ownerShadowRoot.__wxHost.__componentOptions.domain:c.domain)===n.__componentOptions.domain&&D(e,t,r,n.shadowRoot,o)&&o)return!0;for(var i=n.childNodes,a=0;a<i.length;a++)if(i[a]instanceof f&&D(e,t,r,i[a],o)&&o)return!0;return!1};f.prototype.querySelector=function(e){var t="object"==typeof e?e:M(e);if(!t)return null;var r=[];return D(r,t,this,this,!0),r[0]||null},f.prototype.querySelectorAll=function(e){var t="object"==typeof e?e:M(e),r=[];return t?(D(r,t,this,this,!1),r):[]},f.matchSelector=function(e,t){var r="object"==typeof e?e:M(e);return!!r&&R(r,null,t)},f.prototype.matchSelector=function(e,t){var r="object"==typeof e?e:M(e);return!!r&&R(r,this,t)},f.isSelectable=function(e){return!!e.classList},f.prototype.getBackendContext=function(){return this.__backendContext?this.__backendContext:c.customContext},f.prototype.getBackendContext=function(){return this.__backendContext?this.__backendContext:c.customContext},e.exports=f},6452:(e,t,r)=>{var n=r(7124),o=(Object.prototype.hasOwnProperty,function(){});o.prototype=Object.create(Object.prototype,{constructor:{value:o,writable:!0,configurable:!0}});var i=null;o._setElementSystem=function(e){i=e,o._setElementSystem=null};var a=null;o._setComponent=function(e){a=e,o._setComponent=null};var s=Date.now();o.setInitTimeStamp=function(e){return s=void 0===e?Date.now():e},o.getInitTimeStamp=function(e){return s},o.create=function(e,t,r){var n=(r=r||{}).originalEvent,i=r.extraFields||{},a=Date.now()-s,u=new o;for(var c in u.currentTarget=null,u.type=e,u.timeStamp=a,u.mark=null,u.detail=t,u.bubbles=!!r.bubbles,u.composed=!!r.composed,u.__originalEvent=n,u.__hasCapture=!!r.capturePhase,u.__stopped=!1,u.__dispatched=!1,i)u[c]=i[c];return u},o.prototype.preventDefault=function(){this.__originalEvent&&!this.__originalEvent.__stopPreventDefault&&this.__originalEvent.preventDefault()},o.prototype.stopPropagation=function(){this.__stopped=!0},o.prototype.isStopped=function(){return!!this.__stopped},o.prototype.markMutated=function(){this.__mutatedMarked=!0},o.prototype.mutatedMarked=function(){return!!this.__mutatedMarked};var u=function(e,t,r,n){for(var o=e,a=e instanceof i?e.collectMarks():{},s=[],u=[],c=e;c;){if(o!==c&&(s.push(e),e=c,u.push(a),a=e instanceof i?e.collectMarks():{}),o=c.parentNode,!1===n(c,e,a))return;if(c.__wxHost){if(r)break;e=s.pop()||c.__wxHost,a=u.pop()||(e instanceof i?e.collectMarks():{}),o=c=c.__wxHost}else{var l=!0;c instanceof i&&(l=!1),c=l||r?c.parentNode:c.__wxSlotParent}}};o.dispatchEvent=function(e,t){if(!t.__dispatched){t.__dispatched=!0,e.__wxElement&&e.__wxHost!==e.__wxElement&&(e=e.__wxElement).shadowRoot instanceof i&&(e=e.shadowRoot),t.target=e instanceof i?e.__methodCaller:e;var r=function(e,r,n){if(!(r&&r.length&&t.mutatedMarked())){var o=t.currentTarget=n instanceof i?n.__methodCaller:n,s=e.call(o,[t],n instanceof a?n:void 0);r&&r.length&&t.markMutated(),!1===s&&(t.__originalEvent&&!t.__originalEvent.__stopPreventDefault&&t.__originalEvent.preventDefault(),t.__stopped=!0)}},n=t.type,o=!t.composed;if(t.__hasCapture){var s=[];u(e,0,o,(function(e,t,r){return e.__wxCaptureEvents&&e.__wxCaptureEvents[n]&&s.push([e,t,r]),!0}));for(var c=s.length-1;c>=0;c--){var l=s[c],f=l[0],p=l[1];t.target=p instanceof i?p.__methodCaller:p,t.mark=l[2];var h=f.__wxCaptureMutated&&f.__wxCaptureMutated[n];if(r(f.__wxCaptureEvents[n],h,f),t.__stopped)break}}if(t.target=e instanceof i?e.__methodCaller:e,!t.__stopped){var d=!t.bubbles;u(e,0,o,(function(e,o,a){t.target=o instanceof i?o.__methodCaller:o,t.mark=a;var s=e.__wxMutated&&e.__wxMutated[n];return e.__wxEvents&&e.__wxEvents[n]&&r(e.__wxEvents[n],s,e),!d&&!t.__stopped}))}}},o.triggerEvent=function(e,t,r,n){var i=o.create(t,r,n);o.dispatchEvent(e,i)},o.addListenerToElement=function(e,t,r,o){var i=o&&o.mutated;if(i){var s=r;r=function(e){if(!e.mutatedMarked()){var t=Array.prototype.slice.call(arguments);return s.apply(this,t)}}}var u=void 0;return o&&(o.useCapture||o.capture)?(e.__wxCaptureEvents||(e.__wxCaptureEvents=Object.create(null)),e.__wxCaptureEvents[t]||(e.__wxCaptureEvents[t]=n.create("Event Listener")),u=e.__wxCaptureEvents[t].add(r),i&&(e.__wxCaptureMutated||(e.__wxCaptureMutated=Object.create(null)),e.__wxCaptureMutated[t]||(e.__wxCaptureMutated[t]=[]),e.__wxCaptureMutated[t].push(u))):(e.__wxEvents||(e.__wxEvents=Object.create(null)),e.__wxEvents[t]||(e.__wxEvents[t]=n.create("Event Listener")),u=e.__wxEvents[t].add(r),i&&(e.__wxMutated||(e.__wxMutated=Object.create(null)),e.__wxMutated[t]||(e.__wxMutated[t]=[]),e.__wxMutated[t].push(u))),e instanceof a&&e.__componentOptions.listenerChangeLifeTimes&&e.triggerLifeTime("listenerChanged",[!0,t,r,o]),u},o.removeListenerFromElement=function(e,t,r,n){var o,i=null;n&&(n.useCapture||n.capture)?(e.__wxCaptureEvents&&e.__wxCaptureEvents[t]&&(i=e.__wxCaptureEvents[t].remove(r)),e.__wxCaptureMutated&&e.__wxCaptureMutated[t]&&-1!==(o=e.__wxCaptureMutated[t].indexOf(r))&&e.__wxCaptureMutated[t].splice(o,1)):(e.__wxEvents&&e.__wxEvents[t]&&(i=e.__wxEvents[t].remove(r)),e.__wxMutated&&e.__wxMutated[t]&&-1!==(o=e.__wxMutated[t].indexOf(r))&&e.__wxMutated[t].splice(o,1)),i&&e instanceof a&&e.__componentOptions.listenerChangeLifeTimes&&e.triggerLifeTime("listenerChanged",[!1,t,i,n])},e.exports=o},8643:e=>{e.exports=function(e){var t={};function r(n){if(t[n])return t[n].exports;var o=t[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}return r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)r.d(n,o,function(t){return e[t]}.bind(null,o));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=0)}([function(e,t,r){"use strict";function n(e,t,r){return v.llparser_create(e,t,r)}function o(e){v.llparser_destroy(e)}function i(e,t){return v.llparser_create_descriptor(e,t)}function a(e){v.llparser_descriptor_set_all(e)}function s(e){v.llparser_descriptor_set_nil(e)}function u(e,t){v.llparser_descriptor_add_char(e,t)}function c(e,t,r){v.llparser_descriptor_add_range(e,t,r)}function l(e){v.llparser_descriptor_revert(e)}function f(e,t,r,n,o,i,a,s,u,c,l,f){return v.llparser_add_rule(e,t,r,n,o,i,a,s,u,c,l,f)}function p(e){v.llparser_prepare(e)}function h(e,t){return v.llparser_parse(e,t)}function d(e){return v.llparser_get_input_buffer(e)}function _(e){return v.llparser_get_result(e)}function y(){v.wasm_main()}r.r(t),r.d(t,"llparser_create",(function(){return n})),r.d(t,"llparser_destroy",(function(){return o})),r.d(t,"llparser_create_descriptor",(function(){return i})),r.d(t,"llparser_descriptor_set_all",(function(){return a})),r.d(t,"llparser_descriptor_set_nil",(function(){return s})),r.d(t,"llparser_descriptor_add_char",(function(){return u})),r.d(t,"llparser_descriptor_add_range",(function(){return c})),r.d(t,"llparser_descriptor_revert",(function(){return l})),r.d(t,"llparser_add_rule",(function(){return f})),r.d(t,"llparser_prepare",(function(){return p})),r.d(t,"llparser_parse",(function(){return h})),r.d(t,"llparser_get_input_buffer",(function(){return d})),r.d(t,"llparser_get_result",(function(){return _})),r.d(t,"wasm_main",(function(){return y})),r.d(t,"memory",(function(){return m}));var v=r(1),m=v.memory;v.__wbindgen_start()},function(e,t,r){"use strict";r.r(t),r.d(t,"memory",(function(){return i})),r.d(t,"rust_calloc",(function(){return a})),r.d(t,"rust_free",(function(){return s})),r.d(t,"llparser_create",(function(){return u})),r.d(t,"llparser_destroy",(function(){return c})),r.d(t,"llparser_create_descriptor",(function(){return l})),r.d(t,"llparser_descriptor_set_all",(function(){return f})),r.d(t,"llparser_descriptor_set_nil",(function(){return p})),r.d(t,"llparser_descriptor_add_char",(function(){return h})),r.d(t,"llparser_descriptor_add_range",(function(){return d})),r.d(t,"llparser_descriptor_revert",(function(){return _})),r.d(t,"llparser_add_rule",(function(){return y})),r.d(t,"llparser_prepare",(function(){return v})),r.d(t,"llparser_parse",(function(){return m})),r.d(t,"llparser_get_input_buffer",(function(){return g})),r.d(t,"llparser_get_result",(function(){return b})),r.d(t,"wasm_main",(function(){return w})),r.d(t,"__wbindgen_start",(function(){return x}));var n=new ArrayBuffer(1114112),o=function(e,t,r){var n=new e.Int8Array(r),o=(new e.Int16Array(r),new e.Int32Array(r)),i=new e.Uint8Array(r),a=new e.Uint16Array(r),s=new e.Uint32Array(r),u=(new e.Float32Array(r),new e.Float64Array(r),e.Math.imul),c=(e.Math.fround,e.Math.abs,e.Math.clz32),l=(e.Math.min,e.Math.max,e.Math.floor,e.Math.ceil,e.Math.sqrt,e.NaN,e.Infinity,1048576);function f(e){var t=0,r=0,n=0,i=0,a=0,s=0,u=0;r=(t=e+-8|0)+(e=-8&(i=o[e+-4>>2]))|0;e:{t:{r:{n:{o:if(!(1&i)){if(!(3&i))break n;if(e=(i=o[t>>2])+e|0,(0|(t=t-i|0))==o[262246]){if(3!=(3&o[r+4>>2]))break o;return o[262244]=e,o[r+4>>2]=-2&o[r+4>>2],o[t+4>>2]=1|e,void(o[e+t>>2]=e)}i>>>0>=256?y(t):(0|(n=o[t+8>>2]))==(0|(a=o[t+12>>2]))?(s=1048576,u=o[262144]&b(i>>>3),o[s>>2]=u):(o[n+12>>2]=a,o[a+8>>2]=n)}if(2&(i=o[r+4>>2]))o[r+4>>2]=-2&i,o[t+4>>2]=1|e,o[e+t>>2]=e;else{o:{if(o[262247]!=(0|r)){if((0|r)!=o[262246])break o;return o[262246]=t,e=o[262244]+e|0,o[262244]=e,o[t+4>>2]=1|e,void(o[e+t>>2]=e)}if(o[262247]=t,e=o[262245]+e|0,o[262245]=e,o[t+4>>2]=1|e,(0|t)==o[262246]&&(o[262244]=0,o[262246]=0),(r=o[262254])>>>0>=e>>>0)break n;if(!(e=o[262247]))break n;i:if(!((i=o[262245])>>>0<41))for(t=1049e3;;){if((n=o[t>>2])+o[t+4>>2]>>>0>e>>>0&&n>>>0<=e>>>0)break i;if(!(t=o[t+8>>2]))break}if(n=4095,e=o[262252]){for(t=0;t=t+1|0,e=o[e+8>>2];);n=t>>>0>4095?t:4095}if(o[262256]=n,i>>>0<=r>>>0)break n;return void(o[262254]=-1)}if(e=(n=-8&i)+e|0,n>>>0>=256?y(r):(0|(n=o[r+12>>2]))==(0|(r=o[r+8>>2]))?(s=1048576,u=o[262144]&b(i>>>3),o[s>>2]=u):(o[r+12>>2]=n,o[n+8>>2]=r),o[t+4>>2]=1|e,o[e+t>>2]=e,o[262246]==(0|t)){o[262244]=e;break n}}if(e>>>0<256)break r;if(_(t,e),e=o[262256]+-1|0,o[262256]=e,!e){if(e=o[262252])break t;e=4095;break e}}return}return e=1048584+((r=e>>>3)<<3)|0,i=o[262144],r=1<<(31&r),n=o[e+8>>2],i&r||(o[262144]=r|i,n=e),r=n,o[e+8>>2]=t,o[r+12>>2]=t,o[t+12>>2]=e,void(o[t+8>>2]=r)}for(t=0;t=t+1|0,e=o[e+8>>2];);e=t>>>0>4095?t:4095}o[262256]=e}function p(e,t,r,n,i,a,s,c,f,p,h,d){var _;return l=_=l+-64|0,o[_+60>>2]=e,o[_+56>>2]=t,o[_+52>>2]=r,o[_+48>>2]=n,o[_+44>>2]=i,o[_+40>>2]=a,o[_+36>>2]=s,o[_+32>>2]=c,o[_+28>>2]=f,o[_+24>>2]=p,o[_+20>>2]=h,o[_+16>>2]=d,t=o[o[_+60>>2]+28>>2],r=o[_+60>>2],e=o[r>>2],o[r>>2]=e+1,o[_+12>>2]=t+u(e,44),o[o[_+12>>2]>>2]=o[_+52>>2],o[o[_+12>>2]+4>>2]=o[_+48>>2],o[_+48>>2]>0&&(o[o[_+12>>2]+8>>2]=o[_+44>>2]),o[_+48>>2]>1&&(o[o[_+12>>2]+12>>2]=o[_+40>>2]),o[_+48>>2]>2&&(o[o[_+12>>2]+16>>2]=o[_+36>>2]),o[_+48>>2]>3&&(o[o[_+12>>2]+20>>2]=o[_+32>>2]),o[_+48>>2]>4&&(o[o[_+12>>2]+24>>2]=o[_+28>>2]),o[_+48>>2]>5&&(o[o[_+12>>2]+28>>2]=o[_+24>>2]),o[_+48>>2]>6&&(o[o[_+12>>2]+32>>2]=o[_+20>>2]),o[_+48>>2]>7&&(o[o[_+12>>2]+36>>2]=o[_+16>>2]),o[o[_+12>>2]+40>>2]=o[_+56>>2],o[_+48>>2]>0&&function(e,t,r){var n;o[28+(n=l-32|0)>>2]=e,o[n+24>>2]=t,o[n+20>>2]=r,o[n+16>>2]=(o[n+20>>2]-o[o[n+28>>2]+24>>2]|0)/140,1==o[o[n+20>>2]+4>>2]&&(t=o[o[n+28>>2]+40>>2],r=o[n+28>>2],e=o[r+8>>2],o[r+8>>2]=e+1,o[n+12>>2]=t+(e<<3),o[o[n+12>>2]>>2]=o[n+24>>2],o[o[n+12>>2]+4>>2]=o[o[n+20>>2]+136>>2],o[o[n+20>>2]+136>>2]=o[n+12>>2])}(o[_+60>>2],o[_+12>>2],o[_+52>>2]),l=_- -64|0,o[_+12>>2]}function h(e,t,r,n,a){var u;if(l=u=l-48|0,o[u+44>>2]=e,o[u+40>>2]=t,o[u+36>>2]=r,o[u+32>>2]=n,o[u+28>>2]=a,o[o[u+40>>2]>>2]!=o[u+36>>2])for(o[o[u+40>>2]>>2]=o[u+36>>2],o[u+24>>2]=o[o[u+40>>2]+136>>2],o[u+20>>2]=1&(0!=o[u+28>>2]^-1^-1);o[u+24>>2];){for(o[u+20>>2]||(o[u+28>>2]=o[u+24>>2]),o[u+16>>2]=o[o[o[u+24>>2]>>2]+8>>2],1==o[o[u+16>>2]+4>>2]&&h(o[u+44>>2],o[u+16>>2],o[u+36>>2],o[u+32>>2],o[u+28>>2]),o[u+12>>2]=0;!(o[u+12>>2]>=128);)i[o[u+12>>2]+(o[u+16>>2]+8|0)|0]&&(s[o[u+28>>2]>>2]>=s[o[u+32>>2]+(o[u+12>>2]<<2)>>2]&&o[o[u+32>>2]+(o[u+12>>2]<<2)>>2]||(o[o[u+32>>2]+(o[u+12>>2]<<2)>>2]=o[o[u+28>>2]>>2])),o[u+12>>2]=o[u+12>>2]+1;o[u+24>>2]=o[o[u+24>>2]+4>>2]}l=u+48|0}function d(e,t,r,n){var a;for(o[44+(a=l-48|0)>>2]=e,o[a+40>>2]=t,o[a+36>>2]=r,o[a+32>>2]=n,o[a+28>>2]=o[o[a+40>>2]+136>>2];o[a+28>>2];){if(o[a+24>>2]=o[o[o[a+28>>2]>>2]+8>>2],o[a+24>>2]==o[a+40>>2])for(o[a+20>>2]=o[o[o[a+28>>2]>>2]+12>>2],o[a+16>>2]=0;!(o[a+16>>2]>=128);){e:{if(1!=o[o[a+20>>2]+4>>2]){if(!i[o[a+16>>2]+(o[a+20>>2]+8|0)|0])break e}else if(o[a+12>>2]=o[o[a+44>>2]+32>>2]+((o[a+20>>2]-o[o[a+44>>2]+24>>2]|0)/140<<9),!o[o[a+12>>2]+(o[a+16>>2]<<2)>>2])break e;s[o[a+28>>2]>>2]>=s[o[a+32>>2]+(o[a+16>>2]<<2)>>2]&&o[o[a+32>>2]+(o[a+16>>2]<<2)>>2]||(o[o[a+32>>2]+(o[a+16>>2]<<2)>>2]=o[o[a+28>>2]>>2])}o[a+16>>2]=o[a+16>>2]+1}o[a+28>>2]=o[o[a+28>>2]+4>>2]}}function _(e,t){var r=0,n=0,i=0,a=0;o[e+16>>2]=0,o[e+20>>2]=0,i=e,r=0,(n=t>>>8)&&(r=31,t>>>0>16777215||(r=62+((t>>>(6-(n=c(n))&31)&1)-(n<<1)|0)|0)),o[i+28>>2]=r,i=1048848+(r<<2)|0;e:{t:{r:{n:{if((a=o[262145])&(n=1<<(31&r))){if(n=o[i>>2],(-8&o[n+4>>2])!=(0|t))break n;r=n;break r}o[262145]=n|a,o[i>>2]=e,o[e+24>>2]=i;break e}for(i=t<<(31==(0|r)?0:25-(r>>>1)&31);;){if(!(r=o[(a=16+((i>>>29&4)+n|0)|0)>>2]))break t;if(i<<=1,n=r,(-8&o[r+4>>2])==(0|t))break}}return t=o[r+8>>2],o[t+12>>2]=e,o[r+8>>2]=e,o[e+24>>2]=0,o[e+12>>2]=r,void(o[e+8>>2]=t)}o[a>>2]=e,o[e+24>>2]=n}o[e+12>>2]=e,o[e+8>>2]=e}function y(e){var t,r=0,n=0,i=0,a=0,s=0,u=0;t=o[e+24>>2];e:{t:{if((0|e)==(0|(r=o[e+12>>2]))){if(i=o[(r=e+20|0)>>2],n=o[(i?20:16)+e>>2])break t;r=0;break e}n=o[e+8>>2],o[n+12>>2]=r,o[r+8>>2]=n;break e}for(i=i?r:e+16|0;a=i,(n=o[(i=(r=n)+20|0)>>2])||(i=r+16|0,n=o[r+16>>2]),n;);o[a>>2]=0}e:if(t){n=1048848+(o[e+28>>2]<<2)|0;t:{if((0|e)==o[n>>2]){if(o[n>>2]=r,r)break t;return s=1048580,u=o[262145]&b(o[e+28>>2]),void(o[s>>2]=u)}if(o[(o[t+16>>2]==(0|e)?16:20)+t>>2]=r,!r)break e}o[r+24>>2]=t,(n=o[e+16>>2])&&(o[r+16>>2]=n,o[n+24>>2]=r),(e=o[e+20>>2])&&(o[r+20>>2]=e,o[e+24>>2]=r)}}function v(e,t){return 0|function(e){var t;return!(t=function(e){var t=0,r=0,n=0,i=0,a=0,u=0,l=0,f=0,p=0,h=0,d=0;e:{t:{r:{if(e>>>0>=245){if(e>>>0>=4294901709)break t;if(i=-8&(e=e+11|0),!(f=o[262145]))break r;r=0-i|0,l=0,(e>>>=8)&&(l=31,i>>>0>16777215||(l=62+((i>>>(6-(e=c(e))&31)&1)-(e<<1)|0)|0));n:{o:{if(e=o[1048848+(l<<2)>>2]){for(a=i<<(31==(0|l)?0:25-(l>>>1)&31);;){if(!((u=-8&o[e+4>>2])>>>0<i>>>0||(u=u-i|0)>>>0>=r>>>0||(n=e,r=u))){r=0;break o}if(u=o[e+20>>2],e=o[16+((a>>>29&4)+e|0)>>2],t=u&&(0|u)!=(0|e)?u:t,a<<=1,!e)break}if(t){e=t;break o}if(n)break n}if(n=0,!(e=(0-(e=2<<(31&l))|e)&f))break r;if(!(e=o[1048848+(g(e&0-e)<<2)>>2]))break r}for(;n=(u=(a=(t=-8&o[e+4>>2])-i|0)>>>0<r>>>0&t>>>0>=i>>>0)?e:n,r=u?a:r,e=(t=o[e+16>>2])||o[e+20>>2];);if(!n)break r}if(r>>>0>=(e=o[262244])-i>>>0&&e>>>0>=i>>>0)break r;y(n);n:if(r>>>0>=16){if(o[n+4>>2]=3|i,o[4+(t=n+i|0)>>2]=1|r,o[t+r>>2]=r,r>>>0>=256){_(t,r);break n}e=1048584+((r>>>=3)<<3)|0,a=o[262144],r=1<<(31&r),l=o[e+8>>2],a&r||(o[262144]=r|a,l=e),r=l,o[e+8>>2]=t,o[r+12>>2]=t,o[t+12>>2]=e,o[t+8>>2]=r}else e=r+i|0,o[n+4>>2]=3|e,o[4+(e=e+n|0)>>2]=1|o[e+4>>2];return n+8|0}n:{o:{if(!(3&(e=(t=o[262144])>>>(n=31&(r=(i=e>>>0<11?16:e+11&-8)>>>3))))){if(i>>>0<=s[262244])break r;if(e)break o;if(!(e=o[262145]))break r;for(t=o[1048848+(g(e&0-e)<<2)>>2],r=(-8&o[t+4>>2])-i|0,a=t;;){if(!(e=o[t+16>>2])&&!(e=o[t+20>>2]))break n;r=(t=(n=(-8&o[e+4>>2])-i|0)>>>0<r>>>0)?n:r,a=t?e:a,t=e}}r=(e=o[1048592+(u=(n=r+(1&(-1^e))|0)<<3)>>2])+8|0,(0|(a=o[e+8>>2]))==(0|(u=u+1048584|0))?(h=1048576,d=b(n)&t,o[h>>2]=d):(o[a+12>>2]=u,o[u+8>>2]=a),t=n<<3,o[e+4>>2]=3|t,o[4+(e=e+t|0)>>2]=1|o[e+4>>2];break t}return n=g(0-(e=(r=e<<n)&(0-(e=2<<n)|e))&e),e=o[1048592+(a=n<<3)>>2],(0|(r=o[e+8>>2]))==(0|(a=a+1048584|0))?(h=1048576,d=b(n)&t,o[h>>2]=d):(o[r+12>>2]=a,o[a+8>>2]=r),a=e+8|0,o[e+4>>2]=3|i,r=(t=n<<3)-i|0,o[4+(u=e+i|0)>>2]=1|r,o[e+t>>2]=r,(e=o[262244])&&(e=1048584+((n=e>>>3)<<3)|0,t=o[262246],i=o[262144],n=1<<(31&n),l=o[e+8>>2],i&n||(o[262144]=n|i,l=e),n=l,o[e+8>>2]=t,o[n+12>>2]=t,o[t+12>>2]=e,o[t+8>>2]=n),o[262246]=u,o[262244]=r,a}return y(a),r>>>0>=16?(o[a+4>>2]=3|i,o[4+(u=i+a|0)>>2]=1|r,o[r+u>>2]=r,(e=o[262244])&&(e=1048584+((n=e>>>3)<<3)|0,t=o[262246],i=o[262144],n=1<<(31&n),l=o[e+8>>2],i&n||(o[262144]=n|i,l=e),n=l,o[e+8>>2]=t,o[n+12>>2]=t,o[t+12>>2]=e,o[t+8>>2]=n),o[262246]=u,o[262244]=r):(e=r+i|0,o[a+4>>2]=3|e,o[4+(e=e+a|0)>>2]=1|o[e+4>>2]),a+8|0}r:{n:{o:{i:{if((t=o[262244])>>>0<i>>>0){if((e=o[262245])>>>0>i>>>0)break e;if(r=0,-1==(0|(t=w((e=i+65583|0)>>>16))))break t;if(!(n=t<<16))break t;if(e=(a=-65536&e)+o[262248]|0,o[262248]=e,t=o[262249],o[262249]=t>>>0>e>>>0?t:e,!(r=o[262247]))break i;for(e=1049e3;;){if((0|n)==((t=o[e>>2])+(u=o[e+4>>2])|0))break o;if(!(e=o[e+8>>2]))break}break n}return e=o[262246],(n=t-i|0)>>>0<=15?(o[262246]=0,o[262244]=0,o[e+4>>2]=3|t,i=4+(t=e+t|0)|0,r=1|o[t+4>>2]):(o[262244]=n,r=e+i|0,o[262246]=r,o[r+4>>2]=1|n,o[e+t>>2]=n,r=3|i,i=e+4|0),o[i>>2]=r,e+8|0}for((e=o[262255])>>>0<=n>>>0&&e||(o[262255]=n),e=0,o[262256]=4095,o[262251]=a,o[262250]=n,o[262253]=0;t=e+1048584|0,o[e+1048592>>2]=t,o[e+1048596>>2]=t,256!=(0|(e=e+8|0)););o[262247]=n,e=a+-40|0,o[262245]=e,o[n+4>>2]=1|e,o[4+(e+n|0)>>2]=40,o[262254]=2097152;break r}if(!(o[e+12>>2]|n>>>0<=r>>>0|t>>>0>r>>>0)){o[e+4>>2]=a+u,t=(e=o[262247])+15&-8,o[262247]=t+-8,r=8+((n=a+o[262245]|0)+(e-t|0)|0)|0,o[262245]=r,o[t+-4>>2]=1|r,o[4+(e+n|0)>>2]=40,o[262254]=2097152;break r}}e=o[262255],o[262255]=e>>>0<n>>>0?e:n,t=n+a|0,e=1049e3;n:{for(;;){if((0|t)!=o[e>>2]){if(e=o[e+8>>2])continue;break n}break}if(!o[e+12>>2]){o[e>>2]=n,o[e+4>>2]=a+o[e+4>>2],o[n+4>>2]=3|i,a=n+i|0,i=(t-n|0)-i|0;o:{i:{if((0|t)!=o[262247]){if(o[262246]==(0|t))break i;if(1==(3&(e=o[t+4>>2]))&&((r=-8&e)>>>0>=256?y(t):(0|(u=o[t+12>>2]))==(0|(l=o[t+8>>2]))?(h=1048576,d=o[262144]&b(e>>>3),o[h>>2]=d):(o[l+12>>2]=u,o[u+8>>2]=l),i=r+i|0,t=t+r|0),o[t+4>>2]=-2&o[t+4>>2],o[a+4>>2]=1|i,o[i+a>>2]=i,i>>>0>=256){_(a,i);break o}e=1048584+((t=i>>>3)<<3)|0,r=o[262144],t=1<<(31&t),l=o[e+8>>2],r&t||(o[262144]=t|r,l=e),r=l,o[e+8>>2]=a,o[r+12>>2]=a,o[a+12>>2]=e,o[a+8>>2]=r;break o}o[262247]=a,e=o[262245]+i|0,o[262245]=e,o[a+4>>2]=1|e;break o}o[262246]=a,e=o[262244]+i|0,o[262244]=e,o[a+4>>2]=1|e,o[e+a>>2]=e}return n+8|0}}for(e=1049e3;!((t=o[e>>2])>>>0<=r>>>0&&(u=t+o[e+4>>2]|0)>>>0>r>>>0);)e=o[e+8>>2];for(o[262247]=n,e=a+-40|0,o[262245]=e,o[n+4>>2]=1|e,o[4+(e+n|0)>>2]=40,o[262254]=2097152,o[(t=(e=(u+-32&-8)-8|0)>>>0<r+16>>>0?r:e)+4>>2]=27,e=o[262250],l=o[262251],p=o[262253],o[(f=t+16|0)>>2]=o[262252],o[f+4>>2]=p,o[t+8>>2]=e,o[t+12>>2]=l,o[262251]=a,o[262250]=n,o[262252]=t+8,o[262253]=0,e=t+28|0;o[e>>2]=7,u>>>0>(e=e+4|0)>>>0;);(0|t)!=(0|r)&&(o[t+4>>2]=-2&o[t+4>>2],e=t-r|0,o[r+4>>2]=1|e,o[t>>2]=e,e>>>0>=256?_(r,e):(e=1048584+((t=e>>>3)<<3)|0,n=o[262144],t=1<<(31&t),l=o[e+8>>2],n&t||(o[262144]=t|n,l=e),t=l,o[e+8>>2]=r,o[t+12>>2]=r,o[r+12>>2]=e,o[r+8>>2]=t))}if(r=0,!((e=o[262245])>>>0<=i>>>0))break e}return r}return t=e-i|0,o[262245]=t,n=(e=o[262247])+i|0,o[262247]=n,o[n+4>>2]=1|t,o[e+4>>2]=3|i,e+8|0}(e))|!(3&i[t+-4|0])||function(e,t){if(t)for(;n[0|e]=0,e=e+1|0,t=t+-1|0;);}(t,e),t}(u(e|=0,t|=0))}function m(){}function g(e){return e?31-c(e+-1^e)|0:32}function b(e){var t;return(-1>>>(t=31&e)&-2)<<t|(-1<<(e=0-e&31)&-2)>>>e}function w(t){t|=0;var c=0|r.byteLength/65536,l=c+t|0;if(c<l&&l<65536){var f=new ArrayBuffer(u(l,65536)),p=new e.Int8Array(f);p.set(n),n=p,n=new e.Int8Array(f),new e.Int16Array(f),o=new e.Int32Array(f),i=new e.Uint8Array(f),a=new e.Uint16Array(f),s=new e.Uint32Array(f),new e.Float32Array(f),new e.Float64Array(f),r=f}return c}return{memory:Object.create(Object.prototype,{grow:{value:w},buffer:{get:function(){return r}}}),rust_calloc:v,rust_free:function(e){f(e|=0)},llparser_create:function(e,t,r){return 0|function(e,t,r){var n,i,a;return l=n=l-32|0,o[n+28>>2]=e,o[n+24>>2]=t,o[n+20>>2]=r,e=n,t=o[n+28>>2]?o[n+28>>2]:256,o[e+28>>2]=t,e=n,t=o[n+24>>2]?o[n+24>>2]:256,o[e+24>>2]=t,e=n,t=o[n+20>>2]?o[n+20>>2]:256,o[e+20>>2]=t,i=n,a=v(((((((u(o[n+24>>2],140)+52|0)+u(o[n+20>>2],44)|0)+(o[n+24>>2]<<9)|0)+(o[n+24>>2]<<9)|0)+u(o[n+20>>2],o[n+24>>2]<<3)|0)+(o[n+28>>2]<<1)|0)+(o[n+28>>2]<<3)|0,1),o[i+16>>2]=a,o[o[n+16>>2]+12>>2]=o[n+28>>2],o[o[n+16>>2]+16>>2]=o[n+24>>2],o[o[n+16>>2]+20>>2]=o[n+20>>2],o[o[n+16>>2]+4>>2]=0,o[o[n+16>>2]>>2]=0,o[o[n+16>>2]+8>>2]=0,o[n+12>>2]=o[n+16>>2]+52,o[o[n+16>>2]+24>>2]=o[n+12>>2],o[n+12>>2]=o[n+12>>2]+u(o[n+24>>2],140),o[o[n+16>>2]+28>>2]=o[n+12>>2],o[n+12>>2]=o[n+12>>2]+u(o[n+20>>2],44),o[o[n+16>>2]+32>>2]=o[n+12>>2],o[n+12>>2]=o[n+12>>2]+(o[n+24>>2]<<9),o[o[n+16>>2]+36>>2]=o[n+12>>2],o[n+12>>2]=o[n+12>>2]+(o[n+24>>2]<<9),o[o[n+16>>2]+40>>2]=o[n+12>>2],o[n+12>>2]=o[n+12>>2]+u(o[n+20>>2],o[n+24>>2]<<3),o[o[n+16>>2]+44>>2]=o[n+12>>2],o[n+12>>2]=o[n+12>>2]+(o[n+28>>2]<<1),o[o[n+16>>2]+48>>2]=o[n+12>>2],l=n+32|0,o[n+16>>2]}(e|=0,t|=0,r|=0)},llparser_destroy:function(e){!function(e){var t;l=t=l-16|0,o[t+12>>2]=e,f(o[t+12>>2]),l=t+16|0}(e|=0)},llparser_create_descriptor:function(e,t){return 0|function(e,t){var r,n;return o[12+(r=l-16|0)>>2]=e,o[r+8>>2]=t,t=o[o[r+12>>2]+24>>2],n=o[r+12>>2],e=o[n+4>>2],o[n+4>>2]=e+1,o[r+4>>2]=t+u(e,140),o[o[r+4>>2]+4>>2]=o[r+8>>2]?1:0,o[r+4>>2]}(e|=0,t|=0)},llparser_descriptor_set_all:function(e){var t;e|=0,o[12+(t=l-16|0)>>2]=e,o[o[t+12>>2]+4>>2]=-1,n[o[t+12>>2]+135|0]=1},llparser_descriptor_set_nil:function(e){var t;e|=0,o[12+(t=l-16|0)>>2]=e,o[o[t+12>>2]+4>>2]=-2,n[o[t+12>>2]+8|0]=1},llparser_descriptor_add_char:function(e,t){!function(e,t){var r;o[12+(r=l-16|0)>>2]=e,o[r+8>>2]=t,n[o[r+8>>2]+(o[r+12>>2]+8|0)|0]=1}(e|=0,t|=0)},llparser_descriptor_add_range:function(e,t,r){!function(e,t,r){var i;for(o[12+(i=l-16|0)>>2]=e,o[i+8>>2]=t,o[i+4>>2]=r,o[i>>2]=o[i+8>>2];!(o[i>>2]>o[i+4>>2]);)n[o[i>>2]+(o[i+12>>2]+8|0)|0]=1,o[i>>2]=o[i>>2]+1}(e|=0,t|=0,r|=0)},llparser_descriptor_revert:function(e){!function(e){var t;for(o[12+(t=l-16|0)>>2]=e,o[t+8>>2]=1;!(o[t+8>>2]>=127);)n[o[t+8>>2]+(o[t+12>>2]+8|0)|0]=1&(0!=i[o[t+8>>2]+(o[t+12>>2]+8|0)|0]^-1),o[t+8>>2]=o[t+8>>2]+1}(e|=0)},llparser_add_rule:function(e,t,r,n,o,i,a,s,u,c,l,f){return 0|p(e|=0,t|=0,r|=0,n|=0,o|=0,i|=0,a|=0,s|=0,u|=0,c|=0,l|=0,f|=0)},llparser_prepare:function(e){!function(e){var t;for(l=t=l-32|0,o[t+28>>2]=e,o[t+24>>2]=0;!(o[t+24>>2]>=o[o[t+28>>2]+4>>2]);)o[t+20>>2]=o[o[t+28>>2]+24>>2]+u(o[t+24>>2],140),1==o[o[t+20>>2]+4>>2]&&h(o[t+28>>2],o[t+20>>2],o[t+20>>2],o[o[t+28>>2]+32>>2]+(o[t+24>>2]<<9)|0,0),o[t+24>>2]=o[t+24>>2]+1;for(o[t+16>>2]=0;!(o[t+16>>2]>=o[o[t+28>>2]+4>>2]);)o[t+12>>2]=o[o[t+28>>2]+24>>2]+u(o[t+16>>2],140),1==o[o[t+12>>2]+4>>2]&&(o[o[t+12>>2]>>2]=0,d(o[t+28>>2],o[t+12>>2],o[t+12>>2],o[o[t+28>>2]+36>>2]+(o[t+16>>2]<<9)|0)),o[t+16>>2]=o[t+16>>2]+1;l=t+32|0}(e|=0)},llparser_parse:function(e,t){return 0|function(e,t){var r,n,u;return l=r=l-32|0,o[r+24>>2]=e,o[r+20>>2]=t,o[r+16>>2]=0,o[r+12>>2]=0,n=r,u=function e(t,r,n,u,c,f,p){var h,d=0,_=0;l=h=l-96|0,o[h+88>>2]=t,o[h+84>>2]=r,o[h+80>>2]=n,o[h+76>>2]=u,o[h+72>>2]=c,o[h+68>>2]=f,o[h+64>>2]=p,o[h+60>>2]=a[o[h+80>>2]+(o[o[h+76>>2]>>2]<<1)>>1],s[h+60>>2]>=128&&(o[h+60>>2]=1);e:if(o[o[h+72>>2]>>2]>(o[h+64>>2]-4|0))o[h+92>>2]=-1;else if(1==o[o[h+84>>2]+4>>2])if(o[h+56>>2]=o[o[h+76>>2]>>2],o[h+52>>2]=o[o[h+72>>2]>>2],o[h+48>>2]=0,o[h+44>>2]=0,o[h+40>>2]=o[o[h+88>>2]+32>>2]+((o[h+84>>2]-o[o[h+88>>2]+24>>2]|0)/140<<9),o[h+36>>2]=0,!o[o[h+40>>2]+(o[h+60>>2]<<2)>>2]|s[h+60>>2]<=0|s[h+60>>2]>=127?!o[h+60>>2]|!o[o[h+40>>2]+508>>2]?o[o[h+40>>2]>>2]&&(o[h+36>>2]=o[o[h+40>>2]>>2]):o[h+36>>2]=o[o[h+40>>2]+508>>2]:o[h+36>>2]=o[o[h+40>>2]+(o[h+60>>2]<<2)>>2],o[h+36>>2]){for(o[h+68>>2]||o[o[h+36>>2]+40>>2]||(o[h+48>>2]=o[o[h+72>>2]>>2],t=o[h+72>>2],o[t>>2]=o[t>>2]+2),o[h+32>>2]=0;o[h+32>>2]<o[o[h+36>>2]+4>>2];){if(o[h+28>>2]=o[h+68>>2],o[h+68>>2]||!o[o[h+36>>2]+40>>2]|o[o[h+36>>2]+40>>2]==(o[h+32>>2]+65536|0)||(o[h+28>>2]=1),d=h,_=e(o[h+88>>2],o[(o[h+36>>2]+8|0)+(o[h+32>>2]<<2)>>2],o[h+80>>2],o[h+76>>2],o[h+72>>2],o[h+28>>2],o[h+64>>2]),o[d+24>>2]=_,o[h+24>>2]<0){o[h+92>>2]=-1;break e}o[h+68>>2]|o[o[h+36>>2]+40>>2]!=(o[h+32>>2]+65536|0)||(o[h+44>>2]=o[h+24>>2]),o[h+32>>2]=o[h+32>>2]+1}for(o[h+68>>2]||(o[o[h+36>>2]+40>>2]?1==o[o[h+36>>2]+40>>2]&&(r=o[h+56>>2],n=o[o[h+88>>2]+48>>2],u=o[h+72>>2],t=o[u>>2],o[u>>2]=t+1,o[n+(t<<2)>>2]=r,o[h+44>>2]=o[o[h+72>>2]>>2],r=o[o[h+76>>2]>>2],n=o[o[h+88>>2]+48>>2],u=o[h+72>>2],t=o[u>>2],o[u>>2]=t+1,o[n+(t<<2)>>2]=r):(o[o[o[h+88>>2]+48>>2]+(o[h+48>>2]<<2)>>2]=0-o[h+36>>2],o[o[o[h+88>>2]+48>>2]+(o[h+48>>2]+1<<2)>>2]=o[o[h+36>>2]+4>>2],o[h+44>>2]=o[h+48>>2]+1));;){if(o[o[h+72>>2]>>2]>(o[h+64>>2]-4|0)){o[h+92>>2]=-1;break e}if(o[h+20>>2]=o[o[h+88>>2]+36>>2]+((o[h+84>>2]-o[o[h+88>>2]+24>>2]|0)/140<<9),o[h+16>>2]=0,o[h+60>>2]=a[o[h+80>>2]+(o[o[h+76>>2]>>2]<<1)>>1],s[h+60>>2]>=128&&(o[h+60>>2]=1),!o[o[h+20>>2]+(o[h+60>>2]<<2)>>2]|s[h+60>>2]<=0|s[h+60>>2]>=127?!o[h+60>>2]|!o[o[h+20>>2]+508>>2]||(o[h+16>>2]=o[o[h+20>>2]+508>>2]):o[h+16>>2]=o[o[h+20>>2]+(o[h+60>>2]<<2)>>2],!o[h+16>>2])break;for(o[h+68>>2]||(o[o[h+16>>2]+40>>2]?65536!=o[o[h+16>>2]+40>>2]&&(o[o[h+72>>2]>>2]=o[h+52>>2]):(o[o[o[h+88>>2]+48>>2]+(o[h+44>>2]<<2)>>2]=(0-o[o[o[h+88>>2]+48>>2]+(o[h+44>>2]<<2)>>2]|0)-1,o[h+48>>2]=o[o[h+72>>2]>>2],t=o[h+72>>2],o[t>>2]=o[t>>2]+2)),o[h+12>>2]=1;o[h+12>>2]<o[o[h+16>>2]+4>>2];){if(o[h+8>>2]=o[h+68>>2],o[h+68>>2]||!o[o[h+16>>2]+40>>2]|o[o[h+16>>2]+40>>2]==(o[h+12>>2]+65536|0)||(o[h+8>>2]=1),d=h,_=e(o[h+88>>2],o[(o[h+16>>2]+8|0)+(o[h+12>>2]<<2)>>2],o[h+80>>2],o[h+76>>2],o[h+72>>2],o[h+8>>2],o[h+64>>2]),o[d+4>>2]=_,o[h+4>>2]<0){o[h+92>>2]=-1;break e}o[h+68>>2]|o[o[h+16>>2]+40>>2]!=(o[h+12>>2]+65536|0)||(o[h+44>>2]=o[h+4>>2]),o[h+12>>2]=o[h+12>>2]+1}o[h+68>>2]||(o[o[h+16>>2]+40>>2]?1==o[o[h+16>>2]+40>>2]&&(r=o[h+56>>2],n=o[o[h+88>>2]+48>>2],u=o[h+72>>2],t=o[u>>2],o[u>>2]=t+1,o[n+(t<<2)>>2]=r,o[h+44>>2]=o[o[h+72>>2]>>2],r=o[o[h+76>>2]>>2],n=o[o[h+88>>2]+48>>2],u=o[h+72>>2],t=o[u>>2],o[u>>2]=t+1,o[n+(t<<2)>>2]=r):(o[o[o[h+88>>2]+48>>2]+(o[h+48>>2]<<2)>>2]=0-o[h+16>>2],o[o[o[h+88>>2]+48>>2]+(o[h+48>>2]+1<<2)>>2]=o[o[h+16>>2]+4>>2],o[h+44>>2]=o[h+48>>2]+1))}o[h+92>>2]=o[h+44>>2]}else o[h+92>>2]=-1;else{if(o[h+60>>2]&&(-1==o[o[h+84>>2]+4>>2]&&(t=o[h+76>>2],o[t>>2]=o[t>>2]+1),!o[o[h+84>>2]+4>>2])){if(!i[o[h+60>>2]+(o[h+84>>2]+8|0)|0]){o[h+92>>2]=-1;break e}t=o[h+76>>2],o[t>>2]=o[t>>2]+1}o[h+68>>2]||(r=o[o[h+76>>2]>>2],n=o[o[h+84>>2]+4>>2],u=o[o[h+88>>2]+48>>2],c=o[h+72>>2],t=o[c>>2],o[c>>2]=t+1,o[u+(t<<2)>>2]=r-(-2==(0|n)?0:1),r=o[o[h+76>>2]>>2],n=o[o[h+88>>2]+48>>2],u=o[h+72>>2],t=o[u>>2],o[u>>2]=t+1,o[n+(t<<2)>>2]=r),o[h+92>>2]=o[o[h+72>>2]>>2]-1}return l=h+96|0,o[h+92>>2]}(o[r+24>>2],o[r+20>>2],o[o[r+24>>2]+44>>2],r+12|0,r+16|0,0,o[o[r+24>>2]+12>>2]<<1),o[n+8>>2]=u,e=o[o[r+24>>2]+48>>2],t=o[r+16>>2],o[r+16>>2]=t+1,o[e+(t<<2)>>2]=-1,e=o[o[r+24>>2]+48>>2],t=o[r+16>>2],o[r+16>>2]=t+1,o[e+(t<<2)>>2]=0,a[o[o[r+24>>2]+44>>2]+(o[r+12>>2]<<1)>>1]|o[r+8>>2]<0?o[r+28>>2]=o[r+12>>2]+1:o[r+28>>2]=0,l=r+32|0,o[r+28>>2]}(e|=0,t|=0)},llparser_get_input_buffer:function(e){var t;return e|=0,o[12+(t=l-16|0)>>2]=e,o[o[t+12>>2]+44>>2]},llparser_get_result:function(e){var t;return e|=0,o[12+(t=l-16|0)>>2]=e,o[o[t+12>>2]+48>>2]},wasm_main:m,__wbindgen_start:m}}({Math,Int8Array,Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array,NaN:NaN,Infinity:1/0},0,n),i=o.memory,a=o.rust_calloc,s=o.rust_free,u=o.llparser_create,c=o.llparser_destroy,l=o.llparser_create_descriptor,f=o.llparser_descriptor_set_all,p=o.llparser_descriptor_set_nil,h=o.llparser_descriptor_add_char,d=o.llparser_descriptor_add_range,_=o.llparser_descriptor_revert,y=o.llparser_add_rule,v=o.llparser_prepare,m=o.llparser_parse,g=o.llparser_get_input_buffer,b=o.llparser_get_result,w=o.wasm_main,x=o.__wbindgen_start}])},612:e=>{var t=function(e){this.tagName=e,this.id="",this.attrs={}};t.toElement=function(e){var t=document.createElement(e.tagName);for(var r in e.id&&(t.id=e.id),e.attrs)t.setAttribute(r,e.attrs[r]);return t},t.fromElement=function(e){var r=new t(e.tagName);r.id=e.id;for(var n=e.attributes,o=0;o<n.length;o++)r.attrs[n[o].name]=n[o].value;return r},t.prototype.cloneNode=function(){var e=new t;for(var r in e.id=this.id,this.attrs)e.attrs[r]=this.attrs[r];return e},t.prototype.removeAttribute=function(e,t){delete this.attrs[e]},t.prototype.setAttribute=function(e,t){this.attrs[e]=t},t.prototype.getAttribute=function(e){return this.attrs[e]},e.exports=t},5943:(e,t)=>{t.qq={TAG_START:1,TAG_END:-1,TEXT:3,COMMENT:8},t.QL={MEMBER:"m",CALL:"f",METHODS:"e",CALLER:"c",TOP_SCOPE:"t",SUB_SCOPE:"s"};var r=t.uN={n:"\n",r:"\r",b:"\b",f:"\f",t:"\t",v:"\v",'"':'"',"'":"'","\\":"\\","\r":"\r","\n":"\n"},n=t.DX={},o="";for(var i in r)n[r[i]]=i,o+=r[i];t.YX=new RegExp("["+o+"]","g")},4290:(e,t,r)=>{e.exports={if:r(7207),elif:r(7207),else:r(7207),for:r(5015),key:r(332),"for-index":r(5795),"for-item":r(9952),alias:r(51)}},51:(e,t,r)=>{var n=r(3607),o=r(5943).QL,i=r(6324),a=o.TOP_SCOPE+","+o.SUB_SCOPE+","+o.CALLER;e.exports={requireBlock:!0,precompile:function(e,t,r){var n=t.match(/^\{\{\s*([$_a-zA-Z][$_a-zA-Z0-9]*)\s*=(.+)\}\}$/);if(!n)throw new Error("Illegal expression is found in wx:alias.");var o=n[1],s=i.parse(n[2]),u=i.lvalueStringify(s,r),c=i.searchBindingPaths([s],r);return{s:[o],d:"function("+a+"){return "+i.stringify(s,r)+"}",l:u,b:c}},register:function(e,t,r){},create:function(e,t,r,o,i,a,s,u,c,l){var f=t.s[0],p=n.create(f,a,s,t.d,t.l,t.b),h={},d="";for(d in s)h[d]=s[d];h[f]=p;var _={};for(d in i)_[d]=i[d];_[f]=t.d(o,i,null);var y=c.createVirtualNode("wx:alias");return r.id&&(y.id=r.id),l(r.c,c,y,o,_,a,h,u),y}}},5795:e=>{e.exports={attachedToBlock:"for",precompile:function(e,t,r,n){var o=t.match(/^\s*([$_a-zA-Z][$_a-zA-Z0-9]*)\s*$/);if(!o)throw new Error("Illegal variable name is found in wx:for-index.");return{s:[o[1]],d:'"'+o[1]+'"'}},register:function(e,t,r){r._wxForIndex=t.d},create:function(){}}},9952:e=>{e.exports={attachedToBlock:"for",precompile:function(e,t,r){var n=t.match(/^\s*([$_a-zA-Z][$_a-zA-Z0-9]*)\s*$/);if(!n)throw new Error("Illegal variable name is found in wx:for-item.");return{s:[n[1]],d:'"'+n[1]+'"'}},register:function(e,t,r){r._wxForItem=t.d},create:function(){}}},5015:(e,t,r)=>{r(1541);var n=r(3607),o=r(5943).QL,i=r(6324),a=o.TOP_SCOPE+","+o.SUB_SCOPE+","+o.CALLER;e.exports={requireBlock:!0,addDefaultAttrs:[{n:"wx:for-index",v:"index"},{n:"wx:for-item",v:"item"}],precompile:function(e,t,r){var n=t.match(/^\{\{(.+)\}\}$/);if(!n)throw new Error("Illegal expression is found in wx:for.");var o=i.parse(n[1]),s=i.lvalueStringify(o,r),u=i.searchBindingPaths([o],r);return{s:[],d:"function("+a+"){return "+i.stringify(o,r)+"}",l:s,b:u}},register:function(e,t,r){},create:function(e,t,r,o,i,a,s,u,c,l){var f=r._wxForIndex||"index",p=r._wxForItem||"item",h=r._wxKey,d=c.createVirtualNode("wx:for:list");r.id&&(d.id=r.id),n.create("",a,s,(function(e,r,n){var o=t.d(e,r,null);return g(o,e,r,n),o}),t.l,t.b);var _=function(e,t,o,i,h){var _=c.createVirtualNode("wx:for:item"),y=n.proxyTopScope(a),v=n.proxySubScopes(s);_.__wxTopScope=y,_.__wxSubScopes=v,_.__wxForToRemove=!1,_.__wxForKeyStr="";var m=n.create(f,y,v,null,null,[]),g=n.create(p,y,v,null,[o],[]);return v[f]=m,v[p]=g,t[f]=o,t[p]=i,l(r.c,c,_,e,t,y,v,u),void 0===h?d.appendChild(_):d.insertBefore(_,h),_},y=function(e,t,r,i,a,s){var u=e.__wxSubScopes[p];n.updateLvaluePath(u,[i]),a&&(s?d.insertBefore(e,s):d.appendChild(e));var c=e.__wxSubScopes[f];r[f]=i,n.updateBinding(c,[],o,r,t)},v=function(e,t,r,o,i,a){o[p]=i,n.updateBinding(e.__wxSubScopes[p],t,r,o,a)},m=function(e){for(var t in n.removeBindingsForScope(e.__wxTopScope),d.__wxSubScopes)n.removeBindingsForScope(e.__wxSubScopes[t]);d.removeChild(e)},g=function(e,t,r,n){var o="",i=e;"object"==typeof e&&null!==e||(i=[]);var a={};for(o in r)a[o]=r[o];var s=0;if(h){var u=[],c=e instanceof Array,l=[];if(!c){var f=i;for(o in i=[],f)i.push(f[o]),l.push(o)}for(s=0;s<i.length;s++)u.push(String(i[s][h]));if(0===i.length)for(;d.childNodes.length;)m(d.childNodes[0]);else{var p=Object.create(null),g=Object.create(null),b=d.childNodes,w=null,x="";for(s=0;s<b.length;s++)p[x=(w=b[s]).__wxForKeyStr]>=0?(m(w),s--):(p[x]=s,g[x]=w,w.__wxForToRemove=!0);var E=-1,S=0,T=1,O=[];for((S=p[i[0][h]])>=0||(S=-1),b[S]&&(b[S].__wxForToRemove=!1),s=1;s<i.length;s++)(T=p[i[s][h]])>=0&&(E<S&&(S<T||E>T)&&(O.push(b[S]),E=S),b[S=T]&&(b[S].__wxForToRemove=!1));for(E<S&&O.push(b[S]),s=0;s<b.length;s++)(w=b[s]).__wxForToRemove&&(m(w),s--);var A=O.shift(),C=0;for(s=0;s<i.length;s++){var M=i[s],P=g[M[h]];if(g[M[h]]=null,P){var R=!0;if(P===A){for(;b[C]!==A;)C++;C++,A=O.shift(),R=!1}y(w=P,n,a,c?s:l[s],R,b[C]),R&&b[C]===w&&C++,v(w,[],t,a,i[s],n)}else w=_(t,a,c?s:l[s],i[s],b[C]),C++,w.__wxForKeyStr=String(M[h])}}}else{for(;d.childNodes.length;)m(d.childNodes[0]);if(e instanceof Array)for(s=0;s<i.length;s++)_(t,a,s,i[s]);else for(o in i)_(t,a,o,i[o])}};return g(t.d(o,i,null),o,i,null),d}}},7207:(e,t,r)=>{var n=r(3607),o=r(5943).QL,i=r(6324),a=o.TOP_SCOPE+","+o.SUB_SCOPE+","+o.CALLER;e.exports={requireBlock:!0,precompile:function(e,t,r){if("else"===e)return{s:[],d:"true"};var n=t.match(/^\{\{(.+)\}\}$/);if(!n)throw new Error("Illegal expression is found in wx:"+e+".");var o=i.parse(n[1]),s=i.searchBindingPaths([o],r);return{s:[],d:"function("+a+"){return "+i.stringify(o,r)+"}",b:s}},register:function(e,t,r){},create:function(e,t,r,o,i,a,s,u,c,l,f){var p=c.createVirtualNode("wx:"+e);p.__wxIfCondValue=!0,p.__wxIfNextNode=null,p.__wxIfHasTrueCond=!0;var h=null;"if"!==e&&("wx:if"!==(h=f.childNodes[f.childNodes.length-1]).is&&"wx:elif"!==h.is?h=null:h.__wxIfNextNode=p),r.id&&(p.id=r.id);var d=p.__wxIfUpdateNode=function(){var e=p.__wxIfCondValue;if(h&&h.__wxIfHasTrueCond&&(e=!1),e&&!p.childNodes.length){var t=n.proxyTopScope(a),f=n.proxySubScopes(s);p.__wxTopScope=t,p.__wxSubScopes=f,l(r.c,c,p,o,i,t,f,u)}else if(!e&&p.childNodes.length){for(var d in n.removeBindingsForScope(p.__wxTopScope),p.__wxSubScopes)n.removeBindingsForScope(p.__wxSubScopes[d]);for(;p.childNodes.length;)p.removeChild(p.childNodes[0])}p.__wxIfNextNode&&p.__wxIfNextNode.__wxIfUpdateNode()},_=function(e){p.__wxIfCondValue=!!e,p.__wxIfHasTrueCond=p.__wxIfCondValue||h&&h.__wxIfHasTrueCond,d()};return"else"===e?_(!0):(n.addBindings(a,s,t.b,p,{e:t.d,o:function(e,t,r){_(r)}}),_(t.d(o,i,null))),p}}},332:e=>{e.exports={attachedToBlock:!0,precompile:function(e,t,r){var n=t.match(/^\s*([$_a-zA-Z][$_a-zA-Z0-9]*)\s*$/);if(!n)throw new Error("Illegal variable name is found in wx:for-key.");return{s:[],d:'"'+n[1]+'"'}},register:function(e,t,r){r._wxKey=t.d},create:function(){}}},6324:(e,t,r)=>{var n=r(1617),o=r(5943).QL,i=r(5943).uN,a=r(5943).DX,s=r(5943).YX,u=null,c=" \n\r\t\f",l=["true","false","null","undefined"];t.parse=function(e){return u||(u=n.create({VARIABLE:[{id:"_concat",states:["a-zA-Z_$","VARIABLE_AFTER"]}],VARIABLE_AFTER:[{id:"_concat",states:["a-zA-Z_$0-9","VARIABLE_AFTER"]},{id:"_null",states:["NULL"]}],STRING:[{id:"str^",states:["'","STRING_INNER_1","'"]},{id:"str^",states:['"',"STRING_INNER_2",'"']}],STRING_INNER_1:[{id:"_concat",states:["STRING_INNER_1","STRING_INNER_1_CHAR"]},{id:"_jump",states:["STRING_INNER_1_CHAR"]},{id:"_jump",states:["NULL"]}],STRING_INNER_1_CHAR:[{id:"_jump",states:["^'\\"]},{id:"str\\",states:["\\","nrbftv'\"\\\r\n"]}],STRING_INNER_2:[{id:"_concat",states:["STRING_INNER_2","STRING_INNER_2_CHAR"]},{id:"_jump",states:["STRING_INNER_2_CHAR"]},{id:"_jump",states:["NULL"]}],STRING_INNER_2_CHAR:[{id:"_jump",states:['^"\\']},{id:"str\\",states:["\\","nrbftv'\"\\\r\n"]}],NUMBER:[{id:"_concat",states:["NUMBER_BEFORE_E","NUMBER_E"]}],NUMBER_E:[{id:"_concat",states:["e","NUMBER_AFTER_E"]},{id:"_null",states:["NULL"]}],NUMBER_AFTER_E:[{id:"_concat",states:["-","NUMBER_AFTER_E-INT"]},{id:"_jump",states:["NUMBER_AFTER_E-INT"]}],"NUMBER_AFTER_E-INT":[{id:"_concat",states:["NUMBER_AFTER_E-INT","0-9"]},{id:"_jump",states:["0-9"]}],NUMBER_BEFORE_E:[{id:"_concat",states:[".","NUMBER_AFTER_DOT"]},{id:"_concat",states:["0","NUMBER_AFTER_ZERO"]},{id:"_concat",states:["1-9","NUMBER_AFTER_NON_ZERO"]}],NUMBER_AFTER_ZERO:[{id:"_concat",states:["x","NUMBER_BASE_16"]},{id:"_jump",states:["NUMBER_AFTER_NON_ZERO"]},{id:"_null",states:["NULL"],overwrite:!0}],NUMBER_BASE_16:[{id:"_concat",states:["0-9a-fA-F","NUMBER_BASE_16-AFTER"]}],"NUMBER_BASE_16-AFTER":[{id:"_concat",states:["0-9a-fA-F","NUMBER_BASE_16-AFTER"]},{id:"_null",states:["NULL"],overwrite:!0}],NUMBER_AFTER_NON_ZERO:[{id:"_concat",states:[".","NUMBER_AFTER_DOT"]},{id:"_concat",states:["0-9","NUMBER_AFTER_NON_ZERO"]},{id:"_null",states:["NULL"],overwrite:!0}],NUMBER_AFTER_DOT:[{id:"_concat",states:["NUMBER_AFTER_DOT","0-9"]},{id:"_jump",states:["0-9"]}],VALUE:[{id:"_blank",states:[c,"VALUE"],overwrite:!0},{id:"_jump",states:["VALUE_NOSPACE"]}],VALUE_NOSPACE:[{id:"_jump",states:["VALUE_NOSPACE",c]},{id:"var",states:["VARIABLE"]},{id:"str",states:["STRING"]},{id:"num",states:["NUMBER"]},{id:"()",states:["(","COMMA",")"]},{id:"al",states:["[","ARRAY_ITEMS","]"]},{id:"ol",states:["{","OBJECT_ITEMS","}"]}],ARRAY_ITEMS:[{id:"_blank",states:[c,"ARRAY_ITEMS"],overwrite:!0},{id:"_jump",states:["ARRAY_ITEMS_NOSPACE"]}],ARRAY_ITEMS_NOSPACE:[{id:"_join",states:["ARRAY_ITEMS_NOSPACE",",","ARRAY_ITEM"]},{id:"_jump",states:["ARRAY_ITEM"]},{id:"_empty",states:["NULL"],overwrite:!0}],ARRAY_ITEM:[{id:"_blank",states:[c,"ARRAY_ITEM"],overwrite:!0},{id:"_jump",states:["ARRAY_ITEM_NOSPACE"]}],ARRAY_ITEM_NOSPACE:[{id:"ai",states:["CONDITIONAL"]},{id:"aie",states:["NULL"],overwrite:!0}],OBJECT_ITEMS:[{id:"_join",states:["OBJECT_ITEMS",",","OBJECT_ITEM_AFTER_COMMA"]},{id:"_jump",states:["OBJECT_ITEM"]},{id:"_empty",states:["NULL"],overwrite:!0}],OBJECT_ITEM_AFTER_COMMA:[{id:"_blank",states:[c,"OBJECT_ITEM_AFTER_COMMA"],overwrite:!0},{id:"_jump",states:["OBJECT_ITEM"]},{id:"_empty",states:["NULL"],overwrite:!0}],OBJECT_ITEM:[{id:"_blank",states:[c,"OBJECT_ITEM"],overwrite:!0},{id:"_jump",states:["OBJECT_ITEM_NOSPACE"]}],OBJECT_ITEM_NOSPACE:[{id:"_jump",states:["OBJECT_ITEM_NOSPACE",c]},{id:"onv",states:["VARIABLE","OBJECT_ITEM_AFTER"]},{id:"ons",states:["STRING","OBJECT_ITEM_AFTER"]},{id:"onn",states:["NUMBER","OBJECT_ITEM_AFTER"]}],OBJECT_ITEM_AFTER:[{id:"_blank",states:[c,"OBJECT_ITEM_AFTER"],overwrite:!0},{id:"ov",states:[":","CONDITIONAL"]},{id:"_null",states:["NULL"]}],MEMBER:[{id:"_jump",states:["MEMBER",c]},{id:"_op2",states:["MEMBER",".","VARIABLE_WITH_BLACK"]},{id:"[]",states:["MEMBER","[","CONDITIONAL","]"]},{id:"f()",states:["MEMBER","(","FUNCARGS",")"]},{id:"_jump",states:["VALUE"]}],VARIABLE_WITH_BLACK:[{id:"_blank",states:[c,"VARIABLE_WITH_BLACK"],overwrite:!0},{id:"_jump",states:["VARIABLE"]}],FUNCARGS:[{id:"_blank",states:[c,"FUNCARGS"],overwrite:!0},{id:"_join",states:["FUNCARGS",",","CONDITIONAL"]},{id:"fa",states:["CONDITIONAL"]},{id:"_empty",states:["NULL"],overwrite:!0}],LOGICAL:[{id:"_blank",states:[c,"LOGICAL"],overwrite:!0},{id:"_jump",states:["LOGICAL_NOSPACE"]}],LOGICAL_NOSPACE:[{id:"!",states:["!","LOGICAL"]},{id:"!",states:["+","LOGICAL"]},{id:"!",states:["-","LOGICAL"]},{id:"_jump",states:["MEMBER"]}],MULTIPLY:[{id:"_op2",states:["MULTIPLY","*","LOGICAL"]},{id:"_op2",states:["MULTIPLY","/","LOGICAL"]},{id:"_op2",states:["MULTIPLY","%","LOGICAL"]},{id:"_jump",states:["LOGICAL"]}],ADDITION:[{id:"_op2",states:["ADDITION","+","MULTIPLY"]},{id:"_op2",states:["ADDITION","-","MULTIPLY"]},{id:"_jump",states:["MULTIPLY"]}],COMPARISON:[{id:"<>",states:["COMPARISON","<","COMPARISON_AFTER"]},{id:"<>",states:["COMPARISON",">","COMPARISON_AFTER"]},{id:"_jump",states:["ADDITION"]}],COMPARISON_AFTER:[{id:"a=",states:["=","ADDITION"]},{id:"_jump",states:["ADDITION"]}],EQUALITY:[{id:"=!",states:["EQUALITY","=","=","EQUALITY_AFTER"]},{id:"=!",states:["EQUALITY","!","=","EQUALITY_AFTER"]},{id:"_jump",states:["COMPARISON"]}],EQUALITY_AFTER:[{id:"a=",states:["=","COMPARISON"]},{id:"_jump",states:["COMPARISON"]}],LOGICAL_AND:[{id:"&&||",states:["LOGICAL_AND","&","&","EQUALITY"]},{id:"_jump",states:["EQUALITY"]}],LOGICAL_OR:[{id:"&&||",states:["LOGICAL_OR","|","|","LOGICAL_AND"]},{id:"_jump",states:["LOGICAL_AND"]}],CONDITIONAL:[{id:"?",states:["LOGICAL_OR","CONDITIONAL_AFTER"]}],CONDITIONAL_AFTER:[{id:"?:",states:["?","LOGICAL_OR",":","CONDITIONAL"]},{id:"_null",states:["NULL"]}],COMMA:[{id:",",states:["COMMA",",","CONDITIONAL"]},{id:"_jump",states:["CONDITIONAL"]}]},{_null:function(e){},_empty:function(e){return[]},_jump:function(e){return e[0]},_concat:function(e){return(e[0]||"")+(e[1]||"")},_blank:function(e){return e[1]},"str^":function(e){return e[1]},"str\\":function(e){if(!i[e[1]])throw new Error('String escaping "\\'+e[1]+'" is currently not supported.');return i[e[1]]},var:function(e){return{p:"var",v:e[0]}},str:function(e){return{p:"str",v:e[0]}},num:function(e){return{p:"num",v:Number(e[0])}},"()":function(e){return{p:"()",v:e[1]}},al:function(e){return e[1].forEach((function(t,r){null===t&&(r!==e[1].length-1?e[1][r]={p:"var",v:"undefined"}:e[1].pop())})),{p:"arr",v:e[1]}},ai:function(e){return[e[0]]},aie:function(e){return[null]},_join:function(e){return e[0].concat(e[2])},ol:function(e){for(var t={},r=e[1],n=0;n<r.length;n++)t[r[n].n]=r[n].v;return{p:"obj",v:t}},onv:function(e){return[{n:e[0],v:e[1]||{p:"var",v:e[0]}}]},ons:function(e){return[{n:e[0],v:e[1]||{p:"str",v:e[0]}}]},onn:function(e){return[{n:e[0],v:e[1]||{p:"num",v:Number(e[0])}}]},ov:function(e){return e[1]},"!":function(e){return{p:e[0]+"n",v:e[1]}},_op1:function(e){return{p:e[0],v:e[1]}},_op2:function(e){return{p:e[1],v:[e[0],e[2]]}},"f()":function(e){return{p:"f()",v:[e[0],e[2]]}},fa:function(e){return[e[0]]},"[]":function(e){return{p:"[]",v:[e[0],e[2]]}},"<>":function(e){return"a="===e[2].p?{p:e[1]+"=",v:[e[0],e[2].v]}:{p:e[1],v:[e[0],e[2]]}},"a=":function(e){return{p:"a=",v:e[1]}},"=!":function(e){return"a="===e[3].p?{p:e[1]+"==",v:[e[0],e[3].v]}:{p:e[1]+"=",v:[e[0],e[3]]}},"&&||":function(e){return{p:e[1]+e[2],v:[e[0],e[3]]}},"?":function(e){return e[1]?{p:"?:",v:[e[0],e[1][0],e[1][1]]}:e[0]},"?:":function(e){return[e[1],e[3]]},",":function(e){return{p:",",v:[e[0],e[2]]}}})),u.parse("COMMA",e)};var f=t.stringify=function(e,t){var r=function(e){var n=[];switch(e.p){case"var":return l.indexOf(e.v)>=0?e.v:t.indexOf(e.v)>=0?o.SUB_SCOPE+"."+e.v:o.TOP_SCOPE+"."+e.v;case"str":return'"'+e.v.replace(s,(function(e){return"\\"+a[e]}))+'"';case"num":return e.v;case"arr":return e.v.forEach((function(e){n.push(r(e))})),"["+n.join(",")+"]";case"obj":for(var i in e.v){var u='"'+i.replace(s,(function(e){return"\\"+a[e]}))+'"';n.push(u+":"+r(e.v[i]))}return"{"+n.join(",")+"}";case"()":return"("+r(e.v)+")";case".":return o.MEMBER+"("+r(e.v[0])+',"'+e.v[1]+'")';case"[]":return o.MEMBER+"("+r(e.v[0])+","+r(e.v[1])+")";case"f()":if("var"!==e.v[0].p)throw new Error("The function name could only be a variable identifier.");return e.v[1].forEach((function(e){n.push(r(e))})),o.CALL+"("+o.CALLER+","+o.METHODS+',"'+e.v[0].v+'",['+n.join(",")+"])";case"!n":case"+n":case"-n":return"("+e.p[0]+r(e.v)+")";case"+":case"-":case"*":case"/":case"%":case">":case"<":case">=":case"<=":case"==":case"!=":case"===":case"!==":case"&&":case"||":case",":return r(e.v[0])+e.p+r(e.v[1]);case"?:":return r(e.v[0])+"?"+r(e.v[1])+":"+r(e.v[2]);default:throw new Error("The AST is illegal.")}};return"("+r(e)+")"};t.lvalueStringify=function(e,t){for(var r=[],n=e;n;){if("var"===n.p)return l.indexOf(n.v)>=0?null:t.indexOf(n.v)>=0?'["'+n.v+'",'+r.join(",")+"]":"[null,"+r.join(",")+"]";if("."!==n.p)if("[]"!==n.p){if("()"!==n.p)return null;n=n.v}else r.unshift(f(n.v[1],t)),n=n.v[0];else r.unshift('"'+n.v[1]+'"'),n=n.v[0]}return null},t.searchBindingPaths=function(e,t){var r=[],n="",o=function(e,i,a){if(a>1)throw new Error("Dynamical binding paths are not supported.");switch(e.p){case"var":if(i){if(l.indexOf(e.v)>=0)return;return t.indexOf(e.v)>=0?['"'+e.v+'"']:['null,"'+e.v+'"']}if(a>=1)throw new Error("Dynamical binding paths are not supported.");if(l.indexOf(e.v)>=0)return;return void(t.indexOf(e.v)>=0?r.push('["'+e.v+'"]'):r.push('[null,"'+e.v+'"]'));case"str":case"num":case"arr":case"obj":return;case"()":return o(e.v,i,a);case".":if(i){if(!(n=o(e.v[0],!0,a)))return;return n.push('"'+e.v[1]+'"'),n}if(!(n=o(e.v[0],!0,a+1)))return;return n.push('"'+e.v[1]+'"'),void r.push("["+n.join(",")+"]");case"[]":if(i){if(!(n=o(e.v[0],!0,a)))return;return o(e.v[1],!0,a),n.push(f(e.v[1])),n}if(!(n=o(e.v[0],!0,a+1)))return;return o(e.v[1],!0,a+1),n.push(f(e.v[1])),void r.push("["+n.join(",")+"]");case"f()":return o(e.v[0],!1,a),void e.v[1].forEach((function(e){o(e,!1,a)}));case"!n":case"+n":case"-n":return void o(e.v,!1,a);case"+":case"-":case"*":case"/":case"%":case">":case"<":case">=":case"<=":case"==":case"!=":case"===":case"!==":case"&&":case"||":case",":return o(e.v[0],!1,a),void o(e.v[1],!1,a);case"?:":return o(e.v[0],!1,a),o(e.v[1],!1,a),void o(e.v[2],!1,a);default:throw new Error("The AST is illegal.")}};return e.forEach((function(e){o(e,!1,0)})),"["+r.join(",")+"]"}},3138:(e,t,r)=>{var n=r(1617),o=r(5943).qq,i=r(5738),a={amp:"&",gt:">",lt:"<",nbsp:" ",quot:'"',apos:"'"},s=" \n\r\t\f",u=/^[ \n\r\t\f]+|[ \n\r\t\f]+$/g,c={};["area","base","br","col","embed","hr","img","input","link","meta","param","source","track","wbr"].forEach((function(e){c[e]=!0}));var l=i.hasDOMBackend?document.createElement("div"):null,f=function(e){return e.replace(/&(([a-zA-Z]+)|(#x{0,1}[\da-zA-Z]+));/gi,(function(e,t){return a[t]?a[t]:/^#[0-9]{1,4}$/.test(t)?String.fromCharCode(t.slice(1)):/^#x[0-9a-f]{1,4}$/i.test(t)?String.fromCharCode("0"+t.slice(1)):i.hasDOMBackend?function(e){return l?(l.innerHTML=e,l.innerText||l.textContent):e}(e):e}))},p=null,h=null,d=function(e){return n.create({HTML:[{id:"tag",states:["HTML","TAG"]},{id:"text",states:["HTML","TEXT"]},{id:"tag1",states:["TAG"]},{id:"text1",states:["TEXT"]},{id:"_null",states:["NULL"],overwrite:!0}],TEXT:[{id:"_raw",states:["TEXT","^<"]},{id:"_jump",states:["^<"]},{id:"_jump",states:["NULL"]}],TAG:[{id:"_blank",states:["<","TAG_START"]}],TAG_END:[{id:"_blankConcat",states:["/","TAG_END_NAME",">"]},{id:"_jump",states:[">"]}],TAG_START:[{id:"comment",states:["!","-","-","COMMENT_CONTENT"]},{id:"endTag",states:["/","TAG_END_NAME",">"]},{id:"startTag",states:["TAG_START_NAME","ATTRS","TAG_END"]},{id:"_blank",states:[s,"TAG_START"]}],TAG_START_NAME:[{id:"_raw",states:["TAG_START_NAME","^>/ \n\r\t\f"]},{id:"_jump",states:["^>/ \n\r\t\f"]}],TAG_END_NAME:[{id:"_raw",states:["TAG_END_NAME","^>"]},{id:"_jump",states:["^>"]},{id:"_jump",states:["NULL"]}],ATTRS:[{id:"_blank",states:[s,"ATTRS"]},{id:"_jump",states:["ATTRS",s]},{id:"attrs",states:["ATTR","ATTRS"]},{id:"_null",states:["NULL"],overwrite:!0}],ATTR:[{id:"attr",states:["ATTR_NAME","ATTR_NAME_AFTER"]}],ATTR_NAME:[{id:"_raw",states:["ATTR_NAME","^=>/ \n\r\t\f"]},{id:"_jump",states:["^=>/ \n\r\t\f"]}],ATTR_NAME_AFTER:[{id:"_blank",states:[s,"ATTR_NAME_AFTER"]},{id:"_blank",states:["=","ATTR_VALUE"]},{id:"_empty",states:["NULL"]}],ATTR_VALUE:[{id:"_blank",states:[s,"ATTR_VALUE"]},{id:"_blank",states:['"',"ATTR_VALUE_INNER_1",'"']},{id:"_blank",states:["'","ATTR_VALUE_INNER_2","'"]},{id:"_jump",states:["ATTR_VALUE_INNER_3"]},{id:"_empty",states:["NULL"]}],ATTR_VALUE_INNER_1:[{id:"_raw",states:["ATTR_VALUE_INNER_1",'^"']},{id:"_jump",states:['^"']},{id:"_jump",states:["NULL"]}],ATTR_VALUE_INNER_2:[{id:"_raw",states:["ATTR_VALUE_INNER_2","^'"]},{id:"_jump",states:["^'"]},{id:"_jump",states:["NULL"]}],ATTR_VALUE_INNER_3:[{id:"_raw",states:["ATTR_VALUE_INNER_3","^> \n\r\t\f"]},{id:"_jump",states:["^> \n\r\t\f"]},{id:"_jump",states:["NULL"]}],COMMENT_CONTENT:[{id:"_concat",states:["ALL","COMMENT_CONTENT"]},{id:"_concat",states:["-","COMMENT_CONTENT_DASH_1"]}],COMMENT_CONTENT_DASH_1:[{id:"_concat",states:["ALL","COMMENT_CONTENT"]},{id:"_concat",states:["-","COMMENT_CONTENT_DASH_2"]}],COMMENT_CONTENT_DASH_2:[{id:"_concat",states:["ALL","COMMENT_CONTENT"]},{id:"_concat",states:["-","COMMENT_CONTENT_DASH_2"]},{id:"_jump",states:[">"]}]},{_null:function(){},_empty:function(){return""},_jump:function(e){return e[0]},_raw:function(e){return e[0]+e[1]},_concat:function(e){return e[0]+e[1]},_blankConcat:function(e){return e[0]+e[2]},_blank:function(e){return e[1]},attr:function(e){return[{n:e[0],v:f(e[1])}]},attrs:function(e){return e[1]?e[0].concat(e[1]):e[0]},startTag:function(e){var t=e[0].toLowerCase();return{t:o.TAG_START,n:"wx-"+t,a:e[1]||[],selfClose:"/>"===e[2]||c[t]}},endTag:function(e){return{t:o.TAG_END,n:"wx-"+e[1].toLowerCase()}},comment:function(e){return{t:o.COMMENT,c:e[3].slice(0,-3)}},tag1:function(e){return[e[0]]},text1:function(e){return[{t:o.TEXT,c:e[0]}]},tag:function(e){return e[0].push(e[1]),e[0]},text:function(e){var t=e[0];return t[t.length-1].t===o.TEXT?t[t.length-1].c+=e[1]:t.push({t:o.TEXT,c:e[1]}),t}},e)};t.TAG_TYPES=o,t.decodeEntities=f,t.parse=function(e,t){var r=null;e.length<=65536?(p||(p=d(65536)),r=p):(h||(h=d(1048576)),r=h);var n=function(e,t){for(var r={c:[]},n=r,i=[],a=null,s=0;s<e.length;s++){var c=e[s];if(c.t===o.TAG_START)a={t:o.TAG_START,n:c.n,a:c.a,c:[]},n.c.push(a),c.selfClose||(i.push(n),n=a);else if(c.t===o.TAG_END){var l=i.length-1,p=!0;for(a=n;c.n!==a.n;)if(!(a=i[l--])){p=!1;break}if(p)for(;i.length>l;)n=i.pop()}else c.t===o.TEXT&&(c.c=f(t?c.c:c.c.replace(u,"")),c.c&&n.c.push(c))}return r}(r.parse("HTML",e)||[],t);return n.c}},4047:(e,t,r)=>{var n=r(5738),o=r(7124),i=r(5577),a=r(7253),s=r(8888),u=r(4031),c=r(5798),l=r(3607),f=r(4290),p=function(){};p.prototype=Object.create(Object.prototype,{constructor:{value:p,writable:!0,configurable:!0}});var h=function(){};h.prototype=Object.create(Object.prototype,{constructor:{value:h,writable:!0,configurable:!0}});var d,_=null;_=r(8506),d=r(3138),p.precompileAndGetCreator=function(e){var t=new(r(5140).Script)("global.__exparserFreeTmpl="+_.compile(e),{displayErrors:!0});t.runInThisContext(t);var n=r.g.__exparserFreeTmpl;return r.g.__exparserFreeTmpl=null,n},p.precompiler=_,p.htmlParser=d;var y=function(e){return e.replace(/-([a-z])/g,(function(e,t){return t.toUpperCase()}))},v=Object.prototype.hasOwnProperty,m=function(e,t){if(null!==e&&"object"==typeof e&&v.call(e,t))return e[t]},g=function(e,t,r,n){if(v.call(t,r)){var i=t[r];if("function"==typeof i)return o.safeCallback("Template Method",i,e,n)}},b={t:1,n:'"slot"',v:!0,sn:"",a:[],c:[],p:null},w=function(e,t,r){e.classList.toggle(t,!!r)},x=function(e,t,r){e[t]=r},E=function(e,t,r){var n=e.__dataProxy;n.scheduleReplace([t],r),n.doUpdates()},S=function(e,t,r){e.class=r},T=function(e,t,r){"dom"===n.documentBackend?e.setAttribute("style",r):"custom"===n.documentBackend&&e.setStyle(r)},O=function(e,t,r){e.setAttribute("class",r)},A=function(e,t,r){e.textContent=r},C=function(e,t,r){e.dataset||(e.dataset={}),e.dataset[t]=r},M={$:function(e,t,r){!0===r?e.setAttribute(t,""):!1===r||null==r?e.removeAttribute(t):e.setAttribute(t,r)},":":x,c:w,s:function(e,t,r){var n=e.style;n&&(n[t]=r)},d:C},P=function(e,t,r){return[{t:1,n:"slot",v:!0,sn:"",a:[],c:[]}]};p.create=function(e,t,r,n){var i=void 0===e.template?P:e.template,a=i;if("function"!=typeof i)if(_&&"undefined"!=typeof window&&"undefined"!=typeof document){var s=_.compile(i),u=document.createElement("script");u.type="text/javascript",u.innerHTML="window.__exparserFreeTmpl="+s,document.head.appendChild(u),document.head.removeChild(u),a=window.__exparserFreeTmpl,window.__exparserFreeTmpl=null}else if("undefined"!=typeof process&&void 0!==process.versions&&void 0!==process.versions.node)a=p.precompileAndGetCreator(i);else if(_){var c=_.compile(i);a=new Function("return "+c)()}else o.hasGlobalWarningListeners()&&o.triggerWarning("Non-precompiled template is not usable in this environment. Empty template is used instead."),a=P;var l=Object.create(p.prototype);return l._initValuesJSON=JSON.stringify(r),l._dataJSON=t!==r?JSON.stringify(t):null,l._tagTreeRoot=R(a,r,e.methods,n),l._renderingMode=n.renderingMode,l};var R=function(e,t,r,o){var i="native"===o.renderingMode,s=i,u=!1,c=Object.create(null);i&&!n.hasDOMBackend&&(e=P);var l={},p=e(m,g,r),h=function(e){for(var r=0;r<e.length;r++){var o=e[r];if(3!==o.t){var c=o.n,p=!(i||"string"==typeof c&&c.startsWith("wx-xr-"));"slot"===c&&""===o.sn&&(u=!0),o.n=c;var d=o.st;d&&d.e&&(d.o=T,s&&(d.v=d.e(t,l,null)));var _=o.cl;_&&_.e&&(_.o=i?O:S,s&&(_.v=_.e(t,l,null)));var v=null;p||(o.p=v=i?document.createElement(o.n):a.create(o.n),d&&void 0!==d.v&&("dom"===n.documentBackend?v.setAttribute("style",d.v):"custom"===n.documentBackend&&v.__domElement.setStyle(d.v)),i&&_&&void 0!==_.v&&v.setAttribute("class",_.v));for(var m=o.a,g=0;g<m.length;g++){var b=m[g];if(b.d)i||f[b.n].register(b.n,b,o);else{i||("bind"===b.n.slice(0,4)?(b.evCatch=!1,b.ev=y(b.n.slice(4)),":"===b.ev[0]&&(b.ev=b.ev.slice(1))):"catch"===b.n.slice(0,5)&&(b.evCatch=!0,b.ev=y(b.n.slice(5)),":"===b.ev[0]&&(b.ev=b.ev.slice(1))));var C=b.o;if(p)C?b.o="&"===C?M[":"]:M[C]:(b.o=M[":"],b.n=y(b.n)),b.o===x&&(b.o=E),s&&b.e&&(b.v=b.e(t,l,null));else if(!b.ev){var P=M;b.o=C?"&"===C?P[":"]:P[C]:P.$,s?(b.e&&(b.v=b.e(t,l,null)),(b.o!==w||i)&&b.o(v,b.n,b.v)):b.e||b.o(v,b.n,b.v)}}}h(o.c),i&&(1!==o.c.length||void 0===o.c[0].sn||o.c[0].compressed||(o.sn=o.c[0].sn,o.compressed=!0,o.c.pop()))}else o.e&&(o.o=A,o.c=s?o.e(t,l,null):"")}};return h(p,c,!0),i&&(u||p.push(b),1!==p.length||""!==p[0].sn||p[0].compressed||p.pop()),p},D=function(e,t){return function(r){if(this[e](r),t)return!1}},N=function(e,t,r,o,a,s,u,p){for(var h=null,d=0,_=null,y=0;y<e.length;y++){var v=u,m=e[y];if(3===m.t)h=m.e?t.createTextNode(m.e(o,a,null)):t.createTextNode(m.c),m.e&&l.addBindings(s,v,m.b,h,m),i.appendChild(r,h);else{var g=m.cl,b=m.st,S=m.a,T=!1;for(d=0;d<S.length;d++)if((_=S[d]).d){var O=f[_.n].create(_.n,_,m,o,a,s,v,p,t,N,r);if(f[_.n].requireBlock){h=O,i.appendChild(r,h),T=!0;break}}if(T)continue;if(m.v)h=t.createVirtualNode(m.n);else if(m.p){for(h=t.cloneNativeNode(m.p),d=0;d<S.length;d++)(_=S[d]).d||(_.ev?p(h,_.ev,_.v,_.evCatch):_.o===x?h.__domElement&&(_.o(h.__domElement,_.n,_.e(o,a,null)),l.addBindings(s,v,_.b,h.__domElement,_)):(_.e&&_.o(h,_.n,_.e(o,a,null)),(_.e||_.o===w||_.o===C)&&l.addBindings(s,v,_.b,h,_)));b&&b.e&&("dom"===n.documentBackend?h.setAttribute("style",b.e(o,a,null)):"custom"===n.documentBackend&&h.__domElement.setStyle(b.e(o,a,null)),l.addBindings(s,v,b.b,h,b))}else{if(m.cpf){var A={},M=t.__wxHost;for(var P in m.cpf)!function(e){var t=m.cpf[e];A[e]=M.__behavior.methods[t]}(P);t.__childrenPropsFilter=A}for(h=t.createComponent(m.n,void 0,m.g,void 0),d=0;d<S.length;d++)if(!(_=S[d]).d){var R=_.v;_.o===E&&h instanceof c&&c.hasPublicProperty(h,_.n)?(_.e&&(R=_.e(o,a,null),l.addBindings(s,v,_.b,h,_)),_.e?E(h,_.n,R):h.__behavior.properties[_.n].type===Boolean?E(h,_.n,!0):E(h,_.n,R)):_.ev?p(h,_.ev,R,_.evCatch):_.o!==E&&(_.e&&(R=_.e(o,a,null),l.addBindings(s,v,_.b,h,_)),_.o(h,_.n,R))}b&&(b.e?("dom"===n.documentBackend?h.__domElement.setAttribute("style",b.e(o,a,null)):"custom"===n.documentBackend&&h.__domElement.setStyle(b.e(o,a,null)),l.addBindings(s,v,b.b,h.__domElement,b)):"dom"===n.documentBackend?h.__domElement.setAttribute("style",b.v):"custom"===n.documentBackend&&h.__domElement.setStyle(b.v))}m.id&&(h.id=m.id),g&&(g.e?h.class=g.e(o,a,null):h.class=g.v,g.o&&l.addBindings(s,v,g.b,h,g)),m.sl&&(h.slot=m.sl),void 0!==m.sn&&i.setSlotName(h,m.sn),i.appendChild(r,h),N(m.c,t,h,o,a,s,v,p)}}},I=function(e,t,r){for(var n=e.childNodes,o=0;o<n.length;o++){var i=n[o];i instanceof s||(i.__id&&(t[i.__id]=i),void 0!==i.__slotName&&(r[i.__slotName]=i),I(i,t,r))}},L=function(e,t,r,n,o,i){for(var a=null,s=0,u=null,c=0;c<e.length;c++){var f=e[c];if(void 0===f.n)a=document.createTextNode(f.c),f.e&&l.addBindings(o,i,f.b,a,f),t.appendChild(a);else{var p=f.cl,h=f.st,d=f.a;for(a=f.v?document.createElement("virtual"):document.importNode?document.importNode(f.p,!1):f.p.cloneNode(!1),s=0;s<d.length;s++)(u=d[s]).e&&l.addBindings(o,i,u.b,a,u);t.appendChild(a),f.id&&(r[f.id]=a),p&&p.e&&l.addBindings(o,i,p.b,a,p),h&&h.e&&l.addBindings(o,i,h.b,a,h),void 0!==f.sn&&(n[f.sn]=a),L(f.c,a,r,n,o,i)}}};p.prototype.createInstance=function(e){var t=Object.create(h.prototype),r=JSON.parse(this._initValuesJSON),o=null===this._dataJSON?r:JSON.parse(this._dataJSON),i=Object.create(null),a=Object.create(null),s=[],c=l.create("",null,null,null,null,[],(function(e,t){})),f=null;if("native"===this._renderingMode)"dom"===n.documentBackend&&(f=document.createDocumentFragment()),L(this._tagTreeRoot,f,i,a,c,{}),a[""]||(a[""]=null);else{if(f=u.create(e),e.ownerShadowRoot&&e.ownerShadowRoot.__childrenPropsFilter)if(f.__childrenPropsFilter)for(var p in e.ownerShadowRoot.__childrenPropsFilter)f.__childrenPropsFilter[p]||(f.__childrenPropsFilter[p]=e.ownerShadowRoot.__childrenPropsFilter[p]);else f.__childrenPropsFilter=e.ownerShadowRoot.__childrenPropsFilter;N(this._tagTreeRoot,f,f,r,{},c,{},(function(e,t,r,n){f.__wxHost?e.addListener(t,D(r,n).bind(f.__wxHost)):s.push({target:e,name:t,func:D(r,n)})})),I(f,i,a)}return t.data=o,t.shadowRoot=f,t.idMap=i,t.slots=a,t.listeners=s,t._topScope=c,t},h.prototype.updateValues=function(e,t,r){for(var n=i.getMethodCaller(e),o=0;o<r.length;o++){var a=r[o];l.updateBinding(this._topScope,a,t,{},n)}},e.exports=p},8506:(e,t,r)=>{var n=r(1617),o=r(3138),i=r(6324),a=r(4290),s=r(5943).YX,u=r(5943).DX,c=r(5943).QL;t.LLParser=n,t.htmlParser=o,t.expParser=i;var l=c.TOP_SCOPE+","+c.SUB_SCOPE+","+c.CALLER,f=c.MEMBER+","+c.CALL+","+c.METHODS,p=function(e){return e.replace(/-([a-z])/g,(function(e,t){return t.toUpperCase()}))},h=function(e){return'"'+e.replace(s,(function(e){return"\\"+u[e]}))+'"'},d=function(e){return"["+e.join(",")+"]"},_=function(e){var t=[];for(var r in e)void 0!==e[r]&&(/^[_a-z]+$/i.test(r)?t.push(r+":"+e[r]):t.push(h(r)+":"+e[r]));return"{"+t.join(",")+"}"},y=function(e,t){for(var r=e.split(/\{\{(.*?)\}\}/),n=[],o=[],a=null,s=0;s<r.length;s++){var u=r[s];if(s%2){var c=i.parse(u);a=i.lvalueStringify(c,t),n.push(i.stringify(c,t)),o.push(c)}else n.push(h(u))}if(1===n.length)return{c:n[0]};var f=i.searchBindingPaths(o,t);return'""'===n[n.length-1]&&n.pop(),2===n.length&&'""'===n[0]?{c:void 0,e:"function("+l+"){return "+n[1]+"}",l:a,b:f}:{c:void 0,e:"function("+l+"){return "+n.join("+")+"}",l:null,b:f}},v=function(e,t){var r=y(e.c,t);return r.t=3,r.l=void 0,r.c=r.c||'""',_(r)},m=function(e,t){for(var r=[],n=0;n<e.length;n++){var o=e[n];if(3!==o.t){var i=o.a,s=o.c,u={t:1,n:'"'+o.n+'"',g:void 0,v:void 0,id:void 0,cl:void 0,cpf:void 0,st:void 0,sl:void 0,sn:void 0,a:"",c:""};"slot"===o.n?(u.v=!0,u.sn='""',s=[]):"block"!==o.n&&"virtual"!==o.n||(u.v=!0);var c=0,l=null,f=[],g=null,b=!1,w=!1,x=!1,E=!1,S=Object.create(null),T=[],O=Object.create(null),A=Object.create(null);if(i){for(var C=0;C<i.length;C++){var M=i[C],P=M.n;if(!S[P])if(S[P]=!0,"id"===P)u.id=h(M.v);else if("class"===P||"class$"===P||"class:"===P)(g=y(M.v,t)).e&&(x=!0),u.cl=_({v:g.c,e:g.e,l:void 0,b:g.b});else if("style"===P||"style$"===P||"style:"===P)(g=y(M.v,t)).e&&(E=!0),u.st=_({v:g.c,e:g.e,l:void 0,b:g.b});else if("slot"===P)u.sl=h(M.v);else if("name"===P&&"slot"===o.n)u.sn=h(M.v);else if("generic:"===P.slice(0,8))u.g="",O[P.slice(8)]=h(M.v);else if("filter:"===P.slice(0,7))u.cpf="",A[P.slice(7)]=h(M.v);else if("wx:"===P.slice(0,3)){var R=P.slice(3);if(!Object.prototype.hasOwnProperty.call(a,R))throw new Error('Directive "'+R+'" is not found.');var D=a[R].precompile(R,M.v,t);c+=D.s.length,t=t.concat(D.s);var N=_({s:JSON.stringify(D.s),n:'"'+R+'"',d:D.d,l:D.l,b:D.b}),I=a[R].addDefaultAttrs;if(I&&i.push.apply(i,I),a[R].attachedToBlock)f.push(N);else if(a[R].requireBlock){if(null!==l)throw new Error("Uncompatible directives are used in a single element.");l=N}else T.push(N)}else{var L={n:'"'+M.n+'"',v:h(M.v),o:void 0,e:void 0,l:void 0,b:void 0};if("$"===P.slice(-1)?(L.o='"$"',L.n='"'+P.slice(0,-1)+'"'):":"===P.slice(-1)?(L.o='":"',L.n='"'+p(P.slice(0,-1))+'"'):"&"===P.slice(-1)?(L.o='"&"',L.n='"'+p(P.slice(0,-1))+'"'):"class."===P.slice(0,6)?(L.o='"c"',L.n='"'+P.slice(6)+'"',b=!0):"style."===P.slice(0,6)?(L.o='"s"',L.n='"'+P.slice(6)+'"',w=!0):"data-"===P.slice(0,5)&&(L.o='"d"',L.n='"'+p(P.slice(5))+'"'),"id"===L.n||"slot"===L.n)throw new Error('"id" and "slot" do not support dynamic binding symbol.');g=y(M.v,t),L.v=g.c,L.e=g.e,L.l=g.l,L.b=g.b,T.push(_(L))}}if(x&&b)throw new Error("Class bindings cannot be used with dynamic class property.");if(E&&w)throw new Error("Style bindings cannot be used with dynamic style property.");u.a=d(T),u.c=m(s,t),""===u.g&&(u.g=_(O)),""===u.cpf&&(u.cpf=_(A)),l?'"block"'===u.n&&"[]"===u.a?(u.a="["+f.concat(l).join(",")+"]",r.push(_(u))):r.push(_({t:1,n:'"block"',v:!0,a:"["+f.concat(l).join(",")+"]",c:"["+_(u)+"]"})):r.push(_(u)),t.splice(t.length-c,c)}}else r.push(v(o,t))}return d(r)};t.compile=function(e){var t=o.parse(e),r=m(t,[]);return"function("+f+"){return "+r+"}"}},3607:e=>{var t={create:function(e,t,n,o,i,a,s){for(var u={inc:1,name:e,exp:o,lp:i,scopes:{},targets:{},children:null,lu:s,__scopeBinded:[]},c=0;c<a.length;c++){var l=a[c];null===l[0]?r(t,l,null,u):r(n[l[0]],l,null,u)}return u},proxyTopScope:function(e){var t={inc:1,linked:e,scopes:{},targets:{},children:null,__scopeBinded:[]};return r(e,[null],null,t),t},proxySubScopes:function(e){var t={};for(var n in e)t[n]={inc:1,linked:e[n],scopes:{},targets:{},children:null,__scopeBinded:[]},r(e[n],[null],null,t[n]);return t}},r=t.addBinding=function(e,t,r,n){for(var o=e,i=1;i<t.length;i++){var a=t[i];o.children||(o.children=Object.create(null));var s=o.children;s[a]||(s[a]={scopes:{},targets:{},children:null}),o=s[a]}var u=e.inc++;return r?o.targets[u]=[r,n]:(o.scopes[u]=n,n.__scopeBinded.push([o,u])),u};t.addBindings=function(e,t,n,o,i){for(var a=0;a<n.length;a++){var s=n[a];s[0]?r(t[s[0]],s,o,i):r(e,s,o,i)}},t.updateLvaluePath=function(e,t){e.lp=t},t.removeBindingsForScope=function(e){for(var t=e.__scopeBinded,r=0;r<t.length;r++){var n=t[r];delete n[0].scopes[n[1]]}};var n=function(e,t,r,n,i){if(e.linked)o(e,t,r,n,i);else{var a=n[e.name];n[e.name]=e.exp(r,n,i),o(e,t,r,n,i),n[e.name]=a}},o=t.updateBinding=function(e,t,r,o,i){for(var a=e,s=0,u=0;u<t.length;u++){for(s in a.scopes)n(a.scopes[s],t,r,o,i);var c=t[u];if(!a.children)return;var l=a.children;if(!l[c])return;a=l[c]}var f=function(e){for(s in e.targets){var t=e.targets[s],a=t[1];a.o(t[0],a.n,a.e(r,o,i))}for(s in e.scopes)n(e.scopes[s],[],r,o,i);for(s in e.children)f(e.children[s])};f(a)};e.exports=t},7124:(e,t,r)=>{var n=r(5738),o=function(e){this.empty=!0,this._type=e,this._arr=[],this._index=0};o.create=function(e){return new o(e)},o.prototype.add=function(e){var t=this._index++;return this._arr.push({id:t,func:e}),this.empty=!1,t},o.prototype.remove=function(e){var t=this._arr,r=0;if("function"==typeof e)for(r=0;r<t.length;r++){var n=t[r].func;if(n===e)return t.splice(r,1),this.empty=!t.length,n}else for(r=0;r<t.length;r++)if(t[r].id===e){var o=t[r].func;return t.splice(r,1),this.empty=!t.length,o}return null},o.prototype.call=function(e,t,r){for(var n=this._arr,o=!1,a=0;a<n.length;a++)!1===i(this._type,n[a].func,e,t,r)&&(o=!0);if(o)return!1};var i=o.safeCallback=function(e,t,r,o,i){try{return t.apply(r,o)}catch(u){var s="[Exparser] [Error] [Component] "+(e||"Error Listener")+" Error @ ";r&&r.is&&(s+=r.is),s+="#"+(t.name||"(anonymous)"),i&&i.triggerLifeTime("error",[u]),function(e,t){if(!t.type||!1!==a.call(null,[e,t])){if(n.throwGlobalError)throw e;console.error(e.message+"\n"+e.stack)}}(u,{message:s,type:e,element:r,method:t,args:o})}},a=o.create();o.addGlobalErrorListener=function(e){return a.add(e)},o.removeGlobalErrorListener=function(e){return a.remove(e)};var s=null;o.addGlobalWarningListener=function(e){return(s=o.create()).add(e)},o.removeGlobalWarningListener=function(e){if(s){var t=s.remove(e);return s.empty&&(s=null),t}return null},o.hasGlobalWarningListeners=function(){return!!s},o.triggerWarning=function(e){var t="[Exparser] [Warning] [Component] "+e;s.call(null,[t],null)},e.exports=o},5738:e=>{e.exports={lazyRegistration:!0,publicProperties:!1,availability:null,domain:"",writeOnly:!1,allowInWriteOnly:!1,classPrefix:null,styleScope:"",addGlobalClass:!1,templateEngine:null,renderingMode:"full",multipleSlots:!1,reflectToAttributes:!1,writeFieldsToNode:!0,writeIdToDOM:!1,idPrefixGenerator:null,separateInnerData:!0,innerDataExclude:null,listenerChangeLifeTimes:!1,randomizeTagName:!1,virtualHost:!1,throwGlobalError:!1,writeExtraInfoToAttr:!1,documentBackend:"none",hasDOMBackend:!1,customContext:null}},2015:(e,t)=>{t.backendExtractedDefault=!1,t.enableBackendExtractedDefault=function(){t.backendExtractedDefault=!0},t.disableBackendExtractedDefault=function(){t.backendExtractedDefault=!1}},5280:(e,t,r)=>{var n=r(1617),o=r(7124),i=r(7626),a=r(6452),s=r(7842),u=r(1341),c=r(5577),l=r(5798),f=r(8888),p=r(7253),h=r(1541),d=r(4031),_=r(7244),y=r(5190),v=r(6497),m=r(612),g=r(7858),b=r(5738),w=r(2015),x=r(4047);t.FreeTmpl=x,t.precompileTemplate=x.precompiler?x.precompiler.compile:null,t.precompiler=x.precompiler?x.precompiler:null,t.HtmlLLParser=x.htmlParser?x.htmlParser:null,t.LLParser=n,t.dataPath=s,t.dataUtils=i,t.Event=a,t.Element=c,t.TextNode=f,t.NativeNode=p,t.VirtualNode=h,t.ShadowRoot=d,t.Behavior=u,t.Component=l,t.Observer=y,t.DataGroup=_,t.ElementIterator=v,t.FakeDomElement=m,t.registerBehavior=u.create,t.registerElement=l.register,t.createElement=l.create,t.createTextNode=f.create,t.createVirtualNode=h.create,t.appendChild=c.appendChild,t.insertBefore=c.insertBefore,t.removeChild=c.removeChild,t.replaceChild=c.replaceChild,t.addListenerToElement=a.addListenerToElement,t.removeListenerFromElement=a.removeListenerFromElement,t.triggerEvent=a.triggerEvent,t.triggerRender=g.triggerRender,t.safeCallback=o.safeCallback,t.addGlobalErrorListener=o.addGlobalErrorListener,t.removeGlobalErrorListener=o.removeGlobalErrorListener,t.addGlobalWarningListener=o.addGlobalWarningListener,t.removeGlobalWarningListener=o.removeGlobalWarningListener,t.globalOptions=b,t.globalState=w,l._setDefaultTemplateEngine(x);var E=t.updateDefaultComponent=function(){delete l._list[""],l.register({is:"",options:{writeOnly:!0,allowInWriteOnly:!0,lazyRegistration:!1,classPrefix:"",addGlobalClass:!1,templateEngine:null,renderingMode:"full",multipleSlots:!1,reflectToAttributes:!1}})};E(),t.initBackend=function(){E()};var S=function(e){var r="";if(e instanceof t.Element&&(e.id&&(r+=' id="'+e.id+'"'),e.slot&&(r+=' slot="'+e.slot+'"'),e.__slotName&&(r+=' name="'+e.__slotName+'"'),e.classList&&(r+=' class="'+e.class+'"'),"dom"===b.documentBackend&&e.$$&&e.$$.getAttribute("style")&&(r+=' style="'+e.$$.getAttribute("style")+'"')),e instanceof t.VirtualNode)return r;if(e instanceof t.Component)return l.listPublicProperties(e).forEach((function(t){r+=" "+t+"="+JSON.stringify(e[t])})),r;for(var n=e.attributes,o=0;o<n.length;o++)r+=" "+n[o].name+'="'+n[o].value+'"';return r},T=t.dumpElementToString=function(e,r,n){var o=null;"dom"===b.documentBackend&&(o=window);var i=0,a="";for(i=n=n||0;i;i--)a+="  ";var s="";if(e instanceof t.Element)s+=a+"<"+("dom"===b.documentBackend&&e.$$?e.$$.tagName.toLowerCase()+":":"")+e.is+S(e)+">",e instanceof t.VirtualNode?s+=" [Exp-Virtual]":e instanceof t.NativeNode?s+=" [Exp-Native]":s+=" [Exp-Component]",s+="\n"+T(r?e.__wxSlotChildren:e.childNodes,r,n+1);else if(e instanceof t.TextNode)s+=a+e.textContent+" [Exp-Text]\n";else if(o&&o.HTMLElement&&e instanceof o.HTMLElement)s+=a+"<"+e.tagName.toLowerCase()+S(e)+"> [DOM-Element]",s+="\n"+T(r&&e.__wxSlotChildren||e.childNodes,r,n+1);else if(o&&o.Text&&e instanceof o.Text)s+=a+e.textContent+" [DOM-Text]\n";else if(void 0!==e.length)for(i=0;i<e.length;i++)s+=T(e[i],r,n);else s=a+"[unknown node]\n";return s};t.dumpElement=function(e,t){console.log(T(e,t))}},7253:(e,t,r)=>{var n=r(5577),o=r(7523),i=r(612),a=r(5738),s=r(2015),u=function(){};u.prototype=Object.create(n.prototype,{constructor:{value:u,writable:!0,configurable:!0}});var c=u._advancedCreate=function(e,t,r){var c=new u;c.is=e.toLowerCase();var l=null,f=null;if("dom"===a.documentBackend?l=s.backendExtractedDefault?new i(e):document.createElement(e):"custom"===a.documentBackend&&(f=void 0===r?a.customContext:r)&&(l=f.createElement("image"===e?e:"empty",e)),n.initialize(c,l,t,f),c.classList=o.create(c,null),l&&"custom"===a.documentBackend&&l.associateComponent(c),t){var p=t.__wxHost;l&&"custom"===a.documentBackend&&p.__componentOptions.styleScope&&l.setStyleScope(p.__componentOptions.styleScope),c.classList._setOwnerOptions(p.classList,p.__componentOptions.classPrefix,p.__componentOptions.addGlobalClass),a.writeExtraInfoToAttr&&l&&l.setAttribute("exparser:info-class-prefix",p.__componentOptions.classPrefix&&p.__componentOptions.classPrefix+"--")}return c};u.create=function(e){return c(e,null)};var l=u._advancedClone=function(e,t){var r=new u;r.is=e.is;var c=null;if(e.__domElement&&("dom"===a.documentBackend?c=e.__domElement instanceof i?s.backendExtractedDefault?e.__domElement.cloneNode():i.toElement(e.__domElement):s.backendExtractedDefault?i.fromElement(e.__domElement):document.importNode?document.importNode(e.__domElement,!1):e.__domElement.cloneNode(!1):"custom"===a.documentBackend&&(c=e.__domElement.cloneNode())),n._clone(r,e,c,t),r.classList=o.create(r,null),c&&"custom"===a.documentBackend&&c.associateComponent(r),t){var l=t.__wxHost;r.classList._setOwnerOptions(l.classList,l.__componentOptions.classPrefix,l.__componentOptions.addGlobalClass),a.writeExtraInfoToAttr&&c&&c.setAttribute("exparser:info-class-prefix",l.__componentOptions.classPrefix&&l.__componentOptions.classPrefix+"--")}return r};u.cloneNode=function(e){return l(e,null)},u.shouldBeNativeNode=function(e){return e.startsWith("xr-")||e.startsWith("wx-xr-")},e.exports=u},5190:(e,t,r)=>{var n=r(7124),o=function(){};o.prototype=Object.create(Object.prototype,{constructor:{value:o,writable:!0,configurable:!0}}),o.create=function(e){var t=new o;return t._cb=e,t._noSubtreeCb=function(t){t.target===this&&e.call(this,t)},t._binded=[],t},o.prototype.observe=function(e,t){var r=0,o=(t=t||{}).subtree?this._cb:this._noSubtreeCb;t.properties&&(e.__propObservers||(e.__propObservers=n.create("Observer Callback")),this._binded.push({funcArr:e.__propObservers,id:e.__propObservers.add(o),subtree:t.subtree?e:null}),r++),t.childList&&(e.__childObservers||(e.__childObservers=n.create("Observer Callback")),this._binded.push({funcArr:e.__childObservers,id:e.__childObservers.add(o),subtree:t.subtree?e:null}),r++),t.characterData&&(e.__textObservers||(e.__textObservers=n.create("Observer Callback")),this._binded.push({funcArr:e.__textObservers,id:e.__textObservers.add(o),subtree:t.subtree?e:null}),r++),t.subtree&&i(e,r),t.attachStatus&&(e.__attachedObservers||(e.__attachedObservers=n.create("Observer Callback")),this._binded.push({funcArr:e.__attachedObservers,id:e.__attachedObservers.add(o),subtree:null}))},o.prototype.disconnect=function(){for(var e=this._binded,t=0;t<e.length;t++){var r=e[t];r.funcArr.remove(r.id),r.subtree&&i(r.subtree,-1)}this._binded=[]};var i=o._updateSubtreeCaches=function(e,t){e.__subtreeObserversCount+=t;var r=e.childNodes;if(r)for(var n=0;n<r.length;n++)i(r[n],t)};o._callObservers=function(e,t,r){do{e[t]&&e[t].call(e,[r]),e=e.parentNode}while(e&&e.__subtreeObserversCount)},o._callSingleObserver=function(e,t,r){e[t]&&e[t].call(e,[r])},e.exports=o},4031:(e,t,r)=>{var n=r(5577),o=r(5798),i=r(1541),a=r(7253),s=r(8888),u=r(5738),c=Object.prototype.hasOwnProperty,l=function(e){i.initialize(this,"shadow",this,e.__backendContext),this.__hostAssociated=!1,this.__wxHost=e,this.__childrenPropsFilter=null,this.__slotCacheDirty=!1};l.prototype=Object.create(i.prototype),l.create=function(e){var t=new l(e);if(e.ownerShadowRoot&&e.ownerShadowRoot.__childrenPropsFilter)if(t.__childrenPropsFilter)for(var r in e.ownerShadowRoot.__childrenPropsFilter)t.__childrenPropsFilter[r]||(t.__childrenPropsFilter[r]=e.ownerShadowRoot.__childrenPropsFilter[r]);else t.__childrenPropsFilter=e.ownerShadowRoot.__childrenPropsFilter;return t},l.prototype.createTextNode=function(e){return s._advancedCreate(e,this,this.__backendContext)},l.prototype.createNativeNode=function(e){return a._advancedCreate(e,this,this.__backendContext)},l.prototype.cloneNativeNode=function(e){return a._advancedClone(e,this)},l.prototype.createVirtualNode=function(e){return i._advancedCreate(e,this,this.__backendContext)},l.prototype.getCompDefByTagName=function(e){var t=this.__wxHost;return c.call(t.__using,e)?t.__using[e]:c.call(t.__generics,e)?t.__generics[e]:e},l.prototype.createComponent=function(e,t,r,n){if(a.shouldBeNativeNode(e))return this.createNativeNode(e);var i=null;i=void 0===t?e:t;var s=this.__wxHost;"object"!=typeof i&&"object"!=typeof(i=this.getCompDefByTagName(i))&&(i=o._list[i]||o._list[""]);var u=function(e,t){var r={};for(var n in e){var i=e[n];"object"!=typeof i&&c.call(t.__placeholder,i)&&(i=t.__placeholder[i],c.call(t.__using,i)?i=t.__using[i]:c.call(t.__generics,i)&&(i=t.__generics[i]||o._list[""]),r[n]=i)}return r}(r,s);return r&&(r=function(e,t){var r={};for(var n in e){var i=e[n];"object"!=typeof i&&(c.call(t.__using,i)?i=t.__using[i]:c.call(t.__generics,i)&&(i=t.__generics[i]||o._list[""]),r[n]=i)}return r}(r,s)),"object"==typeof e&&(e=i.is),s.__componentOptions.randomizeTagName&&(e=function(){for(var e=Date.now(),t="exparser-",r=0;r<8;r++){var n=(e+Math.floor(26*Math.random()))%26;e=Math.floor(e/26),t+="abcdefghijklmnopqrstuvwxyz"[n]}return t}()),s.__componentOptions.writeOnly&&!i.options.allowInWriteOnly&&(i=o._list[""]),o._advancedCreate(e,i,this,this.__backendContext,r,u,n)},l.prototype.tagNameUsed=function(e){var t=this.__wxHost;return!!(c.call(t.__using,e)||c.call(t.__placeholder,e)||c.call(t.__generics,e)||c.call(t.__placeholder,e))},l.prototype.getHostNode=function(){return this.__wxHost},l.prototype.getElementById=function(e){return n._updateIdMap(this.__wxHost),this.__wxHost.__idCache[e]},l.prototype.getBackendContext=function(){return this.__backendContext?this.__backendContext:u.customContext},e.exports=l},8888:(e,t,r)=>{var n=r(5190),o=r(5738),i=r(2015),a=function(){};a.prototype=Object.create(Object.prototype,{constructor:{value:a,writable:!0,configurable:!0}});var s=a._advancedCreate=function(e,t,r){var n=new a;n.__slot="";var s=null;if(i.backendExtractedDefault||"dom"!==o.documentBackend)if("custom"===o.documentBackend){var u=void 0===r?o.customContext:r;n.__backendContext=u,u?((s=u.createElement("text","")).setText(e||""),s.textContent=e,s.__wxElement=n):n.__textContent=e}else n.__textContent=e;else(s=document.createTextNode(e||"")).__wxElement=n;return n.$$=n.__domElement=s,n.__backendExtracted=i.backendExtractedDefault,n.__subtreeObserversCount=0,n.__autoDestroy=!0,n.parentNode=null,n.ownerShadowRoot=t,n};a.create=function(e){return s(e,null)},a.prototype.setAutoDestroy=function(e){this.__autoDestroy=!!e},a.prototype.destroy=function(){"custom"===o.documentBackend&&this.__domElement&&(this.__domElement.release(),this.__domElement=null)},Object.defineProperty(a.prototype,"textContent",{get:function(){return this.__domElement?this.__domElement.textContent:this.__textContent},set:function(e){if(e=String(e),this.__domElement){if(this.__domElement.textContent===e)return;this.__domElement.textContent=e,"custom"===o.documentBackend&&this.__domElement.setText(e)}else{if(this.__textContent===e)return;this.__textContent=e}(this.__textObservers&&!this.__textObservers.empty||this.__subtreeObserversCount)&&n._callObservers(this,"__textObservers",{type:"characterData",target:this})}}),a.prototype.getBackendContext=function(){return this.__backendContext?this.__backendContext:o.customContext},e.exports=a},1541:(e,t,r)=>{var n=r(5577),o=r(5738),i=function(e,t,r){a(this,e,t,r)};i.prototype=Object.create(n.prototype);var a=i.initialize=function(e,t,r,i){e.is=t||"";var a=null,s=null;("dom"===o.documentBackend||"custom"===o.documentBackend&&(s=void 0===i?o.customContext:i))&&(a=void 0),n.initialize(e,a,r,s),e.__virtual=!0};i._advancedCreate=function(e,t,r){return new i(e,t,r)},i.create=function(e){return new i(e,null)},i.prototype.getBackendContext=function(){return this.__backendContext?this.__backendContext:o.customContext},e.exports=i},238:function(e,t){var r,n,o;!function(e){"use strict";e.Puppet="undefined"!=typeof NativeGlobal?NativeGlobal.Puppet:void 0,e.CREATE_INSTANCE=(t,i,a,s,u,c)=>{var l=globalThis.KANATA_INSTANCES=globalThis.KANATA_INSTANCES||new Map;if(l.get(t))return l.get(t);var f,p={exports:{}},h=p.exports;return f=function(e){var r,n,o,s,u,c,l,f,p,h,d,_,y,v,m,g,b,w,x,E,S,T,O,A,C,M,P,R,D;e.EVertexFormat=void 0,(r=e.EVertexFormat||(e.EVertexFormat={}))[r.FLOAT=0]="FLOAT",r[r.FLOAT2=1]="FLOAT2",r[r.FLOAT3=2]="FLOAT3",r[r.FLOAT4=3]="FLOAT4",r[r.BYTE4=4]="BYTE4",r[r.BYTE4N=5]="BYTE4N",r[r.UBYTE4=6]="UBYTE4",r[r.UBYTE4N=7]="UBYTE4N",r[r.SHORT2=8]="SHORT2",r[r.SHORT2N=9]="SHORT2N",r[r.SHORT4=10]="SHORT4",r[r.SHORT4N=11]="SHORT4N",r[r.UINT10_N2=12]="UINT10_N2",e.EVertexStep=void 0,(n=e.EVertexStep||(e.EVertexStep={}))[n.PER_VERTEX=0]="PER_VERTEX",n[n.PER_INSTANCE=1]="PER_INSTANCE",e.EIndexType=void 0,(o=e.EIndexType||(e.EIndexType={}))[o.NONE=1]="NONE",o[o.UINT16=2]="UINT16",o[o.UINT32=3]="UINT32",e.ETextureType=void 0,(s=e.ETextureType||(e.ETextureType={}))[s.D2=0]="D2",s[s.Cube=1]="Cube",s[s.D2Array=2]="D2Array",s[s.D3=3]="D3",e.ETextureFormat=void 0,(u=e.ETextureFormat||(e.ETextureFormat={}))[u.RGBA8=0]="RGBA8",u[u.SRGBA8=1]="SRGBA8",u[u.RGB10A2=2]="RGB10A2",u[u.RG8=3]="RG8",u[u.R8=4]="R8",u[u.RGBA32F=5]="RGBA32F",u[u.RGBA16F=6]="RGBA16F",u[u.RG11B10F=7]="RG11B10F",u[u.RGB8=8]="RGB8",u[u.RGB16F=9]="RGB16F",u[u.RGB32F=10]="RGB32F",u[u.Depth_Low=20]="Depth_Low",u[u.Depth_High=21]="Depth_High",u[u.Depth_Stencil=22]="Depth_Stencil",u[u.RGBA4=23]="RGBA4",u[u.RGB565=24]="RGB565",u[u.RGB5A1=25]="RGB5A1",u[u.ETC1RGB8=100]="ETC1RGB8",u[u.ETC2RGB8=110]="ETC2RGB8",u[u.ETC2RGBA8=111]="ETC2RGBA8",u[u.PVRTC2RGBV1=120]="PVRTC2RGBV1",u[u.PVRTC4RGBV1=121]="PVRTC4RGBV1",u[u.PVRTC2RGBAV1=122]="PVRTC2RGBAV1",u[u.PVRTC4RGBAV1=123]="PVRTC4RGBAV1",u[u.ASTC4x4=140]="ASTC4x4",u[u.ASTC5x5=141]="ASTC5x5",u[u.ASTC6x6=142]="ASTC6x6",u[u.ASTC8x6=143]="ASTC8x6",u[u.ASTC8x8=144]="ASTC8x8",u[u.DXT1=150]="DXT1",u[u.DXT3=151]="DXT3",u[u.DXT5=152]="DXT5",e.EWrapMode=void 0,(c=e.EWrapMode||(e.EWrapMode={}))[c.REPEAT=1]="REPEAT",c[c.CLAMP_TO_EDGE=2]="CLAMP_TO_EDGE",c[c.MIRRORED_REPEAT=3]="MIRRORED_REPEAT",e.EFilterMode=void 0,(l=e.EFilterMode||(e.EFilterMode={}))[l.NEAREST=1]="NEAREST",l[l.LINEAR=2]="LINEAR",l[l.NEAREST_MIPMAP_NEAREST=3]="NEAREST_MIPMAP_NEAREST",l[l.NEAREST_MIPMAP_LINEAR=4]="NEAREST_MIPMAP_LINEAR",l[l.LINEAR_MIPMAP_NEAREST=5]="LINEAR_MIPMAP_NEAREST",l[l.LINEAR_MIPMAP_LINEAR=6]="LINEAR_MIPMAP_LINEAR",e.EUniformType=void 0,(f=e.EUniformType||(e.EUniformType={}))[f.FLOAT=0]="FLOAT",f[f.FLOAT2=1]="FLOAT2",f[f.FLOAT3=2]="FLOAT3",f[f.FLOAT4=3]="FLOAT4",f[f.MAT2=4]="MAT2",f[f.MAT3=5]="MAT3",f[f.MAT4=6]="MAT4",f[f.SAMPLER=7]="SAMPLER",e.ECullMode=void 0,(p=e.ECullMode||(e.ECullMode={}))[p.NONE=0]="NONE",p[p.FRONT=1]="FRONT",p[p.BACK=2]="BACK",e.EFaceWinding=void 0,(h=e.EFaceWinding||(e.EFaceWinding={}))[h.CCW=1]="CCW",h[h.CW=2]="CW",e.ECompareFunc=void 0,(d=e.ECompareFunc||(e.ECompareFunc={}))[d.LESS=1]="LESS",d[d.LEQUAL=2]="LEQUAL",d[d.EQUAL=3]="EQUAL",d[d.GEQUAL=4]="GEQUAL",d[d.GREATER=5]="GREATER",d[d.NOTEQUAL=6]="NOTEQUAL",d[d.NEVER=7]="NEVER",d[d.ALWAYS=8]="ALWAYS",e.EStencilOp=void 0,(_=e.EStencilOp||(e.EStencilOp={}))[_.ZERO=0]="ZERO",_[_.KEEP=1]="KEEP",_[_.REPLACE=2]="REPLACE",_[_.INCR_WRAP=3]="INCR_WRAP",_[_.INCR=4]="INCR",_[_.DECR_WRAP=5]="DECR_WRAP",_[_.DECR=6]="DECR",_[_.INVERT=7]="INVERT",e.EBlendFactor=void 0,(y=e.EBlendFactor||(e.EBlendFactor={}))[y.ZERO=0]="ZERO",y[y.ONE=1]="ONE",y[y.SRC_COLOR=2]="SRC_COLOR",y[y.ONE_MINUS_SRC_COLOR=3]="ONE_MINUS_SRC_COLOR",y[y.SRC_ALPHA=4]="SRC_ALPHA",y[y.ONE_MINUS_SRC_ALPHA=5]="ONE_MINUS_SRC_ALPHA",y[y.DST_ALPHA=6]="DST_ALPHA",y[y.ONE_MINUS_DST_ALPHA=7]="ONE_MINUS_DST_ALPHA",y[y.DST_COLOR=8]="DST_COLOR",y[y.ONE_MINUS_DST_COLOR=9]="ONE_MINUS_DST_COLOR",y[y.SRC_ALPHA_SATURATE=10]="SRC_ALPHA_SATURATE",y[y.CONSTANT_COLOR=11]="CONSTANT_COLOR",y[y.ONE_MINUS_CONSTANT_COLOR=12]="ONE_MINUS_CONSTANT_COLOR",e.EBlendEquation=void 0,(v=e.EBlendEquation||(e.EBlendEquation={}))[v.FUNC_ADD=0]="FUNC_ADD",v[v.FUNC_SUBTRACT=1]="FUNC_SUBTRACT",v[v.FUNC_REVERSE_SUBTRACT=2]="FUNC_REVERSE_SUBTRACT",v[v.MIN=3]="MIN",v[v.MAX=4]="MAX",e.EColorMask=void 0,(m=e.EColorMask||(e.EColorMask={}))[m.NONE=16]="NONE",m[m.R=1]="R",m[m.G=2]="G",m[m.B=4]="B",m[m.A=8]="A",m[m.RGB=7]="RGB",m[m.RGBA=15]="RGBA",e.EPixelType=void 0,(g=e.EPixelType||(e.EPixelType={}))[g.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",g[g.FLOAT=5126]="FLOAT",g[g.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",g[g.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",g[g.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",e.ELoadAction=void 0,(b=e.ELoadAction||(e.ELoadAction={}))[b.CLEAR=0]="CLEAR",b[b.LOAD=1]="LOAD",b[b.DONTCARE=2]="DONTCARE",e.EDataModelType=void 0,(w=e.EDataModelType||(e.EDataModelType={}))[w.AnimationClip=1]="AnimationClip",w[w.SkeletonBoneInverse=2]="SkeletonBoneInverse",e.EMeshRenderType=void 0,(x=e.EMeshRenderType||(e.EMeshRenderType={}))[x.UnKnown=0]="UnKnown",x[x.Static3D=1]="Static3D",x[x.Skinned3D=2]="Skinned3D",x[x.UI=3]="UI",e.EPrimitiveType=void 0,(E=e.EPrimitiveType||(e.EPrimitiveType={}))[E.TRIANGLES=0]="TRIANGLES",E[E.TRIANGLE_STRIP=1]="TRIANGLE_STRIP",E[E.LINES=2]="LINES",E[E.LINE_STRIP=3]="LINE_STRIP",E[E.POINTS=4]="POINTS",E[E.ZERO=5]="ZERO",e.EShadowMode=void 0,(S=e.EShadowMode||(e.EShadowMode={}))[S.None=0]="None",S[S.OneCascade_PCF=1]="OneCascade_PCF",S[S.TwoCascade_PCF=2]="TwoCascade_PCF",S[S.FourCascade_PCF=4]="FourCascade_PCF",S[S.PCSS=5]="PCSS",e.EShadowFitMode=void 0,(T=e.EShadowFitMode||(e.EShadowFitMode={}))[T.FitFrustum=0]="FitFrustum",T[T.FitObjects=1]="FitObjects",e.EVertexLayoutUsage=void 0,(O=e.EVertexLayoutUsage||(e.EVertexLayoutUsage={}))[O.CUSTOM=0]="CUSTOM",O[O.POSITION=1]="POSITION",O[O.NORMAL=2]="NORMAL",O[O.TANGENT=3]="TANGENT",O[O.UV0=4]="UV0",O[O.UV1=5]="UV1",O[O.UV2=6]="UV2",O[O.UV3=7]="UV3",O[O.COLOR=8]="COLOR",O[O.BONEINDEX=9]="BONEINDEX",O[O.BONEWEIGHT=10]="BONEWEIGHT",e.EVertexBatchOperator=void 0,(A=e.EVertexBatchOperator||(e.EVertexBatchOperator={}))[A.MatrixMultiple=0]="MatrixMultiple",A[A.UVST=1]="UVST",e.EAnimationBlendType=void 0,(C=e.EAnimationBlendType||(e.EAnimationBlendType={}))[C.Override=0]="Override",C[C.Additive=1]="Additive",e.EUseDefaultAddedAction=void 0,(M=e.EUseDefaultAddedAction||(e.EUseDefaultAddedAction={}))[M.Ignore=0]="Ignore",M[M.Refresh=1]="Refresh",e.EUseDefaultRetainedAction=void 0,(P=e.EUseDefaultRetainedAction||(e.EUseDefaultRetainedAction={}))[P.Keep=0]="Keep",P[P.Refresh=1]="Refresh",P[P.WriteBack=2]="WriteBack",e.EUseDefaultRemovedAction=void 0,(R=e.EUseDefaultRemovedAction||(e.EUseDefaultRemovedAction={}))[R.Keep=0]="Keep",R[R.Clear=1]="Clear",R[R.WriteBack=2]="WriteBack",e.ESkinnedSkeletonFlag=void 0,(D=e.ESkinnedSkeletonFlag||(e.ESkinnedSkeletonFlag={}))[D.Use3x4Matrix=1]="Use3x4Matrix",D[D.UseTextureMatrix=2]="UseTextureMatrix";var N,I,L,F,k,U={size:21,resetFlag:0,renderPass:1,canvasWidth:2,canvasHeight:3,uniforms:4,useInstanceOrNeverTranspose:20},B=65472,j={size:14,rotation:0,position:1,scale:3,worldMatrix:5},V={size:27,dfRotationType:1,rotationType:0,rotation:1,position:5,scale:8,worldOffset:11,worldMatrix:11},z={size:2,layer:0,mixedLayerMask:1},G={size:7,active:0,dfActive:1,layer:1,boundingBallCenter:2,boundingBallRadius:5,entityId:6},W={size:147,view:0,depth:1,active:2,fov:3,aspect:4,near:5,far:6,up:7,eye:10,orthoSize:13,isProjection:14,cullingMask:15,canvasSizeY:16,targetTransform:17,viewMatrix:18,projectionMatrix:34,viewMatrixInverse:50,viewMatrix2D:66,projectionMatrix2D:82,viewMatrixInverse2D:98,manualMatrix:114,layerCullDistances:115},X={size:78,view:0,depth:1,active:2,shadowDistance:3,shadowMode:4,shadowFilterMode:5,lightDir:6,bounds:9,lightSpaceMatrices:14},H={dynamicBatch:0,skinHandle:1,castShadow:2,bindTarget:3,start:4,size:5,materialId:0,vertexBufferId:1,indexBufferId:2,startIndex:3,numIndices:4},q={size:6,useMaterialStates:0,fstencil:1,bstencil:2,blendRGBA:3,colorDepth:4,state:5},Y={size:14,renderQueue:0,effect:1,uniformBlock:2,fstencilMask:3,bstencilMask:4,blendRGBAMask:5,colorDepthMask:6,stateMask:7,fstencil:8,bstencil:9,blendRGBA:10,colorDepth:11,state:12,useInstance:13},Z={boneInverseModelId:0,boneIndices:1,perBoneIndices:1,perBoneEntityId:1,perBoneMatrixOld:16,perBoneMatrixNew:12},K={stiffness:0,elasticity:1,damping:2};e.EEventType=void 0,(N=e.EEventType||(e.EEventType={}))[N.SetRootEntity=1]="SetRootEntity",N[N.AddChild=2]="AddChild",N[N.AddChildAtIndex=3]="AddChildAtIndex",N[N.RemoveFromParent=4]="RemoveFromParent",N[N.DisperseSubTree=5]="DisperseSubTree",N[N.BindToBone=6]="BindToBone",N[N.BindToBones=7]="BindToBones",N[N.UnBindFromBone=8]="UnBindFromBone",N[N.UnBindFromBones=9]="UnBindFromBones",N[N.EntityCommandActive=10]="EntityCommandActive",N[N.EntityCommandInActive=11]="EntityCommandInActive",e.EDracoErrorCode=void 0,(I=e.EDracoErrorCode||(e.EDracoErrorCode={}))[I.kDecodeErrorNone=0]="kDecodeErrorNone",I[I.kDecodeErrorDecodeGeometryType=1]="kDecodeErrorDecodeGeometryType",I[I.kDecodeErrorDracoDecode=2]="kDecodeErrorDracoDecode",I[I.kDecodeErrorAttributeEmpty=3]="kDecodeErrorAttributeEmpty",I[I.kDecodeErrorAttributeSizeNotEqual=4]="kDecodeErrorAttributeSizeNotEqual",I[I.kDecodeErrorDecodeTypeError=5]="kDecodeErrorDecodeTypeError",e.EDracoGeometryType=void 0,(L=e.EDracoGeometryType||(e.EDracoGeometryType={}))[L.kGeometryTypeInvalid=-1]="kGeometryTypeInvalid",L[L.kGeometryTypeTriangleMesh=0]="kGeometryTypeTriangleMesh",L[L.kGeometryTypePointCloud=1]="kGeometryTypePointCloud",e.EDracoDecodeType=void 0,(F=e.EDracoDecodeType||(e.EDracoDecodeType={}))[F.kDecodeTypeCross=0]="kDecodeTypeCross",e.EDracoDataType=void 0,(k=e.EDracoDataType||(e.EDracoDataType={}))[k.DT_INVALID=0]="DT_INVALID",k[k.DT_INT8=1]="DT_INT8",k[k.DT_UINT8=2]="DT_UINT8",k[k.DT_INT16=3]="DT_INT16",k[k.DT_UINT16=4]="DT_UINT16",k[k.DT_INT32=5]="DT_INT32",k[k.DT_UINT32=6]="DT_UINT32",k[k.DT_INT64=7]="DT_INT64",k[k.DT_UINT64=8]="DT_UINT64",k[k.DT_FLOAT32=9]="DT_FLOAT32",k[k.DT_FLOAT64=10]="DT_FLOAT64",k[k.DT_BOOL=11]="DT_BOOL",k[k.DT_TYPES_COUNT=12]="DT_TYPES_COUNT";var Q=function(e,t){return Q=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},Q(e,t)};function $(e,t){function r(){this.constructor=e}Q(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}function J(e,t,r,n){return new(r||(r=Promise))((function(o,i){function a(e){try{u(n.next(e))}catch(e){i(e)}}function s(e){try{u(n.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}u((n=n.apply(e,t||[])).next())}))}function ee(e,t){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}}function te(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;var n=Array(e),o=0;for(t=0;t<r;t++)for(var i=arguments[t],a=0,s=i.length;a<s;a++,o++)n[o]=i[a];return n}!function(e){if(!e.define&&!e.require){var t={},r={};e.define=function(e,r){if(t[e]&&t[e].factory){var n=t[e],o=r.toString();n.factoryString||(n.factoryString=n.factory.toString()),o!==n.factoryString&&(t[e]={status:"MODULE_STATUS_UNLOAD",factory:r,factoryString:o})}else t[e]={status:"MODULE_STATUS_UNLOAD",factory:r}},e.require=function(n){n=n.replace(".js","");var o=t[n]||t[n+".js"];if(!o)throw new Error('module "'+n+'" is not defined');if(r[n])return r[n];var i={exports:{}},a=o.factory;return a&&a((function(t){if("."===t[0]){for(var r=t.split("/"),o=0,i="",a=0;a<r.length;a++){var s=r[a];if("."!==s&&".."!==s){i=r.slice(a).join("/");break}".."===s&&(o+=1)}var u=n.split("/");t=u.slice(0,u.length-1-o).join("/")+"/"+i}return e.require(t)}),i,i.exports),r[n]=i.exports,i.exports}}}(window);var re,ne={},oe=function(){function e(){}return Object.defineProperty(e.prototype,"className",{get:function(){return this.constructor.CLASS_NAME},enumerable:!1,configurable:!0}),e.prototype._createData=function(e,t){var r;e&&(this.data=new ArrayBuffer(e)),this.id=(r=t||this.constructor.CLASS_NAME,ne[r]||(ne[r]=1),ne[r]++)},e.CLASS_NAME="KObject",e}(),ie=function(t){function r(r){var n=t.call(this)||this;n._textureKeys=[];var o=0;return r.uniforms.forEach((function(t){var r=void 0!==t.num?t.num:1;o+=n._getLength(t.type)*r,t.type===e.EUniformType.SAMPLER&&n._textureKeys.push(t.name)})),n._createData(),n._options=r,n._size=o,n}return $(r,t),Object.defineProperty(r.prototype,"size",{get:function(){return this._size},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"layout",{get:function(){return this.__feObj._layout},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"pairs",{get:function(){return this._options.uniforms},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"textureKeys",{get:function(){return this._textureKeys},enumerable:!1,configurable:!0}),r.prototype._getLength=function(t){var r=0;switch(t){case e.EUniformType.FLOAT:r=1;break;case e.EUniformType.FLOAT2:r=2;break;case e.EUniformType.FLOAT3:r=3;break;case e.EUniformType.FLOAT4:r=4;case e.EUniformType.MAT2:r=4;break;case e.EUniformType.MAT3:r=9;break;case e.EUniformType.MAT4:r=16;break;case e.EUniformType.SAMPLER:r=1}return r},r.CLASS_NAME="UniformBlockDescriptor",r}(oe),ae=function(e){function t(){var t=e.call(this)||this;return t._extensions={},t.maxTextureUints=8,t.cache={uniforms:{}},t._debugInfo={start:!1,calls:"",cb:function(e){return console.log(e)}},t._createData(),t}return $(t,e),Object.defineProperty(t.prototype,"gl",{get:function(){return this._gl},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"width",{get:function(){return this._canvas.width},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this._canvas.height},enumerable:!1,configurable:!0}),t.prototype.getExtension=function(e){return this._extensions[e]||(this._extensions[e]=this._gl.getExtension(e)||this._gl.getExtension("MOZ_"+e)||this._gl.getExtension("WEBKIT_"+e)),this._extensions[e]},t.prototype.init=function(e){this._canvas=e,this._gl=this._canvas.getContext("webgl",{stencil:!0,antialias:i.mainScreenMSAA||!1,alpha:"Editor"===a||!0===i.alpha}),this._gl.frontFace(this._gl.CW),this.maxTextureUints=this._gl.getParameter(this._gl.MAX_TEXTURE_IMAGE_UNITS),this.etcExt=this.getExtension("WEBGL_compressed_texture_etc"),this.etc1Ext=this.getExtension("WEBGL_compressed_texture_etc1"),this.astcExt=this.getExtension("WEBGL_compressed_texture_astc"),this.pvrtcExt=this.getExtension("WEBGL_compressed_texture_pvrtc"),this.s3tcExt=this.getExtension("WEBGL_compressed_texture_s3tc"),this.depthExt=this.getExtension("WEBGL_depth_texture"),this.vaoExt=this.getExtension("OES_vertex_array_object"),this.uintIndexExt=this.getExtension("OES_element_index_uint"),this.instanceExt=this.getExtension("ANGLE_instanced_arrays"),this.srgbExt=this.getExtension("EXT_sRGB"),this.textureAnisotropicExt=this.getExtension("EXT_texture_filter_anisotropic"),this.textureFloatExt=this.getExtension("OES_texture_float"),this.textureFloatLinearExt=this.getExtension("OES_texture_float_linear"),this.textureHalfExt=this.getExtension("OES_texture_half_float"),this.textureHalfLinearExt=this.getExtension("OES_texture_half_float_linear"),this.colorBufferFloatExt=this.getExtension("WEBGL_color_buffer_float"),this.fragDepthExt=this.getExtension("EXT_frag_depth")},t.prototype.addDebugInfo=function(e){this._debugInfo.calls+=e+"\n"},t.prototype.update=function(){},t.prototype.resetCache=function(){this.cache={uniforms:{}}},t.CLASS_NAME="Renderer",t}(oe),se=new ae,ue=519,ce=34962,le=1029,fe=3042,pe=5120,he=33071,de=36064,_e=16384,ye=32769,ve=2884,me=7683,ge=34056,be=36096,we=256,xe=6402,Ee=33189,Se=34041,Te=33306,Oe=2929,Ae=772,Ce=774,Me=35048,Pe=34963,Re=514,De=5126,Ne=36160,Ie=1028,Le=32774,Fe=32779,ke=32778,Ue=518,Be=516,je=7682,Ve=34055,ze=5386,Ge=7680,We=515,Xe=513,He=9729,qe=9987,Ye=9985,Ze=1,Ke=3,Qe=6409,$e=6410,Je=33648,et=9728,tt=9986,rt=9984,nt=512,ot=0,it=517,at=1,st=32770,ut=773,ct=775,lt=771,ft=769,pt=0,ht=36161,dt=10497,_t=7681,yt=6407,vt=32855,mt=36194,gt=6408,bt=32854,wt=35678,xt=35680,Et=5122,St=770,Tt=776,Ot=768,At=35044,Ct=36128,Mt=1024,Pt=2960,Rt=33984,Dt=3553,Nt=34067,It=34070,Lt=34072,Ft=34074,kt=34069,Ut=34071,Bt=34073,jt=10240,Vt=10241,zt=10242,Gt=10243,Wt=4,Xt=5,Ht=37441,qt=5121,Yt=5125,Zt=5123,Kt=32820,Qt=33635,$t=0,Jt=37492,er=37493,tr=35840,rr=35842,nr=35841,or=35843,ir=36196,ar=32775,sr=32776,ur=35906,cr=35907,lr="undefined"!=typeof wxNativeConsole,fr="undefined"!=typeof __libVersionInfo__&&__libVersionInfo__?__libVersionInfo__.version:"unknown",pr="undefined"!=typeof __libVersionInfo__&&__libVersionInfo__?__libVersionInfo__.updateTime:"unknown";"string"==typeof fr&&(fr=fr.replace(" ","")),"string"==typeof pr&&(pr=pr.replace(" ","-")),function(e){e[e.Default=1e3]="Default"}(re||(re={}));var hr=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];lr&&(null===wxNativeConsole||void 0===wxNativeConsole||wxNativeConsole.warn.apply(wxNativeConsole,te(["[kanata]"],e))),console.warn.apply(console,te(["[kanata]"],e))},dr=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];"string"==typeof e&&(e=new Error(e)),lr&&(null===wxNativeConsole||void 0===wxNativeConsole||wxNativeConsole.error.apply(wxNativeConsole,te(["[kanata]",e],t))),console.error.apply(console,te(["[kanata]",e],t))},_r=16384,yr=32768,vr=65536,mr=393216,gr=15728640;function br(e,t){return-8&e|t<<0}function wr(e,t){return-57&e|t<<3}function xr(e,t){return-449&e|t<<6}function Er(e,t){return-3585&e|t<<9}function Sr(e,t){return-12289&e|t<<12}function Tr(e,t){return t?e|_r:-16385&e}function Or(e,t){return-393217&e|(1===t?0:t<<17)}function Ar(e,t){return-15728641&e|t-1<<20}function Cr(e,t){return t?e|yr:-32769&e}function Mr(e){return(7&e)>>0}function Pr(e){return(56&e)>>3}function Rr(e){return(448&e)>>6}function Dr(e){return(3584&e)>>9}function Nr(e){return(12288&e)>>12}function Ir(e){return!!(e&_r)}function Lr(e){return(e&mr)>>17}function Fr(e){return!!(e&yr)}function kr(e){return 1+((e&gr)>>20)}function Ur(e){return((65280&e)>>8)/255}function Br(e){return((16711680&e)>>16)/255}function jr(e){return((4278190080&e)>>24)/255}var Vr=2147483648;function zr(e,t){return t?e|Vr:2147483647&e}function Gr(e,t){return-16&e|15&t}function Wr(e){return 15&e}function Xr(e){return!!(e&Vr)}var Hr=1073741824;function qr(e,t){return t?e|Hr:-1073741825&e}function Yr(e){return!!(e&Hr)}var Zr=16776960;function Kr(e,t){return 4294963455&e|t<<8}function Qr(e,t){return 4294905855&e|t<<8<<4}function $r(e,t){return 4293984255&e|t<<8<<8}function Jr(e,t){return 4279238655&e|t<<8<<12}function en(e){return(e&Zr)>>8&15}function tn(e){return(e&Zr)>>8>>4&15}function rn(e){return(e&Zr)>>8>>8&15}function nn(e){return(e&Zr)>>8>>12&15}var on=1056964608;function an(e,t){return 4043309055&e|t<<24}function sn(e,t){return 3489660927&e|t<<24<<3}function un(e){return(e&on)>>24&7}var cn=240;function ln(e,t){return-241&e|t<<4}function fn(e){return 0!=(e&cn)}function pn(e){return(e&cn)>>4}var hn=255;function dn(e,t){return-256&e|(255&t)<<0}function _n(e){return(e&hn)>>0}var yn=65280;function vn(e,t){return-65281&e|t<<8}function mn(e){return(e&yn)>>8}var gn=983040;function bn(e,t){return-983041&e|t<<16}function wn(e){return 0!=(e&gn)}function xn(e){return(e&gn)>>16}var En=20,Sn=4293918720;function Tn(e,t){return 4279238655&e|t<<En}function On(e,t){return 4043309055&e|t<<En<<4}function An(e,t){return 268435455&e|t<<En<<8}function Cn(e){return(e&Sn)>>En&15}function Mn(e){return(e&Sn)>>En>>4&15}function Pn(e){return(e&Sn)>>En>>8&15}var Rn=255;function Dn(e,t){return-256&e|(255&t)<<0}function Nn(e){return e&Rn}var In=768;function Ln(e,t){return-769&e|t<<8}function Fn(e){return(e&In)>>8}function kn(e){return!!(e&In)}var Un,Bn,jn,Vn,zn,Gn=14336;function Wn(e,t){return-14337&e|t<<11}function Xn(e){return(e&Gn)>>11}function Hn(e,t){return!!(e&1<<t)}function qn(e,t){t[0]=-65473&e,t[1]=(e&B)>>6}function Yn(t,r){if(t===e.ETextureType.D2)return Dt;switch(r){case 0:return kt;case 1:return It;case 2:return Ut;case 3:return Lt;case 4:return Bt;case 5:return Ft;default:return ot}}var Zn=[0,0,0,Uint8Array];function Kn(t,r){void 0===r&&(r=!1);var n=se.astcExt,o=se.s3tcExt,i=se.depthExt,a=se.textureHalfExt;switch(Zn[3]=Uint8Array,t){case e.ETextureFormat.RGBA8:return Zn[0]=gt,Zn[1]=gt,Zn[2]=qt,Zn;case e.ETextureFormat.SRGBA8:return Zn[0]=cr,Zn[1]=ur,Zn[2]=qt,Zn;case e.ETextureFormat.RGBA32F:return Zn[0]=gt,Zn[1]=gt,Zn[2]=De,Zn[3]=Float32Array,Zn;case e.ETextureFormat.RGBA16F:return Zn[0]=gt,Zn[1]=gt,Zn[2]=a?a.HALF_FLOAT_OES:De,Zn[3]=Float32Array,Zn;case e.ETextureFormat.RGB32F:return Zn[0]=yt,Zn[1]=yt,Zn[2]=De,Zn[3]=Float32Array,Zn;case e.ETextureFormat.RGB16F:return Zn[0]=yt,Zn[1]=yt,Zn[2]=a?a.HALF_FLOAT_OES:De,Zn[3]=Float32Array,Zn;case e.ETextureFormat.RGB8:return Zn[0]=yt,Zn[1]=yt,Zn[2]=qt,Zn[3]=Uint8Array,Zn;case e.ETextureFormat.R8:return Zn[0]=Qe,Zn[1]=Qe,Zn[2]=qt,Zn;case e.ETextureFormat.RG8:return Zn[0]=$e,Zn[1]=$e,Zn[2]=qt,Zn;case e.ETextureFormat.Depth_Low:return r?(Zn[0]=Ee,Zn[1]=Ee):(Zn[0]=xe,Zn[1]=xe),Zn[2]=Zt,Zn;case e.ETextureFormat.Depth_High:return r?(Zn[0]=Ee,Zn[1]=Ee):(Zn[0]=xe,Zn[1]=xe),Zn[2]=Yt,Zn;case e.ETextureFormat.Depth_Stencil:return Zn[0]=Se,Zn[1]=Se,Zn[2]=i.UNSIGNED_INT_24_8_WEBGL,Zn;case e.ETextureFormat.RGBA4:return Zn[0]=bt,Zn[1]=gt,Zn[2]=qt,Zn;case e.ETextureFormat.RGB565:return Zn[0]=mt,Zn[1]=mt,Zn[2]=Qt,Zn[3]=Uint16Array,Zn;case e.ETextureFormat.RGB5A1:return Zn[0]=vt,Zn[1]=vt,Zn[2]=Kt,Zn[3]=Uint16Array,Zn;case e.ETextureFormat.ETC1RGB8:return Zn[0]=ir,Zn[1]=ir,Zn[2]=ot,Zn;case e.ETextureFormat.ETC2RGB8:return Zn[0]=Jt,Zn[1]=Jt,Zn[2]=ot,Zn;case e.ETextureFormat.ETC2RGBA8:return Zn[0]=er,Zn[1]=er,Zn[2]=ot,Zn;case e.ETextureFormat.PVRTC2RGBV1:return Zn[0]=nr,Zn[1]=nr,Zn[2]=ot,Zn;case e.ETextureFormat.PVRTC2RGBAV1:return Zn[0]=or,Zn[1]=or,Zn[2]=ot,Zn;case e.ETextureFormat.PVRTC4RGBV1:return Zn[0]=tr,Zn[1]=tr,Zn[2]=ot,Zn;case e.ETextureFormat.PVRTC4RGBAV1:return Zn[0]=rr,Zn[1]=rr,Zn[2]=ot,Zn;case e.ETextureFormat.ASTC4x4:return Zn[0]=n.COMPRESSED_RGBA_ASTC_4x4_KHR,Zn[1]=n.COMPRESSED_RGBA_ASTC_4x4_KHR,Zn[2]=ot,Zn;case e.ETextureFormat.ASTC5x5:return Zn[0]=n.COMPRESSED_RGBA_ASTC_5x5_KHR,Zn[1]=n.COMPRESSED_RGBA_ASTC_5x5_KHR,Zn[2]=ot,Zn;case e.ETextureFormat.ASTC8x6:return Zn[0]=n.COMPRESSED_RGBA_ASTC_8x6_KHR,Zn[1]=n.COMPRESSED_RGBA_ASTC_8x6_KHR,Zn[2]=ot,Zn;case e.ETextureFormat.ASTC8x8:return Zn[0]=n.COMPRESSED_RGBA_ASTC_8x8_KHR,Zn[1]=n.COMPRESSED_RGBA_ASTC_8x8_KHR,Zn[2]=ot,Zn;case e.ETextureFormat.DXT1:return Zn[0]=o.COMPRESSED_RGBA_S3TC_DXT1_EXT,Zn[1]=o.COMPRESSED_RGBA_S3TC_DXT1_EXT,Zn[2]=ot,Zn;case e.ETextureFormat.DXT3:return Zn[0]=o.COMPRESSED_RGBA_S3TC_DXT3_EXT,Zn[1]=o.COMPRESSED_RGBA_S3TC_DXT3_EXT,Zn[2]=ot,Zn;case e.ETextureFormat.DXT5:return Zn[0]=o.COMPRESSED_RGBA_S3TC_DXT5_EXT,Zn[1]=o.COMPRESSED_RGBA_S3TC_DXT5_EXT,Zn[2]=ot,Zn}return dr("Current platform does not support texture format "+e.ETextureFormat[t]),null}var Qn=((Un={})[e.ECompareFunc.LESS]=Xe,Un[e.ECompareFunc.LEQUAL]=We,Un[e.ECompareFunc.EQUAL]=Re,Un[e.ECompareFunc.GEQUAL]=Ue,Un[e.ECompareFunc.GREATER]=Be,Un[e.ECompareFunc.NOTEQUAL]=it,Un[e.ECompareFunc.NEVER]=nt,Un[e.ECompareFunc.ALWAYS]=ue,Un);function $n(e){return Qn[e]}var Jn=((Bn={})[e.EStencilOp.ZERO]=$t,Bn[e.EStencilOp.KEEP]=Ge,Bn[e.EStencilOp.REPLACE]=_t,Bn[e.EStencilOp.INCR_WRAP]=Ve,Bn[e.EStencilOp.INCR]=je,Bn[e.EStencilOp.DECR_WRAP]=ge,Bn[e.EStencilOp.DECR]=me,Bn[e.EStencilOp.INVERT]=ze,Bn);function eo(e){return Jn[e]}var to=((jn={})[e.EBlendFactor.ZERO]=$t,jn[e.EBlendFactor.ONE]=at,jn[e.EBlendFactor.SRC_COLOR]=Ot,jn[e.EBlendFactor.ONE_MINUS_SRC_COLOR]=ft,jn[e.EBlendFactor.SRC_ALPHA]=St,jn[e.EBlendFactor.ONE_MINUS_SRC_ALPHA]=lt,jn[e.EBlendFactor.DST_ALPHA]=Ae,jn[e.EBlendFactor.ONE_MINUS_DST_ALPHA]=ut,jn[e.EBlendFactor.DST_COLOR]=Ce,jn[e.EBlendFactor.ONE_MINUS_DST_COLOR]=ct,jn[e.EBlendFactor.SRC_ALPHA_SATURATE]=Tt,jn[e.EBlendFactor.CONSTANT_COLOR]=ye,jn[e.EBlendFactor.ONE_MINUS_CONSTANT_COLOR]=st,jn);function ro(e){return to[e]}var no=((Vn={})[e.EBlendEquation.FUNC_ADD]=Le,Vn[e.EBlendEquation.FUNC_SUBTRACT]=ke,Vn[e.EBlendEquation.FUNC_REVERSE_SUBTRACT]=Fe,Vn[e.EBlendEquation.MIN]=ar,Vn[e.EBlendEquation.MAX]=sr,Vn),oo=((zn={})[e.EPrimitiveType.TRIANGLES]=Wt,zn[e.EPrimitiveType.TRIANGLE_STRIP]=Xt,zn[e.EPrimitiveType.LINES]=Ze,zn[e.EPrimitiveType.LINE_STRIP]=Ke,zn[e.EPrimitiveType.POINTS]=pt,zn[e.EPrimitiveType.ZERO]=$t,zn);function io(e){return oo[e]}var ao=[[1,De,!1],[2,De,!1],[3,De,!1],[4,De,!1],[4,pe,!1],[4,pe,!0],[4,qt,!1],[4,qt,!0],[2,Et,!1],[2,Et,!0],[4,Et,!1],[4,Et,!0]];function so(t){var r=ao[t];return r||dr("Not support vertex format "+e.EVertexFormat[t]+"!"),r}function uo(e){for(var t=function(e){var t=String(e).replace(/=+$/,""),r="";if(t.length%4==1)throw new Error('"atob" failed');for(var n=0,o=void 0,i=void 0,a=0;i=t.charAt(a++);~i&&(o=n%4?64*o+i:i,n++%4)?r+=String.fromCharCode(255&o>>(-2*n&6)):0)i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(i);return r}(e),r=t.length,n=new Uint8Array(r),o=0;o<r;o++)n[o]=t.charCodeAt(o);return n.buffer}var co={inWX:"undefined"!=typeof __global,REAL_DOWNLOADER:null,LOAD:function(e){return co.REAL_DOWNLOADER.load(e)}};function lo(e){var t,r;return void 0!==(null===(t=e)||void 0===t?void 0:t.byteLength)&&!!(null===(r=e)||void 0===r?void 0:r.slice)}var fo=function(){function e(){this.isKanataImage=!0,this._srcSet=!1}return e.IS=function(e){return e&&e.isKanataImage},Object.defineProperty(e.prototype,"src",{get:function(){return this._src},set:function(e){this._srcSet?dr("cannot set Image.src twice."):"string"==typeof e?(this._src=e,this.createHttpImage(e),this._srcSet=!0):lo(e)||lo(e.buffer)?(this.createBufferImage(e),this._srcSet=!0):dr("Image.src can only be string or ArrayBuffer.")},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"type",{get:function(){return this._type},set:function(e){this._srcSet?hr("Setting Image.type after Image.src was set, type ignored (default to 'image/png')."):this._type=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"data",{get:function(){return this._image},enumerable:!1,configurable:!0}),e.prototype.imageOnload=function(){this.width=this._image.width,this.height=this._image.height,this.onload&&this.onload()},e.prototype.imageOnerror=function(e,t,r,n,o){this.onerror&&this.onerror(new Error("Image load error"))},e.prototype.createHttpImage=function(e){var t=this;if(e)if(co.inWX&&!e.startsWith("http"))co.LOAD({src:e,encoding:"binary",onLoad:function(e){t.createBufferImage(e.data)},onError:function(e){t.onerror(e)}});else{var r=document.createElement("img");this._image=r,r.crossOrigin="*",r.src=this._src,r.onload=this.imageOnload.bind(this),r.onerror=this.imageOnerror.bind(this)}},e.prototype.createBufferImage=function(e){try{if(!e)return;var t=new("undefined"!=typeof __global?__global.Blob:Blob)([e],{type:this._type}),r=URL.createObjectURL(t),n=document.createElement("img");this._image=n,n.src=r,n.onload=this.imageOnload.bind(this),n.onerror=this.imageOnerror.bind(this)}catch(e){this.onerror&&this.onerror(e)}},e}();function po(e){return e&&void 0!==e.width}var ho=function(t){function r(e,r,n,o,i,a,s,u,c){var l=t.call(this)||this;return l.type=e,l.width=r,l.height=n,l.slices=o,l.mips=i,l.format=a,l._flags=s,l.isRenderTarget?l._createRenderTexture():l._createTexture(o,u,c),l._createData(),l}return $(r,t),Object.defineProperty(r.prototype,"wrapU",{get:function(){switch(Mr(this._flags)){case e.EWrapMode.CLAMP_TO_EDGE:return he;case e.EWrapMode.MIRRORED_REPEAT:return Je;case e.EWrapMode.REPEAT:default:return dt}},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"wrapV",{get:function(){switch(Pr(this._flags)){case e.EWrapMode.CLAMP_TO_EDGE:return he;case e.EWrapMode.MIRRORED_REPEAT:return Je;case e.EWrapMode.REPEAT:default:return dt}},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"wrapW",{get:function(){switch(Rr(this._flags)){case e.EWrapMode.CLAMP_TO_EDGE:return he;case e.EWrapMode.MIRRORED_REPEAT:return Je;case e.EWrapMode.REPEAT:default:return dt}},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"magFilter",{get:function(){return Nr(this._flags)===e.EFilterMode.LINEAR?He:et},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"minFilter",{get:function(){switch(Dr(this._flags)){case e.EFilterMode.LINEAR:return He;case e.EFilterMode.LINEAR_MIPMAP_LINEAR:return qe;case e.EFilterMode.LINEAR_MIPMAP_NEAREST:return Ye;case e.EFilterMode.NEAREST:return et;case e.EFilterMode.NEAREST_MIPMAP_LINEAR:return tt;case e.EFilterMode.NEAREST_MIPMAP_NEAREST:return rt;default:return et}},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"target",{get:function(){switch(this.type){case e.ETextureType.D2:return Dt;case e.ETextureType.Cube:return Nt;default:return dr("Not support texture type "+e.ETextureType[this.type]),ot}},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"anisoLevel",{get:function(){return kr(this._flags)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"sampleCount",{get:function(){return Lr(this._flags)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"generateMipmaps",{get:function(){return Ir(this._flags)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"isRenderTarget",{get:function(){return Fr(this._flags)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"isWriteOnly",{get:function(){return!!(this._flags&vr)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"isMSAA",{get:function(){return!!(this._flags&mr)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"isMSAA2",{get:function(){return!!(131072&this._flags)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"isMSAA4",{get:function(){return!!(262144&this._flags)},enumerable:!1,configurable:!0}),r.prototype._createRenderTexture=function(){var t=se.gl,r=Kn(this.format,this.isWriteOnly);if(this.isMSAA&&dr("Not support MSAA!"),this.isWriteOnly)this.renderBuffer=t.createRenderbuffer(),t.bindRenderbuffer(t.RENDERBUFFER,this.renderBuffer),t.renderbufferStorage(t.RENDERBUFFER,r[0],this.width,this.height),t.bindRenderbuffer(ht,null);else{if(this.type!==e.ETextureType.D2)return void dr("RenderTexture only supports Texture2D!");this._createImageAndSetSampler(),t.texImage2D(this.target,0,r[0],this.width,this.height,0,r[1],r[2],null)}t.checkFramebufferStatus(t.FRAMEBUFFER)!==t.FRAMEBUFFER_COMPLETE&&dr("Framebuffer is not complete: "+t.checkFramebufferStatus(t.FRAMEBUFFER))},r.prototype._createTexture=function(t,r,n){if(this._createImageAndSetSampler(),this.mips=this.mips||1,this.type===e.ETextureType.D2)this._createSlice(0,r?r[0]:null,n);else{if(this.type!==e.ETextureType.Cube)return void hr("Not support texture type "+e.ETextureType[this.type]+" now !");for(var o=0;o<t;o+=1)this._createSlice(o,r?r[o]:null,n)}this.generateMipmaps&&1===this.mips&&se.gl.generateMipmap(this.target)},r.prototype._createSlice=function(t,r,n){if((p=r)&&fo.IS(p))po(r.data)?this.update(0,t,0,0,0,this.width,this.height,r.data):dr("Image not loaded.");else if(po(r))this.update(0,t,0,0,0,this.width,this.height,r);else if(r)if(n)for(var o=r instanceof ArrayBuffer?r:r.buffer,i=this.mips,a=0,s=0,u=0;u<i;u+=1){a=Math.max(this.width>>u,1),s=Math.max(this.height>>u,1);var c=2*(t*i+u),l=n[c],f=n[c+1];this.update(u,t,0,0,0,a,s,new Uint8Array(o,l,f))}else this.update(0,t,0,0,0,this.width,this.height,r);else this.format<e.ETextureFormat.ETC1RGB8&&this.update(0,t,0,0,0,this.width,this.height,null);var p},r.prototype._createImageAndSetSampler=function(){this.glTexture=se.gl.createTexture(),this._setSampler()},r.prototype._setSampler=function(){var t=se.gl,r=this.target;t.bindTexture(r,this.glTexture),t.texParameteri(r,Vt,this.minFilter),t.texParameteri(r,jt,this.magFilter),this.type===e.ETextureType.Cube?(t.texParameteri(r,zt,he),t.texParameteri(r,Gt,he)):(t.texParameteri(r,zt,this.wrapU),t.texParameteri(r,Gt,this.wrapV))},r.prototype.update=function(t,r,n,o,i,a,s,u){if(!this.isRenderTarget){var c=se.gl,l=Kn(this.format),f=this.format>=e.ETextureFormat.ETC1RGB8,p=this.width>>t,h=this.height>>t,d=!(0===n&&0===o&&a===p&&s===h),_=Yn(this.type,r);if(c.bindTexture(this.target,this.glTexture),po(u))void 0!==u.premultiplyAlpha&&c.pixelStorei(Ht,u.premultiplyAlpha),d?c.texSubImage2D(_,t,n,o,l[1],l[2],u):c.texImage2D(_,t,l[0],l[1],l[2],u),this.generateMipmaps&&1===this.mips&&se.gl.generateMipmap(this.target);else{var y=u?u instanceof ArrayBuffer?new l[3](u):new l[3](u.buffer):null;d?f?c.compressedTexSubImage2D(_,t,n,o,a,s,l[1],y):c.texSubImage2D(_,t,n,o,a,s,l[1],l[2],y):f?c.compressedTexImage2D(_,t,l[0],a,s,0,y):c.texImage2D(_,t,l[0],a,s,0,l[1],l[2],y)}}},r.prototype.updateTextureFlags=function(e){this._flags=e,this._setSampler()},r.CLASS_NAME="Texture",r}(oe),_o=1024,yo=function(){function t(){}return t.allocate=function(e,t,r){if(!this._ctx){var n=document.createElement("canvas");n.width=512,n.height=512,this._ctx=n.getContext("2d")}var o=this.textures[this._currentTexIdx];o||(o=this._generateNewTex());var i=this._ctx,a=String.fromCharCode(e);i.font=t;var s=i.measureText(a),u=1+~~s.width;s.actualBoundingBoxLeft;var c={code:0,tex:o.id,uv_x:0,uv_y:0,uv_w:0,uv_h:0,advance:u,bearing_x:0,bearing_y:s.actualBoundingBoxAscent||r,width:u,height:1+~~(s.actualBoundingBoxAscent?s.actualBoundingBoxAscent+s.actualBoundingBoxDescent:r)};i.clearRect(0,0,c.width+8,c.height+8),i.fillStyle="#ffffff",i.fillText(a,0,c.bearing_y);var l=this._getBlock(c.width,c.height);return l||(o=this._generateNewTex(),l=this._getBlock(c.width,c.height)),o.update(0,0,l.x,l.y,0,l.w,l.h,i.getImageData(0,0,c.width,c.height)),c.uv_x=l.x/_o,c.uv_y=l.y/_o,c.uv_w=l.w/_o,c.uv_h=l.h/_o,c},t._generateNewTex=function(){this.textures=this.textures||[],this._rootBlock=null;var t=new ho(e.ETextureType.D2,_o,_o,0,0,e.ETextureFormat.RGBA8,0);return this.textures[t.id]=t,this._currentTexIdx=t.id,t},t._getBlock=function(e,t){return this._rootBlock?this._findBlock(this._rootBlock,e,t):(this._rootBlock={w:e,h:t,x:0,y:0,right:null,down:null},this._rootBlock)},t._findBlock=function(e,t,r,n){var o,i=e.right,a=e.down;n=n||_o;var s=e.x+e.w,u=e.y+e.h,c=_o-s,l=n-u;return!i&&!a&&t<=c&&r<=e.h||!i&&t<=c&&r<=e.h?e.right={x:s,y:e.y,w:t,h:r,right:null,down:null}:!a&&t<=_o-e.x&&r<=l?e.down={x:e.x,y:u,w:t,h:r,right:null,down:null}:i&&(o=this._findBlock(i,t,r,u))||a&&(o=this._findBlock(a,t,r,n))?o:null},t.textures={},t._currentTexIdx=0,t}(),vo={Arial:"Arial"},mo={Arial:{}},go=0,bo=new Float32Array(3),wo=new Float32Array(3),xo=new Float32Array(3),Eo=new Float32Array(4),So=new Float32Array(16);So.set([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],0);var To=new Float32Array(16).fill(0);To[11]=-1;var Oo=new Float32Array(16).fill(0);Oo[15]=1;var Ao=new Float32Array([0,0,-1]),Co=new Float32Array([0,1,0]),Mo=new Float32Array([0,0,0]),Po=new Float32Array(16),Ro=new Float32Array(16);function Do(e,t){return 0===e?1===t?Math.PI/2:-Math.PI/2:e>0?Math.atan(t/e):e<0?t>0?Math.atan(t/e)+Math.PI:Math.atan(t/e)-Math.PI:0}function No(e,t){return Math.abs(e-t)<1e-6}var Io={equal:function(e,t,r,n){return No(e[t],r[n])&&No(e[t+1],r[n+1])&&No(e[t+2],r[n+2])},add:function(e,t,r,n,o,i){o[i]=e[t]+r[n],o[i+1]=e[t+1]+r[n+1],o[i+2]=e[t+2]+r[n+2]},sub:function(e,t,r,n,o,i){o[i]=e[t]-r[n],o[i+1]=e[t+1]-r[n+1],o[i+2]=e[t+2]-r[n+2]},mul:function(e,t,r,n,o,i){o[i]=e[t]*r[n],o[i+1]=e[t+1]*r[n+1],o[i+2]=e[t+2]*r[n+2]},length:function(e,t){var r=e[t],n=e[t+1],o=e[t+2];return Math.sqrt(r*r+n*n+o*o)},normalize:function(e,t,r,n){var o=Io.length(e,t);0===o?(r[n]=0,r[n+1]=0,r[n+2]=0):(r[n]=e[t]/o,r[n+1]=e[t+1]/o,r[n+2]=e[t+2]/o)},scale:function(e,t,r,n,o){n[o]=e[t]*r,n[o+1]=e[t+1]*r,n[o+2]=e[t+2]*r},lerp:function(e,t,r,n,o,i,a){var s=1-o;i[a]=e[t]*s+r[n]*o,i[a+1]=e[t+1]*s+r[n+1]*o,i[a+2]=e[t+2]*s+r[n+2]*o},dot:function(e,t,r,n){return e[t]*r[n]+e[t+1]*r[n+1]+e[t+2]*r[n+2]},isZero:function(e,t){return No(e[t],0)&&No(e[t+1],0)&&No(e[t+2],0)},cross:function(e,t,r,n,o,i){var a=e[t],s=e[t+1],u=e[t+2],c=r[n],l=r[n+1],f=r[n+2];o[i]=s*f-l*u,o[i+1]=u*c-f*a,o[i+2]=a*l-c*s},distance:function(e,t,r,n){var o=e[t]-r[n],i=e[t+1]-r[n+1],a=e[t+2]-r[n+2];return Math.sqrt(o*o+i*i+a*a)},angleTo:function(e,t,r,n,o,i){var a=bo;Io.sub(r,n,e,t,a,0),Io.normalize(a,0,a,0),o[i]=Math.asin(a[1]),o[i+1]=Do(-a[2],-a[0]),o[i+2]=0},copy:function(e,t,r,n){r[n+0]=e[t+0],r[n+1]=e[t+1],r[n+2]=e[t+2]}},Lo=function(e,t,r,n,o){n[o]=e[t]*r,n[o+1]=e[t+1]*r,n[o+2]=e[t+2]*r,n[o+3]=e[t+3]*r},Fo=function(e,t,r,n){return e[t]*r[n]+e[t+1]*r[n+1]+e[t+2]*r[n+2]+e[t+3]*r[n+3]},ko=function(e,t,r,n){4===e.length?r.set(e,n):(r[n+0]=e[t+0],r[n+1]=e[t+1],r[n+2]=e[t+2],r[n+3]=e[t+3])},Uo=function(e,t){var r=e[t],n=e[t+1],o=e[t+2],i=e[t+3];return Math.sqrt(r*r+n*n+o*o+i*i)},Bo={multiply:function(e,t,r,n,o,i){var a=e[t+0],s=e[t+1],u=e[t+2],c=e[t+3],l=r[n+0],f=r[n+1],p=r[n+2],h=r[n+3],d=s*p-u*f,_=u*l-a*p,y=a*f-s*l,v=a*l+s*f+u*p;o[i]=a*h+l*c+d,o[i+1]=s*h+f*c+_,o[i+2]=u*h+p*c+y,o[i+3]=c*h-v},invert:function(e,t,r,n){var o=e[t+0],i=e[t+1],a=e[t+2],s=e[t+3],u=o*o+i*i+a*a+s*s,c=u?1/u:0;r[n]=-o*c,r[n+1]=-i*c,r[n+2]=-a*c,r[n+3]=s*c},toMatrix4:function(e,t,r,n){var o=e[t],i=e[t+1],a=e[t+2],s=e[t+3],u=o+o,c=i+i,l=a+a,f=o*u,p=i*u,h=i*c,d=a*u,_=a*c,y=a*l,v=s*u,m=s*c,g=s*l;r.set(So,n),r[n]=1-h-y,r[n+1]=p+g,r[n+2]=d-m,r[n+4]=p-g,r[n+5]=1-f-y,r[n+6]=_+v,r[n+8]=d+m,r[n+9]=_-v,r[n+10]=1-f-h},fromMatrix4:function(e,t,r,n){var o,i,a=e,s=t,u=Eo,c=a[s+0]+a[s+5]+a[s+10];c>0?(o=Math.sqrt(c+1),u[3]=.5*o,o=.5/o,u[0]=(a[s+6]-a[s+9])*o,u[1]=(a[s+8]-a[s+2])*o,u[2]=(a[s+1]-a[s+4])*o):a[s+0]>=a[s+5]&&a[s+0]>=a[s+10]?(i=.5/(o=Math.sqrt(1+a[s+0]-a[s+5]-a[s+10])),u[0]=.5*o,u[1]=(a[s+1]+a[s+4])*i,u[2]=(a[s+2]+a[s+8])*i,u[3]=(a[s+6]-a[s+9])*i):a[s+5]>a[s+10]?(i=.5/(o=Math.sqrt(1+a[s+5]-a[s+0]-a[s+10])),u[0]=(a[s+4]+a[s+1])*i,u[1]=.5*o,u[2]=(a[s+9]+a[s+6])*i,u[3]=(a[s+8]-a[s+2])*i):(i=.5/(o=Math.sqrt(1+a[s+10]-a[s+0]-a[s+5])),u[0]=(a[s+8]+a[s+2])*i,u[1]=(a[s+9]+a[s+6])*i,u[2]=.5*o,u[3]=(a[s+1]-a[s+4])*i),r.set(u,n)},fromEulerAngles:function(e,t,r,n){Bo.fromYawRawPitch(e[t+1],e[t],e[t+2],r,n)},fromYawRawPitch:function(e,t,r,n,o){var i=.5*r,a=.5*t,s=.5*e,u=Math.sin(i),c=Math.cos(i),l=Math.sin(a),f=Math.cos(a),p=Math.sin(s),h=Math.cos(s);n[o]=h*l*c+p*f*u,n[o+1]=p*f*c-h*l*u,n[o+2]=h*f*u-p*l*c,n[o+3]=h*f*c+p*l*u},toEulerAngles:function(e,t,r,n){Bo.toYawRawPitch(e,t,r,n)},toYawRawPitch:function(e,t,r,n){Bo.transformDirection(e,t,Ao,0,bo,0),Bo.transformDirection(e,t,Co,0,wo,0);var o=wo;Io.angleTo(Mo,0,bo,0,xo,0);var i=xo;i[0]===Math.PI/2?(i[1]=Do(o[2],o[0]),i[2]=0):i[0]===-Math.PI/2?(i[1]=Do(-o[2],-o[0]),i[2]=0):(Yo.yRotation(-i[1],Po,0),Yo.xRotation(-i[0],Ro,0),Yo.transformPoint(Po,0,wo,0,wo,0),Yo.transformPoint(Ro,0,wo,0,wo,0),i[2]=Do(o[1],-o[0])),i[1]<=-Math.PI&&(i[1]=Math.PI),i[2]<=-Math.PI&&(i[2]=Math.PI),i[1]>=Math.PI&&i[2]>=Math.PI&&(i[1]=0,i[2]=0,i[0]=Math.PI-i[0]),r.set(i,n)},slerp:function(e,t,r,n,o,i,a){var s,u,c,l,f,p=e[t+0],h=e[t+1],d=e[t+2],_=e[t+3],y=r[n+0],v=r[n+1],m=r[n+2],g=r[n+3];return(u=p*y+h*v+d*m+_*g)<0&&(u=-u,y=-y,v=-v,m=-m,g=-g),1-u>1e-6?(s=Math.acos(u),c=Math.sin(s),l=Math.sin((1-o)*s)/c,f=Math.sin(o*s)/c):(l=1-o,f=o),i[a]=l*p+f*y,i[a+1]=l*h+f*v,i[a+2]=l*d+f*m,i[a+3]=l*_+f*g,i},slerpArray:function(e,t,r){var n,o,i,a,s,u=e[0],c=e[1],l=e[2],f=e[3],p=t[0],h=t[1],d=t[2],_=t[3];(o=u*p+c*h+l*d+f*_)<0&&(o=-o,p=-p,h=-h,d=-d,_=-_),1-o>1e-6?(n=Math.acos(o),i=Math.sin(n),a=Math.sin((1-r)*n)/i,s=Math.sin(r*n)/i):(a=1-r,s=r);var y=[0,0,0,1];return y[0]=a*u+s*p,y[1]=a*c+s*h,y[2]=a*l+s*d,y[3]=a*f+s*_,y},transformDirection:function(e,t,r,n,o,i){var a=r[n],s=r[n+1],u=r[n+2],c=e[t],l=e[t+1],f=e[t+2],p=e[t+3],h=p*a+l*u-f*s,d=p*s+f*a-c*u,_=p*u+c*s-l*a,y=-c*a-l*s-f*u;o[i]=h*p+y*-c+d*-f-_*-l,o[i+1]=d*p+y*-l+_*-c-h*-f,o[i+2]=_*p+y*-f+h*-l-d*-c},normalize:function(e,t,r,n){var o=e[t+3],i=Math.sqrt(o*o+Io.dot(e,t,e,t));Lo(e,t,1/i,r,n)}},jo=function(e,t,r,n){var o=e[t+0],i=e[t+1],a=e[t+2],s=e[t+3];r[n+0]=o,r[n+1]=a,r[n+2]=i,r[n+3]=s},Vo=function(e,t,r,n){var o=e[t+0],i=e[t+1],a=e[t+2],s=e[t+3],u=e[t+4],c=e[t+5],l=e[t+6],f=e[t+7],p=e[t+8];r[n+0]=o,r[n+1]=s,r[n+2]=l,r[n+3]=i,r[n+4]=u,r[n+5]=f,r[n+6]=a,r[n+7]=c,r[n+8]=p},zo=function(e,t,r,n,o,i){var a=e[t+0],s=e[t+1],u=e[t+2],c=e[t+3+0],l=e[t+3+1],f=e[t+3+2],p=e[t+6+0],h=e[t+6+1],d=e[t+6+2];9===e.length?o.set(e,i):o===e&&i===t||(o[i]=a,o[i+1]=s,o[i+2]=u,o[i+3]=c,o[i+4]=l,o[i+5]=f),o[i+6]=a*r+c*n+p,o[i+7]=s*r+l*n+h,o[i+8]=u*r+f*n+d},Go=function(e,t,r,n,o,i){o[i+0]=r*e[t+0],o[i+1]=r*e[t+1],o[i+3]=n*e[t+3],o[i+4]=n*e[t+4],o===e&&i===t||(o[i+6]=e[t+6],o[i+7]=e[t+7],o[i+8]=e[t+8])},Wo=function(e,t,r,n,o){var i=e[t+0],a=e[t+1],s=e[t+2],u=e[t+3],c=e[t+4],l=e[t+5],f=Math.cos(r),p=Math.sin(r);n[o+0]=f*i-p*u,n[o+1]=f*a-p*c,n[o+2]=f*s-p*l,n[o+3]=f*u+p*i,n[o+4]=f*c+p*a,n[o+5]=f*l+p*s,n===e&&o===t||(n[o+6]=e[t+6],n[o+7]=e[t+7],n[o+8]=e[t+8])},Xo=function(e,t,r,n,o,i){var a=e[t+0+0],s=e[t+0+1],u=e[t+0+2],c=e[t+3+0],l=e[t+3+1],f=e[t+3+2],p=e[t+6+0],h=e[t+6+1],d=e[t+6+2],_=r[n+0+0],y=r[n+0+1],v=r[n+0+2],m=r[n+3+0],g=r[n+3+1],b=r[n+3+2],w=r[n+6+0],x=r[n+6+1],E=r[n+6+2];o[i+0]=_*a+y*c+v*p,o[i+1]=_*s+y*l+v*h,o[i+2]=_*u+y*f+v*d,o[i+3]=m*a+g*c+b*p,o[i+4]=m*s+g*l+b*h,o[i+5]=m*u+g*f+b*d,o[i+6]=w*a+x*c+E*p,o[i+7]=w*s+x*l+E*h,o[i+8]=w*u+x*f+E*d},Ho=function(e,t,r,n,o,i){var a=r[n+0],s=r[n+1],u=a*e[t+0+2]+s*e[t+3+2]+e[t+6+2];o[i+0]=(a*e[t+0+0]+s*e[t+3+0]+e[t+6+0])/u,o[i+1]=(a*e[t+0+1]+s*e[t+3+1]+e[t+6+1])/u},qo=function(e,t,r,n){if(9===e.length)r.set(e,n);else for(var o=0;o<9;o++)r[n+o]=e[t+o]},Yo={lookAt:function(e,t,r,n,o,i,a,s){var u=bo,c=wo,l=xo;Io.sub(r,n,e,t,u,0),Io.normalize(u,0,u,0),Io.cross(o,i,u,0,c,0),Io.normalize(c,0,c,0),Io.cross(u,0,c,0,l,0),a.set(So,s),a[s]=c[0],a[s+1]=l[0],a[s+2]=u[0],a[s+4]=c[1],a[s+5]=l[1],a[s+6]=u[1],a[s+8]=c[2],a[s+9]=l[2],a[s+10]=u[2],a[s+12]=-Io.dot(c,0,r,n),a[s+13]=-Io.dot(l,0,r,n),a[s+14]=-Io.dot(u,0,r,n)},perspective:function(e,t,r,n,o,i){var a=1/Math.tan(e/2),s=1/(r-n);o.set(To,i),o[i]=a/t,o[i+5]=a,o[i+10]=(r+n)*s,o[i+11]=-1,o[i+14]=2*n*r*s},orthographic:function(e,t,r,n,o,i,a,s){a.set(Oo,s),a[s]=2/(t-e),a[s+5]=2/(n-r),a[s+10]=2/(o-i),a[s+12]=(e+t)/(e-t),a[s+13]=(r+n)/(r-n),a[s+14]=(o+i)/(o-i)},xRotation:function(e,t,r){var n=Math.cos(e),o=Math.sin(e);t.set(So,r),t[r+5]=n,t[r+6]=o,t[r+9]=-o,t[r+10]=n},yRotation:function(e,t,r){var n=Math.cos(e),o=Math.sin(e);t.set(So,r),t[r]=n,t[r+2]=-o,t[r+8]=o,t[r+10]=n},zRotation:function(e,t,r){var n=Math.cos(e),o=Math.sin(e);t.set(So,r),t[r]=n,t[r+1]=o,t[r+4]=-o,t[r+5]=n},axisRotation:function(e,t,r,n,o){var i=e[t],a=e[t+1],s=e[t+2],u=Math.sqrt(i*i+a*a+s*s),c=(i/=u)*i,l=(a/=u)*a,f=(s/=u)*s,p=Math.cos(r),h=Math.sin(r),d=1-p;return n.set(So,o),n[o]=c+(1-c)*p,n[o+1]=i*a*d+s*h,n[o+2]=i*s*d-a*h,n[o+4]=i*a*d-s*h,n[o+5]=l+(1-l)*p,n[o+6]=a*s*d+i*h,n[o+8]=i*s*d+a*h,n[o+9]=a*s*d-i*h,n[o+10]=f+(1-f)*p,n},composeTRS:function(e,t,r,n,o,i,a,s){16===r.length?a.set(r,s):(a[s+3]=0,a[s+7]=0,a[s+11]=0,a[s+15]=0);var u=o[i],c=o[i+1],l=o[i+2];a[s+0]=r[n+0]*u,a[s+1]=r[n+1]*u,a[s+2]=r[n+2]*u,a[s+4]=r[n+4]*c,a[s+5]=r[n+5]*c,a[s+6]=r[n+6]*c,a[s+8]=r[n+8]*l,a[s+9]=r[n+9]*l,a[s+10]=r[n+10]*l,a[s+12]=e[t],a[s+13]=e[t+1],a[s+14]=e[t+2]},composeTQS:function(e,t,r,n,o,i,a,s){Bo.toMatrix4(r,n,Po,0),Yo.composeTRS(e,t,Po,0,o,i,a,s)},translate:function(e,t,r,n,o,i,a){var s=e[t+0],u=e[t+1],c=e[t+2],l=e[t+3],f=e[t+4+0],p=e[t+4+1],h=e[t+4+2],d=e[t+4+3],_=e[t+8+0],y=e[t+8+1],v=e[t+8+2],m=e[t+8+3],g=e[t+12+0],b=e[t+12+1],w=e[t+12+2],x=e[t+12+3];16===e.length?i.set(e,a):i===e&&a===t||(i[a]=s,i[a+1]=u,i[a+2]=c,i[a+3]=l,i[a+4]=f,i[a+5]=p,i[a+6]=h,i[a+7]=d,i[a+8]=_,i[a+9]=y,i[a+10]=v,i[a+11]=m),i[a+12]=s*r+f*n+_*o+g,i[a+13]=u*r+p*n+y*o+b,i[a+14]=c*r+h*n+v*o+w,i[a+15]=l*r+d*n+m*o+x},scale:function(e,t,r,n,o,i,a){i[a+0]=r*e[t+0+0],i[a+1]=r*e[t+0+1],i[a+2]=r*e[t+0+2],i[a+3]=r*e[t+0+3],i[a+4]=n*e[t+4+0],i[a+5]=n*e[t+4+1],i[a+6]=n*e[t+4+2],i[a+7]=n*e[t+4+3],i[a+8]=o*e[t+8+0],i[a+9]=o*e[t+8+1],i[a+10]=o*e[t+8+2],i[a+11]=o*e[t+8+3],i===e&&a===t||(i[a+12]=e[t+12],i[a+13]=e[t+13],i[a+14]=e[t+14],i[a+15]=e[t+15])},xRotate:function(e,t,r,n,o){16===e.length?n.set(e,o):n===e&&o===t||(n[o+0]=e[t+0],n[o+1]=e[t+1],n[o+2]=e[t+2],n[o+3]=e[t+3],n[o+12]=e[t+12],n[o+13]=e[t+13],n[o+14]=e[t+14],n[o+15]=e[t+15]);var i=e[t+4],a=e[t+5],s=e[t+6],u=e[t+7],c=e[t+8],l=e[t+9],f=e[t+10],p=e[t+11],h=Math.cos(r),d=Math.sin(r);n[o+4]=h*i+d*c,n[o+5]=h*a+d*l,n[o+6]=h*s+d*f,n[o+7]=h*u+d*p,n[o+8]=h*c-d*i,n[o+9]=h*l-d*a,n[o+10]=h*f-d*s,n[o+11]=h*p-d*u},yRotate:function(e,t,r,n,o){16===e.length?n.set(e,o):n===e&&o===t||(n[o+4]=e[t+4],n[o+5]=e[t+5],n[o+6]=e[t+6],n[o+7]=e[t+7],n[o+12]=e[t+12],n[o+13]=e[t+13],n[o+14]=e[t+14],n[o+15]=e[t+15]);var i=e[t+0+0],a=e[t+0+1],s=e[t+0+2],u=e[t+0+3],c=e[t+8+0],l=e[t+8+1],f=e[t+8+2],p=e[t+8+3],h=Math.cos(r),d=Math.sin(r);n[o+0]=h*i-d*c,n[o+1]=h*a-d*l,n[o+2]=h*s-d*f,n[o+3]=h*u-d*p,n[o+8]=h*c+d*i,n[o+9]=h*l+d*a,n[o+10]=h*f+d*s,n[o+11]=h*p+d*u},zRotate:function(e,t,r,n,o){16===e.length?n.set(e,o):n===e&&o===t||(n[o+8]=e[t+8],n[o+9]=e[t+9],n[o+10]=e[t+10],n[o+11]=e[t+11],n[o+12]=e[t+12],n[o+13]=e[t+13],n[o+14]=e[t+14],n[o+15]=e[t+15]);var i=e[t+0+0],a=e[t+0+1],s=e[t+0+2],u=e[t+0+3],c=e[t+4+0],l=e[t+4+1],f=e[t+4+2],p=e[t+4+3],h=Math.cos(r),d=Math.sin(r);n[o+0]=h*i+d*c,n[o+1]=h*a+d*l,n[o+2]=h*s+d*f,n[o+3]=h*u+d*p,n[o+4]=h*c-d*i,n[o+5]=h*l-d*a,n[o+6]=h*f-d*s,n[o+7]=h*p-d*u},axisRotate:function(e,t,r,n,o,i,a){var s=r[n],u=r[n+1],c=r[n+2],l=Math.sqrt(s*s+u*u+c*c),f=(s/=l)*s,p=(u/=l)*u,h=(c/=l)*c,d=Math.cos(o),_=Math.sin(o),y=1-d,v=f+(1-f)*d,m=s*u*y+c*_,g=s*c*y-u*_,b=s*u*y-c*_,w=p+(1-p)*d,x=u*c*y+s*_,E=s*c*y+u*_,S=u*c*y-s*_,T=h+(1-h)*d,O=e[t+0],A=e[t+1],C=e[t+2],M=e[t+3],P=e[t+4],R=e[t+5],D=e[t+6],N=e[t+7],I=e[t+8],L=e[t+9],F=e[t+10],k=e[t+11];i[a+0]=v*O+m*P+g*I,i[a+1]=v*A+m*R+g*L,i[a+2]=v*C+m*D+g*F,i[a+3]=v*M+m*N+g*k,i[a+4]=b*O+w*P+x*I,i[a+5]=b*A+w*R+x*L,i[a+6]=b*C+w*D+x*F,i[a+7]=b*M+w*N+x*k,i[a+8]=E*O+S*P+T*I,i[a+9]=E*A+S*R+T*L,i[a+10]=E*C+S*D+T*F,i[a+11]=E*M+S*N+T*k,i===e&&a===t||(i[a+12]=e[t+12],i[a+13]=e[t+13],i[a+14]=e[t+14],i[a+15]=e[t+15])},multiply:function(e,t,r,n,o,i){var a=r[n+0+0],s=r[n+0+1],u=r[n+0+2],c=r[n+0+3],l=r[n+4+0],f=r[n+4+1],p=r[n+4+2],h=r[n+4+3],d=r[n+8+0],_=r[n+8+1],y=r[n+8+2],v=r[n+8+3],m=r[n+12+0],g=r[n+12+1],b=r[n+12+2],w=r[n+12+3],x=e[t+0+0],E=e[t+0+1],S=e[t+0+2],T=e[t+0+3],O=e[t+4+0],A=e[t+4+1],C=e[t+4+2],M=e[t+4+3],P=e[t+8+0],R=e[t+8+1],D=e[t+8+2],N=e[t+8+3],I=e[t+12+0],L=e[t+12+1],F=e[t+12+2],k=e[t+12+3];o[i+0]=a*x+s*O+u*P+c*I,o[i+1]=a*E+s*A+u*R+c*L,o[i+2]=a*S+s*C+u*D+c*F,o[i+3]=a*T+s*M+u*N+c*k,o[i+4]=l*x+f*O+p*P+h*I,o[i+5]=l*E+f*A+p*R+h*L,o[i+6]=l*S+f*C+p*D+h*F,o[i+7]=l*T+f*M+p*N+h*k,o[i+8]=d*x+_*O+y*P+v*I,o[i+9]=d*E+_*A+y*R+v*L,o[i+10]=d*S+_*C+y*D+v*F,o[i+11]=d*T+_*M+y*N+v*k,o[i+12]=m*x+g*O+b*P+w*I,o[i+13]=m*E+g*A+b*R+w*L,o[i+14]=m*S+g*C+b*D+w*F,o[i+15]=m*T+g*M+b*N+w*k},transformVector:function(e,t,r,n,o,i){var a=r[n+0],s=r[n+1],u=r[n+2],c=r[n+3];o[i+0]=a*e[t+0+0]+s*e[t+4+0]+u*e[t+8+0]+c*e[t+12+0],o[i+1]=a*e[t+0+1]+s*e[t+4+1]+u*e[t+8+1]+c*e[t+12+1],o[i+2]=a*e[t+0+2]+s*e[t+4+2]+u*e[t+8+2]+c*e[t+12+2],o[i+3]=a*e[t+0+3]+s*e[t+4+3]+u*e[t+8+3]+c*e[t+12+3]},transformDirection:function(e,t,r,n,o,i){var a=r[n+0],s=r[n+1],u=r[n+2];o[i+0]=a*e[t+0+0]+s*e[t+4+0]+u*e[t+8+0],o[i+1]=a*e[t+0+1]+s*e[t+4+1]+u*e[t+8+1],o[i+2]=a*e[t+0+2]+s*e[t+4+2]+u*e[t+8+2]},transformPoint:function(e,t,r,n,o,i){var a=r[n+0],s=r[n+1],u=r[n+2],c=a*e[t+0+3]+s*e[t+4+3]+u*e[t+8+3]+e[t+12+3];o[i+0]=(a*e[t+0+0]+s*e[t+4+0]+u*e[t+8+0]+e[t+12+0])/c,o[i+1]=(a*e[t+0+1]+s*e[t+4+1]+u*e[t+8+1]+e[t+12+1])/c,o[i+2]=(a*e[t+0+2]+s*e[t+4+2]+u*e[t+8+2]+e[t+12+2])/c},decomposeTransRotMatScale:function(e,t,r,n,o,i,a,s){r[n+0]=e[t+12],r[n+1]=e[t+13],r[n+2]=e[t+14];var u=e[t+0],c=e[t+1],l=e[t+2],f=e[t+4],p=e[t+5],h=e[t+6],d=e[t+8],_=e[t+9],y=e[t+10],v=a[s+0]=Math.sqrt(u*u+c*c+l*l),m=a[s+1]=Math.sqrt(f*f+p*p+h*h),g=a[s+2]=Math.sqrt(d*d+_*_+y*y);if(o.set(So,i),0===v||0===m||0===g)return!1;var b=bo;b[0]=d/g,b[1]=_/g,b[2]=y/g;var w=wo;w[0]=u/v,w[1]=c/v,w[2]=l/v;var x=xo;Io.cross(b,0,w,0,x,0);var E=w;return Io.cross(x,0,b,0,E,0),o.set(E,i),o.set(x,i+4),o.set(b,i+8),o[i+0]*u+o[i+1]*c+o[i+2]*l<0&&(a[s+0]=-v),o[i+4]*f+o[i+5]*p+o[i+6]*h<0&&(a[s+1]=-m),o[i+8]*d+o[i+9]*_+o[i+10]*y<0&&(a[s+2]=-g),!0},decomposeTransQuatScale:function(e,t,r,n,o,i,a,s){return Yo.decomposeTransRotMatScale(e,t,r,n,Po,0,a,s),Bo.fromMatrix4(Po,0,o,i),!0},inverse:function(e,t,r,n){var o=e[t+0+0],i=e[t+0+1],a=e[t+0+2],s=e[t+0+3],u=e[t+4+0],c=e[t+4+1],l=e[t+4+2],f=e[t+4+3],p=e[t+8+0],h=e[t+8+1],d=e[t+8+2],_=e[t+8+3],y=e[t+12+0],v=e[t+12+1],m=e[t+12+2],g=e[t+12+3],b=d*g,w=m*_,x=l*g,E=m*f,S=l*_,T=d*f,O=a*g,A=m*s,C=a*_,M=d*s,P=a*f,R=l*s,D=p*v,N=y*h,I=u*v,L=y*c,F=u*h,k=p*c,U=o*v,B=y*i,j=o*h,V=p*i,z=o*c,G=u*i,W=b*c+E*h+S*v-(w*c+x*h+T*v),X=w*i+O*h+M*v-(b*i+A*h+C*v),H=x*i+A*c+P*v-(E*i+O*c+R*v),q=T*i+C*c+R*h-(S*i+M*c+P*h),Y=1/(o*W+u*X+p*H+y*q);r[n+0]=Y*W,r[n+1]=Y*X,r[n+2]=Y*H,r[n+3]=Y*q,r[n+4]=Y*(w*u+x*p+T*y-(b*u+E*p+S*y)),r[n+5]=Y*(b*o+A*p+C*y-(w*o+O*p+M*y)),r[n+6]=Y*(E*o+O*u+R*y-(x*o+A*u+P*y)),r[n+7]=Y*(S*o+M*u+P*p-(T*o+C*u+R*p)),r[n+8]=Y*(D*f+L*_+F*g-(N*f+I*_+k*g)),r[n+9]=Y*(N*s+U*_+V*g-(D*s+B*_+j*g)),r[n+10]=Y*(I*s+B*f+z*g-(L*s+U*f+G*g)),r[n+11]=Y*(k*s+j*f+G*_-(F*s+V*f+z*_)),r[n+12]=Y*(I*d+k*m+N*l-(F*m+D*l+L*d)),r[n+13]=Y*(j*m+D*a+B*d-(U*d+V*m+N*a)),r[n+14]=Y*(U*l+G*m+L*a-(z*m+I*a+B*l)),r[n+15]=Y*(z*d+F*a+V*l-(j*l+G*d+k*a))},transpose:function(e,t,r,n){var o=e[t+0],i=e[t+1],a=e[t+2],s=e[t+3],u=e[t+4],c=e[t+5],l=e[t+6],f=e[t+7],p=e[t+8],h=e[t+9],d=e[t+10],_=e[t+11],y=e[t+12],v=e[t+13],m=e[t+14],g=e[t+15];r[n+0]=o,r[n+1]=u,r[n+2]=p,r[n+3]=y,r[n+4]=i,r[n+5]=c,r[n+6]=h,r[n+7]=v,r[n+8]=a,r[n+9]=l,r[n+10]=d,r[n+11]=m,r[n+12]=s,r[n+13]=f,r[n+14]=_,r[n+15]=g},composeRST3toRST4:function(e,t,r,n){r.set(So,n),r[n+0]=e[t+0],r[n+1]=e[t+1],r[n+4]=e[t+3],r[n+5]=e[t+4],r[n+10]=1,r[n+12]=e[t+6],r[n+13]=e[t+7],r[n+15]=e[t+8]},copy:function(e,t,r,n){if(16===e.length)r.set(e,n);else for(var o=0;o<16;o++)r[n+o]=e[t+o]}},Zo=function(){function e(e){this._macroDirty={},this._macroKeys={},this._macros=Object.assign({},e)}return e.prototype.changeMacros=function(e,t){for(var r in t?this._macros=Object.assign({},e):Object.assign(this._macros,e),this._macroDirty)this._macroDirty[r]=!0},e.prototype.getMarcos=function(){return this._macros},e.prototype.getMacroKey=function(e,t){var r=e.id<<16|t;return(void 0===this._macroKeys[r]||this._macroDirty[r]||ni.virtualMacrosDirty)&&(this._macroKeys[r]=e.getMacroKey(t,this._macros),this._macroDirty[r]=!1),this._macroKeys[r]},e}(),Ko=function(t){function r(e){var r=t.call(this)||this;return r._createData(),r.actions=e.passAction,r.viewport=e.viewport,r.scissor=e.scissor,r}return $(r,t),r.prototype.bind=function(){var e=se.gl;se.cache;var t=this,r=t.viewport;t.scissor,t.actions;var n=ni.renderPass,o=ni.renderToScreen;if(o)e.bindFramebuffer(Ne,null);else{if(!n.isValid)return void dr("Render pass "+this.id+" is not valid!");n.bind()}var i=o?ni:n.color.texture,a=i.width,s=i.height;this._width=a,this._height=s;var u=r.x,c=r.y,l=r.w,f=r.h;e.viewport(u*a,c*s,l*a,f*s)},r.prototype.clear=function(){var t=se.gl,r=se.cache,n=this.actions,o=0,i=n.colorAction,a=n.clearColor,s=n.depthAction,u=n.clearDepth,c=n.stencilAction,l=n.clearStencil;i===e.ELoadAction.CLEAR&&(15!==r.colorWriteMask&&(r.colorWriteMask=15,t.colorMask(!0,!0,!0,!0)),t.clearColor.apply(t,a),o|=_e),s===e.ELoadAction.CLEAR&&(r.enableDepthWrite||(r.enableDepthWrite=!0,t.depthMask(!0)),t.clearDepth(u),o|=we),c===e.ELoadAction.CLEAR&&(r.stencilWriteMask||(r.stencilWriteMask=255,t.stencilMask(r.stencilWriteMask)),t.clearStencil(l),o|=Mt),t.clear(o)},r.prototype.changeViewportScaleFactor=function(e){var t=this.viewport,r=t.x,n=t.y,o=t.w,i=t.h,a=this._width,s=this._height;se.gl.viewport(r+o*e.x*a,n+o*e.y*s,o*e.w*a,i*e.h*s)},r.prototype.submit=function(){},r.prototype.updateViewRect=function(e){this.viewport=e},r.prototype.updateViewScissor=function(e){this.scissor=e},r}(oe),Qo=function(e){function t(t,r,n){var o=e.call(this)||this;o._vaos={};var i=se.gl;return o.glBuffer=i.createBuffer(),i.bindBuffer(ce,o.glBuffer),r?(i.bufferData(ce,r,At),o._byteLength=r.byteLength):(i.bufferData(ce,n||0,Me),o._byteLength=n),o._layout=t,o._createData(),o}return $(t,e),Object.defineProperty(t.prototype,"hackLayout",{set:function(e){this._layout!==e&&(this._layout=e,this._vaos={})},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"layout",{get:function(){return this._layout},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"byteLength",{get:function(){return this._byteLength},enumerable:!1,configurable:!0}),t.prototype.update=function(e,t){var r=se.gl;r.bindBuffer(ce,this.glBuffer),r.bufferSubData(ce,t,e)},t.prototype.bind=function(e,t){var r=se.cache,n=se.vaoExt,o=!!se.vaoExt;if(o){var i=o?t.id+"-"+e.id:0,a=this._vaos[i];a?n.bindVertexArrayOES(a):(a=this._vaos[i]=n.createVertexArrayOES(),n.bindVertexArrayOES(a),t.bind(),this._bindVertexes(e))}else r.indexes!==t&&(r.indexes=t,t.bind()),r.vertexes===this&&this._bindShader===e||this._bindVertexes(e);r.vertexes=this,this._bindShader=e},t.prototype._bindVertexes=function(e){var t=se.gl,r=this._layout,n=r.attributes,o=r.stride,i=e.attributeLocations,a=e.bindAttributeLocations;t.bindBuffer(ce,this.glBuffer);for(var s=0;s<i.length;s+=1){var u=n[i[s]];if(u){var c=so(u.format);t.vertexAttribPointer(s,c[0],c[1],c[2],o,u.offset),t.enableVertexAttribArray(s),a[s]=!0}else t.disableVertexAttribArray(s),a[s]=!1}},t.CLASS_NAME="VertexBuffer",t}(oe),$o=function(e){function t(t){var r=e.call(this)||this;return r._attributes={},r._options=t,r._createData(),r._stride=t.stride,t.attributes.forEach((function(e){r._attributes[e.name]=e})),r}return $(t,e),Object.defineProperty(t.prototype,"stride",{get:function(){return this._stride},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"attributes",{get:function(){return this._attributes},enumerable:!1,configurable:!0}),t.prototype.getConfigByName=function(e){return this.__feObj.getConfigByName(e)},t.CLASS_NAME="VertexLayout",t}(oe);function Jo(t){switch(t){case e.EUniformType.FLOAT:return[e.EVertexFormat.FLOAT,1];case e.EUniformType.FLOAT2:case e.EUniformType.MAT2:return[e.EVertexFormat.FLOAT2,2];case e.EUniformType.FLOAT3:case e.EUniformType.MAT3:return[e.EVertexFormat.FLOAT3,3];case e.EUniformType.FLOAT4:case e.EUniformType.MAT4:return[e.EVertexFormat.FLOAT4,4]}}var ei,ti=function(t){function r(r,n,o){var i=t.call(this)||this;i._type=r,i._info=n,i._ignored=o,i._table={},i._ignoredHashUniforms={},i._count=0,i._f32Stride=0,i._cache={};var a=0,s=[];return n.forEach((function(t){var r=t.uniformKey,n=t.attributeName,o=t.type,u=o===e.EUniformType.MAT2?2:o===e.EUniformType.MAT3?3:o===e.EUniformType.MAT4?4:1;i._table[r]={attrName:n,attrOffset:a,attrLen:0};for(var c=0,l=0;l<u;l+=1){var f=Jo(o),p=f[0],h=f[1];s.push({name:u<2?n:""+n+l,format:p,offset:a,usage:e.EVertexLayoutUsage.CUSTOM}),c+=h,a+=4*h}i._ignoredHashUniforms[r]=!0,i._table[r].attrLen=c})),i._f32Stride=a/4,o.forEach((function(e){i._ignoredHashUniforms[e]=!0})),i._instanceVL=new $o({attributes:s,step:e.EVertexStep.PER_INSTANCE,stride:a}),i._buffer=new ArrayBuffer(256*a),i._f32view=new Float32Array(i._buffer),i._instanceVB=new Qo(i._instanceVL,void 0,256*a),i}return $(r,t),Object.defineProperty(r.prototype,"cache",{get:function(){return this._cache},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"isFull",{get:function(){return this._count>=256},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"isEmpty",{get:function(){return 0===this._count},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"count",{get:function(){return this._count},enumerable:!1,configurable:!0}),r.prototype.reset=function(){this._count=0,this._cache={}},r.prototype.start=function(e,t,r,n,o,i,a,s,u,c){this._cache.pass=e,this._cache.vertexes=t,this._cache.indexes=r,this._cache.effect=n,this._cache.parent=o,this._cache.material=i,this._cache.uniforms=a,this._cache.startIndex=s,this._cache.numIndices=u,this._cache.uniformHash=c},r.prototype.pack=function(e){var t=this,r=t._f32view,n=t._table,o=t._count,i=t._f32Stride,a=e.f32view,s=e.descriptor.layout,u=o*i;for(var c in n)for(var l=n[c],f=l.attrLen,p=u+l.attrOffset,h=s[c][1],d=0;d<f;d+=1)r[p+d]=a[h+d];this._count+=1},r.prototype.getHash=function(e){for(var t=7,r=0,n=e.descriptor.pairs;r<n.length;r++){var o=n[r].name;this._ignoredHashUniforms[o]||(t=e.getHash(t,o))}return t},r.prototype.bind=function(e){var t=se.cache,r=this._cache,n=r.vertexes,o=r.indexes;this._instanceVB.update(new Uint8Array(this._buffer,0,this._count*this._f32Stride*4),0),o.bind(),this._bindVertexes(e,n),t.indexes=null,t.vertexes=null},r.prototype.draw=function(){var e=this._cache,t=e.material,r=e.pass,n=e.numIndices,o=e.startIndex,i=e.indexes;se.instanceExt.drawElementsInstancedANGLE(io(t.getPrimitiveType(r)),n,i.type,2*o,this.count)},r.prototype._bindVertexes=function(e,t){for(var r,n=se.gl,o=se.instanceExt,i=this._instanceVB,a=this._instanceVL,s=a.attributes,u=a.stride,c=t.layout,l=c.attributes,f=c.stride,p=e.attributeLocations,h=e.bindAttributeLocations,d=0;d<p.length;d+=1){var _=p[d],y=l[_],v=s[_];if(y||v){if(y){r!==t.glBuffer&&n.bindBuffer(ce,t.glBuffer),r=t.glBuffer;var m=so(y.format);n.vertexAttribPointer(d,m[0],m[1],m[2],f,y.offset)}else r!==i.glBuffer&&n.bindBuffer(ce,i.glBuffer),r=i.glBuffer,m=so(v.format),n.vertexAttribPointer(d,m[0],m[1],m[2],u,v.offset),o.vertexAttribDivisorANGLE(d,1);n.enableVertexAttribArray(d),h[d]=!0}else r!==t.glBuffer&&n.bindBuffer(ce,t.glBuffer),r=t.glBuffer,n.disableVertexAttribArray(d),h[d]=!1}},r.CLASS_NAME="InstanceBuffer",r}(oe),ri=function(t){function r(){var e=t.call(this)||this;return e.supportCompressTextures=[],e.virtualMacros={},e.virtualMacrosDirty=!1,e.internalInstanceBuffers={},e.backendType="WEBGL",e.commit_version="",e.use_puppet_sokol=!1,e._macroManager=new Zo({}),e._fallbackEffects={},e._createData(4*U.size),e._u32view=new Uint32Array(e.data),e._f32view=new Float32Array(e.data),e}return $(r,t),Object.defineProperty(r.prototype,"renderPass",{get:function(){var e;return null===(e=this.__feObj._renderPass)||void 0===e?void 0:e.__handle},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"uniforms0",{get:function(){return this.__feObj._uniformBlocks[0].__handle},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"uniforms1",{get:function(){var e=this.__feObj._uniformBlocks[1];return e&&e.__handle},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"renderToScreen",{get:function(){return 0===this._u32view[U.renderPass]},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"needReset",{get:function(){return this._u32view[U.resetFlag]},set:function(e){this._u32view[U.resetFlag]=e},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"width",{get:function(){return this._f32view[U.canvasWidth]},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"height",{get:function(){return this._f32view[U.canvasHeight]},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"useInstance",{get:function(){return!!(1&this._u32view[U.useInstanceOrNeverTranspose])},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"neverTranspose",{get:function(){return!!(2&this._u32view[U.useInstanceOrNeverTranspose])},enumerable:!1,configurable:!0}),r.prototype.init=function(){this._viewForClear=new Ko({passAction:{colorAction:e.ELoadAction.CLEAR,depthAction:e.ELoadAction.CLEAR,stencilAction:e.ELoadAction.CLEAR,clearColor:[0,0,0,1],clearDepth:1,clearStencil:0},viewport:{x:0,y:0,w:1,h:1},scissor:{x:0,y:0,w:1,h:1}}),se.etc1Ext&&this.supportCompressTextures.push("etc1"),se.etcExt&&this.supportCompressTextures.push("etc2"),se.astcExt&&this.supportCompressTextures.push("astc"),se.pvrtcExt&&this.supportCompressTextures.push("pvrtc"),se.s3tcExt&&this.supportCompressTextures.push("s3tc"),this.features={gpuInstance:!!se.instanceExt,dynamicBatch3D:!1,srgb:!!se.srgbExt,textureAnisotropic:!!se.textureAnisotropicExt,textureFloat:!!se.textureFloatExt,textureHalfFloat:!!se.textureHalfExt,colorBufferFloat:!!se.colorBufferFloatExt,depthTexture:!!se.depthExt,fragDepth:!!se.fragDepthExt}},r.prototype.clearScreen=function(){this._u32view[U.renderPass]=0,this._viewForClear.clear()},r.prototype.registerFallbackEffect=function(e,t){this._fallbackEffects[e]=t},r.prototype.getFallbackEffect=function(e){return this._fallbackEffects[e]},r.prototype.changeMacros=function(e){this._macroManager.changeMacros(e)},r.prototype.changeVirtualMacros=function(e){this.virtualMacros=e,this.virtualMacrosDirty=!0},r.prototype.getMacroKey=function(e,t){return this._macroManager.getMacroKey(e,t)},r.prototype.getMacros=function(){return this._macroManager.getMarcos()},r.prototype.setInternalInstanceInfo=function(e,t,r){this.internalInstanceBuffers[e]=new ti(e,t,r)},r.prototype.getErrors=function(){return[]},r.CLASS_NAME="RenderEnv",r}(oe),ni=new ri,oi=new Float32Array(4),ii=new Float32Array(9),ai=new Float32Array(16),si=function(t){function r(e){var r=t.call(this)||this;return r.valid=!1,r.isDirty=!1,0===e.id||(r._createData(4*e.size),r._u32view=new Uint32Array(r.data),r._f32view=new Float32Array(r.data),r._descriptor=e,r.valid=!0),r}return $(r,t),Object.defineProperty(r.prototype,"descriptor",{get:function(){return this._descriptor},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"f32view",{get:function(){return this._f32view},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"textures",{get:function(){return this.__feObj.textures},enumerable:!1,configurable:!0}),r.prototype.setUniform=function(e,t){var r=this._descriptor.layout[e];if(r){var n=r[1];this._f32view.set(t,n),this.isDirty=!0}},r.prototype.hackSetTexture=function(e,t){this.__feObj.textures||(this.__feObj._textures={}),this.__feObj.textures[e]={__handle:t}},r.prototype.getHash=function(e,t){var r=this._descriptor.layout[t];if(!r)return e;for(var n=this._u32view,o=r[1],i=r[2]*r[3],a=0;a<i;a+=1)e=(e<<5)-e+n[o+a];return e},r.prototype.use=function(t,r){if(void 0===r&&(r=!1),this.valid){var n=se.gl,o=ni.neverTranspose,i=this.textures,a=this.descriptor,s=a.pairs,u=a.layout,c=a.textureKeys,l=t.uniformsLocations,f=t.uniformsTextureUnits;if(r)for(var p=0,h=c;p<h.length;p++){var d=h[p];this._useTexture(n,d,u,i,l,f)}else{for(var _=0,y=s;_<y.length;_++){var v=y[_].name,m=u[v],g=m[0],b=m[1],w=m[2],x=m[3],E=m[4],S=m[5];if(g!==e.EUniformType.SAMPLER){var T=l[v];if(v&&void 0!==T){var O=new Float32Array(this.data,4*b,x*w);if(!o&&S)switch(E){case e.EUniformType.MAT2:2===w&&(jo(O,0,oi,0),O=oi);break;case e.EUniformType.MAT3:3===w&&(Vo(O,0,ii,0),O=ii);break;case e.EUniformType.MAT4:4===w&&(Yo.transpose(O,0,ai,0),O=ai)}switch(g){case e.EUniformType.FLOAT:n.uniform1fv(T,O);break;case e.EUniformType.FLOAT2:n.uniform2fv(T,O);break;case e.EUniformType.FLOAT3:n.uniform3fv(T,O);break;case e.EUniformType.FLOAT4:n.uniform4fv(T,O);break;case e.EUniformType.MAT2:n.uniformMatrix2fv(T,!1,O);break;case e.EUniformType.MAT3:n.uniformMatrix3fv(T,!1,O);break;case e.EUniformType.MAT4:n.uniformMatrix4fv(T,!1,O)}}}else this._useTexture(n,v,u,i,l,f)}this.isDirty=!1}}else dr("Uniform "+this.id+" is invalid!")},r.prototype._useTexture=function(t,r,n,o,i,a){var s=n[r];s[0];var u=s[1],c=i[r];if(r&&void 0!==c){var l,f=this._u32view[u];if(o&&o[r])l=o[r].__handle;else{if(!yo.textures[f])return;l=yo.textures[f]}l.dynamicCanvas&&l.update(0,0,0,0,0,l.width,l.height,l.dynamicCanvas);var p=a[r];t.uniform1i(c,p),t.activeTexture(Rt+p),t.bindTexture(l.type===e.ETextureType.D2?Dt:Nt,l.glTexture)}},r.CLASS_NAME="UniformBlock",r}(oe),ui=function(e){function t(t,r){var n=e.call(this)||this;return n._createData(),n.program=n._createProgram(t,r),n.program&&n._initAttributesAndUniforms(),n}return $(t,e),t.prototype.use=function(){se.gl.useProgram(this.program)},t.prototype._createProgram=function(e,t){var r=se.gl,n=r.createProgram(),o=this._createShader(r.VERTEX_SHADER,e),i=this._createShader(r.FRAGMENT_SHADER,t);if(o&&i){if(r.attachShader(n,o),r.attachShader(n,i),r.linkProgram(n),r.deleteShader(o),r.deleteShader(i),!r.getProgramParameter(n,r.LINK_STATUS)){var a=r.getProgramInfoLog(n);return dr("compileProgramError: "+a,this),r.deleteProgram(n),null}return n}return null},t.prototype._createShader=function(e,t){var r=se.gl,n=r.createShader(e);if(r.shaderSource(n,t),r.compileShader(n),!r.getShaderParameter(n,r.COMPILE_STATUS)){var o=r.getShaderInfoLog(n);return dr("compileShaderError: "+o,t.split("\n").map((function(e,t){return t+1+" "+e})).join("\n")),null}return n},t.prototype._initAttributesAndUniforms=function(){var e=se.gl,t=this.program;this.uniformsLocations={},this.uniformsTextureUnits={};var r=e.getProgramParameter(t,e.ACTIVE_ATTRIBUTES);this.attributeLocations=new Array(r),this.bindAttributeLocations=new Array(r);for(var n=0;n<r;n+=1){var o=e.getActiveAttrib(t,n).name,i=e.getAttribLocation(t,o);this.attributeLocations[i]=o,this.bindAttributeLocations[i]=!1}var a=-1;for(r=e.getProgramParameter(t,e.ACTIVE_UNIFORMS),n=0;n<r;n+=1){var s=e.getActiveUniform(t,n),u=s.name,c=s.type;"]"===u[u.length-1]&&(u=u.split("[")[0]),this.uniformsLocations[u]=e.getUniformLocation(t,u),this.uniformsLocations[u].debugName=u,c!==wt&&c!==xt||((a+=1)>=se.maxTextureUints?dr("Texture units is larger than MAX_TEXTURE_IMAGE_UNITS("+se.maxTextureUints+"): "+a):this.uniformsTextureUnits[u]=a)}},t.CLASS_NAME="Shader",t}(oe),ci=function(e){function t(t,r,n,o,i,a){var s=e.call(this)||this;s.name=t,s.passes=n,s.shaders=o,s.variants=i,s._useRuntimeMacros=a,s._shaders={},s._lightModeConfig={};for(var u=0;u<r;u+=1){var c=n[u];s._useRuntimeMacros&&(c.macros=s._getUsedMacros(o[c.shaders[0]],o[c.shaders[1]]));var l=c.lightMode,f=c.macros,p=s._lightModeConfig[l]=s._lightModeConfig[l]||{passes:[],supportInstance:!0};p.passes.push(u),p.supportInstance=a?void 0!==f.WX_USE_INSTANCING&&1===p.passes.length:void 0!==f.USE_INSTANCING&&1===p.passes.length}return s._createData(r*q.size*4),s._u32view=new Uint32Array(s.data),s}return $(t,e),Object.defineProperty(t.prototype,"passCount",{get:function(){return this._passCount},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"useRuntimeMacros",{get:function(){return this._useRuntimeMacros},enumerable:!1,configurable:!0}),t.prototype._getUsedMacros=function(e,t){var r=0,n={};function o(e){for(var t=0,o=Array.from(e.matchAll(/(WX\_[A-Z_0-9]+)/g));t<o.length;t++){var i=o[t][1];void 0===n[i]&&(n[i]=r++)}}return o(e),o(t),n},t.prototype.getMacroKey=function(e,t){var r=this.passes[e],n=ni.virtualMacros,o=0;for(var i in t)void 0!==t[i]&&void 0!==r.macros[i]&&!1!==n[i]&&(o|=1<<r.macros[i]);return o},t.prototype.warmUp=function(){if(this._useRuntimeMacros)console.warn("Effect with useRuntimeMacros dose not support warmUp now !");else for(var e=0;e<this._passCount;e+=1){var t=this.passes[e].variants;for(var r in t)this.getShader(e,void 0,parseInt(r,10))}},t.prototype.getShader=function(e,t,r){void 0===r&&(r=this._getRuntimeMacroKey(e,t));var n,o=e+"_"+r,i=this._shaders[o];return i?i.program?i:null:(n=this._useRuntimeMacros?this._getRuntimeShader(e,t):this._getPreCompiledShader(e,r)).vs&&n.fs?(i=this._shaders[o]=new ui(n.vs,n.fs)).program?i:null:(hr("Macro key "+r+" is invalid in pass "+e+" and effect "+this.id+"!"),null)},t.prototype._getRuntimeMacroKey=function(e,t){var r=this.passes[e],n=ni.virtualMacros,o=7;for(var i in r.macros){var a=0;if(!1!==n[i])for(var s=0,u=t;s<u.length;s++){var c=u[s][i];if(void 0!==c){a=0|c;break}}o=(o<<5)-o+a}return o},t.prototype._getPreCompiledShader=function(e,t){var r=this.passes[e].variants[t];if(void 0===r||!this.variants[r])return hr("Macro key "+t+" is invalid in pass "+e+" and effect "+this.id+"!"),null;var n=this.variants[r],o=n[0],i=n[1];return{vs:this.shaders[o],fs:this.shaders[i]}},t.prototype._getRuntimeShader=function(e,t){var r=this.passes[e].shaders,n={};t.forEach((function(e){Object.assign(n,e)}));var o="";for(var i in n){var a=n[i];!1!==a&&!1!==ni.virtualMacros[i]&&(o+="#define "+i+" "+a+"\n")}function s(e){if("#version"===e.substring(0,8)){var t=e.indexOf("\n");return e.substring(0,t)+"\n"+o+"\n"+e.substring(t)}return"#version 100\n"+o+"\n"+e}return{vs:s(this.shaders[r[0]]),fs:s(this.shaders[r[1]])}},t.prototype.getPasses=function(e){var t;return null===(t=this._lightModeConfig[e])||void 0===t?void 0:t.passes},t.prototype.getSupportInstance=function(e){return this._lightModeConfig[e].supportInstance},t.prototype.getLightMode=function(e){return this.passes[e].lightMode},t.prototype.getBlendOn=function(e){return Yr(this._u32view[e*q.size+q.colorDepth])},t.prototype.getBlendSrc=function(e){return en(this._u32view[e*q.size+q.colorDepth])},t.prototype.getBlendDst=function(e){return tn(this._u32view[e*q.size+q.colorDepth])},t.prototype.getBlendSrcRGB=function(e){return en(this._u32view[e*q.size+q.colorDepth])},t.prototype.getBlendSrcAlpha=function(e){return rn(this._u32view[e*q.size+q.colorDepth])},t.prototype.getBlendDstRGB=function(e){return tn(this._u32view[e*q.size+q.colorDepth])},t.prototype.getBlendDstAlpha=function(e){return nn(this._u32view[e*q.size+q.colorDepth])},t.prototype.getBlendFunc=function(e){return un(this._u32view[e*q.size+q.colorDepth])},t.prototype.getDepthTestOn=function(e){return fn(this._u32view[e*q.size+q.colorDepth])},t.prototype.getDepthTestComp=function(e){return pn(this._u32view[e*q.size+q.colorDepth])},t.prototype.getDepthWrite=function(e){return Xr(this._u32view[e*q.size+q.colorDepth])},t.prototype.getColorWriteRGBA=function(e){return Wr(this._u32view[e*q.size+q.colorDepth])},t.prototype.getCullFace=function(e){return Fn(this._u32view[e*q.size+q.state])},t.prototype.getCullOn=function(e){return kn(this._u32view[e*q.size+q.state])},t.prototype.getPrimitiveType=function(e){return Xn(this._u32view[e*q.size+q.state])},t.prototype.getStencilTestOn=function(e){return wn(this._u32view[e*q.size+q.fstencil])},t.prototype.getStencilComp=function(e){return xn(this._u32view[e*q.size+q.fstencil])},t.prototype.getStencilPass=function(e){return Pn(this._u32view[e*q.size+q.fstencil])},t.prototype.getStencilFail=function(e){return Cn(this._u32view[e*q.size+q.fstencil])},t.prototype.getStencilZFail=function(e){return Mn(this._u32view[e*q.size+q.fstencil])},t.prototype.getStencilWriteMask=function(e){return Nn(this._u32view[e*q.size+q.state])},t.prototype.getStencilReadMask=function(e){return _n(this._u32view[e*q.size+q.fstencil])},t.prototype.getStencilRef=function(e){return mn(this._u32view[e*q.size+q.fstencil])},t.prototype.getStencil=function(e){return this._u32view[e*q.size+q.fstencil]},t.prototype.getBlendRGBA=function(e){return this._u32view[e*q.size+q.blendRGBA]},t.prototype.getUseMaterialStates=function(e){return!!(1&this._u32view[e*q.size+q.useMaterialStates])},t.prototype.getUseMaterialStateBlendOn=function(e){return Hn(this._u32view[e*q.size+q.useMaterialStates],1)},t.prototype.getUseMaterialStateBlendSrcRGB=function(e){return Hn(this._u32view[e*q.size+q.useMaterialStates],2)},t.prototype.getUseMaterialStateBlendSrcAlpha=function(e){return Hn(this._u32view[e*q.size+q.useMaterialStates],3)},t.prototype.getUseMaterialStateBlendDstRGB=function(e){return Hn(this._u32view[e*q.size+q.useMaterialStates],4)},t.prototype.getUseMaterialStateBlendDstAlpha=function(e){return Hn(this._u32view[e*q.size+q.useMaterialStates],5)},t.prototype.getUseMaterialStateBlendFunc=function(e){return Hn(this._u32view[e*q.size+q.useMaterialStates],6)},t.prototype.getUseMaterialStateDepthTestOn=function(e){return Hn(this._u32view[e*q.size+q.useMaterialStates],7)},t.prototype.getUseMaterialStateDepthTestComp=function(e){return Hn(this._u32view[e*q.size+q.useMaterialStates],8)},t.prototype.getUseMaterialStateDepthWrite=function(e){return Hn(this._u32view[e*q.size+q.useMaterialStates],9)},t.prototype.getUseMaterialStateCullOn=function(e){return Hn(this._u32view[e*q.size+q.useMaterialStates],10)},t.prototype.getUseMaterialStateCullFace=function(e){return Hn(this._u32view[e*q.size+q.useMaterialStates],11)},t.prototype.getUseMaterialStatePrimitiveType=function(e){return Hn(this._u32view[e*q.size+q.useMaterialStates],12)},t.prototype.getUseMaterialStateStencilTestOn=function(e){return Hn(this._u32view[e*q.size+q.useMaterialStates],13)},t.prototype.getUseMaterialStateStencilTestComp=function(e){return Hn(this._u32view[e*q.size+q.useMaterialStates],14)},t.prototype.getUseMaterialStateStencilTestPass=function(e){return Hn(this._u32view[e*q.size+q.useMaterialStates],15)},t.prototype.getUseMaterialStateStencilTestFail=function(e){return Hn(this._u32view[e*q.size+q.useMaterialStates],16)},t.prototype.getUseMaterialStateStencilTestZFail=function(e){return Hn(this._u32view[e*q.size+q.useMaterialStates],17)},t.prototype.getUseMaterialStateColorWrite=function(e){return Hn(this._u32view[e*q.size+q.useMaterialStates],18)},t.CLASS_NAME="Effect",t}(oe),li=function(e){function t(t){var r=e.call(this)||this;return r.macros=t,r._createData(4*Y.size),r._u32view=new Uint32Array(r.data),r._macroManager=new Zo(t),r}return $(t,e),Object.defineProperty(t.prototype,"uniforms",{get:function(){var e;return null===(e=this.__feObj.uniforms)||void 0===e?void 0:e.__handle},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"effect",{get:function(){return this.__feObj._effect.__handle},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"renderQueue",{get:function(){return this._u32view[Y.renderQueue]},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"useInstance",{get:function(){return!!this._u32view[Y.useInstance]},enumerable:!1,configurable:!0}),t.prototype.changeMacros=function(e,t){this._macroManager.changeMacros(e,t)},t.prototype.getMacroKey=function(e,t){return this._macroManager.getMacroKey(e,t)},t.prototype.getMacros=function(){return this._macroManager.getMarcos()},t.prototype.getPasses=function(e){return this.effect.getPasses(e)},t.prototype.getBlendOn=function(e){return this.effect.getUseMaterialStateBlendOn(e)&&this._u32view[Y.colorDepthMask]&Hr?Yr(this._u32view[Y.colorDepth]):this.effect.getBlendOn(e)},t.prototype.getBlendSrcRGB=function(e){return this.effect.getUseMaterialStateBlendSrcRGB(e)&&3840&this._u32view[Y.colorDepthMask]?en(this._u32view[Y.colorDepth]):this.effect.getBlendSrcRGB(e)},t.prototype.getBlendSrcAlpha=function(e){return this.effect.getUseMaterialStateBlendSrcAlpha(e)&&983040&this._u32view[Y.colorDepthMask]?rn(this._u32view[Y.colorDepth]):this.effect.getBlendSrcAlpha(e)},t.prototype.getBlendDstRGB=function(e){return this.effect.getUseMaterialStateBlendDstRGB(e)&&61440&this._u32view[Y.colorDepthMask]?tn(this._u32view[Y.colorDepth]):this.effect.getBlendDstRGB(e)},t.prototype.getBlendDstAlpha=function(e){return this.effect.getUseMaterialStateBlendDstAlpha(e)&&15728640&this._u32view[Y.colorDepthMask]?nn(this._u32view[Y.colorDepth]):this.effect.getBlendDstAlpha(e)},t.prototype.getBlendFunc=function(e){return this.effect.getUseMaterialStateBlendFunc(e)&&this._u32view[Y.colorDepthMask]&on?un(this._u32view[Y.colorDepth]):this.effect.getBlendFunc(e)},t.prototype.getDepthTestOn=function(e){return this.effect.getUseMaterialStateDepthTestOn(e)&&this._u32view[Y.colorDepthMask]&cn?fn(this._u32view[Y.colorDepth]):this.effect.getDepthTestOn(e)},t.prototype.getDepthTestComp=function(e){return this.effect.getUseMaterialStateDepthTestComp(e)&&this._u32view[Y.colorDepthMask]&cn?pn(this._u32view[Y.colorDepth]):this.effect.getDepthTestComp(e)},t.prototype.getDepthWrite=function(e){return this.effect.getUseMaterialStateDepthWrite(e)&&this._u32view[Y.colorDepthMask]&Vr?Xr(this._u32view[Y.colorDepth]):this.effect.getDepthWrite(e)},t.prototype.getColorWriteRGBA=function(e){return this.effect.getUseMaterialStateColorWrite(e)&&15&this._u32view[Y.colorDepthMask]?Wr(this._u32view[Y.colorDepth]):this.effect.getColorWriteRGBA(e)},t.prototype.getCullFace=function(e){return this.effect.getUseMaterialStateCullFace(e)&&this._u32view[Y.stateMask]&In?Fn(this._u32view[Y.state]):this.effect.getCullFace(e)},t.prototype.getCullOn=function(e){return this.effect.getUseMaterialStateCullOn(e)&&this._u32view[Y.stateMask]&In?kn(this._u32view[Y.state]):this.effect.getCullOn(e)},t.prototype.getPrimitiveType=function(e){return this.effect.getUseMaterialStatePrimitiveType(e)&&this._u32view[Y.stateMask]&Gn?Xn(this._u32view[Y.state]):this.effect.getPrimitiveType(e)},t.prototype.getStencilTestOn=function(e){return this.effect.getUseMaterialStateStencilTestOn(e)&&this._u32view[Y.fstencilMask]&gn?wn(this._u32view[Y.fstencil]):this.effect.getStencilTestOn(e)},t.prototype.getStencilComp=function(e){return this.effect.getUseMaterialStateStencilTestComp(e)&&this._u32view[Y.fstencilMask]&gn?xn(this._u32view[Y.fstencil]):this.effect.getStencilComp(e)},t.prototype.getStencilPass=function(e){return this.effect.getUseMaterialStateStencilTestPass(e)&&4026531840&this._u32view[Y.fstencilMask]?Pn(this._u32view[Y.fstencil]):this.effect.getStencilPass(e)},t.prototype.getStencilFail=function(e){return this.effect.getUseMaterialStateStencilTestFail(e)&&15728640&this._u32view[Y.fstencilMask]?Cn(this._u32view[Y.fstencil]):this.effect.getStencilFail(e)},t.prototype.getStencilZFail=function(e){return this.effect.getUseMaterialStateStencilTestZFail(e)&&251658240&this._u32view[Y.fstencilMask]?Mn(this._u32view[Y.fstencil]):this.effect.getStencilZFail(e)},t.prototype.getStencilWriteMask=function(e){return this.effect.getUseMaterialStates(e)&&this._u32view[Y.stateMask]&Rn?Nn(this._u32view[Y.fstencil]):this.effect.getStencilWriteMask(e)},t.prototype.getStencilReadMask=function(e){return this.effect.getUseMaterialStates(e)&&this._u32view[Y.fstencilMask]&hn?_n(this._u32view[Y.fstencil]):this.effect.getStencilReadMask(e)},t.prototype.getStencilRef=function(e){return this.effect.getUseMaterialStates(e)&&this._u32view[Y.fstencilMask]&yn?mn(this._u32view[Y.fstencil]):this.effect.getStencilRef(e)},t.prototype.getStencil=function(e){return this.effect.getUseMaterialStates(e)&&this._u32view[Y.fstencilMask]?this._u32view[Y.fstencil]:this.effect.getStencil(e)},t.prototype.getBlendRGBA=function(e){return this.effect.getUseMaterialStates(e)&&this._u32view[Y.blendRGBAMask]?this._u32view[Y.blendRGBA]:this.effect.getBlendRGBA(e)},t.CLASS_NAME="Material",t}(oe),fi=function(e){function t(t,r,n){void 0===n&&(n=!1);var o=e.call(this)||this;if(o._is32bits=n,!se.uintIndexExt&&o._is32bits)throw new Error("Not support 32bits index buffer!");var i=se.gl;return o.glBuffer=i.createBuffer(),i.bindBuffer(Pe,o.glBuffer),t?(i.bufferData(Pe,t,At),o.size=t.byteLength/2):(i.bufferData(Pe,r||0,Me),o.size=r||0),o.type=n?Yt:Zt,o._createData(),o}return $(t,e),t.prototype.update=function(e,t){var r=se.gl;r.bindBuffer(Pe,this.glBuffer),r.bufferSubData(Pe,t,e)},t.prototype.bind=function(){se.gl.bindBuffer(Pe,this.glBuffer)},t.CLASS_NAME="IndexBuffer",t}(oe),pi=function(e){function t(t,r,n){var o=e.call(this)||this;return o.size=n,o.isVertexData=!0,o._layout=t,o._createData(t.stride*n),o.dataView=new Float32Array(o.data),o._u8View=new Uint8Array(o.data),o}return $(t,e),Object.defineProperty(t,"BUFFER",{get:function(){var e=this._CPU_BUFFER,t=this._GPU_BUFFER;return!t||e.length>t.byteLength?t=this._GPU_BUFFER=new Qo(this._LAYOUT,e):(t.hackLayout=this._LAYOUT,t.update(new Uint8Array(e.buffer,0,this._BYTE_LEN),0),t)},enumerable:!1,configurable:!0}),t.IS=function(e){return e.isVertexData},Object.defineProperty(t.prototype,"layout",{get:function(){return this._layout},enumerable:!1,configurable:!0}),t.prototype.requireUploadBuffer=function(){return this._uploadView?this._uploadView.set(this.dataView):(this._uploadView=this.dataView.slice(),this._u8View=new Uint8Array(this._uploadView.buffer)),this._uploadView},t.prototype.batch=function(e){t._CPU_BUFFER||(t._CPU_BUFFER=new Uint8Array(16384*this._layout.stride));var r=e.vertexOffset*this._layout.stride,n=r+this.data.byteLength;if(t._CPU_BUFFER.byteLength<n){var o=t._CPU_BUFFER,i=o.length+16384*this._layout.stride;t._CPU_BUFFER=new Uint8Array(n>i?n:i),t._CPU_BUFFER.set(o)}t._CPU_BUFFER.set(this._u8View,r),t._LAYOUT=this._layout,t._BYTE_LEN=n},t.CLASS_NAME="VertexData",t}(oe),hi=16384,di=function(e){function t(t){var r=e.call(this)||this;return r.size=t,r.isIndexData=!0,r._createData(2*t),r.dataView=new Uint16Array(r.data),r}return $(t,e),Object.defineProperty(t,"BUFFER",{get:function(){var e=this._CPU_BUFFER,t=this._GPU_BUFFER;return!t||e.length>t.size?t=this._GPU_BUFFER=new fi(e.buffer):(t.update(new Uint16Array(e.buffer,0,this._LEN),0),t)},enumerable:!1,configurable:!0}),t.IS=function(e){return e.isIndexData},t.prototype.batch=function(e,r){t._CPU_BUFFER||(t._CPU_BUFFER=new Uint16Array(hi));var n=e.indexOffset,o=n+r;if(o>t._CPU_BUFFER.length){var i=t._CPU_BUFFER;t._CPU_BUFFER=new Uint16Array(o>i.length+hi?o:i.length+hi),t._CPU_BUFFER.set(i)}for(var a=0,s=0;s<r;s+=1){var u=this.dataView[s]+e.vertexOffset;t._CPU_BUFFER[s+n]=u,a=a>u?a:u}e.indexOffset+=r,e.vertexOffset=a+1,t._LEN=e.indexOffset},t.CLASS_NAME="IndexData",t}(oe),_i=function(t){function r(e){var r=t.call(this)||this,n=se.gl;return r.frameBuffer=n.createFramebuffer(),n.bindFramebuffer(Ne,r.frameBuffer),e.colors.forEach((function(e,t){var n=de+t;r._bindAttachment(n,e)})),e.depth&&e.stencil&&e.depth.texture===e.stencil.texture?r._bindAttachment(Te,e.depth):(e.depth&&r._bindAttachment(be,e.depth),e.stencil&&r._bindAttachment(Ct,e.stencil)),n.checkFramebufferStatus(n.FRAMEBUFFER)!==n.FRAMEBUFFER_COMPLETE&&(r.isValid=!1,dr("Framebuffer is not complete: "+n.checkFramebufferStatus(n.FRAMEBUFFER))),r._createData(),r.color=e.colors[0],r.depth=e.depth,r.stencil=e.stencil,r.isValid=!0,r}return $(r,t),r.prototype._bindAttachment=function(t,r){var n=se.gl,o=r.texture;if(0!==o.id)if(o.renderBuffer)n.framebufferRenderbuffer(Ne,t,ht,o.renderBuffer);else{switch(o.type){case e.ETextureType.D2:return void n.framebufferTexture2D(Ne,t,Dt,o.glTexture,0);case e.ETextureType.Cube:return void n.framebufferTexture2D(Ne,t,Yn(e.ETextureType.Cube,r.slice),o.glTexture,0)}dr("Not support texture type: "+e.ETextureType[o.type])}},r.prototype.bind=function(){se.gl.bindFramebuffer(Ne,this.frameBuffer)},r.prototype._superHackDoNotUseReadPixels=function(e,t,r,n,o,i){se.gl.bindFramebuffer(Ne,this.frameBuffer),se.gl.readPixels(e,t,r,n,se.gl.RGBA,o?se.gl.FLOAT:se.gl.UNSIGNED_BYTE,i),se.gl.bindFramebuffer(Ne,null)},r}(oe),yi=new Float32Array([1,0,0,0,1,0,0,0,1]),vi=new Float32Array(9),mi=new Float32Array(16),gi=new Float32Array(10),bi=[null,null],wi=new Float32Array(4),xi=[0,0,0,1],Ei=function(e){function t(r,n){var o=e.call(this)||this;return o.active=!1,o.parent=void 0,o.children=[],o._isDirty=!1,o._version=0,o._mixedLayerMask=0,r.getF32U32Views(n,bi),o._f32view=bi[0],o._u32view=bi[1],o._is2D=Pi.IS(r),o.id=n,t.NODES[n]=o,o}return $(t,e),t.CREATE_TREE=function(e,t,r,n,o){for(var i=new Uint32Array(t),a=new Float32Array(r,0,e*(o?11:5)),s=[],u=new Uint16Array(r,4+e*(o?11:5)*4),c=0;c<e;c+=1){var l=Si(i[c]);if(!l||l.is2D!==!o)return!1;l.setTRSFromData(a,1+c*(o?11:5));var f=u[c];65535!==f&&f<s.length&&s[f].addChild(l),s.push(l)}return n&&s.length&&s[0].updateSubTree(),!0},Object.defineProperty(t.prototype,"isDirty",{get:function(){return this._isDirty},set:function(e){this._isDirty=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"f32view",{get:function(){return this._f32view},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"is2D",{get:function(){return this._is2D},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"version",{get:function(){return this._version},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"useQuat",{get:function(){return!this._is2D&&!!this._u32view[V.rotationType]},set:function(e){!this._is2D&&(this._u32view[V.rotationType]=e?1:0)},enumerable:!1,configurable:!0}),t.prototype.addChild=function(e){e.removeFromParent(),this.children.push(e),e.parent=this},t.prototype.addChildAtIndex=function(e,t){e.removeFromParent(),this.children.splice(t,0,e),e.parent=this},t.prototype.removeChild=function(e){var t=this.children.indexOf(e);t>=0&&this.children.splice(t,1),e.parent=void 0},t.prototype.removeFromParent=function(){this.parent&&this.parent.removeChild(this)},t.prototype.disperseSubTree=function(){this.parent=void 0;for(var e=0,t=this.children;e<t.length;e++)t[e].disperseSubTree();this.children.length=0},t.prototype.updateWorldMatrix=function(){this._is2D?(vi.set(yi),zo(vi,0,this._f32view[j.position],this._f32view[j.position+1],vi,0),Wo(vi,0,this._f32view[j.rotation],vi,0),Go(vi,0,this._f32view[j.scale],this._f32view[j.scale+1],vi,0)):(Bo.normalize(this._f32view,V.rotation,this._f32view,V.rotation),Yo.composeTQS(this._f32view,V.position,this._f32view,V.rotation,this._f32view,V.scale,mi,0)),this.parent?this._is2D?Xo(this.parent._f32view,j.worldMatrix,vi,0,this._f32view,j.worldMatrix):Yo.multiply(this.parent._f32view,V.worldOffset,mi,0,this._f32view,V.worldOffset):this._is2D?qo(vi,0,this._f32view,j.worldMatrix):Yo.copy(mi,0,this._f32view,V.worldOffset),this._binds&&this._syncBinds(),this._version+=1,this.isDirty=!1},t.prototype._syncBinds=function(){for(var e=!1,t=0,r=this._binds;t<r.length;t++)if(!(i=r[t])._is2D&&i.active){e=!0;break}if(e){Yo.decomposeTransQuatScale(this._f32view,V.worldOffset,gi,0,gi,3,gi,7);for(var n=0,o=this._binds;n<o.length;n++){var i;(i=o[n]).useQuat=!0,i._f32view.set(gi,1),i.isDirty=!0}}},t.prototype.dfs=function(e,t){for(var r=e(this,t),n=this.children,o=0;o<n.length;o+=1){var i=n[o];i.active&&i.dfs(e,r)}},t.prototype.updateSubTree=function(e){void 0===e&&(e=!1),(this.active||e)&&(this.isDirty=this.isDirty||e,this.dfs((function(e,r){var n=r||e.isDirty;return e.recalculateMixedLayerMask(),!t.PHY_SYS||!e._bindPhysObj||e._isDirty&&e._bindPhysObj.inited||(t.PHY_SYS.addDirtyNode(e._bindPhysObj),e._bindPhysObj.inited=!0),n&&e.updateWorldMatrix(),n})))},t.prototype.bindToBone=function(e){if(e!==this._bindBone&&(this.unBindFromBone(),e)){for(var t=!1,r=e;r;){if(r===this){t=!0;break}r=r._bindBone}t&&dr("Cycle bonding detected, bind "+this.id+" to bone "+e.id),this._bindBone=e,e._binds||(e._binds=[]),e._binds.push(this)}},t.prototype.unBindFromBone=function(){var e=this._bindBone;e&&(e._binds.splice(e._binds.indexOf(this),1),this._bindBone=null)},t.prototype.setTRS=function(e,t,r,n,o,i,a,s,u,c){this.isDirty=!0;var l=this._f32view,f=this.is2D?j:V;!isNaN(e)&&(l[f.position]=e),!isNaN(t)&&(l[f.position+1]=t),!isNaN(n)&&(l[f.scale]=n),!isNaN(o)&&(l[f.scale+1]=o),this.is2D?!isNaN(a)&&(l[f.rotation]=a):(!isNaN(r)&&(l[f.position+2]=r),!isNaN(i)&&(l[f.scale+2]=i),!isNaN(c)||isNaN(a)&&isNaN(s)&&isNaN(u)?(!isNaN(a)&&(l[f.rotation]=a),!isNaN(s)&&(l[f.rotation+1]=s),!isNaN(u)&&(l[f.rotation+2]=u),!isNaN(c)&&(l[f.rotation+3]=c)):hr("Only support quat rotation now!"))},t.prototype.getTRS3D=function(e,t){var r=this._f32view;e[t]=r[V.position],e[t+1]=r[V.position+1],e[t+2]=r[V.position+2],e[t+3]=r[V.scale],e[t+4]=r[V.scale+1],e[t+5]=r[V.scale+2],this.useQuat?(e[t+6]=r[V.rotation],e[t+7]=r[V.rotation+1],e[t+8]=r[V.rotation+2],e[t+9]=r[V.rotation+3]):Bo.fromEulerAngles(r,V.rotation,e,t+6)},t.prototype.setTRSFromData=function(e,t){this.isDirty=!0;for(var r=this._f32view,n=this.is2D?j:V,o=n.rotation;o<n.worldMatrix;o+=1)r[o]=e[t+o]},t.prototype.setTRSFromChannelData=function(e,t){for(var r=this._f32view,n=0;n<6;n+=1){var o=3*n;e[t+o+1]&&(r[V.position+n]=e[t+o])}e[t+22]&&(ko(e,t+18,r,V.rotation),this.useQuat=!0),this.isDirty=!0},t.prototype.getWorldPos=function(e,t){var r=this._f32view;this.is2D?(e[t]=r[j.worldMatrix+6],e[t+1]=r[j.worldMatrix+6]):(e[t]=r[V.worldOffset+12],e[t+1]=r[V.worldOffset+13],e[t+2]=r[V.worldOffset+14])},t.prototype.bindPhysObj=function(e,t){t.__nodeId=this.id,this._bindPhysObj={type:e,id:t.wasmID,inited:!1}},t.prototype.unbindPhysObj=function(e){e.__nodeId=0,this._bindPhysObj=null},t.prototype.syncFromPhysic=function(e,t){var r=this._f32view;this.parent?(this._getParentsRotation(wi),wi[0]=-wi[0],wi[1]=-wi[1],wi[2]=-wi[2],Bo.multiply(wi,0,e,t+3,r,V.rotation),this.parent?(Yo.inverse(this.parent._f32view,V.worldMatrix,mi,0),Yo.transformPoint(mi,0,e,t,r,V.position)):Io.copy(e,t,r,V.position)):Io.copy(e,t,r,V.position),this._isDirty=!0},t.prototype._getParentsRotation=function(e){var t=this.parent;for(e.set(xi);t;)Bo.multiply(e,0,t._f32view,V.rotation,e,0),t._isDirty=!0,t=t.parent},t.prototype.showDebugInfo=function(){this._logTree(this,"",!0)},t.prototype._logTree=function(e,t,r){console.log(t+"+- "+e.name),t+=r?"   ":"|  ";for(var n=0;n<e.children.length;n+=1)this._logTree(e.children[n],t,n===e.children.length-1)},t.prototype.setExtendedModel=function(e,t){this._u32viewExt=new Uint32Array(e,t)},Object.defineProperty(t.prototype,"hasLayer",{get:function(){return this._u32viewExt&&this._u32viewExt.length>=1},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"layer",{get:function(){return this._u32viewExt[z.layer]},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasSharedMixedLayerMask",{get:function(){return this._u32viewExt&&this._u32viewExt.length>=2},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"mixedLayerMask",{get:function(){return this._mixedLayerMask},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"sharedMixedLayerMask",{set:function(e){this._u32viewExt[z.mixedLayerMask]=e},enumerable:!1,configurable:!0}),t.prototype.recalculateMixedLayerMask=function(){if(this.hasLayer){var e=0;this.parent&&(e=this.parent.mixedLayerMask),this._mixedLayerMask=e|1<<this.layer,this.hasSharedMixedLayerMask&&(this.sharedMixedLayerMask=this._mixedLayerMask)}else this._mixedLayerMask=0},t.CLASS_NAME="Node",t.NODES={},t}(oe);function Si(e){if(0!==e){var t=Ei.NODES[e];if(t)return t;var r=Ci(Ei.CLASS_NAME,e);if(r)return new Ei(r,e);hr("Invalid node: "+e)}}var Ti=window.Phys3D||(null===(ei=window.top)||void 0===ei?void 0:ei.Phys3D),Oi=[0,0],Ai=function(e){function t(r){var n=e.call(this)||this;n._byteOffset=0,n._size=0,n._init(r);var o=n._getTypeName();return t.POOLS[o]=t.POOLS[o]||{},t.POOLS[o][n.id]=n,n}return $(t,e),t.prototype._init=function(e){this._size=e,this._createData(e*this._getPerSize()*4,"Pool")},t.prototype._getPerSize=function(){return 0},t.prototype._getTypeName=function(){return"Pool"},t.prototype.getF32View=function(e){qn(e,Oi);var t=this._getPerSize();return new Float32Array(this.data,this._byteOffset+Oi[1]*t*4,t)},t.prototype.getU32View=function(e){qn(e,Oi);var t=this._getPerSize();return new Uint32Array(this.data,this._byteOffset+Oi[1]*t*4,t)},t.prototype.getF32U32Views=function(e,t){qn(e,Oi);var r=this._getPerSize();t[0]=new Float32Array(this.data,this._byteOffset+Oi[1]*r*4,r),t[1]=new Uint32Array(this.data,this._byteOffset+Oi[1]*r*4,r)},t.CLASS_NAME="Pool",t.POOLS={},t}(oe);function Ci(e,t){return qn(t,Oi),Ai.POOLS[e][Oi[0]]}var Mi=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._extendedMem=null,t._subExtendedMemSize=0,t}return $(t,e),t.prototype._init=function(t){if(Ti)return this._wasmPool=new Ti.JSBNodePool(t,this._getPerSize()===V.size),this._nativePool=this._wasmPool.getNativeObject(),this._byteOffset=this._nativePool.getSharedMem().ptr,this._byteSize=t*this._getPerSize()*4,this.data=Ti.HEAPF32.buffer,this.id=this._nativePool.getHandle(),void(this._size=t);e.prototype._init.call(this,t)},t.prototype.getDirtyNodesFromPhys=function(e){var t=this._wasmPool.getDirtyListMem(),r=t.ptr,n=t.byteLength;if(n){for(var o=new Uint32Array(this.data,r,n/4),i=new Float32Array(this.data,r,n/4),a=0;a<o.length;a+=8)e(o[a],i,a+1);this._wasmPool.clearDirtyNodes()}},t.prototype.setExtendedMemory=function(e){this._subExtendedMemSize=e.byteLength/this._size;for(var t=0;t<this._size;t++)Si(this.id|t<<6).setExtendedModel(e,t*this._subExtendedMemSize)},t}(Ai),Pi=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.isNode2DPool=!0,t}return $(t,e),t.IS=function(e){return!!e.isNode2DPool},t.prototype._getPerSize=function(){return j.size},t.prototype._getTypeName=function(){return"Node"},t.CLASS_NAME="Node2DPool",t}(Mi),Ri=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.isNode3DPool=!0,t}return $(t,e),t.IS=function(e){return!!e.isNode3DPool},t.prototype._getPerSize=function(){return V.size},t.prototype._getTypeName=function(){return"Node"},t.CLASS_NAME="Node3DPool",t}(Mi),Di=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return $(t,e),t.prototype._getPerSize=function(){return G.size},t.prototype._getTypeName=function(){return"CullingComponent"},t.CLASS_NAME="CullingComponentPool",t}(Ai),Ni={indexOffset:0,vertexOffset:0,drawIndex:0,drawCount:0};function Ii(e){return Ni.indexOffset=0,Ni.vertexOffset=0,Ni.drawIndex=0,Ni.drawCount=e,Ni}var Li=function(){function t(e){this.id=e,this._parentChanged=!1}return t.ALLOCATE=function(){return this.Pool||(this.Pool=new Fi(1e3,100)),this.Pool.allocate()},t.RELEASE=function(e){this.Pool.release(e)},Object.defineProperty(t.prototype,"parent",{set:function(e){this._parent=e,this._parentChanged=!0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_feMRC",{get:function(){return this._parentChanged&&(this.__feMRC=this._parent.__feObj),this.__feMRC},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"indexes",{get:function(){var e=this._feMRC.getIndexBuffer(this.index);return e&&e.__handle},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"vertexes",{get:function(){var e=this._feMRC.getVertexBuffer(this.index);return e&&e.__handle},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"startIndex",{get:function(){return this._feMRC.getStartIndex(this.index)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"numIndices",{get:function(){return this._feMRC.getNumIndices(this.index)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"uniforms",{get:function(){return this._feMRC.uniforms.__handle},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"material",{get:function(){var e=this._feMRC.getMaterial(this.index);return e&&e.__handle},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"sortZ",{get:function(){return this._parent.sortZ},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"renderQueue",{get:function(){return this.material?this.material.renderQueue:-1},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"cullingComp",{get:function(){return this._parent.cullingComp},enumerable:!1,configurable:!0}),t.prototype.render=function(e,t){se.gl;var r=se.cache,n=this,o=n._parent,i=n.indexes,a=n.vertexes,s=n.startIndex,u=n.numIndices,c=n.material,l=n.uniforms;if(i&&a&&c&&0!==u){var f=c.effect,p=null;if(f&&(p=f.getPasses(e)),p||(f=ni.getFallbackEffect(e))&&(p=f.getPasses(e)),f){var h=a.layout,d=t.drawIndex===t.drawCount;if(di.IS(i)&&pi.IS(a))return p.length>1?(0!==t.indexOffset&&(this._draw(p,pi.BUFFER,di.BUFFER,r.effect,r.parent,r.material,r.perObjBatchUniforms,0,t.indexOffset),t.indexOffset=0,t.vertexOffset=0),a.batch(t),i.batch(t,u),void this._draw(p,pi.BUFFER,di.BUFFER,f,o,c,l,0,t.indexOffset)):r.perObjBatchUniforms===l&&r.material===c&&r.vertexLayout===h?(a.batch(t),i.batch(t,u),void(d&&this._draw(p,pi.BUFFER,di.BUFFER,f,o,c,l,0,t.indexOffset))):(0!==t.indexOffset&&(this._draw(p,pi.BUFFER,di.BUFFER,r.effect,r.parent,r.material,r.perObjBatchUniforms,0,t.indexOffset),t.indexOffset=0,t.vertexOffset=0),a.batch(t),i.batch(t,u),d&&this._draw(p,pi.BUFFER,di.BUFFER,f,o,c,l,0,t.indexOffset),r.perObjBatchUniforms=l,r.material=c,r.effect=f,r.parent=o,void(r.vertexLayout=h));t&&0!==t.indexOffset&&this._draw(p,pi.BUFFER,di.BUFFER,r.effect,r.parent,r.material,r.perObjBatchUniforms,0,t.indexOffset),t&&(t.indexOffset=0,t.vertexOffset=0),this._tryInstance(p,e,a,i,f,o,c,l,s,u,d)||this._draw(p,a,i,f,o,c,l,s,u)}}},t.prototype._tryInstance=function(t,r,n,o,i,a,s,u,c,l,f){if(!se.instanceExt||!ni.useInstance)return!1;var p=ni.internalInstanceBuffers[e.EMeshRenderType.Static3D];if(!p)return!1;var h=p.cache;if(!i.getSupportInstance(r)||a.meshRenderType!==e.EMeshRenderType.Static3D||!s.useInstance)return p.isEmpty||this._draw(t,h.vertexes,h.indexes,h.effect,h.parent,h.material,h.uniforms,h.startIndex,h.numIndices,p),!1;var d=p.getHash(u);return p.isEmpty||!p.isFull&&h.vertexes===n&&h.indexes===o&&h.startIndex===c&&h.material===s&&h.uniforms.descriptor===u.descriptor&&h.uniformHash===d||this._draw(t,h.vertexes,h.indexes,h.effect,h.parent,h.material,h.uniforms,h.startIndex,h.numIndices,p),p.isEmpty&&p.start(t[0],n,o,i,a,s,u,c,l,d),p.pack(u),f&&this._draw(t,h.vertexes,h.indexes,h.effect,h.parent,h.material,h.uniforms,h.startIndex,h.numIndices,p),!0},t.prototype._draw=function(t,r,n,o,i,a,s,u,c,l){for(var f=se.cache,p=se.gl,h=a.uniforms,d=ni.uniforms0,_=ni.uniforms1,y=0,v=t;y<v.length;y++){var m=v[y],g=o.useRuntimeMacros?o.getShader(m,[i.getMacros(),a.getMacros(),ni.getMacros(),l?{USE_INSTANCING:!0}:{}]):o.getShader(m,void 0,i.getMacroKey(o,m)|a.getMacroKey(o,m)|ni.getMacroKey(o,m)|(l?o.getMacroKey(m,{USE_INSTANCING:!0}):0));if(g){var b=f.shader!==g;b&&(f.shader=g,g.use());var w=a.getStencilWriteMask(m);f.stencilWriteMask===w&&f.fstencil===a.getStencil(m)||(f.fstencil=a.getStencil(m),a.getStencilTestOn(m)?(p.enable(Pt),w!==f.stencilWriteMask&&(f.stencilWriteMask=w,p.stencilMask(w)),p.stencilFunc($n(a.getStencilComp(m)),a.getStencilRef(m),a.getStencilReadMask(m)),p.stencilOp(eo(a.getStencilFail(m)),eo(a.getStencilZFail(m)),eo(a.getStencilPass(m)))):p.disable(Pt));var x=a.getBlendRGBA(m);f.rgba!==x&&(f.rgba=x,p.blendColor(((255&x)>>0)/255,Ur(x),Br(x),jr(x)));var E=a.getColorWriteRGBA(m);f.colorWriteMask!==E&&(f.colorWriteMask=E,p.colorMask(0!=(1&E),0!=(2&E),0!=(4&E),0!=(8&E)));var S=a.getDepthWrite(m);f.enableDepthWrite!==S&&(f.enableDepthWrite=S,p.depthMask(S));var T=a.getDepthTestOn(m);f.enableDepthTest!==T&&(f.enableDepthTest=T,T?p.enable(Oe):p.disable(Oe));var O=a.getDepthTestComp(m);f.depthTestComp!==a.getDepthTestComp(m)&&(f.depthTestComp=O,T&&p.depthFunc($n(O)));var A=a.getBlendOn(m);if(f.enableBlend!==A&&(f.enableBlend=A,A?p.enable(fe):p.disable(fe)),A){var C=a.getBlendSrcRGB(m),M=a.getBlendSrcAlpha(m),P=a.getBlendDstRGB(m),R=a.getBlendDstAlpha(m);C===f.blendSrcRGB&&M===f.blendSrcAlpha&&P===f.blendDstRGB&&R===f.blendDstAlpha||(f.blendSrcRGB=C,f.blendSrcAlpha=M,f.blendDstRGB=P,f.blendDstAlpha=R,p.blendFuncSeparate(ro(C),ro(P),ro(M),ro(R)));var D=a.getBlendFunc(m);D!==f.blendFunc&&(f.blendFunc=D),p.blendEquation(no[D])}var N=a.getCullOn(m),I=a.getCullFace(m);f.cullFace!==I&&(f.cull=N,f.cullFace=I,N?(p.enable(ve),p.cullFace(I===e.ECullMode.FRONT?Ie:le)):p.disable(ve));var L=f.uniforms[g.id];if(L||(L=f.uniforms[g.id]={}),d.isDirty&&(L.global=void 0),_&&_.isDirty&&(L.global2=void 0),s.isDirty&&(L.perObj=void 0),h.isDirty&&(L.mat=void 0),L.global!==d?(d.use(g),L.global=d):b&&d.use(g,!0),L.global2!==_?(_.use(g),L.global=_):b&&_&&_.use(g,!0),L.perObj!==s?(s.use(g),L.perObj=s):b&&s.use(g,!0),L.mat!==h?(h.use(g),L.mat=h):b&&h.use(g,!0),f.material=void 0,f.effect=void 0,f.parent=void 0,f.vertexLayout=void 0,f.perObjBatchUniforms=void 0,l)l.bind(g),l.draw(),l.reset();else{var F=io(a.getPrimitiveType(m));r.bind(g,n),p.drawElements(F,c,n.type,2*u),se.vaoExt&&se.vaoExt.bindVertexArrayOES(null)}}}},t}(),Fi=function(){function e(e,t){this._enlargeSize=t,this._ptr=0,this._pool=new Array(e),this._unusedIds=new Array(e);for(var r=0;r<e;r+=1){var n=new Li(r);this._pool[r]=n,this._unusedIds[r]=r}this._ptr=e-1}return e.prototype.allocate=function(){return-1===this._ptr&&this._enlarge(),this._pool[this._unusedIds[this._ptr--]]},e.prototype.release=function(e){e._parent=e.__feMRC=void 0,this._unusedIds[++this._ptr]=e.id},e.prototype._enlarge=function(){var e=this._pool.length;this._pool.length+=this._enlargeSize,this._unusedIds.length+=this._enlargeSize;for(var t=e;t<this._pool.length;t+=1){var r=new Li(t);this._pool[t]=r,this._unusedIds[++this._ptr]=t}},e}(),ki=new Float32Array(16),Ui=function(t){function r(e,n,o,i,a,s){var u=t.call(this)||this;u._meshCount=e,u.uniformBlock=n,u.attachedNode=o,u.cullingComp=i,u.meshRenderType=a,u._nodeVersion=-1,u.subMeshes=new Array(e);for(var c=0;c<u._meshCount;c+=1){var l=u.subMeshes[c]=Li.ALLOCATE();l.index=c,l.parent=u}return u._createData(4*(H.start+H.size*e)),u._u32view=new Uint32Array(u.data),u._macroManager=new Zo(s),o.is2D?r.TABLE_2D[u.id]=u:r.TABLE_3D[u.id]=u,u}return $(r,t),Object.defineProperty(r.prototype,"castShadow",{get:function(){return!!this._u32view[H.castShadow]},set:function(e){this._u32view[H.castShadow]=e?1:0},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"skinSkeleton",{get:function(){return this.__feObj._skinSkeleton.__handle},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"bindTarget",{get:function(){return Si(this._u32view[H.bindTarget])},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"vertexesData",{get:function(){return this.__feObj._vertexes},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"indexesData",{get:function(){return this.__feObj._indexes},enumerable:!1,configurable:!0}),r.prototype.changeMacros=function(e,t){this._macroManager.changeMacros(e,t)},r.prototype.getMacroKey=function(e,t){return this._macroManager.getMacroKey(e,t)},r.prototype.getMacros=function(){return this._macroManager.getMarcos()},r.prototype.preRender=function(t){var r=this.bindTarget||this.attachedNode,n=this._nodeVersion!==r.version,o=this.uniformBlock;if(this.meshRenderType===e.EMeshRenderType.UI){if(o.setUniform("u_world",t.uiWorldMatrix),this._isDirty||n){for(var i=0,a=this.vertexesData;i<a.length;i++){var s=a[i],u=this.indexesData[0].__handle.dataView,c=s.__handle,l=this._getStartIndex(0),f=this._getNumIndices(0),p=c.requireUploadBuffer(),h=c.layout.stride/4,d=c.layout.getConfigByName("a_position").offset;if(4*f/6==p.length/h)for(var _=0;_<p.length;_+=h){var y=_+d;Ho(r.f32view,j.worldMatrix,p,y,p,y)}else{var v=new Set;for(_=0;_<f;_+=1){var m=u[l+_];v.has(m)||(v.add(m),y=m*h+d,Ho(r.f32view,j.worldMatrix,p,y,p,y))}}}this._isDirty=!1,this._nodeVersion=r.version}}else{if(r.is2D){Yo.composeRST3toRST4(r.f32view,j.worldMatrix,ki,0);var g=2/t.canvasSizeY;ki[0]*=g,ki[1]*=g,ki[4]*=g,ki[5]*=g,ki[12]*=g,ki[13]*=g}else Yo.copy(r.f32view,V.worldOffset,ki,0);o.setUniform("u_world",ki)}this.meshRenderType===e.EMeshRenderType.Skinned3D&&(this.skinSkeleton.useBoneMatrixTexture?o.hackSetTexture("u_boneMatrixTexture",this.skinSkeleton.texture):o.setUniform("u_boneOffsetMatrix",this.skinSkeleton.boneOffsetMatrices))},r.prototype._getStartIndex=function(e){return this._u32view[H.start+H.size*e+H.startIndex]},r.prototype._getNumIndices=function(e){return this._u32view[H.start+H.size*e+H.numIndices]},r.prototype.setSharedDirty=function(){this._isDirty=!0},r.prototype.destroy=function(){for(var e=0;e<this._meshCount;e+=1)Li.RELEASE(this.subMeshes[e]);this.attachedNode.is2D?delete r.TABLE_2D[this.id]:delete r.TABLE_3D[this.id]},r.CLASS_NAME="MeshRenderComponent",r.TABLE_2D={},r.TABLE_3D={},r}(oe),Bi=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._rootNodes=new Set,t._cameras=[],t}return $(t,e),t.prototype.addCamera=function(e){this._cameras.push(e),this._cameras.sort((function(e,t){return e.depth-t.depth}))},t.prototype.removeCamera=function(e){this._cameras.splice(this._cameras.indexOf(e),1)},t.prototype.addLight=function(e){this._lights||(this._lights=new Set),this._lights.add(e)},t.prototype.removeLight=function(e){this._lights.delete(e)},t.prototype.setRootNode=function(e){this._rootNodes.add(e)},t.prototype.isRootNode=function(e){var t=!1;return this._rootNodes.forEach((function(r){t=t||r.id===e.id})),t},t.prototype.refreshWorldTransform=function(){this._rootNodes.forEach((function(e){return e.updateSubTree()}))},t.CLASS_NAME="Scene",t}(oe),ji=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return $(t,e),t.prototype.cullCamera=function(e,t,r){e.preRender();var n=t.dataView,o=0;for(var i in Ui.TABLE_3D){var a=Ui.TABLE_3D[i];if(0!==a.id){var s=e.cull(a);null!==s&&(a.sortZ=s,n[o]=a.id,o+=1)}}t.usedSize=o},t.prototype.drawCamera=function(e,t,r){e.fillUniforms(ni.uniforms0);for(var n=[],o=t.dataView,i=0;i<t.usedSize;i+=1){var a=o[i],s=Ui.TABLE_3D[a];s&&(s.preRender(e),Array.prototype.push.apply(n,s.subMeshes))}n.sort((function(e,t){return e.renderQueue===t.renderQueue?e.renderQueue>=2500?e.sortZ>t.sortZ?-1:1:e.sortZ>t.sortZ?1:-1:e.renderQueue>t.renderQueue?1:-1})),e.bind();for(var u=Ii(t.usedSize),c=0,l=n;c<l.length;c++){var f=l[c];u.drawIndex+=1,f.render(r,u)}e.submit()},t.prototype.drawLight=function(e,t,r,n){e.preRender(t);for(var o=[],i=r.dataView,a=0;a<r.usedSize;a+=1){var s=i[a],u=Ui.TABLE_3D[s];u&&u.castShadow&&(u.preRender(),Array.prototype.push.apply(o,u.subMeshes))}o.sort((function(e,t){return e.renderQueue>t.renderQueue||e.renderQueue===t.renderQueue&&e.sortZ>t.sortZ?1:-1})),e.clear(),e.drawSubMeshes(n,o),e.submit()},t.CLASS_NAME="Scene3D",t}(Bi),Vi=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return $(t,e),t.prototype.cullCamera=function(e,t){},t.prototype.drawCamera=function(e,t,r){e.preRender(),e.fillUniforms(ni.uniforms0);var n=t.dataView,o=Ii(t.usedSize);e.bind();for(var i=0;i<t.usedSize;i+=1){o.drawIndex+=1;var a=n[i],s=Ui.TABLE_2D[a];if(s){s.preRender(e);for(var u=0,c=s.subMeshes;u<c.length;u++)c[u].render(r,o)}}e.submit()},t.CLASS_NAME="Scene2D",t}(Bi),zi=new ji,Gi=new Vi,Wi=new ArrayBuffer(160),Xi=new Float32Array(Wi,0,16);Xi.set([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]);var Hi=new Float32Array(Wi,64,3);Hi.set([0,0,1]);var qi=new Float32Array(Wi,76,3);qi.set([0,1,0]);var Yi,Zi=new Float32Array(Wi,88,3),Ki=new Float32Array(Wi,100,3),Qi=new Float32Array(Wi,112,3),$i=new Float32Array(Wi,124,3),Ji=new Float32Array(Wi,136,3),ea=new Float32Array(Wi,148,3),ta=new Float32Array(16),ra=function(e){function t(t,r){void 0===r&&(r=!1);var n=e.call(this)||this;return n.node=t,n.isUI=r,n.uiWorldMatrix=new Float32Array(16),n.matVer=0,n._isDirty=!1,n._preSizeY=0,n._forward=new Float32Array([0,0,0]),n._clipPlanes=function(){for(var e=new Array(6),t=new ArrayBuffer(144),r=0;r<6;r+=1)e[r]={point:new Float32Array(t,24*r,3),negNormal:new Float32Array(t,24*r+12,3),distance:0};return e}(),n._nodeVersion=-1,n._createData(4*W.size),n._u32view=new Uint32Array(n.data),n._f32view=new Float32Array(n.data),r?Gi.addCamera(n):zi.addCamera(n),n}return $(t,e),Object.defineProperty(t.prototype,"f32View",{get:function(){return this._f32view},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"view",{get:function(){return this.__feObj.view.__handle},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"targetTransform",{get:function(){return Si(this._u32view[W.targetTransform])},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fov",{get:function(){return this._f32view[W.fov]},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"aspect",{get:function(){return this._f32view[W.aspect]},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"near",{get:function(){return this._f32view[W.near]},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"far",{get:function(){return this._f32view[W.far]},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"orthoSize",{get:function(){return this._f32view[W.orthoSize]},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"depth",{get:function(){return this._u32view[W.depth]},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"canvasSizeY",{get:function(){return this._f32view[W.canvasSizeY]},enumerable:!1,configurable:!0}),t.prototype.preRender=function(){this._updateViewProjectionMatrix(),this._updateUIMatrix()},t.prototype.cull=function(e){var t=e.cullingComp;if(!t)return e.attachedNode.getWorldPos(Zi,0),Io.scale(this._forward,0,-1,Ki,0),Io.sub(Zi,0,this.node.f32view,V.worldOffset+12,Qi,0),Io.dot(Ki,0,Qi,0);if(!t.active)return null;var r=t.node,n=0;if(r&&r.hasLayer){var o=r.mixedLayerMask;if((this._u32view[W.cullingMask]&o)!==o)return null;n=r.layer}else if(n=t.layer,!(this._u32view[W.cullingMask]&1<<n))return null;t.getCenter(Zi);for(var i=t.radius,a=0,s=this._clipPlanes;a<s.length;a++){var u=s[a];if(Io.dot(u.negNormal,0,Zi,0)>u.distance+i)return null}Io.scale(this._forward,0,1,Ki,0),Io.sub(Zi,0,this.node.f32view,V.worldOffset+12,Qi,0);var c=Io.dot(Ki,0,Qi,0),l=this._f32view[W.layerCullDistances+n];return 0!==l&&c>l?null:c},t.prototype.bind=function(){this.view.bind()},t.prototype.clear=function(){this.view.clear()},t.prototype.submit=function(){this.view.submit()},t.prototype.updateMatrices=function(){this.isUI?Gi.refreshWorldTransform():zi.refreshWorldTransform(),this._updateViewProjectionMatrix()},t.prototype._updateViewProjectionMatrix=function(){var e=this._nodeVersion!==this.node.version;e&&this._updateViewMatrix(),this._isDirty&&this._updateProjectionMatrix(),(e||this._isDirty)&&this._updateClipPlanes(),this.matVer+=1,this._isDirty=!1,this._nodeVersion=this.node.version},t.prototype.fillUniforms=function(e){this.isUI?(Yo.copy(this._f32view,W.viewMatrix2D,ta,0),e.setUniform("u_view",ta),Yo.copy(this._f32view,W.viewMatrixInverse2D,ta,0),e.setUniform("u_viewInverse",ta),Yo.copy(this._f32view,W.projectionMatrix2D,ta,0),e.setUniform("u_projection",ta),Yo.multiply(this._f32view,W.viewMatrix2D,this._f32view,W.projectionMatrix2D,e.f32view,e.descriptor.layout.u_vp[1])):(Yo.copy(this._f32view,W.viewMatrix,ta,0),e.setUniform("u_view",ta),Yo.copy(this._f32view,W.viewMatrixInverse,ta,0),e.setUniform("u_viewInverse",ta),Yo.copy(this._f32view,W.projectionMatrix,ta,0),e.setUniform("u_projection",ta),Yo.multiply(this._f32view,W.viewMatrix,this._f32view,W.projectionMatrix,e.f32view,e.descriptor.layout.u_vp[1]))},t.prototype._updateViewMatrix=function(){var e=2&this._u32view[W.manualMatrix];if(this.isUI){var t=2/this._f32view[W.canvasSizeY];return Yo.composeRST3toRST4(this.node.f32view,j.worldMatrix,this._f32view,W.viewMatrixInverse),this._f32view[W.viewMatrixInverse+14]=10,Yo.inverse(this._f32view,W.viewMatrixInverse,this._f32view,W.viewMatrix),Yo.copy(this._f32view,W.viewMatrixInverse,this._f32view,W.viewMatrixInverse2D),this._f32view[W.viewMatrixInverse2D+12]*=t,this._f32view[W.viewMatrixInverse2D+13]*=t,void Yo.inverse(this._f32view,W.viewMatrixInverse2D,this._f32view,W.viewMatrix2D)}if(!e){var r=0!==this._u32view[W.targetTransform];if(r)Io.copy(this.node.f32view,V.worldOffset+12,this._f32view,W.eye),Io.copy(this.targetTransform.f32view,V.worldOffset+12,Zi,0);else{var n=Ki;Io.copy(this.node.f32view,V.worldOffset+8,n,0),Io.normalize(n,0,n,0),Io.copy(this.node.f32view,V.worldOffset+12,this._f32view,W.eye),Io.isZero(n,0)&&(n=Hi),Io.add(n,0,this._f32view,W.eye,Zi,0)}Io.sub(Zi,0,this._f32view,W.eye,this._forward,0),Io.normalize(this._forward,0,this._forward,0),r?Io.copy(this.node.f32view,V.worldOffset+4,qi,0):Io.copy(this._f32view,W.up,qi,0),Io.normalize(qi,0,qi,0),Io.isZero(qi,0)&&qi.set([0,1,0]),Yo.lookAt(Zi,0,this._f32view,W.eye,qi,0,this._f32view,W.viewMatrix),Yo.inverse(this._f32view,W.viewMatrix,this._f32view,W.viewMatrixInverse)}},t.prototype._updateProjectionMatrix=function(){var e=1&this._u32view[W.manualMatrix],t=this._u32view[W.isProjection];if(!e){if(this.isUI)return Yo.orthographic(-this.aspect*this.orthoSize,this.aspect*this.orthoSize,-this.orthoSize,this.orthoSize,this.near,this.far,this._f32view,W.projectionMatrix),void Yo.orthographic(-this.aspect,this.aspect,-1,1,this.near,this.far,this._f32view,W.projectionMatrix2D);if(t)Yo.perspective(this.fov,this.aspect,this.near,this.far,this._f32view,W.projectionMatrix);else{var r=this.orthoSize,n=-r*this.aspect,o=r*this.aspect,i=r,a=-r;Yo.orthographic(n,o,a,i,this.near,this.far,this._f32view,W.projectionMatrix)}}},t.prototype._updateClipPlanes=function(){if(!this.isUI){var e=Zi;Io.scale(this._forward,0,-1,e,0);var t=Ki;Io.copy(this.node.f32view,V.worldOffset+4,t,0),Io.normalize(t,0,t,0);var r=Qi;Io.cross(t,0,e,0,r,0);var n=$i;Io.copy(this.node.f32view,V.worldOffset+12,n,0);var o=Ji;Io.scale(e,0,this.near,o,0),Io.sub(n,0,o,0,o,0);var i=ea;Io.scale(e,0,this.far,i,0),Io.sub(n,0,i,0,i,0);var a=this._clipPlanes,s=Math.tan(this.fov/2),u=this.near*s,c=u*this.aspect;this._f32view[W.isProjection]?(Io.copy(o,0,a[0].point,0),Io.copy(e,0,a[0].negNormal,0),a[0].distance=Io.dot(a[0].point,0,a[0].negNormal,0),Io.copy(i,0,a[1].point,0),Io.scale(e,0,-1,a[1].negNormal,0),a[1].distance=Io.dot(a[1].point,0,a[1].negNormal,0),Io.scale(t,0,u,a[2].point,0),Io.add(o,0,a[2].point,0,a[2].point,0),Io.sub(a[2].point,0,n,0,a[2].negNormal,0),Io.normalize(a[2].negNormal,0,a[2].negNormal,0),Io.cross(a[2].negNormal,0,r,0,a[2].negNormal,0),Io.scale(a[2].negNormal,0,-1,a[2].negNormal,0),a[2].distance=Io.dot(a[2].point,0,a[2].negNormal,0),Io.scale(t,0,u,a[3].point,0),Io.sub(o,0,a[3].point,0,a[3].point,0),Io.sub(a[3].point,0,n,0,a[3].negNormal,0),Io.normalize(a[3].negNormal,0,a[3].negNormal,0),Io.cross(r,0,a[3].negNormal,0,a[3].negNormal,0),Io.scale(a[3].negNormal,0,-1,a[3].negNormal,0),a[3].distance=Io.dot(a[3].point,0,a[3].negNormal,0),Io.scale(r,0,c,a[4].point,0),Io.sub(o,0,a[4].point,0,a[4].point,0),Io.sub(a[4].point,0,n,0,a[4].negNormal,0),Io.normalize(a[4].negNormal,0,a[4].negNormal,0),Io.cross(a[4].negNormal,0,t,0,a[4].negNormal,0),Io.scale(a[4].negNormal,0,-1,a[4].negNormal,0),a[4].distance=Io.dot(a[4].point,0,a[4].negNormal,0),Io.scale(r,0,c,a[5].point,0),Io.add(o,0,a[5].point,0,a[5].point,0),Io.sub(a[5].point,0,n,0,a[5].negNormal,0),Io.normalize(a[5].negNormal,0,a[5].negNormal,0),Io.cross(t,0,a[5].negNormal,0,a[5].negNormal,0),Io.scale(a[5].negNormal,0,-1,a[5].negNormal,0),a[5].distance=Io.dot(a[5].point,0,a[5].negNormal,0)):(Io.copy(o,0,a[0].point,0),Io.copy(e,0,a[0].negNormal,0),a[0].distance=Io.dot(a[0].point,0,a[0].negNormal,0),Io.copy(i,0,a[1].point,0),Io.scale(e,0,-1,a[1].negNormal,0),a[1].distance=Io.dot(a[1].point,0,a[1].negNormal,0),Io.scale(t,0,this.orthoSize,a[2].point,0),Io.add(o,0,a[2].point,0,a[2].point,0),Io.copy(t,0,a[2].negNormal,0),a[2].distance=Io.dot(a[2].point,0,t,0),Io.scale(t,0,this.orthoSize,a[3].point,0),Io.sub(o,0,a[3].point,0,a[3].point,0),Io.scale(t,0,-1,a[3].negNormal,0),a[3].distance=Io.dot(a[3].point,0,a[3].negNormal,0),Io.scale(r,0,this.orthoSize*this.aspect,a[4].point,0),Io.sub(o,0,a[4].point,0,a[4].point,0),Io.scale(r,0,-1,a[4].negNormal,0),a[4].distance=Io.dot(a[4].point,0,a[4].negNormal,0),Io.scale(r,0,this.orthoSize*this.aspect,a[5].point,0),Io.add(o,0,a[5].point,0,a[5].point,0),Io.copy(r,0,a[5].negNormal,0),a[5].distance=Io.dot(a[5].point,0,r,0))}},t.prototype._updateUIMatrix=function(){var e=this._f32view[W.canvasSizeY];this._preSizeY!==e&&(this._preSizeY=e,this.uiWorldMatrix.set(Xi),this.uiWorldMatrix[0]=2/e,this.uiWorldMatrix[5]=2/e,this.uiWorldMatrix[10]=1,this.uiWorldMatrix[15]=1)},t.prototype.setSharedDirty=function(){this._isDirty=!0},t.prototype.destroy=function(){this.isUI?Gi.removeCamera(this):zi.removeCamera(this)},t.CLASS_NAME="RenderCameraComponent",t}(oe),na=new Float32Array([0,0,0,0]),oa=function(e){function t(r){var n=e.call(this)||this;n._nodeVersion=-1;var o=Ci(t.CLASS_NAME,r);return n._f32view=o.getF32View(r),n._u32view=o.getU32View(r),t.COMPONENTS[r]=n,n}return $(t,e),Object.defineProperty(t.prototype,"active",{get:function(){return!!this._u32view[G.active]},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"layer",{get:function(){return this._u32view[G.layer]},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"radius",{get:function(){return this._radius},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"node",{get:function(){return Si(this._u32view[G.entityId])},enumerable:!1,configurable:!0}),t.prototype.getCenter=function(e){var t=this.node;if(this._nodeVersion!==t.version){na[0]=this._f32view[G.boundingBallCenter],na[1]=this._f32view[G.boundingBallCenter+1],na[2]=this._f32view[G.boundingBallCenter+2],na[3]=1,Yo.transformVector(t.f32view,V.worldOffset,na,0,na,0),this._centerX=na[0],this._centerY=na[1],this._centerZ=na[2];var r=Uo(t.f32view,V.worldOffset),n=Uo(t.f32view,V.worldOffset+4),o=Uo(t.f32view,V.worldOffset+8),i=Math.max(r,n,o);this._radius=this._f32view[G.boundingBallRadius]*i,this._nodeVersion=t.version}e[0]=this._centerX,e[1]=this._centerY,e[2]=this._centerZ},t.CLASS_NAME="CullingComponent",t.COMPONENTS={},t}(oe),ia=function(e){function t(t,r){var n=e.call(this)||this;return n.clipCount=t,n.nodeCount=r,n.entityIdsOffsets=3*t,n._createData(12*t+4*r),n._u32view=new Uint32Array(n.data),n._f32view=new Float32Array(n.data),n}return $(t,e),t.UPDATE_ANIMATORS=function(e,t){for(var r=0;r<t;r+=1){var n=e[r].__handle;if(n&&0!==n.id&&(n.update(),0!==n.nodeCount)){var o=n._lastUpdateNode;if(o){for(;o.parent;)o=o.parent;zi.isRootNode(o)||o.updateSubTree()}}}},Object.defineProperty(t.prototype,"animationClipModels",{get:function(){return this.__feObj.animationClipModels},enumerable:!1,configurable:!0}),t.prototype.update=function(){var e=this.animationClipModels;this._lastUpdateNode=null;for(var t=this.entityIdsOffsets,r=0;r<this.clipCount;r+=1){var n=e[r].__handle,o=this._f32view[3*r+1],i=this._f32view[3*r+2];if(!n||i<=0||i>1)n&&n.nodesCount&&(t+=n.nodesCount);else{for(var a={},s=0,u=n.interpolate(o);s<u.length;s++){var c=u[s],l=c[0],f=c[1],p=a[d=this._u32view[l+t]];if(p){p.percent+=i/p.percent;var h=i/p.percent;p.blend(f,h)}else a[d]=f}for(var d in a){var _=a[d],y=Si(parseInt(d,10));y&&(_.syncValuesToNode(y),this._lastUpdateNode||(this._lastUpdateNode=y))}t+=n.nodesCount}}},t.CLASS_NAME="Animator",t}(oe),aa=new Float32Array(16),sa=function(t){function r(r,n){void 0===n&&(n=0);var o=t.call(this)||this;return o.boneCount=r,o.flag=n,o._entityIdsOffsets=Z.boneIndices+Z.perBoneIndices*r,o._createData(4*(Z.boneIndices+(Z.perBoneIndices+Z.perBoneEntityId+(1&n?Z.perBoneMatrixNew:Z.perBoneMatrixOld))*r)),o._u32view=new Uint32Array(o.data),o._matrixes=new Float32Array(o.data,4*(o._entityIdsOffsets+r)),2&n&&(o._texture=new ho(e.ETextureType.D2,4,r,0,0,e.ETextureFormat.RGBA32F,146)),o}return $(r,t),r.UPDATE_SKINNINGS=function(e,t){for(var r=0;r<t;r+=1){var n=e[r].__handle;n&&n.update()}},Object.defineProperty(r.prototype,"boneInverseModel",{get:function(){var e;return null===(e=this.__feObj.boneInverseModel)||void 0===e?void 0:e.__handle},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"boneOffsetMatrices",{get:function(){return this._matrixes},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"useBoneMatrixTexture",{get:function(){return 2&this.flag},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"texture",{get:function(){return this._texture},enumerable:!1,configurable:!0}),r.prototype.update=function(){var e=this.boneInverseModel;if(e){for(var t=e.matrixes,r=this._matrixes,n=0;n<this.boneCount;n+=1){var o=Si(this._u32view[this._entityIdsOffsets+n]);if(!o)return void hr("Skeleton: entity not found!");var i=this._u32view[1+n];1&this.flag?o.is2D?Xo(o.f32view,j.worldMatrix,t,9*i,r,9*n):(Yo.multiply(o.f32view,V.worldOffset,t,16*i,aa,0),aa[3]=aa[12],aa[7]=aa[13],aa[11]=aa[14],r.set(new Float32Array(aa.buffer,0,12),12*n)):o.is2D?Xo(o.f32view,j.worldMatrix,t,9*i,r,9*n):Yo.multiply(o.f32view,V.worldOffset,t,16*i,r,16*n)}this.useBoneMatrixTexture&&this._texture.update(0,0,0,0,0,4,this.boneCount,r)}else hr("Skeleton: bone model inverse not found!")},r.CLASS_NAME="SkinnedSkeleton",r}(oe),ua=new Float32Array([0,1,0]),ca=new Float32Array([0,0,0]),la=function(){function e(){this._center=new Float32Array([0,0,0]),this._AxisX=new Float32Array([1,0,0]),this._AxisY=new Float32Array([0,1,0]),this._AxisZ=new Float32Array([0,0,1]),this._width=0,this._height=0,this._depth=0}return e.prototype.intersectSphere=function(e,t){Io.sub(this._center,0,e,0,ca,0);var r=this._width+t,n=this._height+t,o=this._depth+t;return!(Math.abs(Io.dot(ca,0,this._AxisX,0))>r||Math.abs(Io.dot(ca,0,this._AxisY,0))>n||Math.abs(Io.dot(ca,0,this._AxisZ,0))>o)},e.prototype.setValues=function(e,t,r,n,o){this._center.set(e),this.setForward(t),this._width=r,this._height=n,this._depth=o},e.prototype.setForward=function(e){Io.normalize(e,0,this._AxisZ,0),this._updateAxis()},e.prototype._updateAxis=function(){Io.cross(ua,0,this._AxisZ,0,this._AxisX,0),Io.cross(this._AxisX,0,this._AxisZ,0,this._AxisY,0)},e}(),fa=new Float32Array(4),pa=new Float32Array(3),ha=new Float32Array(3),da=new Float32Array(3),_a=new Float32Array([0,1,0]),ya=new Float32Array(16),va=new Float32Array(16),ma=new Float32Array(16),ga=[{x:0,y:0,w:.5,h:.5},{x:.5,y:0,w:.5,h:.5},{x:0,y:.5,w:.5,h:.5},{x:.5,y:.5,w:.5,h:.5}],ba=function(t){function r(){var e=t.call(this)||this;return e._camDirtyKey="",e._isDirty=!1,e._obbs=[new la,new la,new la,new la],e._createData(4*X.size),e._u32view=new Uint32Array(e.data),e._f32view=new Float32Array(e.data),e._sharedLightSpaceMatrices=new Float32Array(e.data,4*X.lightSpaceMatrices,64),e._lightSpaceMatrices=[new Float32Array(16),new Float32Array(16),new Float32Array(16),new Float32Array(16)],e._fars=new Float32Array(e.data,4*(X.bounds+1),4),e._nears=new Float32Array(e.data,4*X.bounds,4),e}return $(r,t),Object.defineProperty(r.prototype,"view",{get:function(){return this.__feObj.view.__handle},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"active",{get:function(){return!!this._u32view[X.active]},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"depth",{get:function(){return this._u32view[X.depth]},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"uniforms",{get:function(){return this.__feObj.uniforms.__handle},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"shadowDistance",{get:function(){return this._f32view[X.shadowDistance]},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"shadowFilterMode",{get:function(){return this._u32view[X.shadowFilterMode]},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"shadowMode",{get:function(){return this._u32view[X.shadowMode]},enumerable:!1,configurable:!0}),r.prototype.getLightDir=function(e){e[0]=this._f32view[X.lightDir],e[1]=this._f32view[X.lightDir+1],e[2]=this._f32view[X.lightDir+2]},r.prototype.preRender=function(e){var t=e.id+"-"+e.matVer;if(this._isDirty||this._camDirtyKey!==t){this._camDirtyKey=t,this._isDirty=!1;for(var r=0;r<this.shadowMode;r+=1)this._updateLightMatrix(r,e)}},r.prototype.drawSubMeshes=function(t,r){for(var n=this.shadowMode,o=n!==e.EShadowMode.OneCascade_PCF&&n!==e.EShadowMode.PCSS,i=0;i<n;i+=1){var a=this._obbs[i];ni.uniforms0.setUniform("u_lightSpaceMatrix",this._lightSpaceMatrices[i]);for(var s=!1,u=Ii(r.length),c=0,l=r;c<l.length;c++){var f=l[c],p=!0;if(o){var h=f.cullingComp;if(!h)return;var d=h.radius;h.getCenter(fa),p=a.intersectSphere(fa,d)}p&&(o&&!s&&(this.view.changeViewportScaleFactor(ga[i]),s=!0),f.render(t,u))}}},r.prototype.clear=function(){this.view.bind(),this.view.clear()},r.prototype.submit=function(){this.view.submit()},r.prototype._updateLightMatrix=function(e,t){var r=this._nears[e],n=this._fars[e],o=this._obbs[e],i=new Float32Array(3),a=0,s=Math.sqrt(1+t.aspect*t.aspect)*Math.tan(.5*t.fov);s*s>(n-r)/(n+r)?(i[0]=0,i[1]=0,i[2]=-n,a=n*s):(i[0]=0,i[1]=0,i[2]=(n+r)*(1+s*s)*-.5,a=.5*Math.sqrt((n-r)*(n-r)+2*(n*n+r*r)*s*s+(n+r)*(n+r)*s*s*s*s)),fa[0]=i[0],fa[1]=i[1],fa[2]=i[2],fa[3]=1,Yo.transformVector(t.f32View,W.viewMatrixInverse,fa,0,fa,0),i[0]=fa[0]/fa[3],i[1]=fa[1]/fa[3],i[2]=fa[2]/fa[3],Io.copy(i,0,pa,0),Io.scale(this._f32view,X.lightDir,-1,ha,0),o.setValues(pa,ha,a,a,this.shadowDistance),Io.add(pa,0,ha,0,da,0),Yo.lookAt(da,0,pa,0,_a,0,ya,0),Yo.orthographic(-a,a,-a,a,-this.shadowDistance,this.shadowDistance,va,0),Yo.multiply(va,0,ya,0,ma,0),Yo.copy(ma,0,this._lightSpaceMatrices[e],0),ni.neverTranspose?Yo.copy(ma,0,this._sharedLightSpaceMatrices,16*e):Yo.transpose(ma,0,this._sharedLightSpaceMatrices,16*e)},r.prototype.destroy=function(){},r.prototype.setSharedDirty=function(){this._isDirty=!0},r.CLASS_NAME="LightCameraComponent",r}(oe),wa={index:0,value:0,inTangent:0,outTangent:0},xa={index:0,value:0,inTangent:0,outTangent:0},Ea={map:[],mapKeys:{}},Sa=function(e){function t(t){var r=e.call(this)||this;r._buffer=t,r._inited=!1,r._validSampleCount=0,r._createData(),r._u32view=new Uint32Array(t),r._f32view=new Float32Array(t),r._nodes={},r._cache={},r._cacheNew={},r._nodesCount=0,r._validSampleCount=0;for(var n=r._u32view[0],o=r._buffer.byteLength,i=0;i<r.totalSampleGroup;i+=1){var a=r._u32view[4+3*i+0];if(n+16*r._u32view[4+3*i+2]>o)return hr("animation clip content data error"),r._inited=!0,r;r._nodes[a]||(r._nodes[a]={nodeId:a},r._nodesCount+=1),r._validSampleCount+=1}return r}return $(t,e),Object.defineProperty(t.prototype,"fps",{get:function(){return this._f32view[1]},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"totalFrame",{get:function(){return this._u32view[2]},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"totalSampleGroup",{get:function(){return this._u32view[3]},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"nodesCount",{get:function(){return this._nodesCount},enumerable:!1,configurable:!0}),t.prototype._initModel=function(){if(!this._inited){var e=this._u32view[0];if(3*this.totalSampleGroup*4+16!==e)return hr("animation clip header data error\n"),void(this._inited=!0);for(var t=e,r=0;r<this._validSampleCount;r+=1){var n=this._u32view[4+3*r+0],o=this._u32view[4+3*r+1],i=this._u32view[4+3*r+2],a=this._nodes[n];switch(o){case 1:a.txs=new Float32Array(this._buffer,t,4*i),a.txis=new Uint32Array(this._buffer,t,4*i);break;case 2:a.tys=new Float32Array(this._buffer,t,4*i),a.tyis=new Uint32Array(this._buffer,t,4*i);break;case 3:a.tzs=new Float32Array(this._buffer,t,4*i),a.tzis=new Uint32Array(this._buffer,t,4*i);break;case 4:a.sxs=new Float32Array(this._buffer,t,4*i),a.sxis=new Uint32Array(this._buffer,t,4*i);break;case 5:a.sys=new Float32Array(this._buffer,t,4*i),a.syis=new Uint32Array(this._buffer,t,4*i);break;case 6:a.szs=new Float32Array(this._buffer,t,4*i),a.szis=new Uint32Array(this._buffer,t,4*i);break;case 7:case 11:a.rxs=new Float32Array(this._buffer,t,4*i),a.rxis=new Uint32Array(this._buffer,t,4*i);break;case 8:case 12:a.rys=new Float32Array(this._buffer,t,4*i),a.ryis=new Uint32Array(this._buffer,t,4*i);break;case 9:case 13:a.rzs=new Float32Array(this._buffer,t,4*i),a.rzis=new Uint32Array(this._buffer,t,4*i);break;case 10:a.qws=new Float32Array(this._buffer,t,4*i),a.qwis=new Uint32Array(this._buffer,t,4*i),a.useQuat=!0;break;default:hr("wrong sample type\n")}t+=16*i}this._inited=!0}},t.prototype.interpolate=function(e){this._initModel();var t=e%this.totalFrame,r=t.toFixed(1);if(this._cache[r])return this._cache[r];var n=[];for(var o in this._nodes){var i=this._nodes[o];n.push([i.nodeId,this._interpolateOne(i,t)])}return this._cache[r]=n,n},t.prototype.interpolateNew=function(e,t,r,n,o,i){if(this._initModel(),0===this.totalFrame)return Ea;var a=e%this.totalFrame,s=Math.floor(a),u=Math.floor(10*a)-10*s,c=s;for(var l in c=((c=(c<<5)-c+u)<<5)-c+n,o)c=(c<<5)-c+o[l];if(this._cacheNew[c])return this._cacheNew[c];var f={map:[],mapKeys:{}},p=f.map,h=f.mapKeys,d=t.data,_=t.indexes,y=0;for(var v in this._nodes){var m=parseInt(v,10),g=this._nodes[m];if(!(m<0||m>r.length)){var b=o[l=r[m]];if(void 0!==b&&0!=(1<<n&b)){for(var w=this._interpolateOne(g,a),x=w.data,E=_[l],S=0;S<6;S+=1){var T=3*S;isNaN(x[T])?i&&(x[T]=d[E+S],x[T+1]=1,x[T+2]=1):(x[T+1]=1,x[T+2]=1)}!w.useQuat||isNaN(w.rx)||isNaN(w.ry)||isNaN(w.rz)||isNaN(w.qw)?i?(w.quatActive=!0,w.quatWeight=1,w.rx=d[E+6],w.ry=d[E+7],w.rz=d[E+8],w.qw=d[E+9]):(w.quatActive=!1,w.quatWeight=0):(w.quatActive=!0,w.quatWeight=1),p.push([l,w]),h[l]=y,y+=1}}}return this._cacheNew[c]=f,f},t.prototype.cloneNodes=function(e){return e.map((function(e,t){return[e[0],e[1].clone(t)]}))},t.prototype._interpolateOne=function(e,t){var r=this.fps,n=new Oa;n.tx=this._interpolateSampleForFrame(e.txs,e.txis,t,r),n.ty=this._interpolateSampleForFrame(e.tys,e.tyis,t,r),n.tz=this._interpolateSampleForFrame(e.tzs,e.tzis,t,r),n.sx=this._interpolateSampleForFrame(e.sxs,e.sxis,t,r),n.sy=this._interpolateSampleForFrame(e.sys,e.syis,t,r),n.sz=this._interpolateSampleForFrame(e.szs,e.syis,t,r);var o=this._getSampleForFrame(e.rxs,e.rxis,t,r);if(e.useQuat&&!0===o&&Number.isNaN(wa.outTangent)){var i=this._interpolateQuaternionSampleForFrame(e,t,r);n.rx=i[0],n.ry=i[1],n.rz=i[2],n.qw=i[3]}else n.rx=this._interpolateSampleForFrame(e.rxs,e.rxis,t,r),n.ry=this._interpolateSampleForFrame(e.rys,e.ryis,t,r),n.rz=this._interpolateSampleForFrame(e.rzs,e.rzis,t,r),n.qw=this._interpolateSampleForFrame(e.qws,e.qwis,t,r);return n.useQuat=e.useQuat,n},t.prototype._getSampleForFrame=function(e,t,r,n){if(!e)return!1;var o=e.length/4;if(0===o)return!1;for(var i=0,a=!1,s=0;s<o;s+=1)if(t[4*s]>=r){i=s,a=!0;break}a||(i=o-1);var u=4*i;return 0!==i&&a&&t[i]!==~~r?(xa.index=t[u],xa.value=e[u+1],xa.inTangent=e[u+2],xa.outTangent=e[u+3],wa.index=t[u-4],wa.value=e[u-3],wa.inTangent=e[u-2],wa.outTangent=e[u-1],!0):e[u+1]},t.prototype._interpolateSampleForFrame=function(e,t,r,n){var o=this._getSampleForFrame(e,t,r,n);if("number"==typeof o)return o;if(!o)return NaN;var i=(r-wa.index)/(xa.index-wa.index),a=(xa.index-wa.index)/n,s=i*i*i,u=i*i,c=2*s-3*u+1,l=-2*s+3*u,f=s-2*u+i,p=s-u;return wa.value*c+xa.value*l+wa.outTangent*f*a+xa.inTangent*p*a},t.prototype._interpolateQuaternionSampleForFrame=function(e,t,r){var n,o=[0,0,0,1],i=[0,0,0,1],a=-1,s=this._getSampleForFrame(e.rxs,e.rxis,t,r);if("number"==typeof s?(o[0]=s,i[0]=s,a=0):(o[0]=wa.value,i[0]=xa.value,a=xa.index-wa.index),n=wa.index,"number"==typeof(s=this._getSampleForFrame(e.rys,e.ryis,t,r))?(o[1]=s,i[1]=s):(o[1]=wa.value,i[1]=xa.value),"number"==typeof(s=this._getSampleForFrame(e.rzs,e.rzis,t,r))?(o[2]=s,i[2]=s):(o[2]=wa.value,i[2]=xa.value),"number"==typeof(s=this._getSampleForFrame(e.qws,e.qwis,t,r))?(o[3]=s,i[3]=s):(o[3]=wa.value,i[3]=xa.value),0===a)return o;var u=(t-n)/a;return Bo.slerpArray(o,i,u)},t.CLASS_NAME="AnimationClipModel",t}(oe),Ta=new Float32Array(4),Oa=function(){function e(){this.percent=0,this.useQuat=!1,this._data=new Float32Array(24)}return Object.defineProperty(e.prototype,"data",{get:function(){return this._data},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"tx",{get:function(){return this._data[0]},set:function(e){this._data[0]=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"txActive",{get:function(){return!!this._data[1]},set:function(e){this._data[1]=e?1:0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"txWeight",{get:function(){return this._data[2]},set:function(e){this._data[2]=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"ty",{get:function(){return this._data[3]},set:function(e){this._data[3]=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"tyActive",{get:function(){return!!this._data[4]},set:function(e){this._data[4]=e?1:0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"tyWeight",{get:function(){return this._data[5]},set:function(e){this._data[5]=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"tz",{get:function(){return this._data[6]},set:function(e){this._data[6]=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"tzActive",{get:function(){return!!this._data[7]},set:function(e){this._data[7]=e?1:0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"tzWeight",{get:function(){return this._data[8]},set:function(e){this._data[8]=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"sx",{get:function(){return this._data[9]},set:function(e){this._data[9]=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"sxActive",{get:function(){return!!this._data[10]},set:function(e){this._data[10]=e?1:0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"sxWeight",{get:function(){return this._data[11]},set:function(e){this._data[11]=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"sy",{get:function(){return this._data[12]},set:function(e){this._data[12]=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"syActive",{get:function(){return!!this._data[13]},set:function(e){this._data[13]=e?1:0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"syWeight",{get:function(){return this._data[14]},set:function(e){this._data[14]=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"sz",{get:function(){return this._data[15]},set:function(e){this._data[15]=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"szActive",{get:function(){return!!this._data[16]},set:function(e){this._data[16]=e?1:0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"szWeight",{get:function(){return this._data[17]},set:function(e){this._data[17]=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"rx",{get:function(){return this._data[18]},set:function(e){this._data[18]=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"ry",{get:function(){return this._data[19]},set:function(e){this._data[19]=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"rz",{get:function(){return this._data[20]},set:function(e){this._data[20]=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"qw",{get:function(){return this._data[21]},set:function(e){this._data[21]=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"quatActive",{get:function(){return!!this._data[22]},set:function(e){this._data[22]=e?1:0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"quatWeight",{get:function(){return this._data[23]},set:function(e){this._data[23]=e},enumerable:!1,configurable:!0}),e.prototype.sub=function(e){for(var t=this.data,r=e.data,n=0;n<6;n+=1){var o=3*n;t[o+1]&&r[o+1]&&(t[o]-=r[o],t[o+2]-=r[o+2])}t[22]&&r[22]&&(Bo.invert(r,18,Ta,0),Bo.multiply(t,18,Ta,0,t,18),t[23]-=r[23])},e.prototype.clone=function(t){if(!e._CLONE_NODES_CACHE)for(var r=e._CLONE_NODES_CACHE=new Array(128),n=0;n<128;n+=1)r[n]=new e;var o=e._CLONE_NODES_CACHE[t];return o._data.set(this._data),o},e.prototype.disableAll=function(){for(var e=this.data,t=0;t<6;t+=1){var r=3*t;e[r+1]=0,e[r+2]=0}e[22]=0,e[23]=0},e.prototype.blend=function(e,t){if(this.tx=this._sampleValueBlendHelper(this.tx,e.tx,t),this.ty=this._sampleValueBlendHelper(this.ty,e.ty,t),this.tz=this._sampleValueBlendHelper(this.tz,e.tz,t),this.sx=this._sampleValueBlendHelper(this.sx,e.sx,t),this.sy=this._sampleValueBlendHelper(this.sy,e.sy,t),this.sz=this._sampleValueBlendHelper(this.sz,e.sz,t),this.useQuat||e.useQuat){var r=isNaN(this.qw)||isNaN(this.rx)||isNaN(this.ry)||isNaN(this.rz),n=isNaN(e.qw)||isNaN(e.rx)||isNaN(e.ry)||isNaN(e.rz);if(r&&n)return void(this.qw=this.rx=this.ry=this.rz=NaN);var o=this.rx,i=this.ry,a=this.rz,s=this.qw,u=e.rx,c=e.ry,l=e.rz,f=e.qw;if(r||n)r&&(this.rx=e.rx,this.ry=e.ry,this.rz=e.rz,this.qw=e.qw);else{var p=0,h=0,d=0,_=0,y=o*u+i*c+a*l+s*f;y<0&&(y=-y,u=-u,c=-c,l=-l,f=-f),1-y>1e-6?(p=Math.acos(y),h=Math.sin(p),d=Math.sin((1-t)*p)/h,_=Math.sin(t*p)/h):(d=1-t,_=t),this.rx=d*o+_*u,this.ry=d*i+_*c,this.rz=d*a+_*l,this.qw=d*s+_*f}}else this.rx=this._sampleValueBlendHelper(this.rx,e.rx,t),this.ry=this._sampleValueBlendHelper(this.ry,e.ry,t),this.rz=this._sampleValueBlendHelper(this.rz,e.rz,t)},e.prototype._sampleValueBlendHelper=function(e,t,r){return isNaN(e)||isNaN(t)?isNaN(e)&&isNaN(t)?NaN:isNaN(e)?t:e:e*(1-r)+r*t},e.prototype.syncValuesToNode=function(e){e.setTRS(this.tx,this.ty,this.tz,this.sx,this.sy,this.sz,this.rx,this.ry,this.rz,this.qw)},e}(),Aa=function(e){function t(t){var r=e.call(this)||this;return r._buffer=t,r._createData(),r._f32view=new Float32Array(t),r}return $(t,e),Object.defineProperty(t.prototype,"matrixes",{get:function(){return this._f32view},enumerable:!1,configurable:!0}),t}(oe),Ca=new(function(){function e(){}return e.prototype.entityAddChild=function(e,t){Si(e).addChild(Si(t))},e.prototype.entityAddChildAtIndex=function(e,t,r){Si(e).addChildAtIndex(Si(t),r)},e.prototype.entityRemoveFromParent=function(e){Si(e).removeFromParent()},e.prototype.entityClear=function(e){Si(e).disperseSubTree()},e.prototype.entitySetActive=function(e,t){Si(e).active=t},e.prototype.entitySetLocalMatrixDirty=function(e){var t=Si(e);t.isDirty=!0;for(var r=t.parent;r&&!r.isDirty;)r.isDirty=!0,r=r.parent},e.prototype.setRootEntity=function(e){var t=Si(e);t.is2D?Gi.setRootNode(t):zi.setRootNode(t)},e.prototype.refreshWorldTransform=function(){zi.refreshWorldTransform()},e.prototype.bindEntityToBone=function(e,t){var r=Si(e.id);if(r){var n=Si(t.id);n&&r.bindToBone(n)}},e.prototype.unbindEntityFromBone=function(e){var t=Si(e.id);t&&t.unBindFromBone()},e.prototype.bindEntitiesToBones=function(e,t){for(var r=0;r<e.length;r++){var n=Si(e[r].id);if(n){var o=Si(t[r].id);o&&n.bindToBone(o)}}},e.prototype.unbindEntitiesFromBones=function(e){for(var t=0,r=e;t<r.length;t++){var n=Si(r[t].id);n&&n.unBindFromBone()}},e}()),Ma=function(){function e(){this.map=new Map}return e.prototype.set=function(e,t){this.map.set(e,t)},e.prototype.get=function(e){return this.map.get(e)},e.prototype.del=function(e){this.map.delete(e)},e}(),Pa=function(){function e(){this.key1toKey2=new Map,this.key2toValue=new Map}return e.prototype.set=function(e,t,r){this.key1toKey2.set(e,t),this.key2toValue.set(t,r)},e.prototype.get=function(e,t){if(this.key1toKey2.get(e)===t)return this.key2toValue.get(t)},e.prototype.del=function(e,t){this.key1toKey2.delete(e),this.key2toValue.delete(t)},e}(),Ra=function(e){function t(t,r){var n=e.call(this)||this;return n._onEnlarged=r,n.size=0,n._createData(4*(t+1)),n.size=t,n._u32view=new Uint32Array(n.data,4),n._sizeView=new Uint32Array(n.data,0,1),n}return $(t,e),Object.defineProperty(t.prototype,"dataView",{get:function(){return this._u32view},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"usedSize",{get:function(){return this._sizeView[0]>this.size?this.size:this._sizeView[0]},set:function(e){this._sizeView[0]=e},enumerable:!1,configurable:!0}),t.prototype.enlarge=function(){var e=this._u32view;this.size*=2,this.data=new ArrayBuffer(4*this.size),this._u32view=new Uint32Array(this.data),this._u32view.set(e),this._onEnlarged()},t.CLASS_NAME="ScalableList",t}(oe),Da=function(e){function t(t){var r=e.call(this)||this;return r._blendCount=t,r._createData(5*t*4+12),r._u32view=new Uint32Array(r.data),r._f32view=new Float32Array(r.data),r}return $(t,e),Object.defineProperty(t.prototype,"blendCount",{get:function(){return this._blendCount},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"weight",{get:function(){return this._f32view[0]},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"useDefault",{get:function(){return this._f32view[1]},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"nextState",{get:function(){var e;return null===(e=this.__feObj._nextState)||void 0===e?void 0:e.__handle},enumerable:!1,configurable:!0}),t.prototype.getBlend=function(e,t){var r=5*e+3;t.clipModelId=this._u32view[r],t.frameIndex=this._f32view[r+1],t.weight=this._f32view[r+2],t.additiveClipModelId=this._u32view[r+3],t.additiveClipFrameIndex=this._f32view[r+4]},t.CLASS_NAME="AnimatorControllerStateModel",t}(oe),Na=function(){function e(e){this._nodesCount=e,this._bufferSize=24*e,this.data=new Float32Array(this._bufferSize),this.indexes={},this.last=0,this.length=0}return e.prototype.reset=function(){this.indexes={},this.last=0,this.length=0,this.data.set(new Float32Array(e._ZERO_BUFFER,0,this._bufferSize))},e.prototype.showDebugInfo=function(e){var t="",r=this.indexes,n=this.data,o=0;for(var i in r)void 0!==e&&e!==i||(t+=i+"\n",["tx","ty","tz","sx","sy","sz"].forEach((function(e,r){t+=e+": "+!!n[o+3*r+1]+", "+n[o+3*r+2]+", "+n[o+3*r]+"\n"})),t+="quat: "+!!n[o+23]+", "+n[o+22]+", ("+n[o+18]+","+n[o+19]+","+n[o+20]+","+n[o+21]+")\n",t+="\n",o+=24);return t="count: "+o/24+"\n\n"+t},e.MAX_NODE_COUNT=128,e._ZERO_BUFFER=new ArrayBuffer(24*e.MAX_NODE_COUNT*4),e}(),Ia=function(t){function r(r,n,o,i,a,s,u,c){var l=t.call(this)||this;l._clipBinding={},l._clipModels={};var f=[];if(l._updateBinding(r,n,o,i,a,s,c,f)&&u===e.EUseDefaultAddedAction.Refresh){for(var p=l._defaultValues={indexes:{},data:new Float32Array(10*f.length),endNodeId:0,nodesCount:0},h=p.indexes,d=p.data,_=0,y=0;y<f.length;y+=1){var v=f[y],m=Si(v);m&&(h[v]=10*y,m.getTRS3D(d,10*y),_=v)}l._defaultValues.endNodeId=_,l._defaultValues.nodesCount=Object.keys(h).length}return l}return $(r,t),Object.defineProperty(r.prototype,"root",{get:function(){return this._root},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"defaultValues",{get:function(){return this._defaultValues},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"clipBinding",{get:function(){return this._clipBinding},enumerable:!1,configurable:!0}),r.prototype.isValidClipModel=function(e){return!!this._clipBinding[e]},r.prototype.createBlendResult=function(e){var t=this._defaultValues.nodesCount;t=(t<<5)-t+e;var n=r._BLEND_RESULT_CACHE[t];return n?n.reset():n=r._BLEND_RESULT_CACHE[t]=new Na(this._defaultValues.nodesCount),n},r.prototype.rebind=function(t,r,n,o,i,a,s,u,c,l){var f=[];if(this._updateBinding(t,r,n,o,i,a,l,f))return!1;var p=this._defaultValues,h=p.indexes,d=p.data;p.endNodeId;var _=this._defaultValues={indexes:{},data:new Float32Array(10*f.length),endNodeId:0,nodesCount:0},y=_.indexes,v=_.data,m=s,g=m,b=!1;m&e.EUseDefaultRemovedAction.WriteBack&&(b=!0,g=m&~e.EUseDefaultRemovedAction.WriteBack);var w=u,x=w,E=!1;w&e.EUseDefaultRetainedAction.WriteBack&&(E=!0,x=w&~e.EUseDefaultRetainedAction.WriteBack);for(var S,T,O,A=c,C=0,M=f;C<M.length;C++){var P=M[C];h[P]?S.push(P):O.push(P)}for(var R in h){var D=parseInt(R,10);if(f.indexOf(D)<0){var N=Si(D);N&&!N.is2D&&T.push(D)}}if(b)for(var I=0,L=T;I<L.length;I++)Si(D=L[I]).setTRSFromData(d,h[D]);var F=0;if(g===e.EUseDefaultRemovedAction.Keep)for(var k=0,U=T;k<U.length;k++){y[D=U[k]]=F++;var B=h[D];v.set(d.slice(B,B+10),10*F)}if(x===e.EUseDefaultRetainedAction.Refresh)for(var j=0,V=S;j<V.length;j++)y[D=V[j]]=F++,Si(D).getTRS3D(v,10*F);if(E)for(var z=0,G=S;z<G.length;z++)Si(D=G[z]).setTRSFromData(d,h[D]);if(x===e.EUseDefaultRetainedAction.Keep)for(var W=0,X=S;W<X.length;W++)y[D=X[W]]=F++,B=h[D],v.set(d.slice(B,B+10),10*F);if(A===e.EUseDefaultAddedAction.Refresh)for(var H=0,q=O;H<q.length;H++)y[D=q[H]]=F++,Si(D).getTRS3D(v,10*F);var Y=Object.keys(y);return this._defaultValues.endNodeId=parseInt(Y[Y.length-1],10),this._defaultValues.nodesCount=Y.length,!0},r.prototype.update=function(e,t,r,n,o,i,a,s,u){return!0},r.prototype.getClipBindingInfo=function(e){return this._clipModels[e]||null},r.prototype.writeDefaultValues=function(){var e=this._defaultValues,t=e.indexes,r=e.data;for(var n in t){var o=Si(parseInt(n,10));if(o&&!o.is2D){var i=t[n];o.useQuat=!0,o.setTRSFromData(r,i)}}},r.prototype._updateBinding=function(e,t,r,n,o,i,a,s){for(var u={},c=Math.min(e.length-t,r),l=0,f=t;f<c;f+=1){var p=e[f];if(!p)return!1;var h=p.__handle,d=p.id;if(!h)return!1;if(l>i)return!1;this._clipModels[d]=h;for(var _=n[l++],y=u[d]=[],v=0;v<_;v+=1){if(l>i)return!1;var m=n[l],g=0;if(m&&0!==m.id){var b=Si(g=m.id);!b||b.is2D?g=0:s.push(g)}y.push(g),l+=1}}this._clipBinding=u;var w=Si(a);return w&&!w.is2D||(w=this._getRoot()),this._root=w,!0},r.prototype._getRoot=function(){var e;for(var t in this._clipBinding){var r=this._clipBinding[t];if(r.length){e=Si(r[0]);break}}if(!e||e.is2D)return null;for(;e.parent;)if((e=e.parent).is2D)return null;return e},r.CLASS_NAME="AnimationClipBinding",r._BLEND_RESULT_CACHE={},r}(oe),La={clipModelId:0,frameIndex:0,weight:0,additiveClipModelId:0,additiveClipFrameIndex:0},Fa=new Float32Array(4),ka=new Float32Array(4),Ua=function(t){function r(e){var r=t.call(this)||this;r._layerCount=e,r._writeMasks={},r._masksDirty=!0,r._createData(12*e+4),r._u32view=new Uint32Array(r.data),r._f32view=new Float32Array(r.data),r._layerMasks=new Array(e),r._layerMaskVersions=new Uint32Array(e),r._lastLayerMaskVersions=new Uint32Array(e);for(var n=0;n<e;n+=1)r._layerMasks[n]={},r._layerMaskVersions[n]=1,r._lastLayerMaskVersions[n]=0;return r}return $(r,t),r.UPDATE_ANIMATOR_CONTROLLERS=function(e,t){for(var r,n=0;n<t;n+=1){var o=null===(r=e[n])||void 0===r?void 0:r.__handle;if(o&&0!==o.id){o.update();var i=o.bindingRoot;if(i){for(;i.parent;)i=i.parent;zi.isRootNode(i)||i.updateSubTree()}}}},Object.defineProperty(r.prototype,"layerCount",{get:function(){return this._layerCount},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"binding",{get:function(){var e;return null===(e=this.__feObj._binding)||void 0===e?void 0:e.__handle},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"blendStates",{get:function(){return this.__feObj._blendStates},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"bindingRoot",{get:function(){return this.binding.root},enumerable:!1,configurable:!0}),r.prototype.setMaskAtIndex=function(e,t,r,n){if(e<0||e>=this._layerCount)return!1;if(n){for(var o=this._layerMasks[e]={},i=new Uint32Array(t,r),a=new Float32Array(t,r),s=0;s<n;s+=1)o[i[2*s]]=a[2*s+1];return this._layerMaskVersions[e]+=1,this._masksDirty=!0,!0}this._layerMasks[e]=void 0},r.prototype.update=function(){var t,r=this.binding;if(r){var n=r.defaultValues,o=n.data,i=n.indexes,a=this,s=a._u32view,u=a._f32view,c=a._layerCount,l=a.blendStates,f=a._layerMasks,p=a._layerMaskVersions,h=a._lastLayerMaskVersions;if(this._masksDirty){for(var d=this._writeMasks={},_=0;_<c;_+=1)if(p[_]!==h[_]){h[_]=p[_];var y=(C=s[A=1+3*_])===e.EAnimationBlendType.Additive,v=f[_];for(var m in i){var g=1<<_,b=d[m];void 0===b&&(b=d[m]=0);var w=!0;if(v){var x=v[m];(void 0===x||x<1e-6)&&(w=!1)}y?w&&(b|=g):w&&(b=b>>_<<_|g),d[m]=b}}this._masksDirty=!1}for(var E=r.createBlendResult(0),S=E.data,T=E.indexes,O=0;O<c;O+=1){var A,C=s[A=1+3*O],M=u[A+1],P=(y=C===e.EAnimationBlendType.Additive,r.createBlendResult(1));this._blendLayer(r,O,C,null===(t=l[O])||void 0===t?void 0:t.__handle,P);var R=P.data,D=P.indexes;for(var m in D){void 0===(V=T[m])&&(V=T[m]=E.last,E.last+=24);var N=D[m],I=i[m];if(y)if(0===O){for(_=0;_<6;_+=1){var L=3*_,F=N+L;R[F+1]&&(R[F]+=o[I+_]*(1-R[F+2])*M),S[V+L]=R[F],S[V+L+1]=R[F+1],S[V+L+2]=R[F+2]}if(R[N+22]){var k=Fa,U=ka;for(_=0;_<3;_+=1)k[_]=k[I+6+_]*(1-M*R[N+23]),U[_]=R[N+18+_]*M;k[3]=o[I+9],U[3]=R[N+21],Bo.normalize(k,I+6,k,I+6),Bo.multiply(k,0,U,0,S,V+18)}else ko(R,N+18,S,V+18);S[V+22]=R[N+22],S[V+23]=R[N+23]}else{for(_=0;_<18;_+=3)(S[V+_+1]=R[N+_+1])&&(S[V+_]+=R[N+_]*M,S[V+_+2]+=R[N+_+2]*M);var B=R[N+22];B&&(Lo(R,N+18,M,U=Fa,0),U[3]=S[V+21],Bo.normalize(U,0,U,0),Bo.multiply(S,V+18,U,0,S,V+18),S[V+22]=B,S[V+23]+=R[N+23]*M)}else{for(M<1e-6&&this._writeActiveDefaultValues(R,N,o,I),_=0;_<24;_+=1)S[V+_]=R[N+_];R[N+22]&&Bo.normalize(S,V+18,S,V+18)}}}for(var m in T){var j=Si(parseInt(m,10));if(j&&!j.is2D){var V=T[m];j.setTRSFromChannelData(S,V)}}}},r.prototype._blendLayer=function(t,r,n,o,i){if(!(n>e.EAnimationBlendType.Additive)&&o){for(var a=n===e.EAnimationBlendType.Additive,s=i.data,u=i.indexes,c=t.createBlendResult(2);o;){var l=o.weight;if(l>1e-6){c.reset();var f=c.data,p=c.indexes;if(this._blendState(t,o,r,a,c),c.length)for(var h in p){var d=u[h];void 0===d&&(d=u[h]=i.last,i.last+=24),this._blendValue(s,d,f,p[h],l)}}o=o.nextState}i.length=i.last/24}},r.prototype._blendState=function(e,t,r,n,o){for(var i,a=e.defaultValues,s=a.data,u=a.indexes,c=o.data,l=o.indexes,f=t.blendCount,p=t.useDefault&&!n,h=0;h<f;h+=1){var d=La;if(t.getBlend(h,d),!(d.weight<1e-6)){var _=d.clipModelId,y=d.frameIndex,v=e.getClipBindingInfo(_);if(v){var m=e.clipBinding[_],g=v.interpolateNew(y,e.defaultValues,m,r,this._writeMasks,p).map,b=d.weight;if(n){var w=d.additiveClipFrameIndex,x=d.additiveClipModelId,E=e.getClipBindingInfo(x),S=m;E?S=e.clipBinding[x]:(E=v,w=0);var T=E.interpolateNew(w,e.defaultValues,S,r,this._writeMasks,p),O=T.map,A=T.mapKeys;O.length>0&&(g=v.cloneNodes(g));for(var C=0,M=g;C<M.length;C++){var P=M[C],R=P[0],D=P[1],N=null===(i=O[A[R]])||void 0===i?void 0:i[1];N?(D.sub(N),D.txActive&&(D.txWeight=1),D.tyActive&&(D.tyWeight=1),D.tzActive&&(D.tzWeight=1),D.sxActive&&(D.sxWeight=1),D.syActive&&(D.syWeight=1),D.szActive&&(D.szWeight=1),D.quatActive&&(D.quatWeight=1)):D.disableAll()}}for(var I=0,L=g;I<L.length;I++){var F=L[I],k=(R=F[0],D=F[1],l[R]);void 0===k&&(k=l[R]=o.last,o.last+=24),this._blendValue(c,k,D.data,0,b)}}}}if(p)for(var R in u){var U=this._writeMasks[R];if(void 0!==U&&0!=(1<<r&U)){var B=l[R];void 0===B&&(B=l[R]=o.last,o.last+=24),this._writeDefaultValue(c,B,s,u[R])}}o.length=o.last/24},r.prototype._blendValue=function(e,t,r,n,o){if(!(o<1e-6)){for(var i=0;i<18;i+=3){var a=e[t+i+1],s=r[n+i+1],u=r[n+i+2]*o,c=r[n+i]*o;e[t+i+1]=a||s,a&&s?(e[t+i]+=c,e[t+i+2]+=u):s&&(e[t+i]=c,e[t+i+2]=u)}if(r[n+22]){var l=Fo(e,18,r,18)<0?-o:o;for(i=18;i<22;i+=1)e[t+i]+=r[n+i]*l;e[t+22]=1,e[t+23]+=r[n+23]*o}}},r.prototype._writeDefaultValue=function(e,t,r,n){for(var o=0;o<6;o+=1){var i=t+3*o,a=e[i+2];e[i+1]?a<1&&(e[i]+=r[n+o]*(1-a)):(e[i+1]=1,e[i]=r[n+o]),e[i+2]=1}var s=e[t+23];if(e[t+22]){if(s<1){var u=Fo(e,18,r,6)<0?s-1:1-s;for(o=0;o<4;o+=1)e[t+18+o]+=r[n+6+o]*u}}else for(e[t+22]=1,o=0;o<4;o+=1)e[t+18+o]=r[n+6+o];e[t+23]=1},r.prototype._writeActiveDefaultValues=function(e,t,r,n){for(var o=0;o<6;o+=1){var i=t+3*o;e[i+1]&&(e[i]=r[n+o]*(1-e[i+2]),e[i+2]=1)}if(e[t+22]){var a=Fo(e,18,r,6)<0?e[t+23]-1:1-e[t+23];for(o=0;o<4;o+=1)e[t+18+o]+=r[n+6+o]*a;e[t+23]=1}},r.prototype.destroy=function(){},r.CLASS_NAME="AnimatorControllerModel",r}(oe);function Ba(t){switch(t){case e.EDracoDataType.DT_INT8:case e.EDracoDataType.DT_UINT8:case e.EDracoDataType.DT_BOOL:return 1;case e.EDracoDataType.DT_INT16:case e.EDracoDataType.DT_UINT16:return 2;case e.EDracoDataType.DT_INT32:case e.EDracoDataType.DT_UINT32:case e.EDracoDataType.DT_FLOAT32:return 4;case e.EDracoDataType.DT_INT64:case e.EDracoDataType.DT_UINT64:case e.EDracoDataType.DT_FLOAT64:return 8;default:return 1}}var ja,Va="undefined"!=typeof WeakRef,za=window.Phys3D||(null===(Yi=window.top)||void 0===Yi?void 0:Yi.Phys3D),Ga={downloader:co,eventBridge:Ca,update:function(){se.update()},destroy:function(){},clearView:function(e){e.bind(),e.clear()},cullCamera:function(e,t,r){(e.isUI?Gi:zi).cullCamera(e,t,r)},drawCamera:function(e,t,r){ni.needReset&&(se.resetCache(),zi.refreshWorldTransform(),Gi.refreshWorldTransform(),ni.needReset=0),(e.isUI?Gi:zi).drawCamera(e,t,r)},drawLight:function(e,t,r,n){zi.drawLight(e,t,r,n)},submit:function(){ni.virtualMacrosDirty=!1},createScalableList:function(e,t){return new Ra(e,t)},createNodePool:function(e,t){return t?new Ri(e):new Pi(e)},createNodeTree:function(e,t,r,n,o){return Ei.CREATE_TREE(e,t,r,n,o)},createVertexLayout:function(e){return new $o(e)},createVertexDataDescriptor:function(e){return{id:0}},createVertexBuffer:function(e,t){return new Qo(t,e)},updateVertexBuffer:function(e,t,r){return e.update(t,r)},createIndexBuffer:function(e,t){return new fi(e,void 0,t)},updateIndexBuffer:function(e,t,r){return e.update(t,r)},createVertexData:function(e,t,r){return new pi(e,r,t)},createIndexData:function(e){return new di(e)},createTexture:function(e,t,r,n,o,i,a,s,u){return new ho(e,t,r,n,o,i,a,s,u)},createAutoUpdateTextureFromCanvas:function(t){var r=new ho(e.ETextureType.D2,t.width,t.height,0,0,e.ETextureFormat.RGBA8,0);return r.dynamicCanvas=t,r},updateTexture:function(e,t,r,n,o,i,a,s,u){return e.update(t,r,n,o,i,a,s,u)},updateTextureFlags:function(e,t){return e.updateTextureFlags(t)},createUniformBlockDescriptor:function(e){return new ie(e)},createUniformBlock:function(e){return new si(e)},createEffect:function(e,t,r,n,o,i,a){return new ci(e,t,n,o,i,a)},createMaterial:function(e){return new li(e)},changeMaterialMacros:function(e,t,r){e.changeMacros(t,r)},createView:function(e){return new Ko(e)},updateViewRect:function(e,t){return e.updateViewRect(t)},updateViewScissor:function(e,t){return e.updateViewScissor(t)},createRenderPass:function(e){return new _i(e)},createCullingComponentPool:function(e){return new Di(e)},createRenderComponent:function(e,t,r,n,o,i){return new Ui(e,t,Si(r),(a=n)?oa.COMPONENTS[a]||new oa(a):null,o,i);var a},changeMeshMacros:function(e,t,r){e.changeMacros(t,r)},createAnimator:function(e,t){return new ia(e,t)},updateAnimators:function(e,t){return ia.UPDATE_ANIMATORS(e,t)},createAnimationClipBinding:function(e,t,r,n,o,i,a,s){return new Ia(e,t,r,n,o,i,a,s.id)},rebindAnimationClipBinding:function(e,t,r,n,o,i,a,s,u,c,l){return e.rebind(t,n,n,o,i,a,s,u,c,l.id)},updateAnimationClipBinding:function(e,t,r,n,o,i,a,s,u,c){return e.update(t,n,n,o,i,a,s,u,c)},writeAnimationClipBindingDefaultValues:function(e){e.writeDefaultValues()},createAnimatorControllerModel:function(e){return new Ua(e)},setAnimatorControllerModelMaskAtIndex:function(e,t,r){e.setMaskAtIndex(t,r.buffer,r.offset,r.length)},updateAnimatorControllerModel:function(e){e.update()},createAnimatorControllerStateModel:function(e){return new Da(e)},updateAnimatorControllers:function(e,t){Ua.UPDATE_ANIMATOR_CONTROLLERS(e,t)},createSkinning:function(e,t){return new sa(e,t)},updateSkinnings:function(e,t){return sa.UPDATE_SKINNINGS(e,t)},createRenderCamera:function(e,t){return new ra(Si(e),t)},createLightCamera:function(){return new ba},createAnimationClipModel:function(e){return new Sa(e)},createBoneInverseModel:function(e){return new Aa(e)},getRenderEnv:function(){return ni},createNativeUUMap:function(){return new Ma},createNativeSUMap:function(){return new Ma},createNativeULUMap:function(){return new Pa},createWeakRef:function(e){return Va?new WeakRef(e):{deref:function(){return e}}},createWeakRefSentry:function(){return{}},decodeBase64:function(e){return uo(e)},initDraco:function(){return J(this,void 0,void 0,(function(){return ee(this,(function(e){return[2]}))}))},decodeDraco:function(t,r){return function(t,r){window.DracoDecoderModuleInstance||console.error("Draco not initialized!");var n=window.DracoDecoderModuleInstance,o=new n.Decoder,i=new n.DecoderBuffer;i.Init(t,t.byteLength);var a,s,u,c=o.GetEncodedGeometryType(i);c==n.TRIANGULAR_MESH?(a=new n.Mesh,u=o.DecodeBufferToMesh(i,a),s=a):(a=new n.PointCloud,u=o.DecodeBufferToPointCloud(i,a));var l=function(){n.destroy(a),n.destroy(o),n.destroy(i)};if(!u.ok())return l(),{errCode:e.EDracoErrorCode.kDecodeErrorDracoDecode};for(var f=[],p=[],h=0;h<a.num_attributes();h++)f.push(o.GetAttribute(a,h));f.sort((function(e,t){return e.unique_id()-t.unique_id()}));for(var d=0,_=[],y=[],v=0;v<f.length;v++){_.push(d);var m=f[v].num_components()*Ba(f[v].data_type());y.push(m),p.push({num_components:f[v].num_components(),data_type:f[v].data_type(),offset:d,num_bytes:m}),d+=y[y.length-1]}if(r===e.EDracoDecodeType.kDecodeTypeCross){if(0===f.length)return l(),{errCode:e.EDracoErrorCode.kDecodeErrorAttributeEmpty};var g=a.num_points(),b=d*g;null!==s&&(b+=12*a.num_faces());for(var w=new ArrayBuffer(b),x=0;x<f.length;x++){var E=f[x],S=Ba(E.data_type()),T=E.num_components(),O=y[x]*g,A=void 0,C=void 0,M=n._malloc(O);o.GetAttributeDataArrayForAllPoints(a,E,E.data_type(),O,M),1===S?(A=new Uint8Array(n.HEAPF32.buffer,M,O),C=new Uint8Array(w)):2===S?(A=new Uint16Array(n.HEAPF32.buffer,M,O/2),C=new Uint16Array(w)):4===S&&(A=new Uint32Array(n.HEAPF32.buffer,M,O/4),C=new Uint32Array(w));for(var P=d/S,R=_[x]/S,D=0;D<g;D++)for(var N=0;N<T;N++)C[D*P+R+N]=A[D*T+N];n._free(M)}}if(null!==s){var I=new Uint32Array(w,b-12*s.num_faces()),L=I.byteLength;M=n._malloc(L),o.GetTrianglesUInt32Array(s,L,M);var F=new Uint32Array(n.HEAPF32.buffer,M,I.length);for(x=0;x<I.length;x++)I[x]=F[x];n._free(M)}return l(),{errCode:e.EDracoErrorCode.kDecodeErrorNone,buffer:w,geoType:c,stride:d,count:g,numIndices:I.length,attrs:p}}(t,r)},loadTTFFont:function(e,t){return function(e,t){if(go+=1,"undefined"!=typeof FontFace){var r="kanata-font-"+go,n=new FontFace(r,"url("+e+")");n.load().then((function(){vo[r]=r,mo[r]={},document.fonts.add(n),t(r)})).catch((function(){t("Arial")}))}else t("Arial")}(e,t)},getGlyphInfo:function(e,t){return function(e,t){var r=e.fontFamily,n=e.bold,o=e.italic,i=e.size,a=vo[r];a||(a=r);var s=mo[r]=mo[r]||{},u=(o+" "+n+" "+i+"px "+a).trim(),c=t+" "+u,l=s[c];return l||(s[c]=l=yo.allocate(t,u,i),l)}(e,t)},refreshNodesWorldTransform:function(){if(za){var e=Ai.POOLS.Node;for(var t in e){var r=e[t];Ri.IS(r)&&r.getDirtyNodesFromPhys((function(e,t,r){var n;null===(n=Si(e))||void 0===n||n.syncFromPhysic(t,r)}))}}zi.refreshWorldTransform()},setNodeName:function(e,t){Si(e).name=t},setRenderComponentName:function(e,t){e.name=t},debugPrint:function(e){console.log(e)},createDynamicBones:function(e){throw new Error("Function not implemented.")},setGlobalPhysicSystem:function(e){Ei.PHY_SYS=e},bindRigidBodyToNode:function(e,t){var r;null===(r=Si(t))||void 0===r||r.bindPhysObj(0,e)},unbindRigidBody:function(e){var t;null===(t=Si(e.__nodeId))||void 0===t||t.unbindPhysObj(e)},bindCCTToNode:function(e,t){var r;null===(r=Si(t))||void 0===r||r.bindPhysObj(1,e)},unbindCCT:function(e){var t;null===(t=Si(e.__nodeId))||void 0===t||t.unbindPhysObj(e)}},Wa=t;Wa?(window.canvas=Wa,se.init(Wa),ni.init()):dr("No main canvas detected, you must pass MAIN_CANVAS to function `ACTIVE_ENGINE` !");var Xa={IS_VALID:function(){if(void 0===ja)try{var e=document.createElement("canvas"),t=e.getContext("webgl");t.clearColor(0,1,0,1),t.clear(t.COLOR_BUFFER_BIT);var r=new Uint8Array(4);t.readPixels(0,0,1,1,t.RGBA,t.UNSIGNED_BYTE,r),ja=0===r[0]&&255===r[1]&&0===r[2]&&255===r[3],e=null,t=null,r=null}catch(e){ja=!1}return ja},GET_MAIN_CANVAS:function(){return Wa}};Xa.worker=Ga,Xa.Image=fo,Xa.Phys3D=za;var Ha=Xa.worker,qa=function(){function e(){this._macros={},this._virtualMacros={},this._isWrongWrapMapping=!1,this._isNotWrongEffectSort=!1,this._isGoodInstance=!1,this._isGoodPhysAndScalableList=!1,this._isSizeDirty=!1,this.useExtendedMemory=!1,this._handle=this.__handle=Ha.getRenderEnv(),this.__handle.__feObj=this,this.id=this._handle.id,this._uniformBlocks=[],this._u32View=new Uint32Array(this._handle.data),this._f32View=new Float32Array(this._handle.data),"string"==typeof this._handle.version?this._version=this._handle.version.split(".").map((function(e){return parseInt(e,10)})):"WEBGL"!==this.backendType&&(this._version=[0,0]),this._version?(this._isWrongWrapMapping=0===this._version[0],this._isNotWrongEffectSort=!(this._version[0]<=1&&this._version[1]<2),this._isGoodInstance=!(this._version[0]<=1&&this._version[1]<3),this._isGoodPhysAndScalableList=!(this._version[0]<=1&&this._version[1]<6)):(this._isNotWrongEffectSort=!0,this._isGoodInstance=!0,this._isGoodPhysAndScalableList=!0),this._isNotWrongEffectSort&&(this.neverTranspose=!0)}return Object.defineProperty(e.prototype,"version",{get:function(){return this._version.slice()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"backendType",{get:function(){return this._handle.backendType},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"canvasWidth",{get:function(){return this._f32View[U.canvasWidth]},set:function(e){this._isSizeDirty=!1,this._f32View[U.canvasWidth]=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"canvasHeight",{get:function(){return this._f32View[U.canvasHeight]},set:function(e){this._isSizeDirty=!0,this._f32View[U.canvasHeight]=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"supportCompressTextures",{get:function(){return this._handle.supportCompressTextures},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"features",{get:function(){return this._handle.features||{}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"commitVersion",{get:function(){return this._handle.commit_version},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"usePuppetSokol",{get:function(){return this._handle.use_puppet_sokol},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"useInstance",{get:function(){return!!(1&this._u32View[U.useInstanceOrNeverTranspose])},set:function(e){var t=this._u32View[U.useInstanceOrNeverTranspose];this._u32View[U.useInstanceOrNeverTranspose]=e?1|t:-2&t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"neverTranspose",{get:function(){return!!(2&this._u32View[U.useInstanceOrNeverTranspose])},set:function(e){var t=this._u32View[U.useInstanceOrNeverTranspose];this._u32View[U.useInstanceOrNeverTranspose]=e?2|t:-3&t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isWrongWrapMapping",{get:function(){return this._isWrongWrapMapping},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isNotWrongEffectSort",{get:function(){return this._isNotWrongEffectSort},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isGoodInstance",{get:function(){return this._isGoodInstance},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isGoodPhysAndScalableList",{get:function(){return this._isGoodPhysAndScalableList},enumerable:!1,configurable:!0}),e.prototype.supportCompressTexture=function(e){return this.supportCompressTextures.indexOf(e)>=0},e.prototype.registerFallbackEffect=function(e,t){this._handle.registerFallbackEffect(e,null==t?void 0:t.__handle)},e.prototype.beginFrame=function(){this._u32View[U.resetFlag]=1},e.prototype.endFrame=function(){Ha.submit()},e.prototype.clearView=function(e){Ha.clearView(e.__handle)},e.prototype.setEnvUniform=function(e,t){this._u32View[U.uniforms+e]=t.id,this._uniformBlocks[e]=t},e.prototype.setRenderPass=function(e){this._u32View[U.renderPass]=e.id,this._renderPass=e},e.prototype.changeMacros=function(e){Object.assign(this._macros,e),this._handle.changeMacros(this._macros)},e.prototype.getMacro=function(e){var t;return null===(t=this._macros)||void 0===t?void 0:t[e]},e.prototype.changeVirtualMacros=function(e){Object.assign(this._virtualMacros,e),this._handle.changeVirtualMacros(this._virtualMacros)},e.prototype.getVirtualMacro=function(e){return this._virtualMacros[e]},e.prototype.setInternalInstanceInfo=function(e,t,r){this._handle.setInternalInstanceInfo(e,t,r)},e.prototype.getErrors=function(){var e,t;return null===(t=(e=this.__handle).getErrors)||void 0===t?void 0:t.call(e)},e}(),Ya=new qa,Za=function(){function e(){}return Object.defineProperty(e.prototype,"_handle",{get:function(){return this.__handle},set:function(e){this.__handle=e,this.id=e.id,this.__handle.__feObj=this},enumerable:!1,configurable:!0}),e.prototype.destroy=function(){this._handle.destroy&&this._handle.destroy()},e}(),Ka=Xa.worker,Qa=new Set,$a=function(e){function t(t){var r=e.call(this)||this;return r._size=0,r._index=0,r._onBackendEnlarge=function(){r._resized()},Ya.isGoodPhysAndScalableList?r._handle=Ka.createScalableList(t,r._onBackendEnlarge):(r._handle=Ka.createScalableList(t),Qa.add(r),r._preData=r._handle.data),r._resized(),r}return $(t,e),Object.defineProperty(t.prototype,"size",{get:function(){return this._size},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"dataView",{get:function(){return this._u32View},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"usedSize",{get:function(){return this._sizeView[0]>this.size?this.size:this._sizeView[0]},set:function(e){this._sizeView[0]=e},enumerable:!1,configurable:!0}),t.prototype.enlarge=function(e){this._handle.enlarge(),this._resized()},t.prototype.begin=function(){this._index=0},t.prototype.add=function(e,t){this._index===this._size&&this.enlarge(),this._u32View[this._index++]=e},t.prototype.end=function(){this._sizeView[0]=this._index},t.prototype.reset=function(){this._sizeView[0]=0},t.prototype._checkResize=function(){this._preData.byteLength!==this._handle.data.byteLength&&(this._resized(),this._preData=this._handle.data)},t.prototype._resized=function(){var e=this.__handle.data.byteLength/4-1;this._u32View=new Uint32Array(this.__handle.data,4),this._sizeView=new Uint32Array(this.__handle.data,0,1),this._size=e},t}(Za),Ja=function(){function e(){}return Object.defineProperty(e.prototype,"__handle",{get:function(){return this._handle},enumerable:!1,configurable:!0}),e.prototype._init=function(e){this._fastInit(e)},e.prototype._fastInit=function(e){this._handle=e,this._handle.__feObj=this;var t=e.id,r=e.data,n=r.byteLength;this._bufferLength=n,this._byteOffset=0,this._buffer=r,this.id=t,this._f32view=new Float32Array(r,0,n/4)},e.prototype._initU32View=function(){this._u32view=new Uint32Array(this._buffer,this._byteOffset,this._bufferLength/4)},e.prototype._initPropertyView=function(e,t){return new Float32Array(this._buffer,this._byteOffset+4*e,t)},e.prototype.setRawBuffer=function(e){this._f32view.set(e)},e.prototype.destroy=function(){this._handle.destroy&&this._handle.destroy()},e}(),es=Xa.worker,ts=function(e){function t(){var t=e.call(this)||this;return t._offsetEntityIds=0,t._animationClipCount=0,t._nodeCount=0,t._handle={id:0},t}return $(t,e),t.UPDATE_ANIMATORS=function(e,t){es.updateAnimators(e,t)},t.prototype.bindAnimations=function(e,t,r){this.entities=t,this.animationClipModels=e,this.animationClipModels=e,this._animationClipCount=e.length;var n=t.length;for(var o in t)n+=t[o].length;this._nodeCount=n;var i=es.createAnimator(e.length,n);if(!(i.id<0)&&i.data){for(this._init(i),this._initU32View(),o=0;o<e.length;o++)this._u32view[3*o]=e[o].id;this._offsetEntityIds=3*e.length;var a,s=0;for(o=0;o<t.length;o++){for(var u=0;u<t[o].length;u++)null!==t[o][u]?(this._u32view[this._offsetEntityIds+s+u]=t[o][u].id,a||(a=t[o][u].id)):this._u32view[this._offsetEntityIds+s+u]=0,this._u32view[this._offsetEntityIds+s+u]=null!==t[o][u]?t[o][u].id:0;s+=t[o].length}0===this._u32view[this._offsetEntityIds]&&(void 0!==r&&r.id?this._u32view[this._offsetEntityIds]=r.id:a&&(this._u32view[this._offsetEntityIds]=a))}},t.prototype.setClipParams=function(e,t,r){if(this._handle){var n=3*e;this._f32view[n+1]=Math.round(t),this._f32view[n+2]=r}},t.prototype.getAnimationClipCount=function(){return this._animationClipCount},t.prototype.getNodeCount=function(){return this._nodeCount},t.prototype.getAnimationParameter=function(e){var t=3*e;return{animationClipId:this._u32view[t],frameIndex:this._f32view[t+1],percentage:this._f32view[t+2]}},t.prototype.getEntity=function(e){return this._u32view[this._offsetEntityIds+e]},t}(Ja),rs=Xa.worker,ns=function(e){function t(t,r){var n=e.call(this)||this,o=rs.createRenderCamera(t.id,r||!1);return o.id<0||!o.data||(n._init(o),n._initU32View(),n._layerCullDistances=new Float32Array(n._buffer,4*W.layerCullDistances,32),n._f32view.set([0,1,0],W.up),n.fov=.33*Math.PI,n.aspect=16/9,n.near=.1,n.far=100,n.isProjection=!0),n}return $(t,e),Object.defineProperty(t.prototype,"active",{get:function(){return!!this._u32view[W.active]},set:function(e){this._u32view[W.active]=e?1:0,this._setDirty()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"depth",{get:function(){return this._u32view[W.depth]},set:function(e){this._u32view[W.depth]=e<0?0:e,this._setDirty()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isProjection",{get:function(){return!!this._u32view[W.isProjection]},set:function(e){this._u32view[W.isProjection]=e?1:0,this._setDirty()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"view",{get:function(){return this._view},set:function(e){this._view=e,this._u32view[W.view]=e.id,this._setDirty()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fov",{get:function(){return this._f32view[W.fov]},set:function(e){this._f32view[W.fov]=e,this._setDirty()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"aspect",{get:function(){return this._f32view[W.aspect]},set:function(e){Math.abs(this._f32view[W.aspect]-e)<=1e-4||(this._f32view[W.aspect]=e,this._setDirty())},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"near",{get:function(){return this._f32view[W.near]},set:function(e){this._f32view[W.near]=e,this._setDirty()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"far",{get:function(){return this._f32view[W.far]},set:function(e){this._f32view[W.far]=e,this._setDirty()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"orthoSize",{get:function(){return this._f32view[W.orthoSize]},set:function(e){this._f32view[W.orthoSize]=e,this._setDirty()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"cullingMask",{get:function(){return this._u32view[W.cullingMask]},set:function(e){this._u32view[W.cullingMask]=e,this._setDirty()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"layerCullDistances",{get:function(){return this._layerCullDistances},set:function(e){this._layerCullDistances.set(e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"canvasSizeY",{get:function(){return this._f32view[W.canvasSizeY]},set:function(e){this._f32view[W.canvasSizeY]=e,this._setDirty()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"targetTransform",{get:function(){return this._u32view[W.targetTransform]},set:function(e){this._u32view[W.targetTransform]=e,this._setDirty()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"up",{set:function(e){this._f32view.set(e,W.up)},enumerable:!1,configurable:!0}),t.prototype.cull=function(e,t){rs.cullCamera(this.__handle,e.__handle,t)},t.prototype.draw=function(e,t){rs.drawCamera(this.__handle,e.__handle,t)},t.prototype.changeProjectionMatrix=function(e,t){e?(this._f32view.set(t,W.projectionMatrix),this._u32view[W.manualMatrix]|=1):this._u32view[W.manualMatrix]&=-2,this._setDirty()},t.prototype.changeViewMatrix=function(e,t){e?(this._f32view.set(t,W.viewMatrix),this._u32view[W.manualMatrix]|=2):this._u32view[W.manualMatrix]&=-3,this._setDirty()},t.prototype._setDirty=function(){this._handle.setSharedDirty()},t.prototype.updateMatrix=function(){this._handle.updateMatrices()},t.OFFSETS=W,t}(Ja),os=Xa.worker,is=function(t){function r(){var e=t.call(this)||this,r=os.createLightCamera();return r.id<0||!r.data||(e._init(r),e._initU32View(),e._lightSpaceMatrices=new Float32Array(e._buffer,4*X.lightSpaceMatrices,64),e._tilingOffsets=new Float32Array([1,1,0,0,1,1,0,0,1,1,0,0,1,1,0,0]),e._cascadedSplits=new Float32Array(3),e._farBounds=new Float32Array(e._buffer,4*(X.bounds+1),4),e._bounds=new Float32Array(e._buffer,4*X.bounds,5)),e}return $(r,t),Object.defineProperty(r.prototype,"view",{get:function(){return this._view},set:function(e){this._u32view[X.view]=e.id,this._view=e},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"active",{get:function(){return!!this._u32view[X.active]},set:function(e){this._u32view[X.active]=e?1:0},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"depth",{get:function(){return this._u32view[X.depth]},set:function(e){this._u32view[X.depth]=e},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"shadowDistance",{get:function(){return this._f32view[X.shadowDistance]},set:function(e){this._f32view[X.shadowDistance]=e,this._updateBounds(!1),this._setDirty()},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"shadowFilterMode",{get:function(){return this._u32view[X.shadowFilterMode]},set:function(e){this._u32view[X.shadowFilterMode]=e,this._setDirty()},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"shadowMode",{get:function(){return this._u32view[X.shadowMode]},set:function(t){this._u32view[X.shadowMode]=t,this._tilingOffsets.set(t==e.EShadowMode.TwoCascade_PCF||t==e.EShadowMode.FourCascade_PCF?[.5,.5,0,0,.5,.5,.5,0,.5,.5,0,.5,.5,.5,.5,.5]:[1,1,0,0,1,1,0,0,1,1,0,0,1,1,0,0]),this._updateBounds(!1),this._setDirty()},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"lightSpaceMatrices",{get:function(){return this._lightSpaceMatrices},enumerable:!1,configurable:!0}),r.prototype.draw=function(e,t,r){os.drawLight(this.__handle,e.__handle,t,r)},r.prototype.prepareUniforms=function(e){e.setUniform("u_csmLightSpaceMatrices",this.lightSpaceMatrices),e.setUniform("u_shadowTilingOffsets",this._tilingOffsets),e.setUniform("u_csmFarBounds",this._farBounds)},r.prototype.setLightDir=function(e,t,r){Math.abs(e-this._f32view[X.lightDir])<1e-6&&Math.abs(t-this._f32view[X.lightDir+1])<1e-6&&Math.abs(r-this._f32view[X.lightDir+2])<1e-6||(this._f32view[X.lightDir]=e,this._f32view[X.lightDir+1]=t,this._f32view[X.lightDir+2]=r,this._setDirty())},r.prototype.setCascadedSplits=function(e,t,r){},r.prototype._updateBounds=function(e){var t=.3,r=this.shadowDistance,n=this.shadowMode;if(e){var o=r/t;this._bounds[0]=t;for(var i=1;i<n;i+=1){var a=i/n,s=t*Math.pow(o,a)*.75+.25*(t+(r-t)*a);this._bounds[i]=s,this._setSplitPercents(i-1,s/r)}this._bounds[n]=r,this._setSplitPercents(n-1,1)}else{for(i=1;i<n;i+=1)s=this._cascadedSplits[i-1]*r,this._bounds[i]=s;this._bounds[n]=r}},r.prototype._adjustSplitPercents=function(e,t){return e<this.shadowMode/2&&(t=Math.min(t,this._cascadedSplits[e+1])),this._setSplitPercents(e,t)},r.prototype._setSplitPercents=function(e,t){var r=this.shadowMode/2;return e>=r?0:e===r-1?1:t},r.prototype._setDirty=function(){this._handle.setSharedDirty()},r.OFFSETS=X,r}(Ja),as=function(){function e(){}return Object.defineProperty(e.prototype,"float32View",{get:function(){return this._nativePool._f32view},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"uint32View",{get:function(){return this._nativePool._u32view},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"id",{get:function(){return this._nativeId},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"poolId",{get:function(){return this._poolId},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"poolIndex",{get:function(){return this._poolIndex},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"poll",{get:function(){var e=this._nativePool.__handle;return e._wasmPool?e._wasmPool:e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isUsing",{get:function(){return this._using},set:function(e){this._using=e},enumerable:!1,configurable:!0}),e.prototype._init=function(e,t){this._nativeId=e,this._poolId=-65473&e,this._poolIndex=e&B,this._nativePool=t[this._poolId],this._using=!0},e.prototype.setRawBuffer=function(e){this._nativePool._f32view.set(e,this.entityOffset)},e}(),ss=function(){function e(e){this._index=0,this._size=void 0!==e?e:500,this._array=new Array(this._size)}return e.prototype.push=function(e){this._index>=this._size&&(this._size*=2,this._array.length=this._size),this._array[this._index]=e,this._index++},e.prototype.pop=function(){return this._index--,this._array[this._index]},e.prototype.getByIndex=function(e){return e>=this._index?-1:this._array[e]},e.prototype.size=function(){return this._index},e.prototype.clear=function(){this._index=0},e}(),us=function(e){function t(t){var r=e.call(this)||this;return r._init(t),void 0!==t._byteOffset&&void 0!==t._byteSize&&(r._bufferLength=t._byteSize,r._byteOffset=t._byteOffset,r._f32view=new Float32Array(r._buffer,r._byteOffset,r._bufferLength/4)),r._initU32View(),r}return $(t,e),t.prototype.supplyExtendedMemory=function(e){var t,r;Ya.useExtendedMemory&&(null===(r=(t=this.__handle).setExtendedMemory)||void 0===r||r.call(t,e),this.u32viewExt=new Uint32Array(e))},t}(Ja),cs=function(){function e(e,t,r,n){void 0===n&&(n=0),this.pools={},this._poolIndex=0,this._poolUsedLength=0,this._poolLength=0,this._disposedIds=new ss,this._template=e,this._templateView=t,this._allocateFunc=r,this._extendedMemSize=n}return e.prototype._enlargePool=function(e){var t=this._allocateFunc(e),r=new us(t);this._extendedMemSize>0&&r.supplyExtendedMemory(new ArrayBuffer(e*this._extendedMemSize)),this._poolIndex=r.id,this.pools[r.id]=r,this._poolLength+=e},e.prototype.allocateOne=function(){if(this._disposedIds.size()>0)return this._poolUsedLength++,this._disposedIds.pop();this._poolUsedLength>=this._poolLength&&this._enlargePool(1024);var e=this._poolIndex;return this._poolIndex+=64,this._poolUsedLength++,e},e.prototype.dispose=function(e){e.isUsing&&(this._disposedIds.push(e.id),this._poolUsedLength--,e.setRawBuffer(this._templateView),e.isUsing=!1)},e}(),ls=Xa.worker,fs=new Uint32Array(new ArrayBuffer(4*G.size)),ps=new Float32Array(fs.buffer),hs=function(e){function t(r){var n=e.call(this)||this,o=t.POLL_MANAGER.allocateOne();return n._init(o,t.POLL_MANAGER.pools),n.entityOffset=(n._poolIndex>>6)*G.size,n._activeOffset=n.entityOffset+G.active,n._layerOffset=n.entityOffset+G.layer,n._boundingBallCenterOffset=n.entityOffset+G.boundingBallCenter,n._boundingBallRadiusOffset=n.entityOffset+G.boundingBallRadius,n._entityIdOffset=n.entityOffset+G.entityId,n}return $(t,e),t.prototype.getActive=function(){return 0!=(this._nativePool._u32view[this._activeOffset]&G.dfActive)},t.prototype.setActive=function(e){e?this._nativePool._u32view[this._activeOffset]|=G.dfActive:this._nativePool._u32view[this._activeOffset]&=~G.dfActive},t.prototype.getLayer=function(){return this._nativePool._u32view[this._layerOffset]},t.prototype.setLayer=function(e){this._nativePool._u32view[this._layerOffset]=e},t.prototype.getBoundingBallCenter=function(){return this._boundingBallCenter||(this._boundingBallCenter=new Float32Array(this._nativePool._buffer,4*this._boundingBallCenterOffset,3)),this._boundingBallCenter},t.prototype.setBoundingBallCenter=function(e,t){void 0===t&&(t=0),e[t]===this._nativePool._f32view[this._boundingBallCenterOffset]&&e[t+1]===this._nativePool._f32view[this._boundingBallCenterOffset+1]&&e[t+2]===this._nativePool._f32view[this._boundingBallCenterOffset]+3||(3===e.length?this._nativePool._f32view.set(e,this._boundingBallCenterOffset):(this._nativePool._f32view[this._boundingBallCenterOffset]=e[t],this._nativePool._f32view[this._boundingBallCenterOffset+1]=e[t+1],this._nativePool._f32view[this._boundingBallCenterOffset+2]=e[t+2]))},t.prototype.getBoundingBallRadius=function(){return this._nativePool._f32view[this._boundingBallRadiusOffset]},t.prototype.setBoundingBallRadius=function(e){this._nativePool._f32view[this._boundingBallRadiusOffset]=e},t.prototype.bindEntity=function(e){this._bindEntityNative(e)},t.prototype.destroy=function(){this._unbindEntityNative(),t.POLL_MANAGER.dispose(this)},t.prototype._bindEntityNative=function(e){this.uint32View[this._entityIdOffset]=e.id},t.prototype._unbindEntityNative=function(){this.uint32View[this._entityIdOffset]=0},t.POLL_MANAGER=new cs(fs,ps,(function(e){return ls.createCullingComponentPool(e)})),t}(as),ds=Xa.worker,_s=function(e){function t(t,r){var n=e.call(this)||this,o=n._createNativeObj(t,r);return o.id<0||!o.data||(n._init(o),n._initU32View(),n._macros=r.macros,n._meshCount=r.meshCount,n._uniforms=r.uniformBlock),n}return $(t,e),t.CREATE_FAKE=function(e,t){return new ys(e,t)},Object.defineProperty(t.prototype,"uniforms",{get:function(){return this._uniforms},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"meshCount",{get:function(){return this._meshCount},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"castShadow",{get:function(){return!!this._u32view[H.castShadow]},set:function(e){this._u32view[H.castShadow]=e?1:0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"dynamicBatch",{get:function(){return!!this._u32view[H.dynamicBatch]},set:function(e){this._u32view[H.dynamicBatch]=e?1:0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"skinSkeleton",{set:function(e){this._u32view[H.skinHandle]=e.id,this._skinSkeleton=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"bindTarget",{set:function(e){this._u32view[H.bindTarget]=e?e.id:0,this._bindTarget=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"macros",{get:function(){return this._macros},enumerable:!1,configurable:!0}),t.prototype._createNativeObj=function(e,t){return ds.createRenderComponent(t.meshCount,t.uniformBlock.__handle,e.id,t.culling?t.culling.id:0,t.renderType,t.macros)},t.prototype.changeMacros=function(e){this._macros=this._macros||{},Object.assign(this._macros,e),ds.changeMeshMacros(this.__handle,this._macros,!0)},t.prototype.getStartIndex=function(e){return this._u32view[H.start+H.size*e+H.startIndex]},t.prototype.setStartIndex=function(e,t){this._u32view[H.start+H.size*e+H.startIndex]=t},t.prototype.getNumIndices=function(e){return this._u32view[H.start+H.size*e+H.numIndices]},t.prototype.setNumIndices=function(e,t){this._u32view[H.start+H.size*e+H.numIndices]=t},t.prototype.getVertexBuffer=function(e){return this._vertexes[e]},t.prototype.setVertexBuffer=function(e,t){this._vertexes||(this._vertexes=new Array(this._meshCount)),this._u32view[H.start+H.size*e+H.vertexBufferId]=t.id,this._vertexes[e]=t},t.prototype.getIndexBuffer=function(e){return this._indexes[e]},t.prototype.setIndexBuffer=function(e,t){this._indexes||(this._indexes=new Array(this._meshCount)),this._u32view[H.start+H.size*e+H.indexBufferId]=t.id,this._indexes[e]=t},t.prototype.getVertexData=function(e){return this._vertexes&&this._vertexes[e]},t.prototype.setVertexData=function(e,t){this._vertexes||(this._vertexes=new Array(this._meshCount)),this._u32view[H.start+H.size*e+H.vertexBufferId]=t.id,this._vertexes[e]=t},t.prototype.getIndexData=function(e){return this._indexes&&this._indexes[e]},t.prototype.setIndexData=function(e,t){this._indexes||(this._indexes=new Array(this._meshCount)),this._u32view[H.start+H.size*e+H.indexBufferId]=t.id,this._indexes[e]=t},t.prototype.getMaterial=function(e){return this._materials&&this._materials[e]},t.prototype.setMaterial=function(e,t){this._materials||(this._materials=new Array(this._meshCount)),this._u32view[H.start+H.size*e+H.materialId]=t?t.id:0,this._materials[e]=t},t.prototype.fastSet=function(e,t,r,n,o){this._vertexes=e,this._indexes=t,this._materials=r;for(var i=0;i<this._meshCount;i+=1)this.setVertexBuffer(i,e[i]),this.setIndexBuffer(i,t[i]),this.setMaterial(i,r[i]),this.setStartIndex(i,n[i]),this.setNumIndices(i,o[i])},t.prototype.setDirty=function(){this._handle.setSharedDirty&&this._handle.setSharedDirty()},t.prototype.copyStates=function(e){e._u32view.length<this._u32view.length?this._u32view.set(e._u32view,0):this._u32view.set(new Uint32Array(e._u32view.buffer,0,this._u32view.length),0),this._materials=e._materials,this._vertexes=e._vertexes,this._indexes=e._indexes},t.OFFSETS=H,t}(Ja),ys=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return $(t,e),t.prototype._createNativeObj=function(e,t){return{id:0,data:new ArrayBuffer(4*(H.start+H.size*t.meshCount)),setSharedDirty:function(){}}},Object.defineProperty(t.prototype,"uniforms",{get:function(){return this._uniforms},set:function(e){this._uniforms=e},enumerable:!1,configurable:!0}),t}(_s),vs=Xa.worker,ms=function(e){function t(t,r){var n=e.call(this)||this;n.flag=r,n._boneNum=0,n._boneNum=t;var o=vs.createSkinning(t,r);return o.id<0||!o.data||(n._init(o),n._initU32View()),n}return $(t,e),t.UPDATE_MATS=function(e,t){vs.updateSkinnings(e,t)},Object.defineProperty(t.prototype,"boneNum",{get:function(){return this._boneNum},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"boneInverseModel",{get:function(){return this._boneInverseModel},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"boneOffsetMatrices",{get:function(){return this._boneOffsetMatrices},enumerable:!1,configurable:!0}),t.prototype.setBoneMatrix=function(e,t,r){var n=this._boneNum;if(t.length===n&&r.length===n){for(var o=[],i=0;i<n;i++)o.push(r[i].id);this._u32view[Z.boneInverseModelId]=e.id,this._u32view.set(t,Z.boneIndices);var a=Z.boneIndices+n*Z.perBoneIndices;this._u32view.set(o,a),this._boneOffsetMatrices=new Float32Array(this._buffer,this._byteOffset+4*(Z.boneIndices+n*(Z.perBoneIndices+Z.perBoneEntityId)),n*(1&this.flag?12:16)),this._boneInverseModel=e}else console.warn("setBoneMatrix Error")},t.prototype.getBoneNum=function(){return this._boneNum},t.prototype.getBoneOffsetMatrices=function(){return this._boneOffsetMatrices},t}(Ja),gs=Xa.worker,bs=function(e){function t(t){var r=e.call(this)||this,n=gs.createDynamicBones(t?t.id:0);return n.id<0||!n.data||(r._init(n),r._initU32View()),r}return $(t,e),Object.defineProperty(t.prototype,"stiffness",{get:function(){return this._f32view[K.stiffness]},set:function(e){this._f32view[K.stiffness]=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"damping",{get:function(){return this._f32view[K.damping]},set:function(e){this._f32view[K.damping]=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"elasticity",{get:function(){return this._f32view[K.elasticity]},set:function(e){this._f32view[K.elasticity]=e},enumerable:!1,configurable:!0}),t.prototype.preUpdate=function(){this._handle.preUpdate()},t.prototype.update=function(e,t){t?this._handle.update(e,t.x,t.y,t.z):this._handle.update(e)},t.prototype.rebuild=function(){this._handle.rebuild()},t.prototype.resetRoot=function(e){this._handle.resetRoot(e?e.id:0)},t.OFFSETS=K,t}(Ja),ws=Xa.worker,xs=new Float32Array(new ArrayBuffer(4*j.size));xs.set([0,0,0,1,1],0);var Es=function(e){function t(){var r=e.call(this)||this,n=t.POLL_MANAGER.allocateOne();return r._init(n,t.POLL_MANAGER.pools),r.entityOffset=(r._poolIndex>>6)*j.size,r.localRotationOffset=r.entityOffset+j.rotation,r.localPositionOffset=r.entityOffset+j.position,r.localScaleOffset=r.entityOffset+j.scale,r.worldMatrixOffset=r.entityOffset+j.worldMatrix,r.active=!0,r}return $(t,e),t.prototype.addChild=function(e){ws.eventBridge.entityAddChild(this.id,e.id)},t.prototype.addChildAtIndex=function(e,t){ws.eventBridge.entityAddChildAtIndex(this.id,e.id,t)},t.prototype.removeFromParent=function(){ws.eventBridge.entityRemoveFromParent(this.id)},t.prototype.setAsRoot=function(){ws.eventBridge.setRootEntity(this.id)},t.prototype.destroy=function(){this.removeFromParent(),t.POLL_MANAGER.dispose(this)},t.prototype.clear=function(){ws.eventBridge.entityClear(this.id)},t.prototype.setLocalMatrixDirty=function(){ws.eventBridge.entitySetLocalMatrixDirty(this.id)},Object.defineProperty(t.prototype,"active",{set:function(e){ws.eventBridge.entitySetActive(this.id,e)},enumerable:!1,configurable:!0}),t.POLL_MANAGER=new cs(xs,xs,(function(e){return ws.createNodePool(e,!1)})),t.OFFSETS=j,t}(as),Ss=function(){function e(e,t){this._ctor=e,this._index=0,this._size=void 0!==t?t:500,this._array=new e(this._size)}return e.prototype.push=function(e){if(this._index>=this._size){var t=new this._ctor(2*this._size);t.set(this._array),this._array=t,this._size*=2}this._array[this._index]=e,this._index++},e.prototype.pop=function(){return this._index--,this._array[this._index]},e.prototype.getByIndex=function(e){return e>=this._index?-1:this._array[e]},e.prototype.size=function(){return this._index},e.prototype.clear=function(){this._index=0},Object.defineProperty(e.prototype,"buffer",{get:function(){return this._array.buffer},enumerable:!1,configurable:!0}),e}(),Ts=Xa.worker,Os=new Uint32Array(new ArrayBuffer(4*V.size)),As=new Float32Array(Os.buffer);Os[0]=1,As.set([0,0,0,1],1),As.set([0,0,0],5),As.set([1,1,1],8);var Cs=function(e){function t(){var r=e.call(this)||this,n=t.POLL_MANAGER.allocateOne();return r._init(n,t.POLL_MANAGER.pools),r.entityOffset=(r._poolIndex>>6)*V.size,r.localRotationTypeOffset=r.entityOffset+V.rotationType,r.localQuaternionOffset=r.entityOffset+V.rotation,r.localPositionOffset=r.entityOffset+V.position,r.localScaleOffset=r.entityOffset+V.scale,r.worldMatrixOffset=r.entityOffset+V.worldOffset,r.extOffset=(r._poolIndex>>6)*z.size,r.layerOffset=r.extOffset+z.layer,r.mixedLayerMaskOffset=r.extOffset+z.mixedLayerMask,r.active=!0,r}return $(t,e),t.CREATE_TREE=function(e,r,n,o){void 0===o&&(o=!1),t._CREATE_TREE_IDS.clear();for(var i=0;i<e;i++)n[i]=new t,t._CREATE_TREE_IDS.push(n[i].id);var a=Ts.createNodeTree(e,t._CREATE_TREE_IDS.buffer,r,o,!0);if(!a)for(i=0;i<e;i++)t.POLL_MANAGER.dispose(n[i]);return a},t.prototype.setUsingEuler=function(e){e?this._nativePool._u32view[this.localRotationTypeOffset]&=~V.dfRotationType:this._nativePool._u32view[this.localRotationTypeOffset]|=V.dfRotationType},t.prototype.isUsingEuler=function(){return 0==(this._nativePool._u32view[this.localRotationTypeOffset]&V.dfRotationType)},t.prototype.setLayer=function(e){this._nativePool.u32viewExt&&e!==this.getLayer()&&(this._nativePool.u32viewExt[this.layerOffset]=e,this.setLocalMatrixDirty())},t.prototype.getLayer=function(){return this._nativePool.u32viewExt?this._nativePool.u32viewExt[this.layerOffset]:0},t.prototype.getMixedLayerMask=function(){return this._nativePool.u32viewExt?this._nativePool.u32viewExt[this.mixedLayerMaskOffset]:1},t.prototype.addChild=function(e){Ts.eventBridge.entityAddChild(this.id,e.id)},t.prototype.addChildAtIndex=function(e,t){Ts.eventBridge.entityAddChildAtIndex(this.id,e.id,t)},t.prototype.removeFromParent=function(){Ts.eventBridge.entityRemoveFromParent(this.id)},t.prototype.setAsRoot=function(){Ts.eventBridge.setRootEntity(this.id)},t.prototype.destroy=function(){this.removeFromParent(),t.POLL_MANAGER.dispose(this)},t.prototype.clear=function(e,r){for(var n=0;n<r;n++)t.POLL_MANAGER.dispose(e[n]);Ts.eventBridge.entityClear(this.id)},t.prototype.setLocalMatrixDirty=function(){Ts.eventBridge.entitySetLocalMatrixDirty(this.id)},Object.defineProperty(t.prototype,"active",{set:function(e){Ts.eventBridge.entitySetActive(this.id,e)},enumerable:!1,configurable:!0}),t.POLL_MANAGER=new cs(Os,As,(function(e){return Ts.createNodePool(e,!0)}),4*z.size),t.OFFSETS=V,t._CREATE_TREE_IDS=new Ss(Uint32Array),t}(as),Ms=Xa.worker,Ps=function(t){function r(){return null!==t&&t.apply(this,arguments)||this}return $(r,t),r.prototype._createNativeModel=function(t,r){var n;t===e.EDataModelType.AnimationClip?n=Ms.createAnimationClipModel(r):t===e.EDataModelType.SkeletonBoneInverse&&(n=Ms.createBoneInverseModel(r)),n=n||{id:0},this._handle=n},r}(Za),Rs=function(t){function r(){return null!==t&&t.apply(this,arguments)||this}return $(r,t),r.prototype.setAnimationClip=function(t){this._createNativeModel(e.EDataModelType.AnimationClip,t)},r}(Ps),Ds=Xa.worker,Ns=function(e){function t(t,r,n,o,i,a,s,u){var c=e.call(this)||this;return c._handle=Ds.createAnimationClipBinding(t,r,n,o,i,a,s,u),c}return $(t,e),t.prototype.rebind=function(e,t,r,n,o,i,a,s,u,c){return Ds.rebindAnimationClipBinding(this.__handle,e,t,r,n,o,i,a,s,u,c)},t.prototype.update=function(e,t,r,n,o,i,a,s,u){return Ds.updateAnimationClipBinding(this.__handle,e,t,r,n,o,i,a,s,u)},t.prototype.writeDefaultValues=function(){Ds.writeAnimationClipBindingDefaultValues(this.__handle)},t}(Za),Is=Xa.worker,Ls=function(e){function t(t){var r=e.call(this)||this;r.layerCount=t,r._handle=Is.createAnimatorControllerModel(t),r._uint32View=new Uint32Array(r._handle.data),r._f32View=new Float32Array(r._handle.data),r._blendStates=new Array(t);for(var n=0;n<t;n++)r._uint32View[1+3*n]=1,r._f32View[1+3*n+1]=0,r._f32View[1+3*n+2]=0;return r}return $(t,e),t.UPDATE_ANIMATOR_CONTROLLERS=function(e,t){Is.updateAnimatorControllers(e,t)},t.prototype.setAnimationClipBinding=function(e){this._uint32View[0]=e?e.id:0,this._binding=e},t.prototype.setLayerBlendType=function(e,t){this._uint32View[1+3*e]=t},t.prototype.setLayerWeight=function(e,t){this._f32View[1+3*e+1]=t},t.prototype.setLayerBlend=function(e,t){this._uint32View[1+3*e+2]=t?t.id:0,this._blendStates[e]=t},t.prototype.setLayerMask=function(e,t){Is.setAnimatorControllerModelMaskAtIndex(this.__handle,e,t)},t.prototype.update=function(){Is.updateAnimatorControllerModel(this.__handle)},t.prototype.destroy=function(){this._binding=null,this._blendStates=null},t}(Za),Fs=Xa.worker,ks=function(e){function t(t){var r=e.call(this)||this;r.count=t,r._index=0,r._handle=Fs.createAnimatorControllerStateModel(t),r._f32View=new Float32Array(r._handle.data),r._uint32View=new Uint32Array(r._handle.data);for(var n=0;n<t;n++)r._uint32View[5*n+3]=0,r._f32View[5*n+3+1]=0,r._f32View[5*n+3+2]=0,r._uint32View[5*n+3+3]=0,r._f32View[5*n+3+4]=0;return r}return $(t,e),Object.defineProperty(t.prototype,"weight",{get:function(){return this._f32View[0]},set:function(e){this._f32View[0]=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"useDefault",{get:function(){return this._f32View[1]},set:function(e){this._f32View[1]=e},enumerable:!1,configurable:!0}),t.prototype.resetBlendInfo=function(){for(var e=0;e<this.count;e++)this._f32View[5*e+3+1]=0,this._f32View[5*e+3+2]=0;this._index=0},t.prototype.setNextState=function(e){this._uint32View[2]=e?e.id:0,this._nextState=e},t.prototype.setBlendInfo=function(e,t,r,n,o){return!(this._index>=this.count||(this._uint32View[5*this._index+3]=e.id,this._f32View[5*this._index+3+1]=t,this._f32View[5*this._index+3+2]=r,this._uint32View[5*this._index+3+3]=n?n.id:this._uint32View[5*this._index+3],this._f32View[5*this._index+3+4]=o,this._index++,0))},t}(Za),Us=function(e){function t(t){var r=e.call(this)||this;return r._init(t),r}return $(t,e),Object.defineProperty(t.prototype,"dataLength",{get:function(){return this._u32view[0]},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"byteOffset",{get:function(){return this._byteOffset+4},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"arrayBuffer",{get:function(){return this._buffer},enumerable:!1,configurable:!0}),t}(Ja),Bs=Xa.worker,js=function(t){function r(r,n,o,i,a,s,u){void 0===u&&(u=!1);var c=t.call(this)||this,l=Bs.createEffect(r,n,o,i,a,s,u);if(l.id<0||!l.data)return c;c._handle=l,c._init(l),c._initU32View();for(var f=0;f<n;f+=1){var p=f*q.size+q.colorDepth;c._u32view[p]=15|c._u32view[p],c._u32view[p]=$r(c._u32view[p],e.EBlendFactor.ZERO),c._u32view[p]=Jr(c._u32view[p],e.EBlendFactor.ONE)}return c._passCount=n,c}return $(r,t),Object.defineProperty(r.prototype,"passCount",{get:function(){return this._passCount},enumerable:!1,configurable:!0}),r.prototype.warmUp=function(){return this._handle.warmUp()},r.prototype.getBlendOn=function(e){return Yr(this._u32view[e*q.size+q.colorDepth])},r.prototype.setBlendOn=function(e,t){var r=e*q.size+q.colorDepth;this._u32view[r]=qr(this._u32view[r],t)},r.prototype.getBlendSrc=function(e){return en(this._u32view[e*q.size+q.colorDepth])},r.prototype.setBlendSrc=function(e,t){var r=e*q.size+q.colorDepth;this._u32view[r]=Kr(this._u32view[r],t),this._u32view[r]=$r(this._u32view[r],t)},r.prototype.getBlendDst=function(e){return tn(this._u32view[e*q.size+q.colorDepth])},r.prototype.setBlendDst=function(e,t){var r=e*q.size+q.colorDepth;this._u32view[r]=Qr(this._u32view[r],t),this._u32view[r]=Jr(this._u32view[r],t)},r.prototype.getBlendSrcRGB=function(e){return en(this._u32view[e*q.size+q.colorDepth])},r.prototype.setBlendSrcRGB=function(e,t){var r=e*q.size+q.colorDepth;this._u32view[r]=Kr(this._u32view[r],t)},r.prototype.getBlendSrcAlpha=function(e){return rn(this._u32view[e*q.size+q.colorDepth])},r.prototype.setBlendSrcAlpha=function(e,t){var r=e*q.size+q.colorDepth;this._u32view[r]=$r(this._u32view[r],t)},r.prototype.getBlendDstRGB=function(e){return tn(this._u32view[e*q.size+q.colorDepth])},r.prototype.setBlendDstRGB=function(e,t){var r=e*q.size+q.colorDepth;this._u32view[r]=Qr(this._u32view[r],t)},r.prototype.getBlendDstAlpha=function(e){return nn(this._u32view[e*q.size+q.colorDepth])},r.prototype.setBlendDstAlpha=function(e,t){var r=e*q.size+q.colorDepth;this._u32view[r]=Jr(this._u32view[r],t)},r.prototype.getBlendFunc=function(e){return un(this._u32view[e*q.size+q.colorDepth])},r.prototype.setBlendFunc=function(e,t){var r=e*q.size+q.colorDepth;this._u32view[r]=an(this._u32view[r],t),this._u32view[r]=sn(this._u32view[r],t)},r.prototype.getDepthTestOn=function(e){return fn(this._u32view[e*q.size+q.colorDepth])},r.prototype.setDepthTestOn=function(t,r){var n=t*q.size+q.colorDepth;this._u32view[n]=ln(this._u32view[n],r?e.ECompareFunc.LEQUAL:0)},r.prototype.getDepthTestComp=function(e){return pn(this._u32view[e*q.size+q.colorDepth])},r.prototype.setDepthTestComp=function(e,t){var r=e*q.size+q.colorDepth;this._u32view[r]=ln(this._u32view[r],t)},r.prototype.getDepthWrite=function(e){return Xr(this._u32view[e*q.size+q.colorDepth])},r.prototype.setDepthWrite=function(e,t){var r=e*q.size+q.colorDepth;this._u32view[r]=zr(this._u32view[r],t)},r.prototype.getColorWrite=function(e){return Wr(this._u32view[e*q.size+q.colorDepth])},r.prototype.setColorWrite=function(e,t){var r=e*q.size+q.colorDepth;this._u32view[r]=Gr(this._u32view[r],t)},r.prototype.getCullFace=function(e){return Fn(this._u32view[e*q.size+q.state])},r.prototype.setCullFace=function(e,t){var r=e*q.size+q.state;this._u32view[r]=Ln(this._u32view[r],t)},r.prototype.getCullOn=function(e){return kn(this._u32view[e*q.size+q.state])},r.prototype.setCullOn=function(t,r){var n=t*q.size+q.state;this._u32view[n]=Ln(this._u32view[n],r?e.ECullMode.BACK:e.ECullMode.NONE)},r.prototype.getPrimitiveType=function(e){return Xn(this._u32view[e*q.size+q.state])},r.prototype.setPrimitiveType=function(e,t){var r=e*q.size+q.state;this._u32view[r]=Wn(this._u32view[r],t)},r.prototype.getStencilTestOn=function(e){return wn(this._u32view[e*q.size+q.fstencil])},r.prototype.setStencilTestOn=function(t,r){var n=t*q.size+q.bstencil,o=bn(this._u32view[n],r?e.ECompareFunc.LEQUAL:0);this._u32view[n]=o,n=t*q.size+q.fstencil,this._u32view[n]=o},r.prototype.getStencilComp=function(e){return xn(this._u32view[e*q.size+q.fstencil])},r.prototype.setStencilComp=function(e,t){var r=e*q.size+q.bstencil,n=bn(this._u32view[r],t);this._u32view[r]=n,r=e*q.size+q.fstencil,this._u32view[r]=n},r.prototype.getStencilPass=function(e){return Pn(this._u32view[e*q.size+q.fstencil])},r.prototype.setStencilPass=function(e,t){var r=e*q.size+q.bstencil,n=An(this._u32view[r],t);this._u32view[r]=n,r=e*q.size+q.fstencil,this._u32view[r]=n},r.prototype.getStencilFail=function(e){return Cn(this._u32view[e*q.size+q.fstencil])},r.prototype.setStencilFail=function(e,t){var r=e*q.size+q.bstencil,n=Tn(this._u32view[r],t);this._u32view[r]=n,r=e*q.size+q.fstencil,this._u32view[r]=n},r.prototype.getStencilZFail=function(e){return Mn(this._u32view[e*q.size+q.fstencil])},r.prototype.setStencilZFail=function(e,t){var r=e*q.size+q.bstencil,n=On(this._u32view[r],t);this._u32view[r]=n,r=e*q.size+q.fstencil,this._u32view[r]=n},r.prototype.getStencilWriteMask=function(e){return Nn(this._u32view[e*q.size+q.fstencil])},r.prototype.setStencilWriteMask=function(e,t){var r=e*q.size+q.bstencil,n=Dn(this._u32view[r],t);this._u32view[r]=n,r=e*q.size+q.fstencil,this._u32view[r]=n},r.prototype.getStencilReadMask=function(e){return _n(this._u32view[e*q.size+q.fstencil])},r.prototype.setStencilReadMask=function(e,t){var r=e*q.size+q.bstencil,n=dn(this._u32view[r],t);this._u32view[r]=n,r=e*q.size+q.fstencil,this._u32view[r]=n},r.prototype.getStencilRef=function(e){return mn(this._u32view[e*q.size+q.fstencil])},r.prototype.setStencilRef=function(e,t){var r=e*q.size+q.bstencil,n=vn(this._u32view[r],t);this._u32view[r]=n,r=e*q.size+q.fstencil,this._u32view[r]=n},r.prototype.getUseMaterialStates=function(e){return!!(1&this._u32view[e*q.size+q.useMaterialStates])},r.prototype.setUseMaterialStates=function(e,t){this._u32view[e*q.size+q.useMaterialStates]=t?4294967295:0},r.prototype._getUseMaterialStateMask=function(e,t){return Hn(this._u32view[e*q.size+q.useMaterialStates],t)},r.prototype._setUseMaterialStateMask=function(e,t,r){this._u32view[e*q.size+q.useMaterialStates]=function(e,t,r){return r?e|t:e&~t}(this._u32view[e*q.size+q.useMaterialStates],t,r)},r.prototype.getUseMaterialStateBlendOn=function(e){return this._getUseMaterialStateMask(e,1)},r.prototype.setUseMaterialStateBlendOn=function(e,t){return this._setUseMaterialStateMask(e,1,t)},r.prototype.getUseMaterialStateBlendSrcRGB=function(e){return this._getUseMaterialStateMask(e,2)},r.prototype.setUseMaterialStateBlendSrcRGB=function(e,t){return this._setUseMaterialStateMask(e,2,t)},r.prototype.getUseMaterialStateBlendSrcAlpha=function(e){return this._getUseMaterialStateMask(e,3)},r.prototype.setUseMaterialStateBlendSrcAlpha=function(e,t){return this._setUseMaterialStateMask(e,3,t)},r.prototype.getUseMaterialStateBlendDstRGB=function(e){return this._getUseMaterialStateMask(e,4)},r.prototype.setUseMaterialStateBlendDstRGB=function(e,t){return this._setUseMaterialStateMask(e,4,t)},r.prototype.getUseMaterialStateBlendDstAlpha=function(e){return this._getUseMaterialStateMask(e,5)},r.prototype.setUseMaterialStateBlendDstAlpha=function(e,t){return this._setUseMaterialStateMask(e,5,t)},r.prototype.getUseMaterialStateBlendFunc=function(e){return this._getUseMaterialStateMask(e,6)},r.prototype.setUseMaterialStateBlendFunc=function(e,t){return this._setUseMaterialStateMask(e,6,t)},r.prototype.getUseMaterialStateDepthTestOn=function(e){return this._getUseMaterialStateMask(e,7)},r.prototype.setUseMaterialStateDepthTestOn=function(e,t){return this._setUseMaterialStateMask(e,7,t)},r.prototype.getUseMaterialStateDepthTestComp=function(e){return this._getUseMaterialStateMask(e,8)},r.prototype.setUseMaterialStateDepthTestComp=function(e,t){return this._setUseMaterialStateMask(e,8,t)},r.prototype.getUseMaterialStateDepthWrite=function(e){return this._getUseMaterialStateMask(e,9)},r.prototype.setUseMaterialStateDepthWrite=function(e,t){return this._setUseMaterialStateMask(e,9,t)},r.prototype.getUseMaterialStateCullOn=function(e){return this._getUseMaterialStateMask(e,10)},r.prototype.setUseMaterialStateCullOn=function(e,t){return this._setUseMaterialStateMask(e,10,t)},r.prototype.getUseMaterialStateCullFace=function(e){return this._getUseMaterialStateMask(e,11)},r.prototype.setUseMaterialStateCullFace=function(e,t){return this._setUseMaterialStateMask(e,11,t)},r.prototype.getUseMaterialStatePrimitiveType=function(e){return this._getUseMaterialStateMask(e,12)},r.prototype.setUseMaterialStatePrimitiveType=function(e,t){return this._setUseMaterialStateMask(e,12,t)},r.prototype.getUseMaterialStateStencilTestOn=function(e){return this._getUseMaterialStateMask(e,13)},r.prototype.setUseMaterialStateStencilTestOn=function(e,t){return this._setUseMaterialStateMask(e,13,t)},r.prototype.getUseMaterialStateStencilTestComp=function(e){return this._getUseMaterialStateMask(e,14)},r.prototype.setUseMaterialStateStencilTestComp=function(e,t){return this._setUseMaterialStateMask(e,14,t)},r.prototype.getUseMaterialStateStencilTestPass=function(e){return this._getUseMaterialStateMask(e,15)},r.prototype.setUseMaterialStateStencilTestPass=function(e,t){return this._setUseMaterialStateMask(e,15,t)},r.prototype.getUseMaterialStateStencilTestFail=function(e){return this._getUseMaterialStateMask(e,16)},r.prototype.setUseMaterialStateStencilTestFail=function(e,t){return this._setUseMaterialStateMask(e,16,t)},r.prototype.getUseMaterialStateStencilTestZFail=function(e){return this._getUseMaterialStateMask(e,17)},r.prototype.setUseMaterialStateStencilTestZFail=function(e,t){return this._setUseMaterialStateMask(e,17,t)},r.prototype.getUseMaterialStateColorWrite=function(e){return this._getUseMaterialStateMask(e,18)},r.prototype.setUseMaterialStateColorWrite=function(e,t){return this._setUseMaterialStateMask(e,18,t)},r.prototype.showDebugInfo=function(){for(var t="",r=0;r<this._passCount;r+=1)t+="Pass: "+r+":\nPrimitiveType("+e.EPrimitiveType[this.getPrimitiveType(r)]+"),\nBlendOn("+this.getBlendOn(r)+"), BlendSrc("+e.EBlendFactor[this.getBlendSrcRGB(r)]+","+e.EBlendFactor[this.getBlendSrcAlpha(r)]+"), BlendDst("+e.EBlendFactor[this.getBlendDstRGB(r)]+","+e.EBlendFactor[this.getBlendDstAlpha(r)]+"), BlendFunc("+e.EBlendEquation[this.getBlendFunc(r)]+"),\nDepthTestOn("+this.getDepthTestOn(r)+"), DepthTestComp("+e.ECompareFunc[this.getDepthTestComp(r)]+"), DepthWrite("+this.getDepthWrite(r)+"),\nCullOn("+this.getCullOn(r)+"), CullFace("+e.ECullMode[this.getCullFace(r)]+"),\nStencilTestOn("+this.getStencilTestOn(r)+"), StencilComp("+e.ECompareFunc[this.getStencilComp(r)]+"), StencilPass("+e.EStencilOp[this.getStencilPass(r)]+"), StencilFail("+e.EStencilOp[this.getStencilFail(r)]+"), StencilZFail("+e.EStencilOp[this.getStencilZFail(r)]+"),\nStencilWriteMask("+this.getStencilWriteMask(r)+"), StencilReadMask("+this.getStencilReadMask(r)+"), StencilRef("+this.getStencilRef(r)+")\n      ";return t},r.OFFSETS=q,r}(Ja),Vs=Xa.worker,zs=function(t){function r(e,r,n){var o=t.call(this)||this;return o._createNativeMat(e,r,n),o.renderQueue=2e3,o._macros=e,r&&(o.effect=r),n&&(o.uniforms=n),o}return $(r,t),Object.defineProperty(r.prototype,"effect",{get:function(){return this._effect},set:function(e){this._u32view[Y.effect]=e.id,this._effect=e},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"uniforms",{get:function(){return this._uniforms},set:function(e){this._u32view[Y.uniformBlock]=e.id,this._uniforms=e},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"renderQueue",{get:function(){return this._u32view[Y.renderQueue]},set:function(e){this._u32view[Y.renderQueue]=e},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"useInstance",{get:function(){return!!this._u32view[Y.useInstance]},set:function(e){this._u32view[Y.useInstance]=e?1:0},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"blendOn",{get:function(){return Yr(this._u32view[Y.colorDepth])},set:function(e){var t=Y.colorDepth;this._u32view[t]=qr(this._u32view[t],e),this._u32view[Y.colorDepthMask]|=Hr},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"blendSrcRGB",{get:function(){return en(this._u32view[Y.colorDepth])},set:function(e){var t=Y.colorDepth;this._u32view[t]=Kr(this._u32view[t],e),this._u32view[Y.colorDepthMask]|=3840},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"blendSrcRGBChanged",{get:function(){return!!(3840&this._u32view[Y.colorDepthMask])},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"blendSrcAlpha",{get:function(){return rn(this._u32view[Y.colorDepth])},set:function(e){var t=Y.colorDepth;this._u32view[t]=$r(this._u32view[t],e),this._u32view[Y.colorDepthMask]|=983040},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"blendSrc",{set:function(e){this.blendSrcRGB=e},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"blendDstRGB",{get:function(){return tn(this._u32view[Y.colorDepth])},set:function(e){var t=Y.colorDepth;this._u32view[t]=Qr(this._u32view[t],e),this._u32view[Y.colorDepthMask]|=61440},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"blendDstRGBChanged",{get:function(){return!!(61440&this._u32view[Y.colorDepthMask])},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"blendDstAlpha",{get:function(){return nn(this._u32view[Y.colorDepth])},set:function(e){var t=Y.colorDepth;this._u32view[t]=Jr(this._u32view[t],e),this._u32view[Y.colorDepthMask]|=15728640},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"blendDst",{set:function(e){this.blendDstRGB=e},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"blendFunc",{get:function(){return un(this._u32view[Y.colorDepth])},set:function(e){var t=Y.colorDepth;this._u32view[t]=an(this._u32view[t],e),this._u32view[t]=sn(this._u32view[t],e),this._u32view[Y.colorDepthMask]|=on},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"depthTestOn",{get:function(){return fn(this._u32view[Y.colorDepth])},set:function(t){var r=Y.colorDepth;this._u32view[r]=ln(this._u32view[r],t?e.ECompareFunc.LEQUAL:0),this._u32view[Y.colorDepthMask]|=cn},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"depthTestComp",{get:function(){return pn(this._u32view[Y.colorDepth])},set:function(e){var t=Y.colorDepth;this._u32view[t]=ln(this._u32view[t],e),this._u32view[Y.colorDepthMask]|=cn},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"depthWrite",{get:function(){return Xr(this._u32view[Y.colorDepth])},set:function(e){var t=Y.colorDepth;this._u32view[t]=zr(this._u32view[t],e),this._u32view[Y.colorDepthMask]|=Vr},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"colorWrite",{get:function(){return Wr(this._u32view[Y.colorDepth])},set:function(e){var t=Y.colorDepth;this._u32view[t]=Gr(this._u32view[t],e),this._u32view[Y.colorDepthMask]|=15},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"cullFace",{get:function(){return Fn(this._u32view[Y.state])},set:function(e){var t=Y.state;this._u32view[t]=Ln(this._u32view[t],e),this._u32view[Y.stateMask]|=In},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"cullOn",{get:function(){return kn(this._u32view[Y.state])},set:function(t){var r=Y.state;this._u32view[r]=Ln(this._u32view[r],t?e.ECullMode.BACK:e.ECullMode.NONE),this._u32view[Y.stateMask]|=In},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"primitiveType",{get:function(){return Xn(this._u32view[Y.state])},set:function(e){var t=Y.state;this._u32view[t]=Wn(this._u32view[t],e),this._u32view[Y.stateMask]|=Gn},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"stencilTestOn",{get:function(){return wn(this._u32view[Y.fstencil])},set:function(t){var r=Y.bstencil,n=bn(this._u32view[r],t?e.ECompareFunc.LEQUAL:0);this._u32view[r]=n,r=Y.fstencil,this._u32view[r]=n,this._u32view[Y.bstencilMask]|=gn,this._u32view[Y.fstencilMask]|=gn},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"stencilComp",{get:function(){return xn(this._u32view[Y.fstencil])},set:function(e){var t=Y.bstencil,r=bn(this._u32view[t],e);this._u32view[t]=r,t=Y.fstencil,this._u32view[t]=r,this._u32view[Y.bstencilMask]|=gn,this._u32view[Y.fstencilMask]|=gn},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"stencilPass",{get:function(){return Pn(this._u32view[Y.fstencil])},set:function(e){var t=Y.bstencil,r=An(this._u32view[t],e);this._u32view[t]=r,t=Y.fstencil,this._u32view[t]=r,this._u32view[Y.bstencilMask]|=4026531840,this._u32view[Y.fstencilMask]|=4026531840},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"stencilFail",{get:function(){return Cn(this._u32view[Y.fstencil])},set:function(e){var t=Y.bstencil,r=Tn(this._u32view[t],e);this._u32view[t]=r,t=Y.fstencil,this._u32view[t]=r,this._u32view[Y.bstencilMask]|=15728640,this._u32view[Y.fstencilMask]|=15728640},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"stencilZFail",{get:function(){return Mn(this._u32view[Y.fstencil])},set:function(e){var t=Y.bstencil,r=On(this._u32view[t],e);this._u32view[t]=r,t=Y.fstencil,this._u32view[t]=r,this._u32view[Y.bstencilMask]|=251658240,this._u32view[Y.fstencilMask]|=251658240},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"stencilWriteMask",{get:function(){return Nn(this._u32view[Y.state])},set:function(e){var t=Y.state,r=Dn(this._u32view[t],e);this._u32view[t]=r,this._u32view[Y.stateMask]|=Rn},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"stencilReadMask",{get:function(){return _n(this._u32view[Y.fstencil])},set:function(e){var t=Y.bstencil,r=dn(this._u32view[t],e);this._u32view[t]=r,t=Y.fstencil,this._u32view[t]=r,this._u32view[Y.bstencilMask]|=hn,this._u32view[Y.fstencilMask]|=hn},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"stencilRef",{get:function(){return mn(this._u32view[Y.fstencil])},set:function(e){var t=Y.bstencil,r=vn(this._u32view[t],e);this._u32view[t]=r,t=Y.fstencil,this._u32view[t]=r,this._u32view[Y.bstencilMask]|=yn,this._u32view[Y.fstencilMask]|=yn},enumerable:!1,configurable:!0}),r.prototype._setMask=function(e,t,r){this._u32view[e]=r?this._u32view[e]|t:this._u32view[e]&~t},r.prototype._getMask=function(e,t){return!!(this._u32view[e]&t)},Object.defineProperty(r.prototype,"blendOnMask",{get:function(){return this._getMask(Y.colorDepthMask,Hr)},set:function(e){this._setMask(Y.colorDepthMask,Hr,e)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"blendSrcRGBMask",{get:function(){return this._getMask(Y.colorDepthMask,3840)},set:function(e){this._setMask(Y.colorDepthMask,3840,e)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"blendSrcAlphaMask",{get:function(){return this._getMask(Y.colorDepthMask,983040)},set:function(e){this._setMask(Y.colorDepthMask,983040,e)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"blendSrcMask",{set:function(e){this.blendSrcRGBMask=e},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"blendDstRGBMask",{get:function(){return this._getMask(Y.colorDepthMask,61440)},set:function(e){this._setMask(Y.colorDepthMask,61440,e)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"blendDstAlphaMask",{get:function(){return this._getMask(Y.colorDepthMask,15728640)},set:function(e){this._setMask(Y.colorDepthMask,15728640,e)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"blendDstMask",{set:function(e){this.blendDstRGBMask=e},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"blendFuncMask",{get:function(){return this._getMask(Y.colorDepthMask,on)},set:function(e){this._setMask(Y.colorDepthMask,on,e)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"depthTestOnMask",{get:function(){return this._getMask(Y.colorDepthMask,cn)},set:function(e){this._setMask(Y.colorDepthMask,cn,e)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"depthTestCompMask",{get:function(){return this._getMask(Y.colorDepthMask,cn)},set:function(e){this._setMask(Y.colorDepthMask,cn,e)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"depthWriteMask",{get:function(){return this._getMask(Y.colorDepthMask,Vr)},set:function(e){this._setMask(Y.colorDepthMask,Vr,e)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"colorWriteMask",{get:function(){return this._getMask(Y.colorDepthMask,15)},set:function(e){this._setMask(Y.colorDepthMask,15,e)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"cullFaceMask",{get:function(){return this._getMask(Y.stateMask,In)},set:function(e){this._setMask(Y.stateMask,In,e)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"cullOnMask",{get:function(){return this._getMask(Y.stateMask,In)},set:function(e){this._setMask(Y.stateMask,In,e)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"primitiveTypeMask",{get:function(){return this._getMask(Y.stateMask,Gn)},set:function(e){this._setMask(Y.stateMask,Gn,e)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"stencilTestOnMask",{get:function(){return this._getMask(Y.bstencilMask,gn)},set:function(e){this._setMask(Y.bstencilMask,gn,e),this._setMask(Y.fstencilMask,gn,e)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"stencilCompMask",{get:function(){return this._getMask(Y.bstencilMask,gn)},set:function(e){this._setMask(Y.bstencilMask,gn,e),this._setMask(Y.fstencilMask,gn,e)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"stencilPassMask",{get:function(){return this._getMask(Y.bstencilMask,4026531840)},set:function(e){this._setMask(Y.bstencilMask,4026531840,e),this._setMask(Y.fstencilMask,4026531840,e)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"stencilFailMask",{get:function(){return this._getMask(Y.bstencilMask,15728640)},set:function(e){this._setMask(Y.bstencilMask,15728640,e),this._setMask(Y.fstencilMask,15728640,e)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"stencilZFailMask",{get:function(){return this._getMask(Y.bstencilMask,251658240)},set:function(e){this._setMask(Y.bstencilMask,251658240,e),this._setMask(Y.fstencilMask,251658240,e)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"stencilWriteMaskMask",{get:function(){return this._getMask(Y.stateMask,Rn)},set:function(e){this._setMask(Y.stateMask,Rn,e)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"stencilReadMaskMask",{get:function(){return this._getMask(Y.bstencilMask,hn)},set:function(e){this._setMask(Y.bstencilMask,hn,e),this._setMask(Y.fstencilMask,hn,e)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"stencilRefMask",{get:function(){return this._getMask(Y.bstencilMask,yn)},set:function(e){this._setMask(Y.bstencilMask,yn,e),this._setMask(Y.fstencilMask,yn,e)},enumerable:!1,configurable:!0}),r.prototype._createNativeMat=function(e,t,r){var n=Vs.createMaterial(e,r);n.id<0||!n.data||(this._handle=n,this._init(n),this._initU32View())},r.prototype.changeMacros=function(e){this._macros=this._macros||{},Object.assign(this._macros,e),Vs.changeMaterialMacros(this.__handle,this._macros,!0)},r.prototype.getMacro=function(e){var t;return null===(t=this._macros)||void 0===t?void 0:t[e]},r.prototype.clone=function(e){var t=new r(Object.assign({},this._macros),this._effect);return t._f32view.set(this._f32view),t.uniforms=e||this._uniforms.clone(),t},r.prototype.showDebugInfo=function(){return"RenderQueue("+this.renderQueue+"), PrimitiveType("+e.EPrimitiveType[this.primitiveType]+"),\nOverwrite("+this._u32view[Y.fstencilMask].toString(16)+", "+this._u32view[Y.bstencilMask].toString(16)+", "+this._u32view[Y.blendRGBAMask].toString(16)+", "+this._u32view[Y.colorDepthMask].toString(16)+", "+this._u32view[Y.stateMask].toString(16)+"),\nBlendOn("+this.blendOn+"), BlendSrc("+e.EBlendFactor[this.blendSrcRGB]+","+e.EBlendFactor[this.blendSrcAlpha]+"), BlendDst("+e.EBlendFactor[this.blendDstRGB]+","+e.EBlendFactor[this.blendDstAlpha]+"), BlendFunc("+e.EBlendEquation[this.blendFunc]+"),\nDepthTestOn("+this.depthTestOn+"), DepthTestComp("+e.ECompareFunc[this.depthTestComp]+"), DepthWrite("+this.depthWrite+"),\nCullOn("+this.cullOn+"), CullFace("+e.ECullMode[this.cullFace]+"),\nStencilTestOn("+this.stencilTestOn+"), StencilComp("+e.ECompareFunc[this.stencilComp]+"), StencilComp("+e.EStencilOp[this.stencilPass]+"), StencilFail("+e.EStencilOp[this.stencilFail]+"), StencilZFail("+e.EStencilOp[this.stencilZFail]+"),\nStencilWriteMask("+this.stencilWriteMask+"), StencilReadMask("+this.stencilReadMask+"), StencilRef("+this.stencilRef+")\n      "},r.OFFSETS=Y,r}(Ja),Gs=Xa.worker,Ws=function(e){function t(t){var r=e.call(this)||this,n=t;return n.colors.forEach((function(e,t){e.texture=e.texture.__handle})),n.depth.texture=n.depth.texture.__handle,t.stencil?n.stencil.texture=n.stencil.texture.__handle:n.stencil={texture:{id:0}},r._handle=Gs.createRenderPass(n),r}return $(t,e),t.SCREEN_RENDER_PASS={id:0,__handle:{id:0}},t}(Za),Xs=function(t){function r(){return null!==t&&t.apply(this,arguments)||this}return $(r,t),r.prototype.setBoneInverseMatrix=function(t){var r=new Float32Array(t.length);r.set(t),this._createNativeModel(e.EDataModelType.SkeletonBoneInverse,r.buffer)},r}(Ps),Hs=Xa.worker,qs=function(t){function r(r){var n=t.call(this)||this,o=r.canvas;o?(n._width=o.width,n._height=o.height):(n._width=r.width,n._height=r.height),n._type=r.type||e.ETextureType.D2,n._slice=r.slices||0,n._mips=r.mips||0,n._pixelFormat=r.pixelFormat||e.ETextureFormat.RGBA8,Math.log2(n.width)%1==0&&Math.log2(n.height)%1==0||n.fixNonPOT(r),n._flags=n._buildFlags(r);var i=o?Hs.createAutoUpdateTextureFromCanvas(o):Hs.createTexture(n._type,n._width,n._height,n._slice,n._mips,n._pixelFormat,n._flags,r.source,r.offsets);return n._handle=i||{id:0},n}return $(r,t),Object.defineProperty(r.prototype,"type",{get:function(){return this._type},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"width",{get:function(){return this._width},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"height",{get:function(){return this._height},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"slice",{get:function(){return this._slice},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"mips",{get:function(){return this._mips},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"pixelFormat",{get:function(){return this._pixelFormat},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"wrapU",{get:function(){return Ya.isWrongWrapMapping?Rr(this._flags):Mr(this._flags)},set:function(e){Hs.updateTextureFlags(this.__handle,this._flags=Ya.isWrongWrapMapping?xr(this._flags,e):br(this._flags,e))},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"wrapV",{get:function(){return Ya.isWrongWrapMapping?Mr(this._flags):Pr(this._flags)},set:function(e){Hs.updateTextureFlags(this.__handle,this._flags=Ya.isWrongWrapMapping?br(this._flags,e):wr(this._flags,e))},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"wrapW",{get:function(){return Ya.isWrongWrapMapping?Pr(this._flags):Rr(this._flags)},set:function(e){Hs.updateTextureFlags(this.__handle,this._flags=Ya.isWrongWrapMapping?wr(this._flags,e):xr(this._flags,e))},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"magFilter",{get:function(){return Nr(this._flags)},set:function(e){Hs.updateTextureFlags(this.__handle,this._flags=Sr(this._flags,e))},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"minFilter",{get:function(){return Dr(this._flags)},set:function(e){Hs.updateTextureFlags(this.__handle,this._flags=Er(this._flags,e))},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"anisoLevel",{get:function(){return kr(this._flags)},set:function(e){Hs.updateTextureFlags(this.__handle,this._flags=Ar(this._flags,e))},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"sampleCount",{get:function(){return Lr(this._flags)},set:function(e){Hs.updateTextureFlags(this.__handle,this._flags=Or(this._flags,e))},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"generateMipmaps",{get:function(){return Ir(this._flags)},set:function(e){Hs.updateTextureFlags(this.__handle,this._flags=Tr(this._flags,e))},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"isRenderTarget",{get:function(){return Fr(this._flags)},set:function(e){Hs.updateTextureFlags(this.__handle,this._flags=Cr(this._flags,e))},enumerable:!1,configurable:!0}),r.prototype.update=function(e){var t=e.level||0;Hs.updateTexture(this.__handle,t,e.slice||0,e.xoffset||0,e.yoffset||0,e.zoffset||0,e.width||this.width>>t||1,e.height||this.height>>t||1,e.buffer)},r.prototype._buildFlags=function(e){return this._flags=0,Ya.isWrongWrapMapping?(e.wrapU&&(this._flags=xr(this._flags,e.wrapU)),e.wrapV&&(this._flags=br(this._flags,e.wrapV)),e.wrapW&&(this._flags=wr(this._flags,e.wrapW))):(e.wrapU&&(this._flags=br(this._flags,e.wrapU)),e.wrapV&&(this._flags=wr(this._flags,e.wrapV)),e.wrapW&&(this._flags=xr(this._flags,e.wrapW))),e.magFilter&&(this._flags=Sr(this._flags,e.magFilter)),e.minFilter&&(this._flags=Er(this._flags,e.minFilter)),e.anisoLevel&&(this._flags=Ar(this._flags,e.anisoLevel)),e.sampleCount&&(this._flags=Or(this._flags,e.sampleCount)),e.generateMipmaps&&(this._flags=Tr(this._flags,e.generateMipmaps)),e.isRenderTarget&&(this._flags=Cr(this._flags,e.isRenderTarget)),e.isWriteOnly&&(this._flags=(t=this._flags,e.isWriteOnly?t|vr:-65537&t)),this._flags;var t},r.prototype.fixNonPOT=function(t){t.wrapU=e.EWrapMode.CLAMP_TO_EDGE,t.wrapV=e.EWrapMode.CLAMP_TO_EDGE,t.wrapW=e.EWrapMode.CLAMP_TO_EDGE,t.minFilter=Ys.get(t.minFilter),t.magFilter=Ys.get(t.magFilter),t.anisoLevel=0,t.mips=0,t.generateMipmaps=!1},r.prototype.showDebugInfo=function(){return"type("+e.ETextureType[this.type]+"), format("+e.ETextureFormat[this.pixelFormat]+"),\nwidth("+this.width+"), height("+this.height+"), slice("+this.slice+"), mips("+this.mips+"),\nwrapU("+e.EWrapMode[this.wrapU]+"), wrapV("+e.EWrapMode[this.wrapV]+"), wrapW("+e.EWrapMode[this.wrapW]+"),\nmagFilter("+e.EFilterMode[this.magFilter]+"), minFilter("+e.EFilterMode[this.minFilter]+"),\nanisoLevel("+this.anisoLevel+"), sampleCount("+this.sampleCount+"), generateMipmaps("+this.generateMipmaps+")\n    "},r}(Za),Ys=new Map([[e.EFilterMode.LINEAR,e.EFilterMode.LINEAR],[e.EFilterMode.LINEAR_MIPMAP_LINEAR,e.EFilterMode.LINEAR],[e.EFilterMode.LINEAR_MIPMAP_NEAREST,e.EFilterMode.LINEAR],[e.EFilterMode.NEAREST,e.EFilterMode.NEAREST],[e.EFilterMode.NEAREST_MIPMAP_LINEAR,e.EFilterMode.NEAREST],[e.EFilterMode.NEAREST_MIPMAP_NEAREST,e.EFilterMode.NEAREST]]),Zs=Xa.worker,Ks=function(t){function r(e){var r=t.call(this)||this;return r._handle=r._createNativeObj(e),r._handle.data&&(r._f32View=new Float32Array(r._handle.data),r._u32View=new Uint32Array(r._handle.data)),r._descriptor=e,r}return $(r,t),r.CREATE_FAKE=function(e){return new Qs(e)},Object.defineProperty(r.prototype,"_dataView",{get:function(){return this._f32View},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"descriptor",{get:function(){return this._descriptor},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"textures",{get:function(){return this._textures},enumerable:!1,configurable:!0}),r.prototype._createNativeObj=function(e){return Zs.createUniformBlock(e.__handle)||{id:0}},r.prototype.hasKey=function(e){return this._descriptor.hasKey(e)},r.prototype.setUniform=function(t,r){var n=this._descriptor.layout[t];return!!n&&(n[0]===e.EUniformType.SAMPLER&&(r instanceof qs?(this._textures=this._textures||{},this._textures[t]=r,r=r.id):this._textures&&(this._textures[t]=void 0)),this._descriptor.setUniform(t,r,this._f32View,this._u32View),!0)},r.prototype.getUniform=function(e){return this._descriptor.getUniform(e,this._f32View,this._u32View)},r.prototype.getTexture=function(e){return this._textures[e]},r.prototype._getFloatOffset=function(e){return this._descriptor._getFloatOffset(e)},r.prototype.setAllData=function(e){this._f32View.set(e,0)},r.prototype.clone=function(){var e=new r(this._descriptor);return e._f32View?(this._textures&&(e._textures=Object.assign({},this._textures)),e._f32View.set(this._f32View),e):e},r.prototype.copy=function(e){if(this._descriptor.id===e._descriptor.id)return this._f32View.set(e._f32View),void(this._textures=e.textures);var t=e.descriptor.layout;for(var r in t)if(this.hasKey(r)){var n=e.getUniform(r);this.setUniform(r,n),e._textures&&e._textures[r]&&(this._textures=this._textures||{},this._textures[r]=e._textures[r])}},r.prototype.showDebugInfo=function(){var e=this,t="";return Object.keys(this._descriptor.layout).forEach((function(r){var n=e._descriptor.getUniform(r,e._f32View,e._u32View);t+=r+": ["+("number"==typeof n?[n]:n).join(",")+"]\n"})),t},r}(Za),Qs=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return $(t,e),t.prototype._createNativeObj=function(e){return{id:0,data:new ArrayBuffer(4*e.size)}},t}(Ks),$s=Xa.worker,Js=function(t){function r(r){var n=t.call(this)||this;n._layout={};var o=0;return r.uniforms.forEach((function(t){var r=t.type;Ya.neverTranspose||t.type===e.EUniformType.MAT4&&(t.type=e.EUniformType.FLOAT4,t.num=4*(t.num||1));var i=void 0!==t.num?t.num:1,a=n._getLength(t.type),s=o+a*i;n._layout[t.name]=[t.type,o,i,a,r,!!t.needTranspose],o=s})),n._size=o,n._handle=$s.createUniformBlockDescriptor(r)||{id:0},n}return $(r,t),Object.defineProperty(r.prototype,"layout",{get:function(){return this._layout},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"size",{get:function(){return this._size},enumerable:!1,configurable:!0}),r.prototype._getLength=function(t){var r=0;switch(t){case e.EUniformType.FLOAT:r=1;break;case e.EUniformType.FLOAT2:r=2;break;case e.EUniformType.FLOAT3:r=3;break;case e.EUniformType.FLOAT4:r=4;case e.EUniformType.MAT2:r=4;break;case e.EUniformType.MAT3:r=9;break;case e.EUniformType.MAT4:r=16;break;case e.EUniformType.SAMPLER:r=1}return r},r.prototype.hasKey=function(e){return void 0!==this._layout[e]},r.prototype.setUniform=function(t,r,n,o){var i=this._layout[t];if(i){var a=i[0],s=i[1];switch(a){case e.EUniformType.FLOAT:case e.EUniformType.FLOAT2:case e.EUniformType.FLOAT3:case e.EUniformType.FLOAT4:case e.EUniformType.MAT2:case e.EUniformType.MAT3:case e.EUniformType.MAT4:this._setFloatArray(s,r,n);break;case e.EUniformType.SAMPLER:this._setTexture(s,r,o)}}},r.prototype._setFloatArray=function(e,t,r){r.set(t,e)},r.prototype._setTexture=function(e,t,r){r[e]=t},r.prototype.getUniform=function(t,r,n){var o=this._layout[t];if(!o)return null;var i=o[0],a=o[1],s=o[2],u=o[3];switch(i){case e.EUniformType.FLOAT:case e.EUniformType.FLOAT2:case e.EUniformType.FLOAT3:case e.EUniformType.FLOAT4:case e.EUniformType.MAT2:case e.EUniformType.MAT3:case e.EUniformType.MAT4:return new Float32Array(r.buffer,4*a,s*u);case e.EUniformType.SAMPLER:return n[a]}},r.prototype._getFloatOffset=function(e){var t=this._layout[e];return t?t[1]:-1},r}(Za),eu=Xa.worker,tu=function(e){function t(t,r){void 0===r&&(r=!1);var n=e.call(this)||this;return n._handle=eu.createIndexBuffer(t,r)||{id:0},n._byteSize=t.byteLength,n}return $(t,e),Object.defineProperty(t.prototype,"byteSize",{get:function(){return this._byteSize},enumerable:!1,configurable:!0}),t.prototype.update=function(e,t){eu.updateIndexBuffer(this.__handle,e,t)},t}(Za),ru=Xa.worker,nu=function(e){function t(t){var r=e.call(this)||this;return r._handle=ru.createIndexData(t),r}return $(t,e),Object.defineProperty(t.prototype,"data",{get:function(){return this._handle.data},enumerable:!1,configurable:!0}),t}(Za),ou=Xa.worker,iu=function(e){function t(t,r){var n=e.call(this)||this;return n._handle=ou.createVertexBuffer(t,r.__handle)||{id:0},n._layout=r,n._byteSize=t.byteLength,n}return $(t,e),Object.defineProperty(t.prototype,"byteSize",{get:function(){return this._byteSize},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"layout",{get:function(){return this._layout},enumerable:!1,configurable:!0}),t.prototype.update=function(e,t){ou.updateVertexBuffer(this.__handle,e,t)},t}(Za),au=Xa.worker,su=function(e){function t(t,r,n){var o=e.call(this)||this;return o._handle=au.createVertexData(t.__handle,r,n.__handle),o._layout=t,o}return $(t,e),Object.defineProperty(t.prototype,"layout",{get:function(){return this._layout},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"data",{get:function(){return this._handle.data},enumerable:!1,configurable:!0}),t}(Za),uu=Xa.worker,cu=function(e){function t(t){var r=e.call(this)||this;return r._attributes={},r._usages={},r._options=t,t.attributes.forEach((function(e){r._attributes[e.name]=e,r._usages[e.usage]=e})),r._handle=uu.createVertexLayout(t),r}return $(t,e),Object.defineProperty(t.prototype,"stride",{get:function(){return this._options.stride},enumerable:!1,configurable:!0}),t.prototype.getConfigByName=function(e){return this._attributes[e]},t.prototype.getConfigByUsage=function(e){return this._usages[e]},t}(Za),lu=Xa.worker,fu=function(e){function t(t){var r=e.call(this)||this;return r._options=t,r._handle=lu.createVertexDataDescriptor(t),r}return $(t,e),t}(Za),pu=Xa.worker,hu=function(e){function t(t){var r=e.call(this)||this;return r._handle=pu.createView(t),r}return $(t,e),t}(Za),du=Xa.worker,_u=Xa.IS_VALID,yu=Xa.GET_MAIN_CANVAS,vu=Xa.Image,mu=Xa.Phys3D,gu=du.downloader,bu=du.createWeakRef,wu=du.createWeakRefSentry,xu=du.createNativeUUMap,Eu=du.createNativeSUMap,Su=du.createNativeULUMap,Tu=du.loadTTFFont,Ou=du.getGlyphInfo,Au=du.refreshNodesWorldTransform,Cu=du.setGlobalPhysicSystem,Mu=du.bindRigidBodyToNode,Pu=du.bindCCTToNode,Ru=du.unbindRigidBody,Du=du.unbindCCT,Nu=du.decodeBase64,Iu=du.initDraco,Lu=du.decodeDraco,Fu=du.eventBridge,ku={bindEntityToBone:Fu.bindEntityToBone.bind(Fu),unbindEntityFromBone:Fu.unbindEntityFromBone.bind(Fu),bindEntitiesToBones:Fu.bindEntitiesToBones.bind(Fu),unbindEntitiesFromBones:Fu.unbindEntitiesFromBones.bind(Fu)};e.AnimationClipBinding=Ns,e.AnimationClipModel=Rs,e.AnimatorComponent=ts,e.AnimatorControllerModel=Ls,e.AnimatorControllerStateModel=ks,e.CAMERA_OFFSETS=W,e.CULLING_OFFSETS=G,e.CameraComponent=ns,e.CullingComponent=hs,e.DYNAMIC_BONES_OFFSETS=K,e.DataBuffer=Us,e.DataModel=Ps,e.Downloader=gu,e.DynamicBonesComponent=bs,e.EFFECT_OFFSETS=q,e.ENTITY2D_OFFSETS=j,e.ENTITY3D_EXT_OFFSETS=z,e.ENTITY3D_OFFSETS=V,e.Effect=js,e.Entity2D=Es,e.Entity3D=Cs,e.GET_MAIN_CANVAS=yu,e.IS_VALID=_u,e.Image=vu,e.IndexBuffer=tu,e.IndexData=nu,e.LIGHT_OFFSETS=X,e.LightCameraComponent=is,e.MATERIAL_OFFSETS=Y,e.MESH_OFFSETS=H,e.Material=zs,e.MeshRendererComponent=_s,e.POOL_SUB_ID_MASK=B,e.POOL_SUB_ID_SHIT=6,e.Phys3D=mu,e.RENDER_ENV_OFFSETS=U,e.RenderEnv=qa,e.RenderPass=Ws,e.SKINNED_SKELETON_OFFSETS=Z,e.ScalableList=$a,e.SkeletonBoneInverseModel=Xs,e.SkinnedSkeletonComponent=ms,e.Texture=qs,e.UniformBlock=Ks,e.UniformDescriptor=Js,e.VERSION="1.0.4",e.VertexBuffer=iu,e.VertexData=su,e.VertexDataDescriptor=fu,e.VertexLayout=cu,e.View=hu,e.bindCCTToNode=Pu,e.bindRigidBodyToNode=Mu,e.composeRawBufferEntity2D=function(e,t,r){var n=new ArrayBuffer(4*j.size),o=new Float32Array(n);return o[j.rotation]=e,o[j.position]=t[0],o[j.position+1]=t[1],o[j.scale]=r[0],o[j.scale+1]=r[1],o},e.composeRawBufferEntity3D=function(e,t,r,n){var o=new ArrayBuffer(4*(V.size-16)),i=new Uint32Array(o),a=new Float32Array(o);return i[V.rotationType]=e?0:1,a.set(t,V.rotation),a.set(r,V.position),a.set(n,V.scale),a},e.composeRawBufferEntity3DWhole=function(e,t,r,n){var o=new ArrayBuffer(4*V.size),i=new Uint32Array(o),a=new Float32Array(o);return i[V.rotationType]=e?0:1,a.set(t,V.rotation),a.set(r,V.position),a.set(n,V.scale),a},e.createNativeSUMap=Eu,e.createNativeULUMap=Su,e.createNativeUUMap=xu,e.createWeakRef=bu,e.createWeakRefSentry=wu,e.debugPrint=function(e){},e.decodeBase64=Nu,e.decodeDraco=Lu,e.destroy=function(){!Ya.isGoodPhysAndScalableList&&Qa.clear(),du.destroy()},e.eventBridge=ku,e.getGlyphInfo=Ou,e.initDraco=Iu,e.loadTTFFont=Tu,e.refreshNodesWorldTransform=Au,e.renderEnv=Ya,e.setGlobalPhysicSystem=Cu,e.setNodeName=function(e,t){},e.setRenderComponentName=function(e,t){},e.unbindCCT=Du,e.unbindRigidBody=Ru,e.update=function(e){!Ya.isGoodPhysAndScalableList&&Qa.forEach((function(e){return e._checkResize()})),du.update(e)},Object.defineProperty(e,"__esModule",{value:!0})},"object"==typeof h&&void 0!==p?f(h):(n=[h],void 0===(o="function"==typeof(r=f)?r.apply(h,n):r)||(p.exports=o)),e.EVertexFormat=h.EVertexFormat,e.EVertexStep=h.EVertexStep,e.EIndexType=h.EIndexType,e.ETextureType=h.ETextureType,e.ETextureFormat=h.ETextureFormat,e.EWrapMode=h.EWrapMode,e.EFilterMode=h.EFilterMode,e.EUniformType=h.EUniformType,e.ECullMode=h.ECullMode,e.EFaceWinding=h.EFaceWinding,e.ECompareFunc=h.ECompareFunc,e.EStencilOp=h.EStencilOp,e.EBlendFactor=h.EBlendFactor,e.EBlendEquation=h.EBlendEquation,e.EColorMask=h.EColorMask,e.EPixelType=h.EPixelType,e.ELoadAction=h.ELoadAction,e.EDataModelType=h.EDataModelType,e.EMeshRenderType=h.EMeshRenderType,e.EPrimitiveType=h.EPrimitiveType,e.EShadowMode=h.EShadowMode,e.EShadowFitMode=h.EShadowFitMode,e.EVertexLayoutUsage=h.EVertexLayoutUsage,e.EVertexBatchOperator=h.EVertexBatchOperator,e.EAnimationBlendType=h.EAnimationBlendType,e.EUseDefaultAddedAction=h.EUseDefaultAddedAction,e.EUseDefaultRetainedAction=h.EUseDefaultRetainedAction,e.EUseDefaultRemovedAction=h.EUseDefaultRemovedAction,e.ESkinnedSkeletonFlag=h.ESkinnedSkeletonFlag,e.RENDER_ENV_OFFSETS=h.RENDER_ENV_OFFSETS,e.POOL_SUB_ID_MASK=h.POOL_SUB_ID_MASK,e.POOL_SUB_ID_SHIT=h.POOL_SUB_ID_SHIT,e.ENTITY2D_OFFSETS=h.ENTITY2D_OFFSETS,e.ENTITY3D_OFFSETS=h.ENTITY3D_OFFSETS,e.ENTITY3D_EXT_OFFSETS=h.ENTITY3D_EXT_OFFSETS,e.CULLING_OFFSETS=h.CULLING_OFFSETS,e.CAMERA_OFFSETS=h.CAMERA_OFFSETS,e.LIGHT_OFFSETS=h.LIGHT_OFFSETS,e.MESH_OFFSETS=h.MESH_OFFSETS,e.EFFECT_OFFSETS=h.EFFECT_OFFSETS,e.MATERIAL_OFFSETS=h.MATERIAL_OFFSETS,e.SKINNED_SKELETON_OFFSETS=h.SKINNED_SKELETON_OFFSETS,e.DYNAMIC_BONES_OFFSETS=h.DYNAMIC_BONES_OFFSETS,e.EEventType=h.EEventType,e.EDracoErrorCode=h.EDracoErrorCode,e.EDracoGeometryType=h.EDracoGeometryType,e.EDracoDecodeType=h.EDracoDecodeType,e.EDracoDataType=h.EDracoDataType,l.set(t,h),h},e.RELEASE_INSTANCE=e=>{var t=globalThis.KANATA_INSTANCES=globalThis.KANATA_INSTANCES||new Map;t.has(e)&&t.delete(e)}}(t)},5140:(__unused_webpack_module,exports)=>{var indexOf=function(e,t){if(e.indexOf)return e.indexOf(t);for(var r=0;r<e.length;r++)if(e[r]===t)return r;return-1},Object_keys=function(e){if(Object.keys)return Object.keys(e);var t=[];for(var r in e)t.push(r);return t},forEach=function(e,t){if(e.forEach)return e.forEach(t);for(var r=0;r<e.length;r++)t(e[r],r,e)},defineProp=function(){try{return Object.defineProperty({},"_",{}),function(e,t,r){Object.defineProperty(e,t,{writable:!0,enumerable:!1,configurable:!0,value:r})}}catch(e){return function(e,t,r){e[t]=r}}}(),globals=["Array","Boolean","Date","Error","EvalError","Function","Infinity","JSON","Math","NaN","Number","Object","RangeError","ReferenceError","RegExp","String","SyntaxError","TypeError","URIError","decodeURI","decodeURIComponent","encodeURI","encodeURIComponent","escape","eval","isFinite","isNaN","parseFloat","parseInt","undefined","unescape"];function Context(){}Context.prototype={};var Script=exports.Script=function(e){if(!(this instanceof Script))return new Script(e);this.code=e};Script.prototype.runInContext=function(e){if(!(e instanceof Context))throw new TypeError("needs a 'context' argument.");var t=document.createElement("iframe");t.style||(t.style={}),t.style.display="none",document.body.appendChild(t);var r=t.contentWindow,n=r.eval,o=r.execScript;!n&&o&&(o.call(r,"null"),n=r.eval),forEach(Object_keys(e),(function(t){r[t]=e[t]})),forEach(globals,(function(t){e[t]&&(r[t]=e[t])}));var i=Object_keys(r),a=n.call(r,this.code);return forEach(Object_keys(r),(function(t){(t in e||-1===indexOf(i,t))&&(e[t]=r[t])})),forEach(globals,(function(t){t in e||defineProp(e,t,r[t])})),document.body.removeChild(t),a},Script.prototype.runInThisContext=function(){return eval(this.code)},Script.prototype.runInNewContext=function(e){var t=Script.createContext(e),r=this.runInContext(t);return e&&forEach(Object_keys(t),(function(r){e[r]=t[r]})),r},forEach(Object_keys(Script.prototype),(function(e){exports[e]=Script[e]=function(t){var r=Script(t);return r[e].apply(r,[].slice.call(arguments,1))}})),exports.isContext=function(e){return e instanceof Context},exports.createScript=function(e){return exports.Script(e)},exports.createContext=Script.createContext=function(e){var t=new Context;return"object"==typeof e&&forEach(Object_keys(e),(function(r){t[r]=e[r]})),t}},6815:e=>{e.exports="#ifdef WX_USE_MORPH_${name_uppercase}\n#ifdef WX_MORPH_MASK_${index}_${name_uppercase}\nattribute vec3 a_morph_${index}_${name_lowercase};\n#endif\n#endif\n"},3793:e=>{e.exports="#ifndef WX_MORPH_TARGET_COUNT\n    #define WX_MORPH_TARGET_COUNT 0\n#endif\n\n#if WX_MORPH_TARGET_COUNT // > 0\nuniform vec4 u_morphWeights[8];\n#endif\n"},6884:e=>{e.exports="#ifdef WX_USE_MORPH_${name_uppercase}\n#ifdef WX_MORPH_MASK_${index}_${name_uppercase}\n    pos += a_morph_${index}_${name_lowercase} * u_morphWeights[${weight_index}].${weight_sub};\n#endif\n#endif\n"},1823:e=>{e.exports="#ifdef WX_USE_MORPH_${name_uppercase}\n${func_type} ${func_name}(${func_type} pos) {\n    ${func_body}\n    return pos;\n}\n#else\n${func_type} ${func_name}(${func_type} pos) {\n    return pos;\n}\n#endif\n"},1128:e=>{e.exports="#version 100\nprecision mediump float;\nprecision highp int;\nuniform float u_width;\nuniform float u_height;\nuniform sampler2D u_sourceTex;\nvarying vec2 v_uv;\n\nfloat radiusToSD(float radius) { // unused\n    // return radius * .5; // 95%\n\treturn radius * .375; // 99%\n}\n\nvec2 offset_uv(float offsetX, float offsetY, vec2 fragCoord) {\n\treturn vec2(fragCoord.x + offsetX / u_width, fragCoord.y + offsetY / u_height);\n}\n\nfloat gaussian(float x, float sd) { // unused\n    return exp(-.5 * x * x / (sd * sd));\n}\n\nvec3 toSRGB(vec3 color) {\n    return pow(color, vec3(1.0 / 2.2));\n}\n\nvec4 getOutputColor(vec4 color) {\n#ifdef WX_PP_TO_SRGB\n    color.rgb = toSRGB(color.rgb);\n#endif\n    return color;\n}\n\n\nuniform sampler2D u_bottomTex;\nuniform sampler2D u_upperTex;\n\nvoid main() {\n  vec4 color0 = texture2D(u_bottomTex, v_uv);\n  vec4 color1 = texture2D(u_upperTex, v_uv);\n  color0.a = clamp(color0.a, .0, 1.);\n  color1.a = clamp(color1.a, .0, 1.);\n  gl_FragData[0] = vec4(\n    (color0.rgb * color0.a - color0.rgb * color0.a * color1.a + color1.rgb * color1.a) / max(color0.a + color1.a - color0.a * color1.a, 0.0001),\n    color0.a + color1.a - color0.a * color1.a\n  );\n}\n"},7526:e=>{e.exports="#version 100\nprecision mediump float;\nprecision highp int;\nuniform float u_width;\nuniform float u_height;\nuniform sampler2D u_sourceTex;\nvarying vec2 v_uv;\n\nfloat radiusToSD(float radius) { // unused\n    // return radius * .5; // 95%\n\treturn radius * .375; // 99%\n}\n\nvec2 offset_uv(float offsetX, float offsetY, vec2 fragCoord) {\n\treturn vec2(fragCoord.x + offsetX / u_width, fragCoord.y + offsetY / u_height);\n}\n\nfloat gaussian(float x, float sd) { // unused\n    return exp(-.5 * x * x / (sd * sd));\n}\n\nvec3 toSRGB(vec3 color) {\n    return pow(color, vec3(1.0 / 2.2));\n}\n\nvec4 getOutputColor(vec4 color) {\n#ifdef WX_PP_TO_SRGB\n    color.rgb = toSRGB(color.rgb);\n#endif\n    return color;\n}\n\n\n#ifdef WX_USE_UNIFORM_ALPHA\nuniform float u_alpha;\n#endif\n\nvoid main()\n{\n#ifdef WX_USE_UNIFORM_ALPHA\n  gl_FragData[0] = vec4(getOutputColor(texture2D(u_sourceTex, v_uv)).xyz, u_alpha);\n#else\n  gl_FragData[0] = getOutputColor(texture2D(u_sourceTex, v_uv));\n#endif\n}\n"},7924:e=>{e.exports="#version 100\nprecision mediump float;\nprecision highp int;\nuniform float u_width;\nuniform float u_height;\nuniform sampler2D u_sourceTex;\nvarying vec2 v_uv;\n\nfloat radiusToSD(float radius) { // unused\n    // return radius * .5; // 95%\n\treturn radius * .375; // 99%\n}\n\nvec2 offset_uv(float offsetX, float offsetY, vec2 fragCoord) {\n\treturn vec2(fragCoord.x + offsetX / u_width, fragCoord.y + offsetY / u_height);\n}\n\nfloat gaussian(float x, float sd) { // unused\n    return exp(-.5 * x * x / (sd * sd));\n}\n\nvec3 toSRGB(vec3 color) {\n    return pow(color, vec3(1.0 / 2.2));\n}\n\nvec4 getOutputColor(vec4 color) {\n#ifdef WX_PP_TO_SRGB\n    color.rgb = toSRGB(color.rgb);\n#endif\n    return color;\n}\n\n\nuniform float u_threshold;\nuniform float u_softThreshold;\nuniform float u_intensity;\n\nvoid main() {\n\tvec4 raw = texture2D(u_sourceTex, v_uv);\n  \tvec3 c = raw.rgb;\n  \tfloat brightness = max(c.r, max(c.g, c.b));\n\tfloat knee = u_threshold * u_softThreshold;\n\tfloat soft = brightness - u_threshold + knee;\n\tsoft = clamp(soft, .0, 2. * knee);\n\tsoft = soft * soft / (4. * knee + 0.00001);\n\tfloat contribution = max(soft, brightness - u_threshold);\n\tcontribution /= max(brightness, 0.00001);\n\tgl_FragData[0] = vec4(c * u_intensity, brightness / u_threshold * raw.a);\n}\n"},9760:e=>{e.exports="#version 100\nprecision mediump float;\nprecision highp int;\nuniform float u_width;\nuniform float u_height;\nuniform sampler2D u_sourceTex;\nvarying vec2 v_uv;\n\nfloat radiusToSD(float radius) { // unused\n    // return radius * .5; // 95%\n\treturn radius * .375; // 99%\n}\n\nvec2 offset_uv(float offsetX, float offsetY, vec2 fragCoord) {\n\treturn vec2(fragCoord.x + offsetX / u_width, fragCoord.y + offsetY / u_height);\n}\n\nfloat gaussian(float x, float sd) { // unused\n    return exp(-.5 * x * x / (sd * sd));\n}\n\nvec3 toSRGB(vec3 color) {\n    return pow(color, vec3(1.0 / 2.2));\n}\n\nvec4 getOutputColor(vec4 color) {\n#ifdef WX_PP_TO_SRGB\n    color.rgb = toSRGB(color.rgb);\n#endif\n    return color;\n}\n\n\n#ifndef WX_SAMPLE_COUNT\n    #define WX_SAMPLE_COUNT 1\n#endif\n\n#define SAMPLE_COUNT_F float(WX_SAMPLE_COUNT)\n\nuniform float u_radius;\n// uniform float u_sampleCount;\n#ifdef WX_USE_UNIFORM_SD\nuniform float u_sd;\n#endif\n\nfloat step = .0;\nfloat sd = 1.;\nfloat q1 = 0.00001, q2 = 0.00001;\n\nvec4 sampleAt(float i) {\n    float offset = -u_radius + step * i;\n    float gauss = gaussian(offset, sd);\n    vec4 color = texture2D(u_sourceTex, offset_uv(offset, .0, v_uv));\n    color.rgb *= color.a;\n    color *= gauss;\n    q1 += gauss;\n    q2 += color.a;\n    return color;\n}\n\nvoid main() {\n#ifdef WX_USE_UNIFORM_SD\n    sd = u_sd;\n#else\n    sd = radiusToSD(u_radius);\n#endif\n    if (SAMPLE_COUNT_F < 1.1) {\n        gl_FragData[0] = vec4(texture2D(u_sourceTex, v_uv).xyz, 1.0);\n        return;\n    }\n\n    step = 2. * u_radius / (SAMPLE_COUNT_F - 1.);\n    vec4 sum = vec4(.0);\n\n    ${sample}\n\n    gl_FragData[0] = vec4(sum.rgb / q2, sum.a / q1);\n}"},1666:e=>{e.exports="// @deprecated\n\n#version 100\nprecision mediump float;\nprecision highp int;\nuniform float u_width;\nuniform float u_height;\nuniform sampler2D u_sourceTex;\nvarying vec2 v_uv;\n\nfloat radiusToSD(float radius) { // unused\n    // return radius * .5; // 95%\n\treturn radius * .375; // 99%\n}\n\nvec2 offset_uv(float offsetX, float offsetY, vec2 fragCoord) {\n\treturn vec2(fragCoord.x + offsetX / u_width, fragCoord.y + offsetY / u_height);\n}\n\nfloat gaussian(float x, float sd) { // unused\n    return exp(-.5 * x * x / (sd * sd));\n}\n\nvec3 toSRGB(vec3 color) {\n    return pow(color, vec3(1.0 / 2.2));\n}\n\nvec4 getOutputColor(vec4 color) {\n#ifdef WX_PP_TO_SRGB\n    color.rgb = toSRGB(color.rgb);\n#endif\n    return color;\n}\n\n\nuniform float u_radius;\nuniform float u_sampleCount;\nuniform sampler2D u_horizontalBlur;\nuniform sampler2D u_verticalBlur;\n\n#ifdef WX_USE_UNIFORM_SD\nuniform float u_sd;\n#endif\n\nvoid main() {\n#ifdef WX_USE_UNIFORM_SD\n    float sd = u_sd;\n#else\n    float sd = radiusToSD(u_radius);\n#endif\n    if (u_sampleCount < 1.01) {\n        gl_FragData[0] = vec4(.5 * (texture2D(u_verticalBlur, v_uv).xyz + texture2D(u_horizontalBlur, v_uv).xyz), 1.0);\n        return;\n    }\n\n    float step = 2. * u_radius / u_sampleCount;\n    vec3 sum = vec3(.0);\n    float q = 0.00001;\n    for (float i = .0; i < 1000.; i += 1.) {\n        if (i >= u_sampleCount) break;\n        float offset = -u_radius + step * i;\n        vec3 c1 = texture2D(u_verticalBlur, offset_uv(offset, .0, v_uv)).xyz;\n        vec3 c2 = texture2D(u_horizontalBlur, offset_uv(.0, offset, v_uv)).xyz;\n        sum += (c1 + c2) * gaussian(offset, sd);\n        q += gaussian(offset, sd);\n    }\n    gl_FragData[0] = vec4(sum / q / 2.0, 1.0);\n}\n"},8235:e=>{e.exports="#version 100\nprecision mediump float;\nprecision highp int;\nuniform float u_width;\nuniform float u_height;\nuniform sampler2D u_sourceTex;\nvarying vec2 v_uv;\n\nfloat radiusToSD(float radius) { // unused\n    // return radius * .5; // 95%\n\treturn radius * .375; // 99%\n}\n\nvec2 offset_uv(float offsetX, float offsetY, vec2 fragCoord) {\n\treturn vec2(fragCoord.x + offsetX / u_width, fragCoord.y + offsetY / u_height);\n}\n\nfloat gaussian(float x, float sd) { // unused\n    return exp(-.5 * x * x / (sd * sd));\n}\n\nvec3 toSRGB(vec3 color) {\n    return pow(color, vec3(1.0 / 2.2));\n}\n\nvec4 getOutputColor(vec4 color) {\n#ifdef WX_PP_TO_SRGB\n    color.rgb = toSRGB(color.rgb);\n#endif\n    return color;\n}\n\n\n#ifndef WX_SAMPLE_COUNT\n    #define WX_SAMPLE_COUNT 1\n#endif\n\n#define SAMPLE_COUNT_F float(WX_SAMPLE_COUNT)\n\nuniform float u_radius;\n// uniform float u_sampleCount;\n#ifdef WX_USE_UNIFORM_SD\nuniform float u_sd;\n#endif\n\nfloat step = .0;\nfloat sd = 1.;\nfloat q1 = 0.00001, q2 = 0.00001;\n\nvec4 sampleAt(float i) {\n    float offset = -u_radius + step * i;\n    float gauss = gaussian(offset, sd);\n    vec4 color = texture2D(u_sourceTex, offset_uv(.0, offset, v_uv));\n    color.rgb *= color.a;\n    color *= gauss;\n    q1 += gauss;\n    q2 += color.a;\n    return color;\n}\n\nvoid main() {\n#ifdef WX_USE_UNIFORM_SD\n    sd = u_sd;\n#else\n    sd = radiusToSD(u_radius);\n#endif\n    if (SAMPLE_COUNT_F < 1.1) {\n        gl_FragData[0] = vec4(texture2D(u_sourceTex, v_uv).xyz, 1.0);\n        return;\n    }\n\n    step = 2. * u_radius / (SAMPLE_COUNT_F - 1.);\n    vec4 sum = vec4(.0);\n\n    ${sample}\n\n    gl_FragData[0] = vec4(sum.rgb / q2, sum.a / q1);\n}"},6240:e=>{e.exports="#version 100\nprecision mediump float;\nprecision highp int;\nuniform float u_width;\nuniform float u_height;\nuniform sampler2D u_sourceTex;\nvarying vec2 v_uv;\n\nfloat radiusToSD(float radius) { // unused\n    // return radius * .5; // 95%\n\treturn radius * .375; // 99%\n}\n\nvec2 offset_uv(float offsetX, float offsetY, vec2 fragCoord) {\n\treturn vec2(fragCoord.x + offsetX / u_width, fragCoord.y + offsetY / u_height);\n}\n\nfloat gaussian(float x, float sd) { // unused\n    return exp(-.5 * x * x / (sd * sd));\n}\n\nvec3 toSRGB(vec3 color) {\n    return pow(color, vec3(1.0 / 2.2));\n}\n\nvec4 getOutputColor(vec4 color) {\n#ifdef WX_PP_TO_SRGB\n    color.rgb = toSRGB(color.rgb);\n#endif\n    return color;\n}\n\n\nuniform float u_radius;\nfloat q;\n\nvec4 sampleAt(float offset, float weight) {\n    vec4 color = texture2D(u_sourceTex, offset_uv(-u_radius * offset, .0, v_uv));\n    color.rgb *= color.a;\n    color *= weight;\n    q += color.a;\n    return color;\n}\n\nvoid main() {\n    vec4 sum = vec4(.0);\n    q = 0.00001;\n    sum += sampleAt(+.6, .05);\n    sum += sampleAt(-.6, .05);\n    sum += sampleAt(+.2, .1);\n    sum += sampleAt(-.2, .1);\n    sum += sampleAt(+.1, .15);\n    sum += sampleAt(-.1, .15);\n    sum += sampleAt(.0, .4);\n    gl_FragData[0] = vec4(sum.rgb / max(sum.a, 0.0001), sum.a);\n}"},5220:e=>{e.exports="#version 100\nprecision mediump float;\nprecision highp int;\nuniform float u_width;\nuniform float u_height;\nuniform sampler2D u_sourceTex;\nvarying vec2 v_uv;\n\nfloat radiusToSD(float radius) { // unused\n    // return radius * .5; // 95%\n\treturn radius * .375; // 99%\n}\n\nvec2 offset_uv(float offsetX, float offsetY, vec2 fragCoord) {\n\treturn vec2(fragCoord.x + offsetX / u_width, fragCoord.y + offsetY / u_height);\n}\n\nfloat gaussian(float x, float sd) { // unused\n    return exp(-.5 * x * x / (sd * sd));\n}\n\nvec3 toSRGB(vec3 color) {\n    return pow(color, vec3(1.0 / 2.2));\n}\n\nvec4 getOutputColor(vec4 color) {\n#ifdef WX_PP_TO_SRGB\n    color.rgb = toSRGB(color.rgb);\n#endif\n    return color;\n}\n\n\nuniform float u_radius;\nfloat q;\n\nvec4 sampleAt(float offset, float weight) {\n    vec4 color = texture2D(u_sourceTex, offset_uv(.0, -u_radius * offset, v_uv));\n    color.rgb *= color.a;\n    color *= weight;\n    q += color.a;\n    return color;\n}\n\nvoid main() {\n    vec4 sum = vec4(.0);\n    q = 0.00001;\n    sum += sampleAt(+.6, .05);\n    sum += sampleAt(-.6, .05);\n    sum += sampleAt(+.2, .1);\n    sum += sampleAt(-.2, .1);\n    sum += sampleAt(+.1, .15);\n    sum += sampleAt(-.1, .15);\n    sum += sampleAt(.0, .4);\n    gl_FragData[0] = vec4(sum.rgb / max(sum.a, 0.0001), sum.a);\n}"},1442:e=>{e.exports="#version 100\nprecision mediump float;\nprecision highp int;\nuniform float u_width;\nuniform float u_height;\nuniform sampler2D u_sourceTex;\nvarying vec2 v_uv;\n\nfloat radiusToSD(float radius) { // unused\n    // return radius * .5; // 95%\n\treturn radius * .375; // 99%\n}\n\nvec2 offset_uv(float offsetX, float offsetY, vec2 fragCoord) {\n\treturn vec2(fragCoord.x + offsetX / u_width, fragCoord.y + offsetY / u_height);\n}\n\nfloat gaussian(float x, float sd) { // unused\n    return exp(-.5 * x * x / (sd * sd));\n}\n\nvec3 toSRGB(vec3 color) {\n    return pow(color, vec3(1.0 / 2.2));\n}\n\nvec4 getOutputColor(vec4 color) {\n#ifdef WX_PP_TO_SRGB\n    color.rgb = toSRGB(color.rgb);\n#endif\n    return color;\n}\n\n\n#define FXAA_SPAN_MAX 16.0\n#define FXAA_REDUCE_MUL   (1.0/FXAA_SPAN_MAX)\n#define FXAA_REDUCE_MIN   (1.0/128.0)\n\nvec4 blend(vec4 a, vec4 b) {\n    if (a.w + b.w < 0.0001) {\n        return vec4(0, 0, 0, 0);\n    }\n    return vec4((a.xyz * a.w + b.xyz * b.w) / (a.w + b.w), (a.w + b.w) * .5);\n}\nvoid main() {\n\n    vec2 uv = v_uv;\n    vec2 step = 1. / vec2(u_width, u_height);\n\n\t/**\n\t * @modified by shanexyzhou 2020.08.30\n\t * 原本的fxaa不支持alpha通道参与亮度计算，如果背景是(0,0,0,0)的透明像素，就会当成黑色来计算，\n\t * 这样的话fxaa之后的图案周围会有黑圈。\n\t * 并且如果只采用原像素点的alpha通道作为新像素点的alpha通道，那在渲染结果被应用到另一张贴图中时，边缘的锯齿感还是很明显。\n\t * 所以魔改了一版（如果原图的alpha通道都是1的话，那结果还是和原来一样）。\n\t */\n    vec4 colorNW = texture2D(u_sourceTex, uv + vec2(-1, -1) * step);\n    vec4 colorNE = texture2D(u_sourceTex, uv + vec2( 1, -1) * step);\n    vec4 colorSW = texture2D(u_sourceTex, uv + vec2(-1,  1) * step);\n    vec4 colorSE = texture2D(u_sourceTex, uv + vec2( 1,  1) * step);\n    vec3 rgbNW = colorNW.xyz;\n    vec3 rgbNE = colorNE.xyz;\n    vec3 rgbSW = colorSW.xyz;\n    vec3 rgbSE = colorSE.xyz;\n    vec4 colorM = texture2D(u_sourceTex, uv);\n    vec3 rgbM = colorM.xyz;\n\n    vec3 luma = vec3(0.299, 0.587, 0.114);\n    float lumaNW = dot(rgbNW, luma) * colorNW.w;\n    float lumaNE = dot(rgbNE, luma) * colorNE.w;\n    float lumaSW = dot(rgbSW, luma) * colorSW.w;\n    float lumaSE = dot(rgbSE, luma) * colorSE.w;\n    float lumaM  = dot(rgbM,  luma) * colorM.w;\n\n    float lumaMin = min(lumaM, min(min(lumaNW, lumaNE), min(lumaSW, lumaSE)));\n    float lumaMax = max(lumaM, max(max(lumaNW, lumaNE), max(lumaSW, lumaSE)));\n\n    vec2 dir;\n    dir.x = -((lumaNW + lumaNE) - (lumaSW + lumaSE));\n    dir.y =  ((lumaNW + lumaSW) - (lumaNE + lumaSE));\n\n    float dirReduce = max(\n        (lumaNW + lumaNE + lumaSW + lumaSE) * (0.25 * FXAA_REDUCE_MUL),\n        FXAA_REDUCE_MIN);\n    float rcpDirMin = 1.0/(min(abs(dir.x), abs(dir.y)) + dirReduce);\n    \n    dir = min(vec2( FXAA_SPAN_MAX,  FXAA_SPAN_MAX),\n          max(vec2(-FXAA_SPAN_MAX, -FXAA_SPAN_MAX),\n          dir * rcpDirMin)) * step;\n\n    vec4 colorA = blend(\n        texture2D(u_sourceTex, uv + dir * (1.0/3.0 - 0.5)),\n        texture2D(u_sourceTex, uv + dir * (2.0/3.0 - 0.5))\n    );\n\n    vec4 colorB = colorA * .5 + blend(\n        texture2D(u_sourceTex, uv + dir * (0.0/3.0 - 0.5)),\n        texture2D(u_sourceTex, uv + dir * (3.0/3.0 - 0.5))\n    ) * .5;\n    \n    float lumaB = dot(colorB.xyz, luma) * colorB.w;\n\n    if ((lumaB < lumaMin) || (lumaB > lumaMax)) {\n        gl_FragData[0] = colorA;\n    } else {\n        gl_FragData[0] = colorB; \n    }\n}\n"},8317:e=>{e.exports="#version 100\nprecision mediump float;\nprecision highp int;\n\nattribute vec2 a_position;\nattribute highp vec2 a_uv;\nvarying highp vec2 v_uv;\n\nvoid main()\n{\n    // v_uv = a_position * .5 + .5;\n    v_uv = a_uv;\n    gl_Position = vec4(a_position, .0, 1.);\n}"},9400:e=>{e.exports="#version 100\nprecision mediump float;\nprecision highp int;\nuniform float u_width;\nuniform float u_height;\nuniform sampler2D u_sourceTex;\nvarying vec2 v_uv;\n\nfloat radiusToSD(float radius) { // unused\n    // return radius * .5; // 95%\n\treturn radius * .375; // 99%\n}\n\nvec2 offset_uv(float offsetX, float offsetY, vec2 fragCoord) {\n\treturn vec2(fragCoord.x + offsetX / u_width, fragCoord.y + offsetY / u_height);\n}\n\nfloat gaussian(float x, float sd) { // unused\n    return exp(-.5 * x * x / (sd * sd));\n}\n\nvec3 toSRGB(vec3 color) {\n    return pow(color, vec3(1.0 / 2.2));\n}\n\nvec4 getOutputColor(vec4 color) {\n#ifdef WX_PP_TO_SRGB\n    color.rgb = toSRGB(color.rgb);\n#endif\n    return color;\n}\n\n\nvec3 aces(vec3 color) {\n  return (color * (2.51 * color + 0.03)) / (color * (2.43 * color + 0.59) + 0.14);\n}\n\nvoid main()\n{\n  vec4 color = texture2D(u_sourceTex, v_uv);\n\n  gl_FragData[0] = vec4(aces(color.rgb), color.a);\n}\n"},5229:e=>{e.exports="#version 100\nprecision mediump float;\nprecision highp int;\nuniform float u_width;\nuniform float u_height;\nuniform sampler2D u_sourceTex;\nvarying vec2 v_uv;\n\nfloat radiusToSD(float radius) { // unused\n    // return radius * .5; // 95%\n\treturn radius * .375; // 99%\n}\n\nvec2 offset_uv(float offsetX, float offsetY, vec2 fragCoord) {\n\treturn vec2(fragCoord.x + offsetX / u_width, fragCoord.y + offsetY / u_height);\n}\n\nfloat gaussian(float x, float sd) { // unused\n    return exp(-.5 * x * x / (sd * sd));\n}\n\nvec3 toSRGB(vec3 color) {\n    return pow(color, vec3(1.0 / 2.2));\n}\n\nvec4 getOutputColor(vec4 color) {\n#ifdef WX_PP_TO_SRGB\n    color.rgb = toSRGB(color.rgb);\n#endif\n    return color;\n}\n\n\nuniform vec4 u_color;\nuniform vec2 u_center;\nuniform float u_intensity;\nuniform float u_smoothness;\nuniform float u_roundness;\nuniform float u_rounded;\n\nvoid main() {\n  vec4 color = texture2D(u_sourceTex, v_uv);\n\n  vec2 d = abs(v_uv - u_center) * u_intensity;\n  d.x *= mix(1.0, u_width / u_height, u_rounded);\n  d = pow(clamp(d, vec2(0.), vec2(1.)), vec2(u_roundness));\n  float factor = pow(clamp(1.0 - dot(d, d), 0., 1.), u_smoothness);\n  color *= mix(u_color, vec4(1.), factor);\n\n  gl_FragData[0] = color;\n}\n"},5137:e=>{e.exports="#ifdef WX_SKINNED\nattribute highp vec4 a_boneIndices;\nattribute highp vec4 a_weights;\n  #ifdef WX_USE_BONE_MATRIX_TEXTURE\n    // #ifndef WX_BONE_SAMPLER_HELPER\n    // 请不要这样写，在部分安卓机上会出错，比如MTK、麒麟的设备很容易出现\n    // #define WX_BONE_SAMPLER_HELPER(row, col) \\\n    //   texture2D(u_boneMatrixTexture, vec2((col) / 4.0, (row) / float(WX_BONE_NUM)))\n    // #endif\n  uniform sampler2D u_boneMatrixTexture;\n  mat4 sampleFromBoneMatrixTexture(float index) {\n    float row = index + 0.5;\n    float col = 0.5;\n    return mat4(\n      texture2D(u_boneMatrixTexture, vec2((col + .0) / 4.0, (row) / float(WX_BONE_NUM))),\n      texture2D(u_boneMatrixTexture, vec2((col + 1.0) / 4.0, (row) / float(WX_BONE_NUM))),\n      texture2D(u_boneMatrixTexture, vec2((col + 2.0) / 4.0, (row) / float(WX_BONE_NUM))),\n      texture2D(u_boneMatrixTexture, vec2((col + 3.0) / 4.0, (row) / float(WX_BONE_NUM)))\n    );\n  }\n  #else\n  uniform mat4 u_boneOffsetMatrix[WX_BONE_NUM];\n  #endif // WX_USE_BONE_MATRIX_TEXTURE\n#endif // WX_SKINNED\n\n#ifdef WX_SKINNED\nmat4 getBoneMat() {\n  #ifdef WX_USE_BONE_MATRIX_TEXTURE\n  mat4 boneMatX = sampleFromBoneMatrixTexture(a_boneIndices.x);\n  mat4 boneMatY = sampleFromBoneMatrixTexture(a_boneIndices.y);\n  mat4 boneMatZ = sampleFromBoneMatrixTexture(a_boneIndices.z);\n  mat4 boneMatW = sampleFromBoneMatrixTexture(a_boneIndices.w);\n  #else\n  mat4 boneMatX = u_boneOffsetMatrix[int(a_boneIndices.x)];\n  mat4 boneMatY = u_boneOffsetMatrix[int(a_boneIndices.y)];\n  mat4 boneMatZ = u_boneOffsetMatrix[int(a_boneIndices.z)];\n  mat4 boneMatW = u_boneOffsetMatrix[int(a_boneIndices.w)];\n  #endif // WX_USE_BONE_MATRIX_TEXTURE\n  mat4 boneMat = a_weights.x * boneMatX + a_weights.y * boneMatY + a_weights.z * boneMatZ + a_weights.w * boneMatW;\n  return boneMat;\n}\n#endif // WX_SKINNED\n\nvec4 getSkinningWorldPosition(vec4 origin) {\n#ifdef WX_SKINNED\n    return getBoneMat() * origin;\n#else\n    return u_world * origin;\n#endif // WX_SKINNED\n}\n"}},__webpack_module_cache__={},leafPrototypes,getProto;function __webpack_require__(e){var t=__webpack_module_cache__[e];if(void 0!==t)return t.exports;var r=__webpack_module_cache__[e]={exports:{}};return __webpack_modules__[e].call(r.exports,r,r.exports,__webpack_require__),r.exports}__webpack_require__.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return __webpack_require__.d(t,{a:t}),t},getProto=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__,__webpack_require__.t=function(e,t){if(1&t&&(e=this(e)),8&t)return e;if("object"==typeof e&&e){if(4&t&&e.__esModule)return e;if(16&t&&"function"==typeof e.then)return e}var r=Object.create(null);__webpack_require__.r(r);var n={};leafPrototypes=leafPrototypes||[null,getProto({}),getProto([]),getProto(getProto)];for(var o=2&t&&e;"object"==typeof o&&!~leafPrototypes.indexOf(o);o=getProto(o))Object.getOwnPropertyNames(o).forEach((t=>n[t]=()=>e[t]));return n.default=()=>e,__webpack_require__.d(r,n),r},__webpack_require__.d=(e,t)=>{for(var r in t)__webpack_require__.o(t,r)&&!__webpack_require__.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},__webpack_require__.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),__webpack_require__.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),__webpack_require__.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var __webpack_exports__={};(()=>{"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{XRContext:()=>Hy,XRElement:()=>Xy,getExparser:()=>qy,getOrCreateContext:()=>Ky,init:()=>$y,removeContext:()=>Qy,xrFrameSystem:()=>ae});var e={};__webpack_require__.r(e),__webpack_require__.d(e,{Z:()=>Vt});var t={};__webpack_require__.r(t),__webpack_require__.d(t,{VY:()=>Pr,FK:()=>Mr,yQ:()=>Dr,m3:()=>Rr});var r={};__webpack_require__.r(r),__webpack_require__.d(r,{Fe:()=>io,ZP:()=>oo,Xr:()=>ao,RM:()=>so});var n={};__webpack_require__.r(n),__webpack_require__.d(n,{Z:()=>lo});var o={};__webpack_require__.r(o),__webpack_require__.d(o,{OF:()=>po,hJ:()=>fo,Fe:()=>yo,ZP:()=>_o,sb:()=>vo,ui:()=>mo});var i={};__webpack_require__.r(i),__webpack_require__.d(i,{j:()=>bo,Z:()=>wo});var a={};__webpack_require__.r(a),__webpack_require__.d(a,{ZP:()=>xo,Co:()=>To,WV:()=>So,Bx:()=>Oo});var s={};__webpack_require__.r(s),__webpack_require__.d(s,{Z:()=>Mo});var u={};__webpack_require__.r(u),__webpack_require__.d(u,{Z:()=>Do});var c={};__webpack_require__.r(c),__webpack_require__.d(c,{p:()=>Pi,Z:()=>Di});var l={};__webpack_require__.r(l),__webpack_require__.d(l,{OY:()=>Ni,ku:()=>Li,ZP:()=>Fi});var f={};__webpack_require__.r(f),__webpack_require__.d(f,{i:()=>ji,Z:()=>zi});var p={};__webpack_require__.r(p),__webpack_require__.d(p,{Z:()=>Oa});var h={};__webpack_require__.r(h),__webpack_require__.d(h,{Z:()=>Ca});var d={};__webpack_require__.r(d),__webpack_require__.d(d,{dg:()=>Da,ZP:()=>Ia});var _={};__webpack_require__.r(_),__webpack_require__.d(_,{Ps:()=>Ua,c:()=>La,ZP:()=>Va});var y={};__webpack_require__.r(y),__webpack_require__.d(y,{r:()=>Ya,Z:()=>$a});var v={};__webpack_require__.r(v),__webpack_require__.d(v,{M:()=>cs,Z:()=>fs});var m={};__webpack_require__.r(m),__webpack_require__.d(m,{C:()=>hs,Z:()=>_s});var g={};__webpack_require__.r(g),__webpack_require__.d(g,{R:()=>vs,Z:()=>gs});var b={};__webpack_require__.r(b),__webpack_require__.d(b,{_:()=>ws,Z:()=>Es});var w={};__webpack_require__.r(w),__webpack_require__.d(w,{C:()=>Ts,Z:()=>Os});var x={};__webpack_require__.r(x),__webpack_require__.d(x,{sb:()=>js,ZP:()=>Ws,M4:()=>zs});var E={};__webpack_require__.r(E),__webpack_require__.d(E,{oM:()=>hu,ZP:()=>_u});var S={};__webpack_require__.r(S),__webpack_require__.d(S,{g:()=>xu});var T={};__webpack_require__.r(T),__webpack_require__.d(T,{j:()=>Su});var O={};__webpack_require__.r(O),__webpack_require__.d(O,{QE:()=>Ru,NU:()=>Lu,ZP:()=>Fu});var A={};__webpack_require__.r(A),__webpack_require__.d(A,{FT:()=>qu,pI:()=>ku,J$:()=>Yu,Jj:()=>zu,v6:()=>Gu,ZP:()=>Xu,YN:()=>ju});var C={};__webpack_require__.r(C),__webpack_require__.d(C,{Us:()=>Ju,Zm:()=>Hu,ZP:()=>tc});var M={};__webpack_require__.r(M),__webpack_require__.d(M,{qb:()=>ac,ZP:()=>uc});var P={};__webpack_require__.r(P),__webpack_require__.d(P,{w:()=>_c,ZP:()=>vc});var R={};__webpack_require__.r(R),__webpack_require__.d(R,{TL:()=>Sc,ZP:()=>Oc});var D={};__webpack_require__.r(D),__webpack_require__.d(D,{v:()=>Pc,Z:()=>Rc});var N={};__webpack_require__.r(N),__webpack_require__.d(N,{Z:()=>qc});var I={};__webpack_require__.r(I),__webpack_require__.d(I,{Z:()=>Yc});var L={};__webpack_require__.r(L),__webpack_require__.d(L,{Z:()=>$c});var F={};__webpack_require__.r(F),__webpack_require__.d(F,{A:()=>rl,Z:()=>ol});var k={};__webpack_require__.r(k),__webpack_require__.d(k,{s:()=>pl});var U={};__webpack_require__.r(U),__webpack_require__.d(U,{Z:()=>gl});var B={};__webpack_require__.r(B),__webpack_require__.d(B,{$:()=>wl,Z:()=>Al});var j={};__webpack_require__.r(j),__webpack_require__.d(j,{Z:()=>Ml});var V={};__webpack_require__.r(V),__webpack_require__.d(V,{Z:()=>Rl});var z={};__webpack_require__.r(z),__webpack_require__.d(z,{Z:()=>Nl});var G={};__webpack_require__.r(G),__webpack_require__.d(G,{Z:()=>Fl});var W={};__webpack_require__.r(W),__webpack_require__.d(W,{Z:()=>Ul});var X={};__webpack_require__.r(X),__webpack_require__.d(X,{q:()=>Bl,Z:()=>Gl});var H={};__webpack_require__.r(H),__webpack_require__.d(H,{Z:()=>sp});var q={};__webpack_require__.r(q),__webpack_require__.d(q,{Z:()=>lp});var Y={};__webpack_require__.r(Y),__webpack_require__.d(Y,{Z:()=>dp,N:()=>pp});var Z={};__webpack_require__.r(Z),__webpack_require__.d(Z,{Z:()=>vp});var K={};__webpack_require__.r(K),__webpack_require__.d(K,{Z:()=>gp});var Q={};__webpack_require__.r(Q),__webpack_require__.d(Q,{Z:()=>Sp});var $={};__webpack_require__.r($),__webpack_require__.d($,{Z:()=>Tp});var J={};__webpack_require__.r(J),__webpack_require__.d(J,{Z:()=>Bp});var ee={};__webpack_require__.r(ee),__webpack_require__.d(ee,{Z:()=>Q_});var te={};__webpack_require__.r(te),__webpack_require__.d(te,{Z:()=>J_});var re={};__webpack_require__.r(re),__webpack_require__.d(re,{ZP:()=>xy});var ne={};__webpack_require__.r(ne),__webpack_require__.d(ne,{Z:()=>Ty});var oe={};__webpack_require__.r(oe),__webpack_require__.d(oe,{Z:()=>Cy});var ie={};__webpack_require__.r(ie),__webpack_require__.d(ie,{Z:()=>Dy});var ae={};__webpack_require__.r(ae),__webpack_require__.d(ae,{ARSystem:()=>Al,ARSystemSchema:()=>wl,ARTrackSchema:()=>Ua,ARTracker:()=>Va,ARTrackerDataMapping:()=>zf,ARTrackerDefaultComponents:()=>Vf,Animation:()=>Tp,AnimationSystem:()=>Ca,Animator:()=>Ia,AnimatorSchema:()=>Da,AssetLoad:()=>Wa,AssetLoadDataMapping:()=>Rf,AssetLoadSchema:()=>Ga,AssetLoader:()=>xo,AssetMaterial:()=>Os,AssetMaterialDataMapping:()=>Sf,AssetMaterialDefaultComponents:()=>Ef,AssetMaterialSchema:()=>Ts,AssetPostProcess:()=>$c,AssetPostProcessDataMapping:()=>Kf,AssetPostProcessDefaultComponents:()=>Zf,AssetRenderTexture:()=>Rc,AssetRenderTextureDataMapping:()=>Cf,AssetRenderTextureDefaultComponents:()=>Af,AssetRenderTextureSchema:()=>Pc,Assets:()=>wo,AssetsDefaultComponents:()=>If,AssetsSchema:()=>bo,AssetsSystem:()=>Mo,Atlas:()=>sp,AtlasLoader:()=>lp,BasicDataMapping:()=>po,BasicDefaultComponents:()=>fo,BoundBall:()=>Nt,BoundBox:()=>kt,Camera:()=>$a,CameraDataMapping:()=>Jl,CameraDefaultComponents:()=>$l,CameraOrbitControl:()=>fs,CameraOrbitControlSchema:()=>cs,CameraSchema:()=>Ya,CapsuleShape:()=>tc,CapsuleShapeSchema:()=>Ju,Color:()=>Vy,Component:()=>oo,CubeShape:()=>Oc,CubeShapeSchema:()=>Sc,CubeTextureLoader:()=>vp,EARTrackerState:()=>La,EAnimationBlendType:()=>ue.EAnimationBlendType,EBlendEquation:()=>ue.EBlendEquation,EBlendFactor:()=>ue.EBlendFactor,ECapsuleShapeDirection:()=>Hu,EColorMask:()=>ue.EColorMask,ECompareFunc:()=>ue.ECompareFunc,ECullMode:()=>ue.ECullMode,EDataModelType:()=>ue.EDataModelType,EEventType:()=>ue.EEventType,EFaceWinding:()=>ue.EFaceWinding,EFilterMode:()=>ue.EFilterMode,EIndexType:()=>ue.EIndexType,ELoadAction:()=>ue.ELoadAction,EMeshRenderType:()=>ue.EMeshRenderType,EPixelType:()=>ue.EPixelType,EPrimitiveType:()=>ue.EPrimitiveType,EShadowFitMode:()=>ue.EShadowFitMode,EShadowMode:()=>ue.EShadowMode,EShapeType:()=>ku,EStencilOp:()=>ue.EStencilOp,ETextureFormat:()=>ue.ETextureFormat,ETextureType:()=>ue.ETextureType,EUniformType:()=>ue.EUniformType,EUseDefaultAddedAction:()=>ue.EUseDefaultAddedAction,EUseDefaultRemovedAction:()=>ue.EUseDefaultRemovedAction,EUseDefaultRetainedAction:()=>ue.EUseDefaultRetainedAction,EVertexBatchOperator:()=>ue.EVertexBatchOperator,EVertexFormat:()=>ue.EVertexFormat,EVertexLayoutUsage:()=>ue.EVertexLayoutUsage,EVertexStep:()=>ue.EVertexStep,EVideoState:()=>Bl,EWrapMode:()=>ue.EWrapMode,Effect:()=>Oa,Element:()=>_o,Env:()=>_s,EnvData:()=>gp,EnvDataLoader:()=>Sp,EnvDataMapping:()=>Uf,EnvDefaultComponents:()=>kf,EnvSchema:()=>hs,EventManager:()=>lo,GLTF:()=>Es,GLTFDataMapping:()=>bf,GLTFDefaultComponents:()=>gf,GLTFLoader:()=>Q_,GLTFModel:()=>Bp,GLTFSchema:()=>ws,Geometry:()=>Vt,GizmoSystem:()=>Ul,IARRawData:()=>B.IARRawData,IARSystemData:()=>B.IARSystemData,IARTrackerData:()=>_.IARTrackerData,IARTrackerRawData:()=>_.IARTrackerRawData,IAnimationPlayOptions:()=>d.IAnimationPlayOptions,IAnimationSystemData:()=>h.IAnimationSystemData,IAnimatorAutoPlay:()=>d.IAnimatorAutoPlay,IAnimatorData:()=>d.IAnimatorData,IAssetMaterialData:()=>w.IAssetMaterialData,IAssetPostProcessData:()=>L.IAssetPostProcessData,IAssetRenderTextureData:()=>D.IAssetRenderTextureData,IAssetsData:()=>i.IAssetsData,IAssetsSystemData:()=>s.IAssetsSystemData,IAtlasCreationOptions:()=>H.IAtlasCreationOptions,IAtlasLoaderOptions:()=>q.IAtlasLoaderOptions,IAtlasOptions:()=>H.IAtlasOptions,IAttachment:()=>ue.IAttachment,ICameraData:()=>y.ICameraData,ICameraOrbitControlData:()=>v.ICameraOrbitControlData,ICapsuleShapeData:()=>C.ICapsuleShapeData,ICollideEvent:()=>T.ICollideEvent,IComponentSchema:()=>r.IComponentSchema,IContactPoint:()=>S.IContactPoint,ICubeShapeData:()=>R.ICubeShapeData,ICubeTextureLoaderOptions:()=>Z.ICubeTextureLoaderOptions,IDataValueHandler:()=>t.IDataValueHandler,IDownloader:()=>ue.IDownloader,IEffectAsset:()=>p.IEffectAsset,IEngineSettings:()=>ue.IEngineSettings,IEntityComponents:()=>o.IEntityComponents,IEnvData:()=>m.IEnvData,IEnvDataLoaderOptions:()=>Q.IEnvDataLoaderOptions,IEnvDataOptions:()=>K.IEnvDataOptions,IEventBridge:()=>ue.IEventBridge,IFeatures:()=>ue.IFeatures,IFontSetting:()=>ue.IFontSetting,IGLTFData:()=>b.IGLTFData,IGLTFLoaderOptions:()=>ee.IGLTFLoaderOptions,IGLTFModelOptions:()=>J.IGLTFModelOptions,IGizmoSystemData:()=>W.IGizmoSystemData,IGlyphInfo:()=>ue.IGlyphInfo,IHandle:()=>ue.IHandle,IImage:()=>ue.IImage,IImageLoaderOptions:()=>te.IImageLoaderOptions,IKeyframeAnimationData:()=>re.IKeyframeAnimationData,IKeyframeAnimationInfo:()=>re.IKeyframeAnimationInfo,IKeyframeAnimationOptions:()=>re.IKeyframeAnimationOptions,IKeyframeLoaderOptions:()=>ne.IKeyframeLoaderOptions,ILightData:()=>l.ILightData,ILoaderOptionsSchema:()=>a.ILoaderOptionsSchema,ILongIntNativeMap:()=>ue.ILongIntNativeMap,IMeshData:()=>g.IMeshData,IMeshShapeData:()=>M.IMeshShapeData,INativeMap:()=>ue.INativeMap,INodeSystemData:()=>V.INodeSystemData,IOverlapEvent:()=>T.IOverlapEvent,IParticleData:()=>E.IParticleData,IPhysicsSystemData:()=>U.IPhysicsSystemData,IPostProcessOptions:()=>I.IPostProcessOptions,IRawLoaderOptions:()=>oe.IRawLoaderOptions,IRealDownloader:()=>ue.IRealDownloader,IRect:()=>ue.IRect,IRenderPassDescriptor:()=>ue.IRenderPassDescriptor,IRenderStates:()=>p.IRenderStates,IRenderSystemData:()=>f.IRenderSystemData,IRenderTarget:()=>u.IRenderTarget,IRenderTextureOptions:()=>u.IRenderTextureOptions,IRigidbodyData:()=>F.IRigidbodyData,IShapeData:()=>A.IShapeData,IShapeDragEvent:()=>U.IShapeDragEvent,IShapeGizmosData:()=>N.IShapeGizmosData,IShapeInteractData:()=>O.IShapeInteractData,IShapeTouchEvent:()=>U.IShapeTouchEvent,IShareCaptureOptions:()=>G.IShareCaptureOptions,IShareSystemData:()=>G.IShareSystemData,ISphereShapeData:()=>P.ISphereShapeData,ISubMesh:()=>e.ISubMesh,ITextData:()=>x.ITextData,ITextureLoaderOptions:()=>Y.ITextureLoaderOptions,ITextureOptions:()=>ue.ITextureOptions,ITextureWrapper:()=>t.ITextureWrapper,ITickSystemData:()=>j.ITickSystemData,ITransformData:()=>c.ITransformData,IUniformDescriptorOptions:()=>ue.IUniformDescriptorOptions,IVertexDataDescriptorOptions:()=>ue.IVertexDataDescriptorOptions,IVertexLayoutOptions:()=>ue.IVertexLayoutOptions,IVideoSystemData:()=>z.IVideoSystemData,IVideoTextureLoaderOptions:()=>ie.IVideoTextureLoaderOptions,IVideoTextureOptions:()=>X.IVideoTextureOptions,IView:()=>ue.IView,IViewAction:()=>ue.IViewAction,ImageLoader:()=>J_,KeyframeAnimation:()=>xy,KeyframeLoader:()=>Ty,Light:()=>Fi,LightDataMapping:()=>pf,LightDefaultComponents:()=>ff,LightSchema:()=>Li,Material:()=>Ir,Matrix3:()=>br,Matrix4:()=>Sr,Mesh:()=>gs,MeshDataMapping:()=>nf,MeshDefaultComponents:()=>rf,MeshSchema:()=>vs,MeshShape:()=>uc,MeshShapeSchema:()=>ac,NodeDataMapping:()=>kc,NodeDefaultComponents:()=>Fc,NodeSystem:()=>Rl,OBB:()=>Gy,Particle:()=>gu,ParticleDataMapping:()=>Hf,ParticleDefaultComponents:()=>Xf,ParticleSchema:()=>hu,PhysicsSystem:()=>gl,PostProcess:()=>Yc,Quaternion:()=>wi,RawLoader:()=>Cy,RaycastDesc:()=>k.RaycastDesc,RaycastHit:()=>_l,RenderSystem:()=>zi,RenderSystemSchema:()=>ji,RenderTexture:()=>Do,Rigidbody:()=>ol,RigidbodySchema:()=>rl,Scene:()=>Kl,SceneDataMapping:()=>Yl,SceneDefaultComponents:()=>ql,ShadowDataMapping:()=>yf,ShadowDefaultComponents:()=>_f,Shape:()=>Xu,ShapeGizmos:()=>qc,ShapeInteract:()=>Fu,ShapeInteractSchema:()=>Lu,ShareSystem:()=>Fl,SphereShape:()=>vc,SphereShapeSchema:()=>_c,Spherical:()=>es,TCameraBackground:()=>y.TCameraBackground,TDirection:()=>$.TDirection,TEventCallback:()=>n.TEventCallback,TTrackMode:()=>_.TTrackMode,Text:()=>Ws,TextDataMapping:()=>uf,TextDefaultComponents:()=>sf,TextSchema:()=>js,TextureLoader:()=>dp,TickSystem:()=>Ml,Transform:()=>Di,TransformSchema:()=>Pi,Vector2:()=>cr,Vector3:()=>Tt,Vector4:()=>_r,VideoSystem:()=>Nl,VideoTexture:()=>Gl,VideoTextureLoader:()=>Dy,XRARTracker:()=>Gf,XRAssetLoad:()=>Df,XRAssetPostProcess:()=>Qf,XRAssetRenderTexture:()=>Mf,XRAssets:()=>Lf,XRCamera:()=>ef,XREnv:()=>Bf,XRGLTF:()=>wf,XRLight:()=>hf,XRMaterial:()=>Tf,XRMesh:()=>of,XRNode:()=>Uc,XRParticle:()=>qf,XRShadow:()=>vf,XRText:()=>cf,genLspMeta:()=>Ly,isTextureWrapper:()=>Mr,noneParamsEaseFuncs:()=>dy,registerAssetLoader:()=>Oo,registerComponent:()=>so,registerDataValue:()=>Rr,registerEffect:()=>Me,registerElement:()=>mo,registerGeometry:()=>Ce,registerMaterial:()=>Le,registerTexture:()=>Pe,registerUniformDesc:()=>Ne,registerVertexDataDesc:()=>De,registerVertexLayout:()=>Ie,useParamsEaseFuncs:()=>py});var se,ue=__webpack_require__(238),ce=__webpack_require__(5280),le=__webpack_require__.t(ce,2),fe={},pe={};function he(e){return pe[e._elId]}!function(e){e[e.Default=1]="Default",e[e.Init=2]="Init",e[e.Render=3]="Render",e[e.Asset=4]="Asset",e[e.Physic=5]="Physic",e[e.AR=6]="AR"}(se||(se={}));var de="undefined"!=typeof __libVersionInfo__&&__libVersionInfo__?__libVersionInfo__.version:"unknown",_e="undefined"!=typeof __libVersionInfo__&&__libVersionInfo__?__libVersionInfo__.updateTime:"unknown";"string"==typeof de&&(de=de.replace(" ","")),"string"==typeof _e&&(_e=_e.replace(" ","-"));var ye={};const ve=function(e,t,r){ye[e]=r},me=function(e,t){Date.now(),ye[e],delete ye[e]},ge=function(e,t){void 0===e&&(e=se.Default)},be=function(e,t){void 0===e&&(e=se.Default)};var we=function(e,t){for(var r=0,n=t.length,o=e.length;r<n;r++,o++)e[o]=t[r];return e},xe="undefined"!=typeof wxNativeConsole;const Ee={log:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];console.log.apply(console,we(["[xr-frame]"],e))},info:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];xe&&(null===wxNativeConsole||void 0===wxNativeConsole||wxNativeConsole.log.apply(wxNativeConsole,we(["[xr-frame]"],e))),console.log.apply(console,we(["[xr-frame]"],e))},warn:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];xe&&(null===wxNativeConsole||void 0===wxNativeConsole||wxNativeConsole.warn.apply(wxNativeConsole,we(["[xr-frame]"],e))),console.warn.apply(console,we(["[xr-frame]"],e))},error:function(e,t){void 0===t&&(t=se.Default);for(var r=[],n=2;n<arguments.length;n++)r[n-2]=arguments[n];"string"==typeof e&&(e=new Error(e)),xe&&(null===wxNativeConsole||void 0===wxNativeConsole||wxNativeConsole.error.apply(wxNativeConsole,we(["[xr-frame]",e],r))),console.error.apply(console,we(["[xr-frame]",e],r)),be(t,e)},throw:function(e,t){void 0===t&&(t=se.Default);for(var r=[],n=2;n<arguments.length;n++)r[n-2]=arguments[n];throw this.error.apply(this,we([e],r)),e},debugError:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];xe&&(null===wxNativeConsole||void 0===wxNativeConsole||wxNativeConsole.error.apply(wxNativeConsole,we(["[xr-frame]"],e))),console.error.apply(console,we(["[xr-frame]"],e))},assert:function(e,t,r){void 0===r&&(r=se.Default),e||this.error(t)}};var Se={};function Te(e){return function(t,r){Se[e]||(Se[e]={});var n=Se[e];n[t]?Ee.warn(e+" "+t+" is already existed !"):n[t]=r}}function Oe(e,t){var r;return null===(r=Se[e])||void 0===r?void 0:r[t]}var Ae,Ce=Te("geometry"),Me=Te("effect"),Pe=Te("texture"),Re=Te("cube-texture"),De=Te("vertex-data-desc"),Ne=Te("uniform-desc"),Ie=Te("vertex-layout"),Le=Te("material"),Fe=__webpack_require__(5137),ke=__webpack_require__.n(Fe),Ue=__webpack_require__(6815),Be=__webpack_require__.n(Ue),je=__webpack_require__(6884),Ve=__webpack_require__.n(je),ze=__webpack_require__(1823),Ge=__webpack_require__.n(ze),We=__webpack_require__(3793),Xe=__webpack_require__.n(We),He=(Ae=function(e,t){return Ae=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},Ae(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}Ae(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),qe=function(){function e(e,t){var r;this.isValid=!1,this.raw=e,this.parent=t,this.scene=null===(r=this.parent)||void 0===r?void 0:r.scene,this.customName=this.raw.name;var n=this.findRoot(!0),o=n.root,i=n.path;if(o.nodesCollector&&(o.nodesCollector[i]||(o.nodesCollector[i]=[]),o.nodesCollector[i].push(this)),t){this._preload=this.preload;var a=this._preload;if(this.raw.extensions)for(var s=o.extensionProfiles,u=function(e){if(c.raw.extensions[e]){var t=s[e];if(t.preloads[i]){var r=c.raw.extensions[e],n=t.preloads[i],u=o.extensionGlobals[e];return a=function(e){return n.call(this,r,u,e)},"break"}}},c=this,l=0,f=Object.keys(s);l<f.length&&"break"!==u(f[l]);l++);this.preload=function(e){var t=this;return this._prerequisites=e,a.call(this,e).finally((function(){t._prerequisites=null}))}}}return e.prototype.assert=function(e,t){if(e)return this;throw this.isValid=!1,"GLTF validation failed at ["+this.nodeName+"Node]"+(this.customName?" ["+this.customName+"]":"")+(t?": "+t:"")},e.prototype.validate=function(e,t){for(var r=[],n=2;n<arguments.length;n++)r[n-2]=arguments[n];var o=this.findRoot();return o.ignoreError[e.id]?this.assert(!0,""):"boolean"==typeof t?this.assert(!!t,e.id+" "+e.msg.replace(/\$(\d+)/g,(function(e,t){return r[t]}))):(r.unshift(t),this.assert(!e.validate||e.validate(this.raw),"["+e.id+"] "+e.msg))},e.prototype.findRoot=function(e){if(void 0===e&&(e=!1),e){for(var t=(r=this).nodeName;r.parent;)t=(r=r.parent).nodeName+"-"+t;return{root:r,path:t}}for(var r=this;r.parent;)r=r.parent;return r},e.prototype.getExtensionRaw=function(e){var t;return null===(t=this.raw.extension)||void 0===t?void 0:t[e]},e.prototype.extensionSlot=function(e,t){for(var r,n=this.findRoot(),o=n.extensionProfiles,i=0,a=Object.keys(o);i<a.length;i++){var s=a[i],u=o[s];if((null===(r=this.raw.extensions)||void 0===r?void 0:r[s])&&u.slotCodeMap.has(e)){var c=u.slotCodeMap.get(e),l=n.extensionGlobals[s];return c.call(this,this.raw.extensions[s],l,this._prerequisites,t)}if(u.forceSlotCodeMap.has(e))return c=u.forceSlotCodeMap.get(e),l=n.extensionGlobals[s],c.call(this,l,this._prerequisites,t)}},e.prototype.releaseLoadedResource=function(){this.resource=null},e}(),Ye=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.children=[],t.resources=[],t}return He(t,e),t.prototype.preload=function(e){return t=this,r=void 0,o=function(){var t,r,n,o,i,a;return function(e,t){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}}(this,(function(s){switch(s.label){case 0:for(t=[],r=0,n=this.children;r<n.length;r++)a=n[r],t.push(a.preload(e));return[4,Promise.all(t)];case 1:for(s.sent(),o=0,i=this.children;o<i.length;o++)a=i[o],this.resources.push(a.getLoadedResource());return[2,this.resources]}}))},new((n=Promise)||(n=Promise))((function(e,i){function a(e){try{u(o.next(e))}catch(e){i(e)}}function s(e){try{u(o.throw(e))}catch(e){i(e)}}function u(t){var r;t.done?e(t.value):(r=t.value,r instanceof n?r:new n((function(e){e(r)}))).then(a,s)}u((o=o.apply(t,r||[])).next())}));var t,r,n,o},t.prototype.build=function(){for(var e=0,t=this.raw;e<t.length;e++){var r=t[e],n=this.ChildCtor(r);n.build(),this.children.push(n)}},t.prototype.releaseLoadedResource=function(){for(var e=0,t=this.children;e<t.length;e++)t[e].releaseLoadedResource();this.resources=[]},t}(qe);function Ze(e,t){return 0===e?1===t?Math.PI/2:-Math.PI/2:e>0?Math.atan(t/e):e<0?t>0?Math.atan(t/e)+Math.PI:Math.atan(t/e)-Math.PI:0}function Ke(e,t){return Math.abs(e-t)<1e-6}function Qe(e,t,r){return(e=e>t?e:t)<r?e:r}var $e={equal:function(e,t,r,n){return Ke(e[t],r[n])&&Ke(e[t+1],r[n+1])},add:function(e,t,r,n,o,i){o[i]=e[t]+r[n],o[i+1]=e[t+1]+r[n+1]},sub:function(e,t,r,n,o,i){o[i]=e[t]-r[n],o[i+1]=e[t+1]-r[n+1]},length:function(e,t){var r=e[t],n=e[t+1];return Math.sqrt(r*r+n*n)},normalize:function(e,t,r,n){var o=$e.length(e,t);0===o?(r[n]=0,r[n+1]=0):(r[n]=e[t]/o,r[n+1]=e[t+1]/o)},scale:function(e,t,r,n,o){n[o]=e[t]*r,n[o+1]=e[t+1]*r},lerp:function(e,t,r,n,o,i,a){var s=1-o;i[a]=e[t]*s+r[n]*o,i[a+1]=e[t+1]*s+r[n+1]*o},dot:function(e,t,r,n){return e[t]*r[n]+e[t+1]*r[n+1]},isZero:function(e,t){return Ke(e[t],0)&&Ke(e[t+1],0)},getAngle:function(e,t){var r=180*Math.atan2(e[t+1],e[t])/Math.PI;return(360+Math.round(r))%360},distance:function(e,t,r,n){var o=e[t]-r[n],i=e[t+1]-r[n+1];return Math.sqrt(o*o+i*i)},copy:function(e,t,r,n){r[n+0]=e[t+0],r[n+1]=e[t+1]}},Je={equal:function(e,t,r,n){return Ke(e[t],r[n])&&Ke(e[t+1],r[n+1])&&Ke(e[t+2],r[n+2])},add:function(e,t,r,n,o,i){o[i]=e[t]+r[n],o[i+1]=e[t+1]+r[n+1],o[i+2]=e[t+2]+r[n+2]},sub:function(e,t,r,n,o,i){o[i]=e[t]-r[n],o[i+1]=e[t+1]-r[n+1],o[i+2]=e[t+2]-r[n+2]},length:function(e,t){var r=e[t],n=e[t+1],o=e[t+2];return Math.sqrt(r*r+n*n+o*o)},normalize:function(e,t,r,n){var o=Je.length(e,t);0===o?(r[n]=0,r[n+1]=0,r[n+2]=0):(r[n]=e[t]/o,r[n+1]=e[t+1]/o,r[n+2]=e[t+2]/o)},scale:function(e,t,r,n,o){n[o]=e[t]*r,n[o+1]=e[t+1]*r,n[o+2]=e[t+2]*r},lerp:function(e,t,r,n,o,i,a){var s=1-o;i[a]=e[t]*s+r[n]*o,i[a+1]=e[t+1]*s+r[n+1]*o,i[a+2]=e[t+2]*s+r[n+2]*o},dot:function(e,t,r,n){return e[t]*r[n]+e[t+1]*r[n+1]+e[t+2]*r[n+2]},isZero:function(e,t){return Ke(e[t],0)&&Ke(e[t+1],0)&&Ke(e[t+2],0)},cross:function(e,t,r,n,o,i){o[i]=e[t+1]*r[n+2]-r[n+1]*e[t+2],o[i+1]=e[t+2]*r[n]-r[n+2]*e[t],o[i+2]=e[t]*r[n+1]-r[n]*e[t+1]},distance:function(e,t,r,n){var o=e[t]-r[n],i=e[t+1]-r[n+1],a=e[t+2]-r[n+2];return Math.sqrt(o*o+i*i+a*a)},angleTo:function(e,t,r,n,o,i){var a=at;Je.sub(r,n,e,t,a,0),Je.normalize(a,0,a,0),o[i]=Math.asin(a[1]),o[i+1]=Ze(-a[2],-a[0]),o[i+2]=0},copy:function(e,t,r,n){r[n+0]=e[t+0],r[n+1]=e[t+1],r[n+2]=e[t+2]}},et=function(e,t,r,n){return Ke(e[t],r[n])&&Ke(e[t+1],r[n+1])&&Ke(e[t+2],r[n+2])&&Ke(e[t+3],r[n+3])},tt=function(e,t,r,n,o,i){o[i]=e[t]+r[n],o[i+1]=e[t+1]+r[n+1],o[i+2]=e[t+2]+r[n+2],o[i+3]=e[t+3]+r[n+3]},rt=function(e,t,r,n,o,i){o[i]=e[t]-r[n],o[i+1]=e[t+1]-r[n+1],o[i+2]=e[t+2]-r[n+2],o[i+3]=e[t+3]-r[n+3]},nt=function(e,t,r,n){4===e.length?r.set(e,n):(r[n+0]=e[t+0],r[n+1]=e[t+1],r[n+2]=e[t+2],r[n+3]=e[t+3])},ot={multiply:function(e,t,r,n,o,i){var a=e[t+0],s=e[t+1],u=e[t+2],c=e[t+3],l=r[n+0],f=r[n+1],p=r[n+2],h=r[n+3],d=s*p-u*f,_=u*l-a*p,y=a*f-s*l,v=a*l+s*f+u*p;o[i]=a*h+l*c+d,o[i+1]=s*h+f*c+_,o[i+2]=u*h+p*c+y,o[i+3]=c*h-v},invert:function(e,t,r,n){var o=e[t+0],i=e[t+1],a=e[t+2],s=e[t+3],u=o*o+i*i+a*a+s*s,c=u?1/u:0;r[n]=-o*c,r[n+1]=-i*c,r[n+2]=-a*c,r[n+3]=s*c},toMatrix4:function(e,t,r,n){var o=e[t],i=e[t+1],a=e[t+2],s=e[t+3],u=o+o,c=i+i,l=a+a,f=o*u,p=o*c,h=i*c,d=o*l,_=i*l,y=a*l,v=s*u,m=s*c,g=s*l;r.set(lt,n),r[n]=1-h-y,r[n+1]=p+g,r[n+2]=d-m,r[n+4]=p-g,r[n+5]=1-f-y,r[n+6]=_+v,r[n+8]=d+m,r[n+9]=_-v,r[n+10]=1-f-h},fromMatrix4:function(e,t,r,n){var o,i,a=e,s=t,u=ct,c=a[s+0]+a[s+5]+a[s+10];c>0?(o=Math.sqrt(c+1),u[3]=.5*o,o=.5/o,u[0]=(a[s+6]-a[s+9])*o,u[1]=(a[s+8]-a[s+2])*o,u[2]=(a[s+1]-a[s+4])*o):a[s+0]>=a[s+5]&&a[s+0]>=a[s+10]?(i=.5/(o=Math.sqrt(1+a[s+0]-a[s+5]-a[s+10])),u[0]=.5*o,u[1]=(a[s+1]+a[s+4])*i,u[2]=(a[s+2]+a[s+8])*i,u[3]=(a[s+6]-a[s+9])*i):a[s+5]>a[s+10]?(i=.5/(o=Math.sqrt(1+a[s+5]-a[s+0]-a[s+10])),u[0]=(a[s+4]+a[s+1])*i,u[1]=.5*o,u[2]=(a[s+9]+a[s+6])*i,u[3]=(a[s+8]-a[s+2])*i):(i=.5/(o=Math.sqrt(1+a[s+10]-a[s+0]-a[s+5])),u[0]=(a[s+8]+a[s+2])*i,u[1]=(a[s+9]+a[s+6])*i,u[2]=.5*o,u[3]=(a[s+1]-a[s+4])*i),r.set(u,n)},fromEulerAngles:function(e,t,r,n){ot.fromYawRollPitch(e[t+1],e[t],e[t+2],r,n)},fromYawRollPitch:function(e,t,r,n,o){var i=.5*r,a=.5*t,s=.5*e,u=Math.sin(i),c=Math.cos(i),l=Math.sin(a),f=Math.cos(a),p=Math.sin(s),h=Math.cos(s);n[o]=h*l*c+p*f*u,n[o+1]=p*f*c-h*l*u,n[o+2]=h*f*u-p*l*c,n[o+3]=h*f*c+p*l*u},toEulerAngles:function(e,t,r,n){var o=e[t],i=e[t+1],a=e[t+2],s=e[t+3],u=i*a-o*s,c=.4999999;if(u<-c)r[n+1]=2*Math.atan2(i,s),r[n]=Math.PI/2,r[n+2]=0;else if(u>c)r[n+1]=2*Math.atan2(i,s),r[n]=-Math.PI/2,r[n+2]=0;else{var l=s*s,f=a*a,p=o*o,h=i*i;r[n+2]=Math.atan2(2*(o*i+a*s),-f-p+h+l),r[n]=Math.asin(-2*u),r[n+1]=Math.atan2(2*(a*o+i*s),f-p-h+l)}},toYawRawPitch:function(e,t,r,n){ot.transformDirection(e,t,ht,0,at,0),ot.transformDirection(e,t,dt,0,st,0);var o=st;Je.angleTo(_t,0,at,0,ut,0);var i=ut;i[0]===Math.PI/2?(i[1]=Ze(o[2],o[0]),i[2]=0):i[0]===-Math.PI/2?(i[1]=Ze(-o[2],-o[0]),i[2]=0):(it.yRotation(-i[1],yt,0),it.xRotation(-i[0],vt,0),it.transformPoint(yt,0,st,0,st,0),it.transformPoint(vt,0,st,0,st,0),i[2]=Ze(o[1],-o[0])),i[1]<=-Math.PI&&(i[1]=Math.PI),i[2]<=-Math.PI&&(i[2]=Math.PI),i[1]>=Math.PI&&i[2]>=Math.PI&&(i[1]=0,i[2]=0,i[0]=Math.PI-i[0]),r.set(i,n)},slerp:function(e,t,r,n,o,i,a){var s,u,c,l,f,p=e[t+0],h=e[t+1],d=e[t+2],_=e[t+3],y=r[n+0],v=r[n+1],m=r[n+2],g=r[n+3];return(u=p*y+h*v+d*m+_*g)<0&&(u=-u,y=-y,v=-v,m=-m,g=-g),1-u>1e-6?(s=Math.acos(u),c=Math.sin(s),l=Math.sin((1-o)*s)/c,f=Math.sin(o*s)/c):(l=1-o,f=o),i[a]=l*p+f*y,i[a+1]=l*h+f*v,i[a+2]=l*d+f*m,i[a+3]=l*_+f*g,i},transformDirection:function(e,t,r,n,o,i){var a=r[n],s=r[n+1],u=r[n+2],c=e[t],l=e[t+1],f=e[t+2],p=e[t+3],h=p*a+l*u-f*s,d=p*s+f*a-c*u,_=p*u+c*s-l*a,y=-c*a-l*s-f*u;o[i]=h*p+y*-c+d*-f-_*-l,o[i+1]=d*p+y*-l+_*-c-h*-f,o[i+2]=_*p+y*-f+h*-l-d*-c}},it={lookAt:function(e,t,r,n,o,i,a,s){var u=at,c=st,l=ut;Je.sub(e,t,r,n,u,0),Je.normalize(u,0,u,0),Je.cross(o,i,u,0,c,0),Je.normalize(c,0,c,0),Je.cross(u,0,c,0,l,0),Je.normalize(l,0,l,0),a.set(lt,s),a[s]=c[0],a[s+1]=c[1],a[s+2]=c[2],a[s+4]=l[0],a[s+5]=l[1],a[s+6]=l[2],a[s+8]=u[0],a[s+9]=u[1],a[s+10]=u[2],a[s+12]=e[t],a[s+13]=e[t+1],a[s+14]=e[t+2]},perspective:function(e,t,r,n,o,i){var a=Math.tan(.5*Math.PI-.5*e),s=1/(r-n);o.set(ft,i),o[i]=a/t,o[i+5]=a,o[i+10]=(r+n)*s,o[i+14]=r*n*s*2},orthographic:function(e,t,r,n,o,i,a,s){a.set(pt,s),a[s]=2/(t-e),a[s+5]=2/(n-r),a[s+10]=2/(o-i),a[s+12]=(e+t)/(e-t),a[s+13]=(r+n)/(r-n),a[s+14]=(o+i)/(o-i)},xRotation:function(e,t,r){var n=Math.cos(e),o=Math.sin(e);t.set(lt,r),t[r+5]=n,t[r+6]=o,t[r+9]=-o,t[r+10]=n},yRotation:function(e,t,r){var n=Math.cos(e),o=Math.sin(e);t.set(lt,r),t[r]=n,t[r+2]=-o,t[r+8]=o,t[r+10]=n},zRotation:function(e,t,r){var n=Math.cos(e),o=Math.sin(e);t.set(lt,r),t[r]=n,t[r+1]=o,t[r+4]=-o,t[r+5]=n},axisRotation:function(e,t,r,n,o){var i=e[t],a=e[t+1],s=e[t+2],u=Math.sqrt(i*i+a*a+s*s),c=(i/=u)*i,l=(a/=u)*a,f=(s/=u)*s,p=Math.cos(r),h=Math.sin(r),d=1-p;return n.set(lt,o),n[o]=c+(1-c)*p,n[o+1]=i*a*d+s*h,n[o+2]=i*s*d-a*h,n[o+4]=i*a*d-s*h,n[o+5]=l+(1-l)*p,n[o+6]=a*s*d+i*h,n[o+8]=i*s*d+a*h,n[o+9]=a*s*d-i*h,n[o+10]=f+(1-f)*p,n},composeTRS:function(e,t,r,n,o,i,a,s){r.length-n>=16?a.set(r.subarray(n,n+16),s):(a[s+3]=0,a[s+7]=0,a[s+11]=0,a[s+15]=0);var u=o[i],c=o[i+1],l=o[i+2];a[s+0]=r[n+0]*u,a[s+1]=r[n+1]*u,a[s+2]=r[n+2]*u,a[s+4]=r[n+4]*c,a[s+5]=r[n+5]*c,a[s+6]=r[n+6]*c,a[s+8]=r[n+8]*l,a[s+9]=r[n+9]*l,a[s+10]=r[n+10]*l,a[s+12]=e[t],a[s+13]=e[t+1],a[s+14]=e[t+2]},composeTQS:function(e,t,r,n,o,i,a,s){ot.toMatrix4(r,n,yt,0),it.composeTRS(e,t,yt,0,o,i,a,s)},translate:function(e,t,r,n,o,i,a){var s=e[t+0],u=e[t+1],c=e[t+2],l=e[t+3],f=e[t+4+0],p=e[t+4+1],h=e[t+4+2],d=e[t+4+3],_=e[t+8+0],y=e[t+8+1],v=e[t+8+2],m=e[t+8+3],g=e[t+12+0],b=e[t+12+1],w=e[t+12+2],x=e[t+12+3];16===e.length?i.set(e,a):i===e&&a===t||(i[a]=s,i[a+1]=u,i[a+2]=c,i[a+3]=l,i[a+4]=f,i[a+5]=p,i[a+6]=h,i[a+7]=d,i[a+8]=_,i[a+9]=y,i[a+10]=v,i[a+11]=m),i[a+12]=s*r+f*n+_*o+g,i[a+13]=u*r+p*n+y*o+b,i[a+14]=c*r+h*n+v*o+w,i[a+15]=l*r+d*n+m*o+x},scale:function(e,t,r,n,o,i,a){i[a+0]=r*e[t+0+0],i[a+1]=r*e[t+0+1],i[a+2]=r*e[t+0+2],i[a+3]=r*e[t+0+3],i[a+4]=n*e[t+4+0],i[a+5]=n*e[t+4+1],i[a+6]=n*e[t+4+2],i[a+7]=n*e[t+4+3],i[a+8]=o*e[t+8+0],i[a+9]=o*e[t+8+1],i[a+10]=o*e[t+8+2],i[a+11]=o*e[t+8+3],i===e&&a===t||(i[a+12]=e[t+12],i[a+13]=e[t+13],i[a+14]=e[t+14],i[a+15]=e[t+15])},xRotate:function(e,t,r,n,o){16===e.length?n.set(e,o):n===e&&o===t||(n[o+0]=e[t+0],n[o+1]=e[t+1],n[o+2]=e[t+2],n[o+3]=e[t+3],n[o+12]=e[t+12],n[o+13]=e[t+13],n[o+14]=e[t+14],n[o+15]=e[t+15]);var i=e[t+4],a=e[t+5],s=e[t+6],u=e[t+7],c=e[t+8],l=e[t+9],f=e[t+10],p=e[t+11],h=Math.cos(r),d=Math.sin(r);n[o+4]=h*i+d*c,n[o+5]=h*a+d*l,n[o+6]=h*s+d*f,n[o+7]=h*u+d*p,n[o+8]=h*c-d*i,n[o+9]=h*l-d*a,n[o+10]=h*f-d*s,n[o+11]=h*p-d*u},yRotate:function(e,t,r,n,o){16===e.length?n.set(e,o):n===e&&o===t||(n[o+4]=e[t+4],n[o+5]=e[t+5],n[o+6]=e[t+6],n[o+7]=e[t+7],n[o+12]=e[t+12],n[o+13]=e[t+13],n[o+14]=e[t+14],n[o+15]=e[t+15]);var i=e[t+0+0],a=e[t+0+1],s=e[t+0+2],u=e[t+0+3],c=e[t+8+0],l=e[t+8+1],f=e[t+8+2],p=e[t+8+3],h=Math.cos(r),d=Math.sin(r);n[o+0]=h*i-d*c,n[o+1]=h*a-d*l,n[o+2]=h*s-d*f,n[o+3]=h*u-d*p,n[o+8]=h*c+d*i,n[o+9]=h*l+d*a,n[o+10]=h*f+d*s,n[o+11]=h*p+d*u},zRotate:function(e,t,r,n,o){16===e.length?n.set(e,o):n===e&&o===t||(n[o+8]=e[t+8],n[o+9]=e[t+9],n[o+10]=e[t+10],n[o+11]=e[t+11],n[o+12]=e[t+12],n[o+13]=e[t+13],n[o+14]=e[t+14],n[o+15]=e[t+15]);var i=e[t+0+0],a=e[t+0+1],s=e[t+0+2],u=e[t+0+3],c=e[t+4+0],l=e[t+4+1],f=e[t+4+2],p=e[t+4+3],h=Math.cos(r),d=Math.sin(r);n[o+0]=h*i+d*c,n[o+1]=h*a+d*l,n[o+2]=h*s+d*f,n[o+3]=h*u+d*p,n[o+4]=h*c-d*i,n[o+5]=h*l-d*a,n[o+6]=h*f-d*s,n[o+7]=h*p-d*u},axisRotate:function(e,t,r,n,o,i,a){var s=r[n],u=r[n+1],c=r[n+2],l=Math.sqrt(s*s+u*u+c*c),f=(s/=l)*s,p=(u/=l)*u,h=(c/=l)*c,d=Math.cos(o),_=Math.sin(o),y=1-d,v=f+(1-f)*d,m=s*u*y+c*_,g=s*c*y-u*_,b=s*u*y-c*_,w=p+(1-p)*d,x=u*c*y+s*_,E=s*c*y+u*_,S=u*c*y-s*_,T=h+(1-h)*d,O=e[t+0],A=e[t+1],C=e[t+2],M=e[t+3],P=e[t+4],R=e[t+5],D=e[t+6],N=e[t+7],I=e[t+8],L=e[t+9],F=e[t+10],k=e[t+11];i[a+0]=v*O+m*P+g*I,i[a+1]=v*A+m*R+g*L,i[a+2]=v*C+m*D+g*F,i[a+3]=v*M+m*N+g*k,i[a+4]=b*O+w*P+x*I,i[a+5]=b*A+w*R+x*L,i[a+6]=b*C+w*D+x*F,i[a+7]=b*M+w*N+x*k,i[a+8]=E*O+S*P+T*I,i[a+9]=E*A+S*R+T*L,i[a+10]=E*C+S*D+T*F,i[a+11]=E*M+S*N+T*k,i===e&&a===t||(i[a+12]=e[t+12],i[a+13]=e[t+13],i[a+14]=e[t+14],i[a+15]=e[t+15])},multiply:function(e,t,r,n,o,i){var a=r[n+0+0],s=r[n+0+1],u=r[n+0+2],c=r[n+0+3],l=r[n+4+0],f=r[n+4+1],p=r[n+4+2],h=r[n+4+3],d=r[n+8+0],_=r[n+8+1],y=r[n+8+2],v=r[n+8+3],m=r[n+12+0],g=r[n+12+1],b=r[n+12+2],w=r[n+12+3],x=e[t+0+0],E=e[t+0+1],S=e[t+0+2],T=e[t+0+3],O=e[t+4+0],A=e[t+4+1],C=e[t+4+2],M=e[t+4+3],P=e[t+8+0],R=e[t+8+1],D=e[t+8+2],N=e[t+8+3],I=e[t+12+0],L=e[t+12+1],F=e[t+12+2],k=e[t+12+3];o[i+0]=a*x+s*O+u*P+c*I,o[i+1]=a*E+s*A+u*R+c*L,o[i+2]=a*S+s*C+u*D+c*F,o[i+3]=a*T+s*M+u*N+c*k,o[i+4]=l*x+f*O+p*P+h*I,o[i+5]=l*E+f*A+p*R+h*L,o[i+6]=l*S+f*C+p*D+h*F,o[i+7]=l*T+f*M+p*N+h*k,o[i+8]=d*x+_*O+y*P+v*I,o[i+9]=d*E+_*A+y*R+v*L,o[i+10]=d*S+_*C+y*D+v*F,o[i+11]=d*T+_*M+y*N+v*k,o[i+12]=m*x+g*O+b*P+w*I,o[i+13]=m*E+g*A+b*R+w*L,o[i+14]=m*S+g*C+b*D+w*F,o[i+15]=m*T+g*M+b*N+w*k},transformVector:function(e,t,r,n,o,i){for(var a=0,s=0,u=0;u<4;++u){s=t+u,o[a=i+u]=0;for(var c=0;c<4;++c)o[a]+=r[n+c]*e[s+4*c]}},transformDirection:function(e,t,r,n,o,i){var a=r[n+0],s=r[n+1],u=r[n+2];o[i+0]=a*e[t+0+0]+s*e[t+4+0]+u*e[t+8+0],o[i+1]=a*e[t+0+1]+s*e[t+4+1]+u*e[t+8+1],o[i+2]=a*e[t+0+2]+s*e[t+4+2]+u*e[t+8+2]},transformPoint:function(e,t,r,n,o,i){var a=r[n+0],s=r[n+1],u=r[n+2],c=a*e[t+0+3]+s*e[t+4+3]+u*e[t+8+3]+e[t+12+3];o[i+0]=(a*e[t+0+0]+s*e[t+4+0]+u*e[t+8+0]+e[t+12+0])/c,o[i+1]=(a*e[t+0+1]+s*e[t+4+1]+u*e[t+8+1]+e[t+12+1])/c,o[i+2]=(a*e[t+0+2]+s*e[t+4+2]+u*e[t+8+2]+e[t+12+2])/c},decomposeTransRotMatScale:function(e,t,r,n,o,i,a,s){r[n+0]=e[t+12],r[n+1]=e[t+13],r[n+2]=e[t+14];var u=e[t+0],c=e[t+1],l=e[t+2],f=e[t+4],p=e[t+5],h=e[t+6],d=e[t+8],_=e[t+9],y=e[t+10],v=a[s+0]=Math.sqrt(u*u+c*c+l*l),m=a[s+1]=Math.sqrt(f*f+p*p+h*h),g=a[s+2]=Math.sqrt(d*d+_*_+y*y);if(o.set(lt,i),0===v||0===m||0===g)return!1;var b=at;b[0]=d/g,b[1]=_/g,b[2]=y/g;var w=st;w[0]=u/v,w[1]=c/v,w[2]=l/v;var x=ut;Je.cross(b,0,w,0,x,0);var E=w;return Je.cross(x,0,b,0,E,0),o.set(E,i),o.set(x,i+4),o.set(b,i+8),o[i+0]*u+o[i+1]*c+o[i+2]*l<0&&(a[s+0]=-v),o[i+4]*f+o[i+5]*p+o[i+6]*h<0&&(a[s+1]=-m),o[i+8]*d+o[i+9]*_+o[i+10]*y<0&&(a[s+2]=-g),!0},inverse:function(e,t,r,n){var o=e[t+0+0],i=e[t+0+1],a=e[t+0+2],s=e[t+0+3],u=e[t+4+0],c=e[t+4+1],l=e[t+4+2],f=e[t+4+3],p=e[t+8+0],h=e[t+8+1],d=e[t+8+2],_=e[t+8+3],y=e[t+12+0],v=e[t+12+1],m=e[t+12+2],g=e[t+12+3],b=d*g,w=m*_,x=l*g,E=m*f,S=l*_,T=d*f,O=a*g,A=m*s,C=a*_,M=d*s,P=a*f,R=l*s,D=p*v,N=y*h,I=u*v,L=y*c,F=u*h,k=p*c,U=o*v,B=y*i,j=o*h,V=p*i,z=o*c,G=u*i,W=b*c+E*h+S*v-(w*c+x*h+T*v),X=w*i+O*h+M*v-(b*i+A*h+C*v),H=x*i+A*c+P*v-(E*i+O*c+R*v),q=T*i+C*c+R*h-(S*i+M*c+P*h),Y=1/(o*W+u*X+p*H+y*q);r[n+0]=Y*W,r[n+1]=Y*X,r[n+2]=Y*H,r[n+3]=Y*q,r[n+4]=Y*(w*u+x*p+T*y-(b*u+E*p+S*y)),r[n+5]=Y*(b*o+A*p+C*y-(w*o+O*p+M*y)),r[n+6]=Y*(E*o+O*u+R*y-(x*o+A*u+P*y)),r[n+7]=Y*(S*o+M*u+P*p-(T*o+C*u+R*p)),r[n+8]=Y*(D*f+L*_+F*g-(N*f+I*_+k*g)),r[n+9]=Y*(N*s+U*_+V*g-(D*s+B*_+j*g)),r[n+10]=Y*(I*s+B*f+z*g-(L*s+U*f+G*g)),r[n+11]=Y*(k*s+j*f+G*_-(F*s+V*f+z*_)),r[n+12]=Y*(I*d+k*m+N*l-(F*m+D*l+L*d)),r[n+13]=Y*(j*m+D*a+B*d-(U*d+V*m+N*a)),r[n+14]=Y*(U*l+G*m+L*a-(z*m+I*a+B*l)),r[n+15]=Y*(z*d+F*a+V*l-(j*l+G*d+k*a))},transpose:function(e,t,r,n){r[n+0]=e[t+0],r[n+1]=e[t+4],r[n+2]=e[t+8],r[n+3]=e[t+12],r[n+4]=e[t+1],r[n+5]=e[t+5],r[n+6]=e[t+9],r[n+7]=e[t+13],r[n+8]=e[t+2],r[n+9]=e[t+6],r[n+10]=e[t+10],r[n+11]=e[t+14],r[n+12]=e[t+3],r[n+13]=e[t+7],r[n+14]=e[t+11],r[n+15]=e[t+15]},composeRST3toRST4:function(e,t,r,n){r.set(lt,n),r[n+0]=e[t+0],r[n+1]=e[t+1],r[n+4]=e[t+3],r[n+5]=e[t+4],r[n+10]=1,r[n+12]=e[t+6],r[n+13]=e[t+7],r[n+15]=e[t+8]},copy:function(e,t,r,n){if(16===e.length)r.set(e,n);else for(var o=0;o<16;o++)r[n+o]=e[t+o]}},at=new Float32Array(3),st=new Float32Array(3),ut=new Float32Array(3),ct=new Float32Array(4),lt=new Float32Array(16);lt.set([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],0);var ft=new Float32Array(16).fill(0);ft[11]=-1;var pt=new Float32Array(16).fill(0);pt[15]=1;var ht=new Float32Array([0,0,-1]),dt=new Float32Array([0,1,0]),_t=new Float32Array([0,0,0]),yt=new Float32Array(16),vt=new Float32Array(16);function mt(e,t,r){return void 0===r&&(r=Math.random()),e===t?e:r*Math.abs(e-t)+Math.min(e,t)}var gt=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},e(t,r)};return function(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),bt=function(){function e(e,t){this.Phys3D=e,this.size=50,this.pools=[],this.h_i=0,this.h_j=0,t&&(this.size=t),this.pools.push(this.createPool()),this.h_i=this.h_j=0}return e.prototype.createPool=function(){for(var e=[],t=0;t<this.size;t++)e.push(this.create());return e},e.prototype.get=function(){return this.h_i>=this.pools[this.h_j].length&&(this.h_i=0,this.h_j++),this.h_j>=this.pools.length&&this.pools.push(this.createPool()),this.pools[this.h_j][this.h_i++]},e.prototype.from=function(e){var t=this.get();return this.assign(t,e),t},e.prototype.clear=function(){this.h_i=this.h_j=0},e}(),wt=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return gt(t,e),t.prototype.create=function(){if(!this.Phys3D)throw"vector3 create error: no physics engine found.";return new this.Phys3D.RawVec3f},t.prototype.assign=function(e,t){e.x=t.x,e.y=t.y,e.z=t.z},t}(bt),xt=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return gt(t,e),t.prototype.create=function(){if(!this.Phys3D)throw"quaternion create error: no physics engine found.";return new this.Phys3D.RawQuaternion},t.prototype.assign=function(e,t){e.x=t.x,e.y=t.y,e.z=t.z,e.w=t.w},t}(bt),Et=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},e(t,r)};return function(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),St=function(){function e(e,t){this._isDirty=!1,this._raw=e||new Float32Array(3),this._offset=t||0,this._isDirty=!1}return e.prototype.get=function(e){return this._raw[this._offset+e]},Object.defineProperty(e.prototype,"x",{get:function(){return this._raw[this._offset]},set:function(e){this._isDirty=!0,this._raw[this._offset]=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"y",{get:function(){return this._raw[this._offset+1]},set:function(e){this._isDirty=!0,this._raw[this._offset+1]=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"z",{get:function(){return this._raw[this._offset+2]},set:function(e){this._isDirty=!0,this._raw[this._offset+2]=e},enumerable:!1,configurable:!0}),e.createFromNumber=function(e,t,r){var n=new Float32Array(3);return n[0]=e,n[1]=t,n[2]=r,new this(n)},e.createFromArray=function(e){return 3!==e.length&&Ee.throw(new Error("create Vector error:array length is wrong")),new this(new Float32Array(e))},e.createFromTypedArray=function(e,t){return void 0===t&&(t=0),e.length-t<3&&Ee.throw(new Error("create Vector error:array length is wrong")),new this(e,t)},e.transformQuat=function(t,r,n){return n=n||new e,ot.transformDirection(r._raw,r._offset,t._raw,t._offset,Ct._raw,Ct._offset),n.set(Ct),n},e.transformCoordinate=function(e,t,r){return t.transformPoint(e,r)},e.prototype.toArray=function(){var e=this._raw;return[e[this._offset],e[this._offset+1],e[this._offset+2]]},e.prototype.equal=function(e){return Je.equal(this._raw,this._offset,e._raw,e._offset)},e.prototype.set=function(e){return this._isDirty=!0,Je.copy(e._raw,e._offset,this._raw,this._offset),this},e.prototype.setValue=function(e,t,r){this._isDirty=!0;var n=this._raw;return n[this._offset]=e,n[this._offset+1]=t,n[this._offset+2]=r,this},e.prototype.setFromArray=function(e){this._isDirty=!0;var t=this._raw;return t[this._offset]=e[0],t[this._offset+1]=e[1],t[this._offset+2]=e[2],this},e.prototype.add=function(t,r){return r=r||new e,Je.add(this._raw,this._offset,t._raw,t._offset,Ct._raw,Ct._offset),r.set(Ct),r},e.prototype.sub=function(t,r){return r=r||new e,Je.sub(this._raw,this._offset,t._raw,t._offset,Ct._raw,Ct._offset),r.set(Ct),r},e.prototype.cross=function(t,r){return r=r||new e,Je.cross(this._raw,this._offset,t._raw,t._offset,Ct._raw,Ct._offset),r.set(Ct),r},e.prototype.normalize=function(t){return t=t||new e,Je.normalize(this._raw,this._offset,Ct._raw,Ct._offset),t.set(Ct),t},e.prototype.scale=function(t,r){return r=r||new e,Je.scale(this._raw,this._offset,t,Ct._raw,Ct._offset),r.set(Ct),r},e.prototype.scaleXYZ=function(t,r,n,o){o=o||new e;var i=this._raw;return o.setValue(i[this._offset]*t,i[this._offset+1]*r,i[this._offset+2]*n),o},e.prototype.lerp=function(t,r,n){return n=n||new e,Je.lerp(this._raw,this._offset,t._raw,t._offset,r,Ct._raw,Ct._offset),n.set(Ct),n},e.prototype.negate=function(){return this._isDirty=!0,this.x=-this.x,this.y=-this.y,this.z=-this.z,this},e.prototype.dot=function(e){return Je.dot(this._raw,this._offset,e._raw,e._offset)},e.prototype.length=function(){return Je.length(this._raw,this._offset)},e.prototype.clone=function(){var t=new e;return Je.copy(this._raw,this._offset,t._raw,t._offset),t},e.prototype.isZero=function(){return Je.isZero(this._raw,this._offset)},e.prototype.distanceTo=function(e){return Je.distance(this._raw,this._offset,e._raw,e._offset)},e.prototype.angleTo=function(t,r){return r=r||new e,Je.angleTo(this._raw,this._offset,t._raw,t._offset,Ct._raw,Ct._offset),r.set(Ct),r},e.prototype.setFromMatrixColumn=function(e,t){return this.fromArray(e._raw,0+4*t)},e.prototype.fromArray=function(e,t){void 0===t&&(t=0);var r=this._raw;return r[this._offset]=e[t],r[this._offset+1]=e[t+1],r[this._offset+2]=e[t+2],this},e.prototype.setFromMatrixScale=function(e){var t=this.setFromMatrixColumn(e,0).length(),r=this.setFromMatrixColumn(e,1).length(),n=this.setFromMatrixColumn(e,2).length(),o=this._raw;return o[this._offset]=t,o[this._offset+1]=r,o[this._offset+2]=n,this},e.prototype.setFromMatrixPosition=function(e){var t=e._raw,r=this._raw;return r[this._offset]=t[e._offset+12],r[this._offset+1]=t[e._offset+13],r[this._offset+2]=t[e._offset+14],this},e.prototype.applyMatrix4=function(t){return e.transformCoordinate(this,t,this)},e.prototype.applyMatrix4Raw=function(e){var t=this.x,r=this.y,n=this.z,o=e,i=1/(o[3]*t+o[7]*r+o[11]*n+o[15]);return this.x=(o[0]*t+o[4]*r+o[8]*n+o[12])*i,this.y=(o[1]*t+o[5]*r+o[9]*n+o[13])*i,this.z=(o[2]*t+o[6]*r+o[10]*n+o[14])*i,this},e.prototype.applyQuaternion=function(e){this._isDirty=!0;var t=this.x,r=this.y,n=this.z,o=e.x,i=e.y,a=e.z,s=e.w,u=s*t+i*n-a*r,c=s*r+a*t-o*n,l=s*n+o*r-i*t,f=-o*t-i*r-a*n;return this.x=u*s+f*-o+c*-a-l*-i,this.y=c*s+f*-i+l*-o-u*-a,this.z=l*s+f*-a+u*-i-c*-o,this},e.prototype.transformDirection=function(e){var t=this._raw,r=t[this._offset],n=t[this._offset+1],o=t[this._offset+2],i=e._raw;return t[this._offset]=i[0]*r+i[4]*n+i[8]*o,t[this._offset+1]=i[1]*r+i[5]*n+i[9]*o,t[this._offset+2]=i[2]*r+i[6]*n+i[10]*o,this.normalize()},e.prototype.transformDirectionRaw=function(e){var t=this._raw,r=t[this._offset],n=t[this._offset+1],o=t[this._offset+2],i=e;return t[this._offset]=i[0]*r+i[4]*n+i[8]*o,t[this._offset+1]=i[1]*r+i[5]*n+i[9]*o,t[this._offset+2]=i[2]*r+i[6]*n+i[10]*o,this.normalize()},e.fromPhysics=function(e){return this.createFromNumber(e.x,e.y,e.z)},e.prototype.fromPhysics=function(e){return this._isDirty=!0,this.x=e.x,this.y=e.y,this.z=e.z,this},e.clearPhysicsPool=function(){this.physicsPool&&this.physicsPool.clear()},e.prototype.toPhysics=function(){return e.Phys3D?(e.physicsPool||(e.physicsPool=new wt(e.Phys3D)),e.physicsPool.from(this)):(Ee.error("vector3 convert error: no physics engine found."),null)},e.prototype.setArray=function(e,t){if(this._isDirty=!0,t)for(var r=0;r<4;r+=1)this._raw[this._offset+r]=e[t+r];else this._raw.set(e,this._offset);return this},e.prototype.print=function(){Ee.log(this.x.toPrecision(3)+"\t"+this.y.toPrecision(3)+"\t"+this.z.toPrecision(3))},e}();const Tt=St;var Ot="try to set value to read only vector",At=function(e){function t(t,r){return e.call(this,t,r)||this}return Et(t,e),Object.defineProperty(t.prototype,"x",{get:function(){return this._raw[this._offset]},set:function(e){Ee.error(Ot)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"y",{get:function(){return this._raw[this._offset+1]},set:function(e){Ee.error(Ot)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"z",{get:function(){return this._raw[this._offset+2]},set:function(e){Ee.error(Ot)},enumerable:!1,configurable:!0}),t.prototype.set=function(){return Ee.error(Ot),this},t.prototype.setValue=function(){return Ee.error(Ot),this},t}(St);St.ZERO=new At(new Float32Array([0,0,0])),St.ONE=new At(new Float32Array([1,1,1])),St.Up=new At(new Float32Array([0,1,0])),St.ForwardLH=new At(new Float32Array([0,0,1]));var Ct=new St,Mt=new Tt(new Float32Array(3),0),Pt=new Float32Array(3),Rt={center:0,radius:3},Dt=function(){function e(e,t){this._center=void 0,this._raw=e||new Float32Array(4),this._offset=t||0}return Object.defineProperty(e.prototype,"center",{get:function(){return this._center||(this._center=Tt.createFromTypedArray(this._raw,this._offset)),this._center},set:function(e){Je.copy(e._raw,e._offset,this._raw,this._offset)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"radius",{get:function(){return this._raw[this._offset+Rt.radius]},set:function(e){this._raw[this._offset+Rt.radius]=e},enumerable:!1,configurable:!0}),e.createFromCenterAndRadius=function(t,r){var n=new e;return n.center=t,n.radius=r,n},e.prototype.setValue=function(e,t){return Je.copy(e._raw,e._offset,this._raw,this._offset),this._raw[this._offset+Rt.radius]=t,this},e.prototype.initByPoints=function(e){var t=Mt._raw;t.fill(0);for(var r=Pt,n=0,o=e;n<o.length;n++){var i=o[n];Je.add(t,0,i._raw,i._offset,t,0)}Je.scale(t,0,1/e.length,t,0);for(var a=0,s=0,u=e;s<u.length;s++){i=u[s],Je.sub(t,0,i._raw,i._offset,r,0);var c=Je.length(r,0);c>a&&(a=c)}return this.setValue(Mt,a)},e.prototype.initByPointRadius=function(e,t){Je.copy(e._raw,e._offset,this._raw,this._offset),this.radius=t},e.OFFSETS=Object.freeze(Rt),e}();const Nt=Dt;var It=new Tt,Lt=new Tt,Ft={center:0,size:3};const kt=function(){function e(e,t){this._center=void 0,this._size=void 0,this._raw=e||new Float32Array(6),this._offset=t||0}return Object.defineProperty(e.prototype,"center",{get:function(){return this._center||(this._center=Tt.createFromTypedArray(this._raw,this._offset)),this._center},set:function(e){Je.copy(e._raw,e._offset,this._raw,this._offset)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"size",{get:function(){return this._size||(this._size=Tt.createFromTypedArray(this._raw,this._offset+Ft.size)),this._size},set:function(e){Je.copy(e._raw,e._offset,this._raw,this._offset+Ft.size)},enumerable:!1,configurable:!0}),e.createFromCenterAndSize=function(t,r){var n=new e;return n.center=t,n.size=r,n},e.prototype.setValue=function(e,t){return Je.copy(e._raw,e._offset,this._raw,this._offset),Je.copy(t._raw,t._offset,this._raw,this._offset+Ft.size),this},e.prototype.initByPoints=function(e,t){t=t||e.length,this.startInitByPoints();for(var r=0;r<t;r++)this.addPoint(e[r]);this.endInitByPoints()},e.prototype.startInitByPoints=function(){this._temp_xMax=-Number.MAX_VALUE,this._temp_xMin=Number.MAX_VALUE,this._temp_yMax=-Number.MAX_VALUE,this._temp_yMin=Number.MAX_VALUE,this._temp_zMax=-Number.MAX_VALUE,this._temp_zMin=Number.MAX_VALUE},e.prototype.addPoint=function(e){this._temp_xMax=Math.max(this._temp_xMax,e.x),this._temp_xMin=Math.min(this._temp_xMin,e.x),this._temp_yMax=Math.max(this._temp_yMax,e.y),this._temp_yMin=Math.min(this._temp_yMin,e.y),this._temp_zMax=Math.max(this._temp_zMax,e.z),this._temp_zMin=Math.min(this._temp_zMin,e.z)},e.prototype.endInitByPoints=function(){It.setValue((this._temp_xMax+this._temp_xMin)/2,(this._temp_yMax+this._temp_yMin)/2,(this._temp_zMax+this._temp_zMin)/2),Lt.setValue(this._temp_xMax-this._temp_xMin,this._temp_yMax-this._temp_yMin,this._temp_zMax-this._temp_zMin),this.setValue(It,Lt)},e.OFFSETS=Object.freeze(Ft),e}();var Ut=new WeakMap,Bt=new WeakMap,jt=function(){function e(t,r,n,o,i){void 0===i&&(i=ue.EIndexType.UINT16),this._scene=t,this._releaseRawBuffer=!1,this._vertexBuffer=null,this._indexBuffer=null,this._vertexData=null,this._indexData=null,this._indexType=ue.EIndexType.UINT16,this._boundBall=null,this._boundBox=null,this._rawVertexBuffer=null,this._rawIndiceBuffer=null,this._layout=r,this._raw=new Float32Array(e.RAWLENGTH),this._valid=!1,this._indexType=i,this._subMeshes=[];var a=n;this._rawVertexBuffer=new Float32Array(a.buffer,a.byteOffset,a.byteLength/4);var s=this._indexType===ue.EIndexType.UINT16?new Uint16Array(o.buffer,o.byteOffset,o.byteLength/2):new Uint32Array(o.buffer,o.byteOffset,o.byteLength/4);this._rawIndiceBuffer=s}return Object.defineProperty(e.prototype,"vertexLayout",{get:function(){return this._layout},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"indexBuffer",{get:function(){return this._indexBuffer||(this._indexBuffer=new(he(this._scene).IndexBuffer)(this._rawIndiceBuffer,this._indexType===ue.EIndexType.UINT32),this._releaseRawBuffer&&(this._rawIndiceBuffer=null)),this._indexBuffer},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"vertexBuffer",{get:function(){return this._vertexBuffer||(this._vertexBuffer=Ut.get(this._rawVertexBuffer.buffer),this._vertexBuffer||(this._vertexBuffer=new(he(this._scene).VertexBuffer)(this._rawVertexBuffer,this._layout),Ut.set(this._rawVertexBuffer,this._vertexBuffer)),this._releaseRawBuffer&&(this._rawVertexBuffer=null)),this._vertexBuffer},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"indexData",{get:function(){if(!this._indexData){if(!this._rawIndiceBuffer)return Ee.warn("try to get index data fail, because raw buffer maybe release"),null;this._indexData=new(he(this._scene).IndexData)(this._rawIndiceBuffer.length),new Uint16Array(this._indexData.data).set(this._rawIndiceBuffer)}return this._indexData},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"vertexData",{get:function(){if(!this._vertexData){if(!this._rawVertexBuffer)return Ee.warn("try to get vertex data fail,because raw buffer maybe release"),null;this._vertexData=Bt.get(this._rawVertexBuffer.buffer),this._vertexData||(this._vertexData=new(he(this._scene).VertexData)(this._layout,this._rawVertexBuffer.length,this._scene.assets.getAsset("vertex-data-desc","static-3d")),new Float32Array(this._vertexData.data).set(this._rawVertexBuffer),Bt.set(this._rawVertexBuffer,this._vertexData))}return this._vertexData},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"valid",{get:function(){return this._valid},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"boundBall",{get:function(){return this._boundBall||(this._boundBall=new Nt(this._raw,0)),this._boundBall},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"boundBox",{get:function(){return this._boundBall||(this._boundBox=new kt(this._raw,4)),this._boundBox},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"subMeshes",{get:function(){return this._subMeshes},enumerable:!1,configurable:!0}),e.prototype.uploadBufferData=function(e,t,r,n){var o,i,a,s;e!==t&&(null===(o=this._vertexBuffer)||void 0===o||o.update(new Uint8Array(null===(i=this._rawVertexBuffer)||void 0===i?void 0:i.buffer,e,t),e)),r!==n&&(null===(a=this._indexBuffer)||void 0===a||a.update(new Uint8Array(null===(s=this._rawIndiceBuffer)||void 0===s?void 0:s.buffer,r,n),r))},e.prototype.uploadVertexBuffer=function(e,t){var r;null===(r=this._vertexBuffer)||void 0===r||r.update(t,e)},e.prototype.uploadIndexBuffer=function(e,t){var r;null===(r=this._indexBuffer)||void 0===r||r.update(t,e)},e.prototype.getSubMeshCount=function(){return this._subMeshes.length},e.prototype.getIndiceStart=function(e){var t=this._subMeshes[e];return t?t.offset:-1},e.prototype.getIndiceLength=function(e){var t=this._subMeshes[e];return t?t.length:-1},e.prototype.getMaterialIndex=function(e){var t=this._subMeshes[e];return t?t.materialIndex:-1},e.prototype.getVertexLayout=function(){return this._layout},e.prototype.modifySubMesh=function(e,t,r){var n=this._subMeshes[e];return!!n&&(n.offset===r&&n.length===t||(n.offset=r,n.length=t),!0)},e.prototype.addSubMesh=function(e,t,r){r=r||this._subMeshes.length,this._subMeshes.push({offset:t,length:e,materialIndex:r})},e.prototype.setBoundBox=function(e,t,r){void 0===r&&(r=!0);var n=4+kt.OFFSETS.size,o=4+kt.OFFSETS.center;Je.copy(e._raw,e._offset,this._raw,o),Je.copy(t._raw,t._offset,this._raw,n),r&&this.setBoundBall(e,t.length()/2)},e.prototype.setBoundBall=function(e,t){var r=Nt.OFFSETS.radius,n=Nt.OFFSETS.center;Je.copy(e._raw,e._offset,this._raw,n),this._raw[r]=t},e.prototype._getRawVertexBuffer=function(){return this._rawVertexBuffer||Ee.warn("try to get raw buffer fail,because raw buffer maybe release"),this._rawVertexBuffer},e.prototype._getRawIndiceBuffer=function(){return this._rawIndiceBuffer||Ee.warn("try to get raw buffer fail,because raw buffer maybe release"),this._rawIndiceBuffer},e.RAWLENGTH=10,e.MAX_BONECOUNT=76,e}();const Vt=jt;var zt,Gt,Wt=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},e(t,r)};return function(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();!function(e){e[e.BYTE=5120]="BYTE",e[e.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",e[e.SHORT=5122]="SHORT",e[e.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",e[e.UNSIGNED_INT=5125]="UNSIGNED_INT",e[e.FLOAT=5126]="FLOAT"}(Gt||(Gt={}));var Xt=((zt={})[Gt.BYTE]=Int8Array,zt[Gt.UNSIGNED_BYTE]=Uint8Array,zt[Gt.SHORT]=Int16Array,zt[Gt.UNSIGNED_SHORT]=Uint16Array,zt[Gt.UNSIGNED_INT]=Uint32Array,zt[Gt.FLOAT]=Float32Array,zt),Ht={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},qt=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.resource=null,t}return Wt(t,e),Object.defineProperty(t.prototype,"nodeName",{get:function(){return"Accessor"},enumerable:!1,configurable:!0}),t.prototype.build=function(){},t.prototype.preload=function(e){var t,r,n,o,i;return r=this,n=void 0,i=function(){var r,n,o,i,a,s,u,c;return function(e,t){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}}(this,(function(l){return this.validate(qr.UnsupportedSparseAccessor),this.validate(qr.UnsupportedNormalizedAccessor),r=e[0],n=r[this.raw.bufferView],o=Xt[this.raw.componentType],i=n?new o(n.data,(null!==(t=this.raw.byteOffset)&&void 0!==t?t:0)+n.byteOffset):new o,a=i.BYTES_PER_ELEMENT,s=Ht[this.raw.type],u=0,n&&(u="number"==typeof n.byteStride?n.byteStride/a:s),c=u===s,this.resource={bufferView:n,bufferViewIndex:this.raw.bufferView,view:i,bytesPerComponent:a,elementLength:s,count:this.raw.count,stride:u,byteStride:u*a,componentType:this.raw.componentType,max:this.raw.max,min:this.raw.min,compact:c,extras:this.raw.extras,getCompAt:function(e,t){return this.view[e*this.stride+t]}},[2,this.resource]}))},new((o=Promise)||(o=Promise))((function(e,t){function a(e){try{u(i.next(e))}catch(e){t(e)}}function s(e){try{u(i.throw(e))}catch(e){t(e)}}function u(t){var r;t.done?e(t.value):(r=t.value,r instanceof o?r:new o((function(e){e(r)}))).then(a,s)}u((i=i.apply(r,n||[])).next())}))},t.prototype.getLoadedResource=function(){return this.resource},t}(qe);const Yt=qt;var Zt;!function(e){var t=function(){};function r(e){this.min.x=Math.min(this.min.x,e.x),this.min.y=Math.min(this.min.y,e.y),this.min.z=Math.min(this.min.z,e.z)}function n(e){this.max.x=Math.max(this.max.x,e.x),this.max.y=Math.max(this.max.y,e.y),this.max.z=Math.max(this.max.z,e.z)}e.BoundingBox=t,function(e){e.createZero=function(){return{min:Tt.ZERO.clone(),max:Tt.ZERO.clone(),adoptMin:r,adoptMax:n}},e.createInfinite=function(){return{min:Tt.createFromNumber(1/0,1/0,1/0),max:Tt.createFromNumber(-1/0,-1/0,-1/0),adoptMin:r,adoptMax:n}}}(t=e.BoundingBox||(e.BoundingBox={}))}(Zt||(Zt={}));var Kt=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},e(t,r)};return function(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Qt=function(){return Qt=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Qt.apply(this,arguments)};function $t(e){return"POSITION"===e?ue.EVertexLayoutUsage.POSITION:"NORMAL"===e?ue.EVertexLayoutUsage.NORMAL:"TANGENT"===e?ue.EVertexLayoutUsage.TANGENT:e.startsWith("TEXCOORD_")?"0"===e.charAt(9)?ue.EVertexLayoutUsage.UV0:"1"===e.charAt(9)?ue.EVertexLayoutUsage.UV1:"2"===e.charAt(9)?ue.EVertexLayoutUsage.UV2:"3"===e.charAt(9)?ue.EVertexLayoutUsage.UV3:ue.EVertexLayoutUsage.UV0:e.startsWith("COLOR_")?ue.EVertexLayoutUsage.COLOR:e.startsWith("JOINTS_")?ue.EVertexLayoutUsage.BONEINDEX:e.startsWith("WEIGHTS_")?ue.EVertexLayoutUsage.BONEWEIGHT:e.startsWith("MORPH_")?ue.EVertexLayoutUsage.CUSTOM:void 0}function Jt(e){if("POSITION"===e)return"a_position";if("NORMAL"===e)return"a_normal";if("TANGENT"===e)return"a_tangent";if(e.startsWith("TEXCOORD_")){if("0"===e.charAt(9))return"a_texCoord";if("1"===e.charAt(9))return"a_texCoord_1";if("2"===e.charAt(9))return"a_texCoord_2";if("3"===e.charAt(9))return"a_texCoord_3"}if(e.startsWith("COLOR_"))return"a_color";if(e.startsWith("JOINTS_")){if("0"===e.charAt(7))return"a_boneIndices";if("1"===e.charAt(7))return"a_boneIndices_1";if("2"===e.charAt(7))return"a_boneIndices_2"}if(e.startsWith("WEIGHTS_")){if("0"===e.charAt(8))return"a_weights";if("1"===e.charAt(8))return"a_weights_1";if("2"===e.charAt(8))return"a_weights_2"}if(e.startsWith("MORPH_")){var t=Jt(e.split("_").slice(2).join("_")).substring(2);return"a_morph_"+Number.parseInt(e.split("_")[1])+"_"+t}return e}function er(e){return"POSITION"===e||"NORMAL"===e?3:"TANGENT"===e?4:e.startsWith("TEXCOORD_")?2:e.startsWith("COLOR_")?3:e.startsWith("JOINTS_")||e.startsWith("WEIGHTS_")?4:e.startsWith("MORPH_")?er(e.split("_").slice(2).join("_")):1}function tr(e,t){var r;if("POSITION"===e)t.WX_USE_POSITION=!0;else if("NORMAL"===e)t.WX_USE_NORMAL=!0;else if("TANGENT"===e)t.WX_USE_TANGENT=!0;else if(e.startsWith("COLOR_"))t["WX_USE_COLOR_"+e.charAt(6)]=!0;else if(e.startsWith("MORPH_")){var n=e.split("_"),o=n.slice(2).join("_"),i=Number.parseInt(n[1]),a="WX_MORPH_MASK_"+i+"_"+o;t["WX_USE_MORPH_"+o]=!0,t[a]=1,i+1>(null!==(r=t.WX_MORPH_TARGET_COUNT)&&void 0!==r?r:0)&&(t.WX_MORPH_TARGET_COUNT=i+1),t[a]|=1<<i}}function rr(e,t){switch(e){case Gt.FLOAT:return ue.EVertexFormat.FLOAT+t-1;case Gt.UNSIGNED_SHORT:case Gt.SHORT:if(2===t)return ue.EVertexFormat.SHORT2;if(4===t)return ue.EVertexFormat.SHORT4;case Gt.BYTE:if(4===t)return ue.EVertexFormat.BYTE4;case Gt.UNSIGNED_BYTE:if(4===t)return ue.EVertexFormat.UBYTE4;default:return null}}var nr=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.resource=null,t}return Kt(t,e),Object.defineProperty(t.prototype,"nodeName",{get:function(){return"Attributes"},enumerable:!1,configurable:!0}),t.prototype.build=function(){},t.prototype.preload=function(e){return t=this,r=void 0,o=function(){var t,r,n,o,i,a,s,u,c;return function(e,t){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}}(this,(function(l){for(t=e[0],e[1],r=e[2],n=e[3],o=Qt(Qt({},this.raw),t.attributes),i=[],a=0,s=Object.entries(o).sort((function(e,t){return e[0].localeCompare(t[0])}));a<s.length;a++)u=s[a],i.push(u[0]),i.push(u[1].toString());return c=i.join("$"),n.has(c)||(this.isSimpleAttribNode(o,r)?n.set(c,this.genSimpleVertexBuffer(o,r)):n.set(c,this.genVertexBuffer(o,r))),this.resource=n.get(c),[2,this.resource]}))},new((n=Promise)||(n=Promise))((function(e,i){function a(e){try{u(o.next(e))}catch(e){i(e)}}function s(e){try{u(o.throw(e))}catch(e){i(e)}}function u(t){var r;t.done?e(t.value):(r=t.value,r instanceof n?r:new n((function(e){e(r)}))).then(a,s)}u((o=o.apply(t,r||[])).next())}));var t,r,n,o},t.prototype.getLoadedResource=function(){return this.resource},t.prototype.isSimpleAttribNode=function(e,t){var r=Object.entries(e);if(0===r.length)return!0;if(!t[r[0][1]].bufferView)return!1;for(var n=t[r[0][1]].bufferView.data,o=t[r[0][1]].byteStride,i=!1,a=!1,s=0,u=r;s<u.length;s++){var c=u[s],l=c[0],f=t[c[1]];if(n!==f.bufferView.data||o!==f.byteStride)return!1;if(er(l)!==f.elementLength)return!1;if(!rr(f.componentType,f.elementLength))return!1;"NORMAL"===l&&(i=!0),"TANGENT"===l&&(a=!0)}var p={check:!0};return this.extensionSlot("simpleAttribNodeDontCheckTangent",p),!(!i&&p.check||!a&&p.check)},t.prototype.genSimpleVertexBuffer=function(e,t){for(var r,n,o,i={attributes:[],stride:0},a=1/0,s=0,u={},c=Zt.BoundingBox.createZero(),l=0,f=Object.entries(e);l<f.length;l++){var p=f[l],h=p[0],d=t[p[1]];if(i.stride=d.byteStride,i.attributes.push({name:Jt(h),format:rr(d.componentType,d.elementLength),offset:d.view.byteOffset,usage:$t(h)}),tr(h,u),"POSITION"===h){var _={trust:!1};if(this.extensionSlot("trustMaxAndMin",_),_.trust&&(null===(r=d.min)||void 0===r?void 0:r.length)>2&&(null===(n=d.max)||void 0===n?void 0:n.length)>2)c.max.setFromArray(d.max),c.min.setFromArray(d.min);else if(3===d.elementLength){c=Zt.BoundingBox.createInfinite();for(var y=0;y<d.count;y++)c.min.x=Math.min(c.min.x,d.getCompAt(y,0)),c.max.x=Math.max(c.max.x,d.getCompAt(y,0)),c.min.y=Math.min(c.min.y,d.getCompAt(y,1)),c.max.y=Math.max(c.max.y,d.getCompAt(y,1)),c.min.z=Math.min(c.min.z,d.getCompAt(y,2)),c.max.z=Math.max(c.max.z,d.getCompAt(y,2))}}o=d.bufferView.data,a=Math.min(a,d.bufferView.byteOffset),s=Math.max(s,d.bufferView.byteOffset+d.bufferView.byteLength)}i.attributes.forEach((function(e){e.offset-=a}));var v=new(he(this.scene).VertexLayout)(i);return{buffer:new Float32Array(o,a,Math.ceil((s-a)/4)),layoutDesc:i,layout:v,macros:u,boundingBox:c,lackNormal:!1,lackTangent:!1,normalSlot:0,tangentSlot:0}},t.prototype.genVertexBuffer=function(e,t){for(var r={attributes:[],stride:0},n={},o=!1,i=!1,a=0,s=0,u=4294967296,c=0,l=0,f=Object.entries(e);l<f.length;l++){var p=f[l],h=p[0],d=p[1];this.validate(qr.UnsupportedUVSlot),this.validate(qr.UnsupportedJointSlot),this.validate(qr.UnsupportedWeightSlot),"NORMAL"===h&&(o=!0,a=r.attributes.length),"TANGENT"===h&&(i=!0,s=r.attributes.length),(O=t[d]).count<u&&(u=O.count);var _=er(h);r.attributes.push({name:Jt(h),format:ue.EVertexFormat.FLOAT+_-1,offset:c,usage:$t(h)}),c+=4*_,tr(h,n)}var y=!o,v=!o||!i;y&&(a=r.attributes.length,c+=this.extendLayoutByAttribName(r,"NORMAL",c,n)),v&&(i||(s=r.attributes.length,c+=this.extendLayoutByAttribName(r,"TANGENT",c,n))),r.stride=c;for(var m=new(he(this.scene).VertexLayout)(r),g=Zt.BoundingBox.createInfinite(),b=new ArrayBuffer(c*u),w=new Float32Array(b),x=0,E=0,S=Object.entries(e);E<S.length;E++)for(var T=S[E],O=(h=T[0],t[d=T[1]]),A=r.attributes[x++],C=A.format+1,M=O.elementLength,P=O.view,R=0;R<u;R++){for(var D=(A.offset+R*c)/4,N=0;N<C;N++)w[D+N]=N<M?P[R*O.stride+N]:3===N?1:0;"POSITION"===h&&(g.min.x=Math.min(g.min.x,w[D+0]),g.max.x=Math.max(g.max.x,w[D+0]),g.min.y=Math.min(g.min.y,w[D+1]),g.max.y=Math.max(g.max.y,w[D+1]),g.min.z=Math.min(g.min.z,w[D+2]),g.max.z=Math.max(g.max.z,w[D+2]))}return{buffer:new Float32Array(b),layoutDesc:r,layout:m,macros:n,boundingBox:g,lackNormal:y,lackTangent:v,normalSlot:a,tangentSlot:s}},t.prototype.extendLayoutByAttribName=function(e,t,r,n){var o=er(t);return e.attributes.push({name:Jt(t),format:ue.EVertexFormat.FLOAT+o-1,offset:r,usage:$t(t)}),4*o},t}(qe);const or=nr;function ir(e){var t;return null===(t=e)||void 0===t?void 0:t.__isAsset}var ar;!function(e){e[e.Undefined=0]="Undefined",e[e.Defer=1]="Defer",e[e.Loading=2]="Loading",e[e.Existed=3]="Existed"}(ar||(ar={}));var sr=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},e(t,r)};return function(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),ur=function(){function e(e,t){this._raw=e||new Float32Array(2),this._offset=t||0}return Object.defineProperty(e.prototype,"x",{get:function(){return this._raw[this._offset]},set:function(e){this._raw[this._offset]=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"y",{get:function(){return this._raw[this._offset+1]},set:function(e){this._raw[this._offset+1]=e},enumerable:!1,configurable:!0}),e.createFromNumber=function(t,r){var n=new Float32Array(2);return n[0]=t,n[1]=r,new e(n)},e.createFromArray=function(t){return 2!==t.length&&Ee.throw(new Error("create Vector error:array length is wrong")),new e(new Float32Array(t))},e.createFromTypedArray=function(t,r){return void 0===r&&(r=0),t.length-r<2&&Ee.throw(new Error("create Vector error:array length is wrong")),new e(t,r)},e.prototype.toArray=function(){return[this._raw[this._offset],this._raw[this._offset+1]]},e.prototype.equal=function(e){return $e.equal(this._raw,this._offset,e._raw,e._offset)},e.prototype.set=function(e){if(2===e._raw.length)this._raw.set(e._raw,this._offset);else for(var t=0;t<2;t++)this._raw[this._offset+t]=e._raw[e._offset+t];return this},e.prototype.setValue=function(e,t){return this._raw[this._offset]=e,this._raw[this._offset+1]=t,this},e.prototype.add=function(t,r){return r=r||new e,$e.add(this._raw,this._offset,t._raw,t._offset,pr._raw,pr._offset),r.set(pr),r},e.prototype.sub=function(t,r){return r=r||new e,$e.sub(this._raw,this._offset,t._raw,t._offset,pr._raw,pr._offset),r.set(pr),r},e.prototype.normalize=function(t){return t=t||new e,$e.normalize(this._raw,this._offset,pr._raw,pr._offset),t.set(pr),t},e.prototype.scale=function(t,r){return r=r||new e,$e.scale(this._raw,this._offset,t,pr._raw,pr._offset),r.set(pr),r},e.prototype.lerp=function(t,r,n){return n=n||new e,$e.lerp(this._raw,this._offset,t._raw,t._offset,r,pr._raw,pr._offset),n.set(pr),n},e.prototype.negate=function(){return this.x=-this.x,this.y=-this.y,this},e.prototype.dot=function(e){return $e.dot(this._raw,this._offset,e._raw,e._offset)},e.prototype.length=function(){return $e.length(this._raw,this._offset)},e.prototype.clone=function(){return e.createFromNumber(this._raw[this._offset+0],this._raw[this._offset+1])},e.prototype.isZero=function(){return $e.isZero(this._raw,this._offset)},e.prototype.getAngle=function(){return $e.getAngle(this._raw,this._offset)},e.prototype.setArray=function(e,t){if(t)for(var r=0;r<4;r+=1)this._raw[this._offset+r]=e[t+r];else this._raw.set(e,this._offset);return this},e}();const cr=ur;var lr="try to set value to read only vector",fr=function(e){function t(t,r){return e.call(this,t,r)||this}return sr(t,e),Object.defineProperty(t.prototype,"x",{get:function(){return this._raw[this._offset]},set:function(e){Ee.error(lr)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"y",{get:function(){return this._raw[this._offset+1]},set:function(e){Ee.error(lr)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"z",{get:function(){return this._raw[this._offset+2]},set:function(e){Ee.error(lr)},enumerable:!1,configurable:!0}),t.prototype.set=function(){return Ee.error(lr),this},t.prototype.setValue=function(){return Ee.error(lr),this},t}(ur);ur.ZERO=new fr(new Float32Array([0,0])),ur.ONE=new fr(new Float32Array([1,1]));var pr=new ur,hr=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},e(t,r)};return function(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),dr=function(){function e(e,t){this._raw=e||new Float32Array(4),this._offset=t||0}return Object.defineProperty(e.prototype,"x",{get:function(){return this._raw[this._offset]},set:function(e){this._raw[this._offset]=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"y",{get:function(){return this._raw[this._offset+1]},set:function(e){this._raw[this._offset+1]=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"z",{get:function(){return this._raw[this._offset+2]},set:function(e){this._raw[this._offset+2]=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"w",{get:function(){return this._raw[this._offset+3]},set:function(e){this._raw[this._offset+3]=e},enumerable:!1,configurable:!0}),e.createFromNumber=function(t,r,n,o){var i=new Float32Array(4);return i[0]=t,i[1]=r,i[2]=n,i[3]=o,new e(i)},e.createFromArray=function(t){return 4!==t.length&&Ee.throw(new Error("create Vector error:array length is wrong")),new e(new Float32Array(t))},e.createFromTypedArray=function(t,r){return void 0===r&&(r=0),t.length-r<4&&Ee.throw(new Error("create Vector error:array length is wrong")),new e(t)},e.prototype.toArray=function(){var e=this._raw;return[e[this._offset+0],e[this._offset+1],e[this._offset+2],e[this._offset+3]]},e.prototype.equal=function(e){return et(this._raw,this._offset,e._raw,e._offset)},e.prototype.set=function(e){return nt(e._raw,e._offset,this._raw,this._offset),this},e.prototype.setValue=function(e,t,r,n){var o=this._raw;return o[this._offset+0]=e,o[this._offset+1]=t,o[this._offset+2]=r,o[this._offset+3]=n,this},e.prototype.add=function(t,r){return r=r||new e,tt(this._raw,this._offset,t._raw,t._offset,mr._raw,mr._offset),r.set(mr),r},e.prototype.sub=function(t,r){return r=r||new e,rt(this._raw,this._offset,t._raw,t._offset,mr._raw,mr._offset),r.set(mr),r},e.prototype.scale=function(t,r){return r=r||new e,function(e,t,r,n,o){n[o]=e[t]*r,n[o+1]=e[t+1]*r,n[o+2]=e[t+2]*r,n[o+3]=e[t+3]*r}(this._raw,this._offset,t,mr._raw,mr._offset),r.set(mr),r},e.prototype.lerp=function(t,r,n){return n=n||new e,function(e,t,r,n,o,i,a){var s=1-o;i[a]=e[t]*s+r[n]*o,i[a+1]=e[t+1]*s+r[n+1]*o,i[a+2]=e[t+2]*s+r[n+2]*o,i[a+3]=e[t+3]*s+r[n+3]*o}(this._raw,this._offset,t._raw,t._offset,r,mr._raw,mr._offset),n.set(mr),n},e.prototype.negate=function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this},e.prototype.dot=function(e){return t=this._raw,r=this._offset,n=e._raw,o=e._offset,t[r]*n[o]+t[r+1]*n[o+1]+t[r+2]*n[o+2]+t[r+3]*n[o+3];var t,r,n,o},e.prototype.isZero=function(){return e=this._raw,t=this._offset,Ke(e[t],0)&&Ke(e[t+1],0)&&Ke(e[t+2],0)&&Ke(e[t+3],0);var e,t},e.prototype.clone=function(){var t=new e;return nt(this._raw,this._offset,t._raw,t._offset),t},e.prototype.setArray=function(e,t){if(t)for(var r=0;r<4;r+=1)this._raw[this._offset+r]=e[t+r];else this._raw.set(e,this._offset);return this},e}();const _r=dr;var yr="try to set value to read only vector",vr=function(e){function t(t,r){return e.call(this,t,r)||this}return hr(t,e),Object.defineProperty(t.prototype,"x",{get:function(){return this._raw[this._offset]},set:function(e){Ee.error(yr)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"y",{get:function(){return this._raw[this._offset+1]},set:function(e){Ee.error(yr)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"z",{get:function(){return this._raw[this._offset+2]},set:function(e){Ee.error(yr)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"w",{get:function(){return this._raw[this._offset+3]},set:function(e){Ee.error(yr)},enumerable:!1,configurable:!0}),t.prototype.set=function(){return Ee.error(yr),this},t.prototype.setValue=function(){return Ee.error(yr),this},t}(dr);dr.ZERO=new vr(new Float32Array([0,0,0,0])),dr.ONE=new vr(new Float32Array([1,1,1,1]));var mr=new dr,gr=new Float32Array(9);gr.set([1,0,0,0,1,0,0,0,1],0);const br=function(){function e(e,t){this._raw=e||new Float32Array(9),this._offset=t||0}return Object.defineProperty(e.prototype,"raw",{get:function(){return this.__raw||(this.__raw=new Float32Array(this._raw.buffer,4*this._offset,9)),this.__raw},enumerable:!1,configurable:!0}),Object.defineProperty(e,"IDENTITY",{get:function(){var t=new e;return t._raw.set(gr),t},enumerable:!1,configurable:!0}),e.createFromArray=function(t){return 9!==t.length&&Ee.throw(new Error("create Matrix Error:array length is wrong")),new e(new Float32Array(t))},e.createFromTypedArray=function(t,r){return void 0===r&&(r=0),t.length-r<9&&Ee.throw(new Error("create Matrix Error:array length is wrong")),new e(t,r)},e.prototype.toArray=function(){for(var e=new Array(9),t=0;t<9;t++)e[t]=this._raw[this._offset+t];return e},e.prototype.translate=function(t,r,n){return n=n||new e,function(e,t,r,n,o,i){var a=e[t+0],s=e[t+1],u=e[t+2],c=e[t+3+0],l=e[t+3+1],f=e[t+3+2],p=e[t+6+0],h=e[t+6+1],d=e[t+6+2];9===e.length?o.set(e,i):o===e&&i===t||(o[i]=a,o[i+1]=s,o[i+2]=u,o[i+3]=c,o[i+4]=l,o[i+5]=f),o[i+6]=a*r+c*n+p,o[i+7]=s*r+l*n+h,o[i+8]=u*r+f*n+d}(this._raw,this._offset,t,r,n._raw,n._offset),n},e.prototype.scale=function(t,r,n){return n=n||new e,function(e,t,r,n,o,i){o[i+0]=r*e[t+0],o[i+1]=r*e[t+1],o[i+3]=n*e[t+3],o[i+4]=n*e[t+4],o===e&&i===t||(o[i+6]=e[t+6],o[i+7]=e[t+7],o[i+8]=e[t+8])}(this._raw,this._offset,t,r,n._raw,n._offset),n},e.prototype.rotate=function(t,r){return r=r||new e,function(e,t,r,n,o){var i=e[t+0],a=e[t+1],s=e[t+2],u=e[t+3],c=e[t+4],l=e[t+5],f=Math.cos(r),p=Math.sin(r);n[o+0]=f*i-p*u,n[o+1]=f*a-p*c,n[o+2]=f*s-p*l,n[o+3]=f*u+p*i,n[o+4]=f*c+p*a,n[o+5]=f*l+p*s,n===e&&o===t||(n[o+6]=e[t+6],n[o+7]=e[t+7],n[o+8]=e[t+8])}(this._raw,this._offset,t,r._raw,r._offset),r},e.prototype.inverse=function(t){return t=t||new e,function(e,t,r,n){var o=e[t+0+0],i=e[t+0+1],a=e[t+0+2],s=e[t+3+0],u=e[t+3+1],c=e[t+3+2],l=e[t+6+0],f=e[t+6+1],p=e[t+6+2],h=u*p-c*f,d=i*p-a*f,_=i*c-a*u,y=1/(o*h-s*d+l*_);r[n+0]=y*h,r[n+1]=-y*d,r[n+2]=y*_,r[n+3]=-y*(s*p-c*l),r[n+4]=y*(o*p-a*l),r[n+5]=-y*(o*c-a*s),r[n+6]=y*(s*f-u*l),r[n+7]=-y*(o*f-i*l),r[n+8]=y*(o*u-i*s)}(this._raw,this._offset,t._raw,t._offset),t},e.prototype.multiply=function(t,r){return r=r||new e,function(e,t,r,n,o,i){var a=e[t+0+0],s=e[t+0+1],u=e[t+0+2],c=e[t+3+0],l=e[t+3+1],f=e[t+3+2],p=e[t+6+0],h=e[t+6+1],d=e[t+6+2],_=r[n+0+0],y=r[n+0+1],v=r[n+0+2],m=r[n+3+0],g=r[n+3+1],b=r[n+3+2],w=r[n+6+0],x=r[n+6+1],E=r[n+6+2];o[i+0]=_*a+y*c+v*p,o[i+1]=_*s+y*l+v*h,o[i+2]=_*u+y*f+v*d,o[i+3]=m*a+g*c+b*p,o[i+4]=m*s+g*l+b*h,o[i+5]=m*u+g*f+b*d,o[i+6]=w*a+x*c+E*p,o[i+7]=w*s+x*l+E*h,o[i+8]=w*u+x*f+E*d}(this._raw,this._offset,t._raw,t._offset,r._raw,r._offset),r},e.prototype.transformPoint=function(e,t){return t=t||new cr,function(e,t,r,n,o,i){var a=r[n+0],s=r[n+1],u=a*e[t+0+2]+s*e[t+3+2]+e[t+6+2];o[i+0]=(a*e[t+0+0]+s*e[t+3+0]+e[t+6+0])/u,o[i+1]=(a*e[t+0+1]+s*e[t+3+1]+e[t+6+1])/u}(this._raw,this._offset,e._raw,e._offset,wr._raw,wr._offset),t.set(wr),t},e.prototype.setArray=function(e,t){if(t)for(var r=0;r<4;r+=1)this._raw[this._offset+r]=e[t+r];else this._raw.set(e,this._offset);return this},e}();var wr=new cr,xr=new Float32Array(16);xr.set([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],0);var Er=function(){function e(e,t){this._raw=e||new Float32Array(16),this._offset=t||0}return Object.defineProperty(e,"IDENTITY",{get:function(){var t=new e;return t._raw.set(xr),t},enumerable:!1,configurable:!0}),e.lookAt=function(t,r,n,o){return o=o||new e,it.lookAt(t._raw,t._offset,r._raw,r._offset,n._raw,n._offset,o._raw,o._offset),o},e.perspective=function(t,r,n,o,i){return i=i||new e,it.perspective(t,r,n,o,i._raw,i._offset),i},e.orthographic=function(t,r,n,o,i,a,s){return s=s||new e,it.orthographic(t,r,n,o,i,a,s._raw,s._offset),s},e.fromQuaternion=function(t,r){return r=r||new e,ot.toMatrix4(t._raw,t._offset,r._raw,r._offset),r},e.createFromArray=function(t){return 16!==t.length&&Ee.throw(new Error("create Matrix Error:array length is wrong")),new e(new Float32Array(t))},e.createFromTypedArray=function(t,r){return void 0===r&&(r=0),t.length-r<16&&Ee.throw(new Error("create Matrix Error:array length is wrong")),new e(t,r)},e.createRotationX=function(t,r){return r=r||new e,it.xRotation(t,r._raw,r._offset),r},e.createRotationY=function(t,r){return r=r||new e,it.yRotation(t,r._raw,r._offset),r},e.createRotationZ=function(t,r){return r=r||new e,it.zRotation(t,r._raw,r._offset),r},e.createRotationAxis=function(t,r,n){return n=n||new e,it.axisRotation(t._raw,t._offset,r,n._raw,n._offset),n},e.composeTRS=function(t,r,n,o){return o=o||new e,it.composeTRS(t._raw,t._offset,r._raw,r._offset,n._raw,n._offset,o._raw,o._offset),o},e.composeTQS=function(t,r,n,o){return o=e.fromQuaternion(r,o),e.composeTRS(t,o,n,o),o},e.composeFromRST3=function(t,r){return r=r||new e,it.composeRST3toRST4(t._raw,t._offset,r._raw,r._offset),r},e.prototype.toArray=function(){for(var e=new Array(16),t=0;t<16;t++)e[t]=this._raw[this._offset+t];return e},e.prototype.translate=function(t,r,n,o){return o=o||new e,it.translate(this._raw,this._offset,t,r,n,o._raw,o._offset),o},e.prototype.scale=function(t,r,n,o){return o=o||new e,it.scale(this._raw,this._offset,t,r,n,o._raw,o._offset),o},e.prototype.xRotate=function(t,r){return r=r||new e,it.xRotate(this._raw,this._offset,t,r._raw,r._offset),r},e.prototype.yRotate=function(t,r){return r=r||new e,it.yRotate(this._raw,this._offset,t,r._raw,r._offset),r},e.prototype.zRotate=function(t,r){return r=r||new e,it.zRotate(this._raw,this._offset,t,r._raw,r._offset),r},e.prototype.axisRotate=function(t,r,n){return n=n||new e,it.axisRotate(this._raw,this._offset,t._raw,t._offset,r,n._raw,n._offset),n},e.prototype.rotateByQuaternion=function(t,r){r=r||new e;var n=Tr;return e.fromQuaternion(t,n),this.multiply(n,r),r},e.prototype.inverse=function(t){return t=t||new e,it.inverse(this._raw,this._offset,t._raw,t._offset),t},e.prototype.transpose=function(t){return t=t||new e,it.transpose(this._raw,this._offset,t._raw,t._offset),t},e.prototype.multiply=function(t,r){return r=r||new e,it.multiply(this._raw,this._offset,t._raw,t._offset,r._raw,r._offset),r},e.prototype.transformVector=function(e,t){return t=t||new _r,it.transformVector(this._raw,this._offset,e._raw,e._offset,Ar._raw,Ar._offset),t.set(Ar),t},e.prototype.transformDirection=function(e,t){return t=t||new Tt,it.transformDirection(this._raw,this._offset,e._raw,e._offset,Or._raw,Or._offset),t.set(Or),t},e.prototype.transformPoint=function(e,t){return t=t||new Tt,it.transformPoint(this._raw,this._offset,e._raw,e._offset,Or._raw,Or._offset),t.set(Or),t},e.prototype.set=function(e){return it.copy(e._raw,e._offset,this._raw,this._offset),this},e.prototype.clone=function(){var t=new e;return it.copy(this._raw,this._offset,t._raw,t._offset),t},e.prototype.decomposeTransRotMatScale=function(e,t,r){return it.decomposeTransRotMatScale(this._raw,this._offset,e._raw,e._offset,t._raw,t._offset,r._raw,r._offset)},e.prototype.setValue=function(e,t,r){return this._raw[this._offset+4*t+r]=e,this},e.prototype.getValue=function(e,t){return this._raw[this._offset+4*e+t]},e.prototype.setColumn=function(e,t){var r=this._offset+4*t;return this._raw[r]=e.x,this._raw[r+1]=e.y,this._raw[r+2]=e.z,this._raw[r+3]=e.w,this},e.prototype.getColumn=function(e,t){t=t||new _r;var r=this._offset+4*e;return t.setValue(this._raw[r],this._raw[r+1],this._raw[r+2],this._raw[r+3]),t},e.prototype.setRow=function(e,t){var r=this._offset+t;return this._raw[r]=e.x,this._raw[r+4]=e.y,this._raw[r+8]=e.z,this._raw[r+12]=e.w,this},e.prototype.getRow=function(e,t){t=t||new _r;var r=this._offset+e;return t.setValue(this._raw[r],this._raw[r+4],this._raw[r+8],this._raw[r+12]),t},e.prototype.setArray=function(e,t){if(t)for(var r=0;r<4;r+=1)this._raw[this._offset+r]=e[t+r];else this._raw.set(e,this._offset);return this},e.prototype.print=function(){for(var e="",t=0;t<4;t++){for(var r=0;r<4;r++)e+=this.getValue(r,t).toPrecision(3)+"\t";e+="\n"}Ee.log(e)},e}();const Sr=Er;var Tr=new Er,Or=new Tt,Ar=new _r,Cr={string:{create:function(e,t){return void 0!==e?e:t}},number:{create:function(e,t){return void 0===e?t:e.startsWith&&e.startsWith("0b")?parseInt(e.substring(2),2):parseFloat(e)}},boolean:{create:function(e,t){return void 0!==e?"false"!==e:t}},array:{create:function(e,t){return void 0!==e?e.split(" "):t}},"number-array":{create:function(e,t){return void 0!==e?e.split(" ").map((function(e){return parseFloat(e)})):t}},color:{create:function(e,t){return void 0===e?t:"#"!==e[0]?e.split(" ").map((function(e){return parseFloat(e)})):void Ee.error("Not support color with start # now !")}},map:{create:function(e,t){return void 0!==e?e.split(",").map((function(e){return e.split(":").map((function(e){return e.trim()}))})):t}},dict:{create:function(e,t){if(void 0===e)return t;var r={};return e.split(",").forEach((function(e){var t,n,o=e.split(":");o.length>2?(t=o[0],o.shift(),n=o.join(":")):(t=o[0],n=o[1]),t&&n&&(r[t.trim()]=n.trim())})),r}},"boolean-dict":{create:function(e,t){if(void 0===e)return t;var r={};return e.split(",").forEach((function(e){var t=e.split(":"),n=t[0],o=t[1];n&&o&&(r[n.trim()]="false"!==o.trim())})),r}},transform:{create:function(e,t,r){return r._getNodeById(e)}},effect:{create:function(e,t,r){return r.assets.getAssetWithState("effect",e,t)}},image:{create:function(e,t,r){return r.assets.getAssetWithState("image",e,t)}},texture:{create:function(e,t,r){return(null==e?void 0:e.startsWith("cube-"))?r.assets.getAssetWithState("cube-texture",e.replace("cube-","")):(null==e?void 0:e.startsWith("video-"))?r.assets.getAssetWithState("video-texture",e.replace("video-","")):(null==e?void 0:e.startsWith("render-"))?r.assets.getAssetWithState("render-texture",e.replace("render-","")):r.assets.getAssetWithState("texture",e,t)}},"cube-texture":{create:function(e,t,r){return r.assets.getAssetWithState("cube-texture",e,t)}},material:{create:function(e,t,r){return r.assets.getAssetWithState("material",e,t)}},geometry:{create:function(e,t,r){return r.assets.getAssetWithState("geometry",e,t)}},"render-texture":{create:function(e,t,r){return r.assets.getAssetWithState("render-texture",e,t)}},"post-process":{create:function(e,t,r){return r.assets.getAssetWithState("post-process",e,t)}},model:{create:function(e,t,r){return r.assets.getAssetWithState("model",e,t)}}};function Mr(e){var t;return!!(null===(t=e)||void 0===t?void 0:t.texture)}function Pr(e){return!!Cr[e]}function Rr(e,t){Cr[e]?Ee.warn("DataValue "+e+" is already existed !"):Cr[e]=t}function Dr(e,t,r,n){var o;return null===(o=Cr[e])||void 0===o?void 0:o.create(t,r,n)}var Nr=function(){function e(e){this._scene=e,this._preUniformStrs={},this._preStateStrs={},this._loadingTexturesCount=0,this._delta=0}return Object.defineProperty(e.prototype,"kanataMaterial",{get:function(){return this._material},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"uniforms",{get:function(){return this._uniforms},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"alphaMode",{set:function(e){var t=this._material;switch(e){case"BLEND":t.blendOn=!0,t.blendSrc=ue.EBlendFactor.SRC_ALPHA,t.blendDst=ue.EBlendFactor.ONE_MINUS_SRC_ALPHA,this.setMacro("WX_USE_BLEND",!0),this.setMacro("WX_USE_ALPHA_CUTOFF",!1);break;case"MASK":t.blendOn=!1,this.setMacro("WX_USE_BLEND",!1),this.setMacro("WX_USE_ALPHA_CUTOFF",!0);break;default:t.blendOn=!1,this.setMacro("WX_USE_BLEND",!1),this.setMacro("WX_USE_ALPHA_CUTOFF",!1)}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"alphaCutOff",{set:function(e){this.setFloat("u_alphaCutoff",e)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"renderQueue",{get:function(){return this._material.renderQueue},set:function(e){this._material.renderQueue=e},enumerable:!1,configurable:!0}),e.prototype.initByEffect=function(e,t){var r=e._createUniforms();if(this._effect=e,e.loadingTextures&&(this._loadingTextures=Object.assign({},e.loadingTextures),this._loadingTexturesCount=Object.keys(this._loadingTextures).length),this._material||(this._material=new(he(this._scene).Material)),this._material.effect=e.kanataEffect,this._material.uniforms=r,this._material.renderQueue=e.description.defaultRenderQueue,this._uniforms=this._material.uniforms,t){var n;for(var o in t){var i=t[o];r.setUniform(o,i);var a=e._getMarcoByUniform(o);a&&void 0!==i&&((n=n||{})[a]=!0)}n&&this._material.changeMacros(n)}},e.prototype.getFloat=function(e){var t;return this._uniforms?null===(t=this._uniforms.getUniform(e))||void 0===t?void 0:t[0]:null},e.prototype.setFloat=function(e,t){return!!this._uniforms&&(this._setUniform(e,[t]),!0)},e.prototype.setVector=function(e,t){return!!this._uniforms&&(this._setUniform(e,t._raw),!0)},e.prototype.getVector=function(e){if(!this._uniforms)return null;var t=this._uniforms.getUniform(e);return t?2===t.length?new cr(t.slice()):3===t.length?new Tt(t.slice()):4===t.length?new _r(t.slice()):null:null},e.prototype.setMatrix=function(e,t){return!!this._uniforms&&(this._setUniform(e,t._raw),!0)},e.prototype.getMatrix=function(e){if(!this._uniforms)return null;var t=this._uniforms.getUniform(e);return t?9===t.length?new br(t.slice()):16===t.length?new Sr(t.slice()):null:null},e.prototype.setTexture=function(e,t){var r,n;return!!this._effect&&(null===(null===(r=this._uniforms)||void 0===r?void 0:r.getUniform(e))?(Ee.warn('Texture named with "'+e+'" no found in effect.'),!1):(this.getTexture(e)===t||(this._setUniform(e,t),(null===(n=this._loadingTextures)||void 0===n?void 0:n[e])&&(delete this._loadingTextures[e],this._loadingTexturesCount-=1)),!0))},e.prototype.setTextureAsset=function(e,t){var r,n;if(!this._effect)return!1;if(null===(null===(r=this._uniforms)||void 0===r?void 0:r.getUniform(e)))return Ee.warn('Texture named with "'+e+'" no found in effect.'),!1;var o=Dr("texture",t,void 0,this._scene);return o.state!==ar.Loading?((null===(n=this._loadingTextures)||void 0===n?void 0:n[e])&&(delete this._loadingTextures[e],this._loadingTexturesCount-=1),void this._uniforms.setUniform(e,Mr(o.value)?o.value.texture:o.value)):(o.state===ar.Loading&&(this._loadingTextures=this._loadingTextures||{},this._loadingTextures[e]||(this._loadingTexturesCount+=1),this._loadingTextures[e]=o),!0)},e.prototype.resetTexture=function(e){if(!this._effect)return null;var t=this._effect.description;if(t.images){this._loadingTexturesCount=0;for(var r=0;r<t.images.length;r++){var n=t.images[r].default;if("string"===n){var o=Dr("texture",n,void 0,this._scene);if((null==o?void 0:o.state)===ar.Loading)this._loadingTextures=this._loadingTextures||{},this._loadingTextures[n]=o,this._loadingTexturesCount+=1;else if(o){this._uniforms.setUniform(n,Mr(o.value)?o.value.texture:o.value);var i=this._effect._getMarcoByUniform(n);i&&this.setMacro(i,!1)}}}}},e.prototype.setFontTexture=function(e,t){return!!this._uniforms&&(this._setUniform(e,t),!0)},e.prototype.getTexture=function(e){return this._effect?this._uniforms.getTexture(e):null},e.prototype._setUniform=function(e,t){var r;this._uniforms.setUniform(e,t);var n=this._effect._getMarcoByUniform(e);n&&this._material.getMacro(n)!==!!t&&this._material.changeMacros(((r={})[n]=!!t,r))},e.prototype.setRenderState=function(e,t){return null!=this._material[e]&&(this._material[e]=t),!0},e.prototype.setRenderStates=function(e){for(var t in e)this.setRenderState(t,e[t]);return!0},e.prototype.clearRenderState=function(e){return null!=this._material[e]&&(this._material[e+"Mask"]=!1),!0},e.prototype.clearRenderStates=function(e){for(var t in e)this.clearRenderState(t);return!0},e.prototype.getRenderState=function(e){return this._material?this._material[e]:void 0},e.prototype.setMacro=function(e,t){var r,n;null===(n=this._material)||void 0===n||n.changeMacros(((r={})[e]=t,r))},e.prototype.setMacros=function(e){var t;null===(t=this._material)||void 0===t||t.changeMacros(e)},e.prototype.getMacro=function(e){var t;return null===(t=this._material)||void 0===t?void 0:t.getMacro(e)},e.prototype._checkTextures=function(e){if(this._loadingTexturesCount&&(this._delta+=e,!(this._delta<200)))for(var t in this._delta=0,this._loadingTextures){var r=this._loadingTextures[t];r.state!==ar.Loading&&this.setTexture(t,Mr(r.value)?r.value.texture:r.value)}},e.prototype.clone=function(){var t,r=new e(this._scene);return r._effect=this._effect,r._loadingTextures=Object.assign({},this._loadingTextures),r._loadingTexturesCount=this._loadingTexturesCount,r._material=null===(t=this._material)||void 0===t?void 0:t.clone(),r._uniforms=r._material.uniforms,r},e.prototype._parseUniforms=function(e){var t,r=this,n=this._preUniformStrs,o=this._material.uniforms,i=this._scene.assets,a=this._effect;e.forEach((function(e){var s=e[0],u=e[1];if(n[s]!==u){r._parseAndSetUniform(i,o,s,u),n[s]=u;var c=a._getMarcoByUniform(s);c&&((t=t||{})[c]=!0)}})),t&&this.setMacros(t)},e.prototype._parseAndSetUniform=function(e,t,r,n){var o=t.descriptor.layout[r];if(o)if(o[0]===ue.EUniformType.SAMPLER)this.setTextureAsset(r,n);else{var i=Dr("number-array",n,void 0,this._scene);i&&t.setUniform(r,i)}},e.prototype._parseRenderStates=function(e){var t=this,r=this._preStateStrs,n=this;e.forEach((function(e){var o=e[0],i=e[1];if(r[o]!==i){switch(o){case"renderQueue":n.renderQueue=Dr("number",i,void 0,t._scene);break;case"cullOn":var a=Dr("boolean",i,void 0,t._scene);n.setRenderState("cullOn",a),a?n.setMacro("WX_USE_CULLON",!0):n.setMacro("WX_USE_CULLON",!1);break;case"cullFace":n.setRenderState("cullFace",Dr("number",i,void 0,t._scene));break;case"depthTestOn":n.setRenderState("depthTestOn",Dr("boolean",i,void 0,t._scene));break;case"depthTestComp":n.setRenderState("depthTestComp",Dr("number",i,void 0,t._scene));break;case"depthTestWrite":n.setRenderState("depthWrite",Dr("boolean",i,void 0,t._scene));break;case"colorWrite":n.setRenderState("colorWrite",Dr("number",i,void 0,t._scene));break;case"alphaMode":n.alphaMode=i;case"alphaCutOff":n.alphaCutOff=Dr("number",i,void 0,t._scene);break;case"stencilTestOn":n.setRenderState("stencilTestOn",Dr("boolean",i,void 0,t._scene));break;case"stencilComp":n.setRenderState("stencilComp",Dr("number",i,void 0,t._scene));break;case"stencilRef":n.setRenderState("stencilRef",Dr("number",i,void 0,t._scene));break;case"stencilReadMask":n.setRenderState("stencilReadMask",Dr("number",i,void 0,t._scene));break;case"stencilWriteMask":n.setRenderState("stencilWriteMask",Dr("number",i,void 0,t._scene));break;case"stencilPass":n.setRenderState("stencilPass",Dr("number",i,void 0,t._scene));break;case"stencilFail":n.setRenderState("stencilFail",Dr("number",i,void 0,t._scene));break;case"stencilZFail":n.setRenderState("stencilZFail",Dr("number",i,void 0,t._scene))}r[o]=i}}))},e.prototype._parseEnvData=function(e){if(e){var t={WX_USE_MAT_ENV:!0};t.WX_USE_IBL_DIFFUSE=e.hasDiffuse,e.hasDiffuse&&this._setUniform("u_diffuseSHMat",e.diffuseSH),t.WX_USE_IBL_SPECULAR=e.hasSpecular,e.hasSpecular&&(t.WX_USE_SPECULAR_RGBD=e.specularRGBD,t.WX_USE_SPECULAR_MIPMAPS=e.specularMipmaps,this._setUniform("u_specularEnvMapMipCountMat",e.specularMipmapCount),this._setUniform("u_specularEnvMapMat",e.specularMap)),this.setMacros(t)}else this.setMacro("WX_USE_MAT_ENV",!1)},e}();const Ir=Nr;function Lr(e,t){if(!t)return{};var r=e.toUpperCase(),n={};return 1===t.texCoord&&(n["WX_"+r+"_USE_UV1"]=!0),2===t.texCoord&&(n["WX_"+r+"_USE_UV2"]=!0),3===t.texCoord&&(n["WX_"+r+"_USE_UV3"]=!0),n}function Fr(e,t){for(var r=0,n=Object.entries(t);r<n.length;r++){var o=n[r],i=o[0],a=o[1];e.setRenderState(i,a)}}var kr,Ur=function(){function e(e,t,r){this.view=new Float32Array(e),this.stride=r/4,this.offset=t/4}return Object.defineProperty(e.prototype,"length",{get:function(){return this.view.length/this.stride},enumerable:!1,configurable:!0}),e.prototype.clearZero=function(e){void 0===e&&(e=1);for(var t=this.view.length/this.stride,r=0;r<t;r++)for(var n=0;n<e;n++)this.setFloat(r,n,0)},e.prototype.setFloat=function(e,t,r){this.view[e*this.stride+this.offset+t]=r},e.prototype.readFloat=function(e,t){return this.view[e*this.stride+this.offset+t]},e.prototype.readVec3=function(e){return new Tt(this.view,e*this.stride+this.offset)},e.prototype.setVec3=function(e,t){this.setFloat(e,0,t.x),this.setFloat(e,1,t.y),this.setFloat(e,2,t.z)},e.prototype.setFloat3=function(e,t,r,n){this.setFloat(e,0,t),this.setFloat(e,1,r),this.setFloat(e,2,n)},e.prototype.normalizeVec3=function(e){var t=[this.readFloat(e,0),this.readFloat(e,1),this.readFloat(e,2)],r=Math.sqrt(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);r>0&&(this.setFloat(e,0,t[0]/r),this.setFloat(e,1,t[1]/r),this.setFloat(e,2,t[2]/r))},e.prototype.readVec2=function(e){return new cr(this.view,e*this.stride+this.offset)},e}(),Br=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},e(t,r)};return function(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),jr=function(){return jr=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},jr.apply(this,arguments)},Vr=function(e,t){for(var r=0,n=t.length,o=e.length;r<n;r++,o++)e[o]=t[r];return e};!function(e){e[e.POINTS=0]="POINTS",e[e.LINES=1]="LINES",e[e.LINE_LOOP=2]="LINE_LOOP",e[e.LINE_STRIP=3]="LINE_STRIP",e[e.TRIANGLES=4]="TRIANGLES",e[e.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",e[e.TRIANGLE_FAN=6]="TRIANGLE_FAN"}(kr||(kr={}));var zr=null,Gr=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.resource=null,t}return Br(t,e),Object.defineProperty(t.prototype,"nodeName",{get:function(){return"Primitive"},enumerable:!1,configurable:!0}),t.prototype.build=function(){var e;this.targetsNode=new $r(null!==(e=this.raw.targets)&&void 0!==e?e:[],this),this.attributesNode=new or(this.raw.attributes,this),this.attributesNode.build()},t.prototype.preload=function(e){var t,r,n,o,i;return r=this,n=void 0,i=function(){var r,n,o,i,a,s,u,c,l,f,p,h,d,_,y,v,m,g,b;return function(e,t){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}}(this,(function(w){switch(w.label){case 0:return this.validate(qr.MorphTargetsCountExceeded),this.validate(qr.UnsupportedPrimitiveType,kr[this.raw.mode]),zr||function(e){var t;(t={})[kr.POINTS]=e.EPrimitiveType.POINTS,t[kr.LINES]=e.EPrimitiveType.LINES,t[kr.LINE_LOOP]=e.EPrimitiveType.ZERO,t[kr.LINE_STRIP]=e.EPrimitiveType.LINE_STRIP,t[kr.TRIANGLES]=e.EPrimitiveType.TRIANGLES,t[kr.TRIANGLE_STRIP]=e.EPrimitiveType.TRIANGLE_STRIP,t[kr.TRIANGLE_FAN]=e.EPrimitiveType.ZERO,zr=t}(he(this.scene)),r=e[0],n=e[1],[4,this.targetsNode.preload()];case 1:return o=w.sent(),[4,this.attributesNode.preload(Vr([o],e))];case 2:if(i=w.sent(),a={vbInfo:i},this.extensionSlot("PrimitiveModifyVertexBufferInfo",a),s=(i=a.vbInfo).buffer.byteLength/i.layout.stride,u=this.findAttribIndex(i,ue.EVertexLayoutUsage.POSITION),c=zr[null!==(t=this.raw.mode)&&void 0!==t?t:kr.TRIANGLES],l="number"==typeof this.raw.material?r[this.raw.material].material.clone():function(e){var t=e.scene._requestTmpObj("gltf-empty-material");if(!t.mat){var r=new Ir(e.scene);r.initByEffect(e.scene.assets.getAsset("effect","standard")),r.setRenderState("cullFace",ue.ECullMode.FRONT),r.setMacro("WX_USE_GLTF",!0),r.renderQueue=1e3,t.mat=r}return t.mat}(this).clone(),p=ue.EIndexType.UINT16,void 0!==this.raw.indices)h=jr({},n[this.raw.indices]),this.extensionSlot("ModifyPrimitiveIndexBufferAccessor",{accessor:h}),s=h.count,h.componentType===Gt.UNSIGNED_BYTE?(f=new Uint16Array(h.count)).set(h.view.subarray(0,h.count)):(f=h.view,h.componentType===Gt.UNSIGNED_INT&&(p=ue.EIndexType.UINT32),f=f.subarray(0,h.count));else for(f=new Uint16Array(s),d=0;d<s;d++)f[d]=d;return _=i.buffer,y=i.macros,v={needNormal:!0},this.extensionSlot("needNormal",v),m=i.lackNormal&&v.needNormal,c===ue.EPrimitiveType.TRIANGLES?((m||i.lackTangent)&&((_=new Float32Array(i.buffer.length)).set(i.buffer),y=jr({},i.macros)),m&&(this.genNormalAttribData(_,f,i,u),tr("NORMAL",y)),i.lackTangent&&-1!==(g=this.retrieveNormalMapUVIndex(i,l))&&(this.genTangentAttribData(_,f,i,u,g),tr("TANGENT",y))):Ee.warn('[GLTF]cannot generate normal or tangent data for primitive type other than "TRIANGLES".\nCurrent primitive type: "'+ue.EPrimitiveType[c]+'".'),function(e,t){for(var r=0,n=Object.entries(t);r<n.length;r++){var o=n[r],i=o[0],a=o[1];e.setMacro(i,a)}}(l,y),l.setRenderState("primitiveType",c),(b=new Vt(this.scene,i.layout,_,f,p)).addSubMesh(s,0),b.setBoundBox(i.boundingBox.max.add(i.boundingBox.min).scale(.5),i.boundingBox.max.sub(i.boundingBox.min),!0),this.resource={geometry:b,material:l,extras:this.raw.extras},[2,this.resource]}}))},new((o=Promise)||(o=Promise))((function(e,t){function a(e){try{u(i.next(e))}catch(e){t(e)}}function s(e){try{u(i.throw(e))}catch(e){t(e)}}function u(t){var r;t.done?e(t.value):(r=t.value,r instanceof o?r:new o((function(e){e(r)}))).then(a,s)}u((i=i.apply(r,n||[])).next())}))},t.prototype.getLoadedResource=function(){return this.resource},t.prototype.findAttribIndex=function(e,t){for(var r=0;r<e.layoutDesc.attributes.length;r++)if(e.layoutDesc.attributes[r].usage==t)return r;return-1},t.prototype.genNormalAttribData=function(e,t,r,n){var o;this.assert("number"==typeof r.normalSlot,"No normal slot specified.");var i=r.layoutDesc.attributes[r.normalSlot],a=r.layoutDesc.attributes[n],s=new Ur(e.buffer,i.offset+e.byteOffset,r.layoutDesc.stride);s.clearZero();var u=new Ur(e.buffer,a.offset+e.byteOffset,r.layoutDesc.stride);this.validate(qr.InvalidIndexBufferLength,t.length%3==0);for(var c=new Array(s.length),l=0;l<t.length/3;l++)for(var f=[t[3*l+0],t[3*l+1],t[3*l+2]],p=[u.readVec3(f[0]),u.readVec3(f[1]),u.readVec3(f[2])],h=p[0].sub(p[1]),d=p[0].sub(p[2]),_=h.cross(d).toArray(),y=0;y<3;y++){for(var v=0;v<3;v++)s.setFloat(f[y],v,s.readFloat(f[y],v)+_[v]);c[f[y]]=null!==(o=c[f[y]])&&void 0!==o?o:1}for(l=0;l<s.length;l++)c[l]?s.normalizeVec3(l):s.setFloat3(l,0,0,0)},t.prototype.retrieveNormalMapUVIndex=function(e,t){return null==t.getTexture("u_normalMap")?-1:this.findAttribIndex(e,ue.EVertexLayoutUsage.UV0)},t.prototype.genTangentAttribData=function(e,t,r,n,o){var i;this.assert("number"==typeof r.tangentSlot,"No tangent slot specified.");var a=r.layoutDesc.attributes[r.tangentSlot],s=r.layoutDesc.attributes[r.normalSlot],u=r.layoutDesc.attributes[n],c=r.layoutDesc.attributes[o],l=new Ur(e.buffer,a.offset+e.byteOffset,r.layoutDesc.stride),f=new Ur(e.buffer,s.offset+e.byteOffset,r.layoutDesc.stride);l.clearZero();var p=new Ur(e.buffer,u.offset+e.byteOffset,r.layoutDesc.stride),h=new Ur(e.buffer,c.offset+e.byteOffset,r.layoutDesc.stride);this.validate(qr.InvalidIndexBufferLength,t.length%3==0);for(var d=new Array(l.length),_=0;_<t.length/3;_++){var y=[t[3*_+0],t[3*_+1],t[3*_+2]],v=[p.readVec3(y[0]),p.readVec3(y[1]),p.readVec3(y[2])],m=[h.readVec2(y[0]),h.readVec2(y[1]),h.readVec2(y[2])],g=v[0].sub(v[1]),b=v[0].sub(v[2]),w=m[0].sub(m[1]),x=m[0].sub(m[2]),E=w.x*x.y-w.y*x.x,S=Tt.createFromNumber(0,0,0);if(Math.abs(E)>0){var T=[x.y,-w.y];S=g.scale(T[0]).add(b.scale(T[1]))}for(var O=0;O<3;O++){for(var A=0;A<3;A++)l.setFloat(y[O],A,l.readFloat(y[O],A)+S.get(A));d[y[O]]=null!==(i=d[y[O]])&&void 0!==i?i:1}}for(_=0;_<l.length;_++)if(d[_]){S=l.readVec3(_);var C=f.readVec3(_),M=C.cross(S).cross(C).normalize();l.setVec3(_,M),l.setFloat(_,3,1)}else l.setFloat3(_,0,0,0)},t}(qe);const Wr=Gr;var Xr,Hr,qr;!function(e){e[e.TextureSource=10001]="TextureSource",e[e.SkinAccessor=10101]="SkinAccessor",e[e.NodeWeights=10201]="NodeWeights",e[e.MorphAttrib=10301]="MorphAttrib",e[e.UVSlot=10401]="UVSlot",e[e.JointSlot=10402]="JointSlot",e[e.WeightSlot=10403]="WeightSlot",e[e.MorphTargetsCount=10501]="MorphTargetsCount",e[e.PrimitiveType=10502]="PrimitiveType",e[e.IndexBufferLength=10503]="IndexBufferLength",e[e.SparseAccessor=10601]="SparseAccessor",e[e.NormalizedAccessor=10602]="NormalizedAccessor"}(Hr||(Hr={})),function(e){e.UndefinedTextureSource={validate:function(e){return"number"==typeof e.source},id:Hr.TextureSource,msg:"No texture source specified."},e.SkinAccessorNotCompact={id:Hr.SkinAccessor,msg:"Invalid inverse matrices accessor: not a compact accessor."},e.UnsupportedNodeWeights={validate:function(e){return void 0===e.weights},id:Hr.NodeWeights,msg:"Node weights not supported."},e.UnsupportedMorphAttrib={id:Hr.MorphAttrib,msg:"Unsupported morph attrib: $0."},e.UnsupportedUVSlot={validate:function(e){for(var t=0,r=Object.entries(e);t<r.length;t++){var n=r[t],o=n[0];if(n[1],o.startsWith("TEXCOORD_")&&o.charCodeAt(9)>=52)return!1}return!0},id:Hr.UVSlot,msg:"Unsupported UV slot in attributes."},e.UnsupportedJointSlot={validate:function(e){for(var t=0,r=Object.entries(e);t<r.length;t++){var n=r[t],o=n[0];if(n[1],o.startsWith("JOINTS_")&&o.charCodeAt(7)>=51)return!1}return!0},id:Hr.JointSlot,msg:"Unsupported joint slot in attributes."},e.UnsupportedWeightSlot={validate:function(e){for(var t=0,r=Object.entries(e);t<r.length;t++){var n=r[t],o=n[0];if(n[1],o.startsWith("WEIGHTS_")&&o.charCodeAt(8)>=51)return!1}return!0},id:Hr.WeightSlot,msg:"Unsupported weight slot in attributes."},e.MorphTargetsCountExceeded={validate:function(e){return!e.targets||e.targets.length<=8},id:Hr.MorphTargetsCount,msg:"Too many morph targets(>8)."},e.UnsupportedPrimitiveType={validate:function(e){return e.mode!==kr.LINE_LOOP&&e.mode!==kr.TRIANGLE_FAN},id:Hr.PrimitiveType,msg:"Primitive mode not supported: $0."},e.InvalidIndexBufferLength={id:Hr.IndexBufferLength,msg:"Primitive index buffer length not dividable by 3."},e.UnsupportedSparseAccessor={validate:function(e){return!e.sparse},id:Hr.SparseAccessor,msg:"Sparse accessors are not supported."},e.UnsupportedNormalizedAccessor={validate:function(e){return!e.normalized},id:Hr.NormalizedAccessor,msg:"Normalized accessors are not supported."}}(qr||(qr={}));var Yr=((Xr={})[Hr.TextureSource]=qr.UndefinedTextureSource,Xr[Hr.SkinAccessor]=qr.SkinAccessorNotCompact,Xr[Hr.NodeWeights]=qr.UnsupportedNodeWeights,Xr[Hr.MorphAttrib]=qr.UnsupportedMorphAttrib,Xr[Hr.UVSlot]=qr.UnsupportedUVSlot,Xr[Hr.JointSlot]=qr.UnsupportedJointSlot,Xr[Hr.WeightSlot]=qr.UnsupportedWeightSlot,Xr[Hr.MorphTargetsCount]=qr.MorphTargetsCountExceeded,Xr[Hr.PrimitiveType]=qr.UnsupportedPrimitiveType,Xr[Hr.IndexBufferLength]=qr.InvalidIndexBufferLength,Xr[Hr.SparseAccessor]=qr.UnsupportedSparseAccessor,Xr[Hr.NormalizedAccessor]=qr.UnsupportedNormalizedAccessor,Xr),Zr=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},e(t,r)};return function(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Kr=["POSITION","NORMAL","TANGENT"],Qr=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.resource=null,t}return Zr(t,e),Object.defineProperty(t.prototype,"nodeName",{get:function(){return"Targets"},enumerable:!1,configurable:!0}),t.prototype.build=function(){},t.prototype.preload=function(){return e=this,t=void 0,n=function(){var e,t,r,n,o,i;return function(e,t){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}}(this,(function(a){for(e={},t=0;t<this.raw.length;t++)for(r=this.raw[t],n=0,o=Object.keys(r);n<o.length;n++)i=o[n],this.validate(qr.UnsupportedMorphAttrib,-1!==Kr.indexOf(i),i),e["MORPH_"+t+"_"+i]=r[i];return this.resource={attributes:e},[2,this.resource]}))},new((r=Promise)||(r=Promise))((function(o,i){function a(e){try{u(n.next(e))}catch(e){i(e)}}function s(e){try{u(n.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}u((n=n.apply(e,t||[])).next())}));var e,t,r,n},t.prototype.getLoadedResource=function(){return this.resource},t}(qe);const $r=Qr;var Jr;function en(){if(!Jr){for(var e=Xe().slice(),t=0,r=Kr;t<r.length;t++){for(var n=r[t],o=Ge().slice(),i="",a=0;a<32;a++){var s=Be().slice();e+=s=tn(s,n,a);var u=Ve().slice();u=rn(u=tn(u,n,a),"weight_index",Math.floor(a/4)),i+=u=rn(u,"weight_sub",String.fromCharCode(119+(a+1)%4))}o=rn(o,"func_name","morph"+n),o=rn(o,"name_uppercase",n),o=rn(o,"func_body",i),e+=o=rn(o,"func_type","vec"+er(n))}Jr=e}return Jr}function tn(e,t,r){return e=rn(e,"name_uppercase",t),e=rn(e,"name_lowercase",t.toLowerCase()),rn(e,"index",r)}function rn(e,t,r){return e.replace(new RegExp("\\$\\{"+t+"\\}","g"),r.toString())}Me("simple",(function(e){return e.createEffect({name:"simple",properties:[{key:"u_baseColorFactor",type:ue.EUniformType.FLOAT4,default:[1,1,1,1]},{key:"u_alphaCutoff",type:ue.EUniformType.FLOAT,default:[.5]},{key:"u_uvTransform",type:ue.EUniformType.MAT4,default:[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}],images:[{key:"u_baseColorMap",default:"white",macro:"WX_USE_BASECOLORMAP"}],defaultRenderQueue:2e3,passes:[{renderStates:{cullOn:!0,blendOn:!1,depthWrite:!0,cullFace:ue.ECullMode.FRONT},lightMode:"ForwardBase",useMaterialRenderStates:!0,shaders:[0,1]}],shaders:["#version 100\n\n  uniform highp mat4 u_view;\n  uniform highp mat4 u_viewInverse;\n  uniform highp mat4 u_vp;\n  uniform highp mat4 u_projection;\n  uniform mat4 u_lightSpaceMatrix;\n  uniform vec4 u_fogInfos;\n  uniform vec3 u_fogColor;\n  uniform float u_gameTime;\n  uniform float u_aspect;\n  uniform vec3 u_ambientLight;\n  uniform vec3 u_lightDir;\n  uniform vec3 u_lightColor;\n  uniform vec3 u_shadowColor;\n  uniform float u_shadowStrength;\n  uniform float u_shadowBias;\n  uniform float u_lightWidthPCSS;\n  uniform float u_blockSizePCSS;\n  uniform vec4 u_csmFarBounds;\n  uniform vec4 u_shadowTilingOffsets[4];\n  uniform mat4 u_csmLightSpaceMatrices[4];\n  uniform vec3 u_SH[9];\n\n  uniform highp mat4 u_world;\n  uniform vec4 u_lightMapScaleOffset;\n\n  "+en()+"\n\n  "+ke()+"\n  \n  attribute vec3 a_position;\n  attribute highp vec2 a_texCoord;\n  attribute highp vec2 a_texCoord_1;\n\n  varying highp vec2 v_UV;\n  varying highp vec2 v_UV1;\n  \n  #ifdef WX_USE_COLOR_0\n      attribute vec3 a_color;\n      varying highp vec3 v_Color;\n  #endif\n  \n  void main()\n  {\n    v_UV = a_texCoord;\n    v_UV1 = a_texCoord_1;\n\n    #ifdef WX_USE_COLOR_0\n        v_Color = a_color;\n    #endif\n    \n    vec3 morphedPos = morphPOSITION(a_position);\n\n    vec4 worldPosition = getSkinningWorldPosition(vec4(morphedPos, 1.0));\n    // vec4 worldPosition = getSkinningWorldPosition(vec4(a_position, 1.0));\n\n    gl_Position = u_projection * u_view * worldPosition;\n  }","#version 100\n  precision mediump float;\n  precision highp int;\n  varying highp vec2 v_UV;\n  varying highp vec2 v_UV1;\n\n  #ifdef WX_USE_ALPHA_CUTOFF\n    uniform float u_alphaCutoff;\n  #endif\n\n\n  #ifdef WX_USE_COLOR_0\n    varying highp vec3 v_Color;\n  #endif\n      \n    uniform highp vec4 u_baseColorFactor;\n\n  #ifdef WX_USE_BASECOLORMAP\n    uniform sampler2D u_baseColorMap;\n    uniform mat3 u_baseColorMapTransform;\n  #endif\n\n  #ifdef WX_USE_UVTRANSFORM\n    uniform mat4 u_uvTransform;\n  #endif\n\n  void main()\n  {\n  #ifdef WX_USE_BASECOLORMAP\n    #ifdef WX_BASECOLORMAP_USE_UV1\n      vec2 uvBaseColor = v_UV1;\n    #elif defined(WX_BASECOLORMAP_USE_UV2)\n      vec2 uvBaseColor = v_UV2;\n    #elif defined(WX_BASECOLORMAP_USE_UV3)\n      vec2 uvBaseColor = v_UV3;\n    #else\n      vec2 uvBaseColor = v_UV;\n    #endif\n\n    #ifdef WX_USE_UVTRANSFORM_BASECOLOR\n      uvBaseColor = ( u_uvTransform * vec4( uvBaseColor, 1.0, 1.0 ) ).xy;\n    #endif\n\n    vec4 baseColor = texture2D(u_baseColorMap, uvBaseColor) * u_baseColorFactor;\n  #else\n    vec4 baseColor = u_baseColorFactor;\n  #endif\n\n  #ifdef WX_USE_ALPHA_CUTOFF\n    if (baseColor.a < u_alphaCutoff) {\n      discard;\n    } else {\n      #ifndef WX_USE_GLTF\n        baseColor.a = 1.0;\n      #endif\n    }\n  #endif\n\n  #ifdef WX_USE_COLOR_0\n    baseColor = baseColor * vec4(pow(v_Color, vec3(2.2)), 1.0);\n  #endif\n\n  #ifdef WX_PP_ACTIVE\n    // removeGammaCorrection\n    gl_FragData[0] = vec4(pow(baseColor.rgb, vec3(2.2)), baseColor.a);\n  #else\n    gl_FragData[0] = baseColor;\n  #endif\n\n  }  \n    "]})}));const nn="\nvec4 ObjectToWorldPosition(vec4 point1)\n{\n    return u_world * point1;\n}\n\nmat4 rotation3dY(float angle) {\n\tfloat s = sin(angle);\n\tfloat c = cos(angle);\n\n\treturn mat4(\n\t\tc, 0.0, -s, 0.0,\n\t\t0.0, 1.0, 0.0, 0.0,\n\t\ts, 0.0, c, 0.0,\n    0.0, 0.0, 0.0, 1.0\n\t);\n}\n\n\nmat4 rotation3dX(float angle) {\n\tfloat s = sin(angle);\n\tfloat c = cos(angle);\n\n\treturn mat4(\n\t\t1.0, 0.0, 0.0, 0.0,\n\t\t0.0, c, s, 0.0,\n\t\t0.0, -s, c, 0.0,\n    0.0, 0.0, 0.0, 1.0\n\t);\n}\n\nmat4 BuildTranslation(vec3 delta)\n{\n    mat4 m;\n    m[0][0] = 1.0;\n    m[1][1] = 1.0;\n    m[2][2] = 1.0;\n    m[3] = vec4(delta, 1.0);\n    return m;\n}\n\nmat3 transpose(mat3 m) {\n    return mat3(m[0][0], m[1][0], m[2][0],\n            m[0][1], m[1][1], m[2][1],\n            m[0][2], m[1][2], m[2][2]);\n}\n\nmat4 transpose4(mat4 m) {\n    return mat4(m[0][0], m[1][0], m[2][0], m[3][0],\n                m[0][1], m[1][1], m[2][1], m[3][1],\n                m[0][2], m[1][2], m[2][2], m[3][2],\n                m[0][3], m[1][3], m[2][3], m[3][3]);\n  }\n\nmat3 inverse(mat3 m) {\n    float a00 = m[0][0], a01 = m[0][1], a02 = m[0][2];\n    float a10 = m[1][0], a11 = m[1][1], a12 = m[1][2];\n    float a20 = m[2][0], a21 = m[2][1], a22 = m[2][2];\n\n    float b01 = a22 * a11 - a12 * a21;\n    float b11 = -a22 * a10 + a12 * a20;\n    float b21 = a21 * a10 - a11 * a20;\n\n    float det = a00 * b01 + a01 * b11 + a02 * b21;\n\n    return mat3(b01, (-a22 * a01 + a02 * a21), (a12 * a01 - a02 * a11),\n                b11, (a22 * a00 - a02 * a20), (-a12 * a00 + a02 * a10),\n                b21, (-a21 * a00 + a01 * a20), (a11 * a00 - a01 * a10)) / det;\n}\n\nmat4 inverse4(mat4 m) {\n    float\n        a00 = m[0][0], a01 = m[0][1], a02 = m[0][2], a03 = m[0][3],\n        a10 = m[1][0], a11 = m[1][1], a12 = m[1][2], a13 = m[1][3],\n        a20 = m[2][0], a21 = m[2][1], a22 = m[2][2], a23 = m[2][3],\n        a30 = m[3][0], a31 = m[3][1], a32 = m[3][2], a33 = m[3][3],\n  \n        b00 = a00 * a11 - a01 * a10,\n        b01 = a00 * a12 - a02 * a10,\n        b02 = a00 * a13 - a03 * a10,\n        b03 = a01 * a12 - a02 * a11,\n        b04 = a01 * a13 - a03 * a11,\n        b05 = a02 * a13 - a03 * a12,\n        b06 = a20 * a31 - a21 * a30,\n        b07 = a20 * a32 - a22 * a30,\n        b08 = a20 * a33 - a23 * a30,\n        b09 = a21 * a32 - a22 * a31,\n        b10 = a21 * a33 - a23 * a31,\n        b11 = a22 * a33 - a23 * a32,\n  \n        det = b00 * b11 - b01 * b10 + b02 * b09 + b03 * b08 - b04 * b07 + b05 * b06;\n  \n    return mat4(\n        a11 * b11 - a12 * b10 + a13 * b09,\n        a02 * b10 - a01 * b11 - a03 * b09,\n        a31 * b05 - a32 * b04 + a33 * b03,\n        a22 * b04 - a21 * b05 - a23 * b03,\n        a12 * b08 - a10 * b11 - a13 * b07,\n        a00 * b11 - a02 * b08 + a03 * b07,\n        a32 * b02 - a30 * b05 - a33 * b01,\n        a20 * b05 - a22 * b02 + a23 * b01,\n        a10 * b10 - a11 * b08 + a13 * b06,\n        a01 * b08 - a00 * b10 - a03 * b06,\n        a30 * b04 - a31 * b02 + a33 * b00,\n        a21 * b02 - a20 * b04 - a23 * b00,\n        a11 * b07 - a10 * b09 - a12 * b06,\n        a00 * b09 - a01 * b07 + a02 * b06,\n        a31 * b01 - a30 * b03 - a32 * b00,\n        a20 * b03 - a21 * b01 + a22 * b00) / det;\n  }\n",on="#version 100\n\nprecision highp float;\nprecision highp int;\n\nuniform highp mat4 u_world;\nuniform highp mat4 u_view;\nuniform highp mat4 u_viewInverse;\nuniform highp mat4 u_projection;\n\nattribute vec3 a_position;\nattribute highp vec2 a_texCoord;\n#ifdef WX_USE_UV1\nattribute highp vec2 a_texCoord_1;\n#endif\n#ifdef WX_USE_UV2\nattribute highp vec2 a_texCoord_2;\n#endif\n#ifdef WX_USE_UV3\nattribute highp vec2 a_texCoord_3;\n#endif\n#ifdef WX_USE_NORMAL\n  attribute highp vec3 a_normal;\n  #ifdef WX_USE_TANGENT\n    attribute highp vec4 a_tangent;\n  #endif\n#endif\n\nvarying highp vec2 v_UV;\n#ifdef WX_USE_UV1\nvarying highp vec2 v_UV1;\n#endif\n#ifdef WX_USE_UV2\nvarying highp vec2 v_UV2;\n#endif\n#ifdef WX_USE_UV3\nvarying highp vec2 v_UV3;\n#endif\nvarying highp vec3 v_ViewPosition;\n\n#ifdef WX_USE_COLOR_0\n    attribute vec3 a_color;\n    varying highp vec3 v_Color;\n#endif\n\n#ifdef WX_USE_NORMAL\n  varying highp vec3 v_Normal;\n  #ifdef WX_USE_TANGENT\n    varying highp vec3 v_Tangent;\n    varying highp vec3 v_BitTangent;\n  #endif\n#endif\n\n#ifdef WX_USE_TRANSMISSION\n  varying highp vec3 v_WorldPosition;\n#else\n  #ifdef WX_RECEIVE_SHADOW\n    varying highp vec3 v_WorldPosition;\n  #endif\n#endif\n\n#ifdef WX_USE_MAIN_DIR_LIGHT\n  uniform vec3 u_mainLightDir;\n\n  varying highp vec3 v_MainLightDir;\n#endif\n\n#ifdef WX_USE_ADD_LIGHTS\n  uniform vec4 u_addLightsInfo[4];\n  uniform vec3 u_addLightsPos[4];\n  uniform vec3 u_addLightsDir[4];\n\n  varying highp vec3 v_AddLightsDir[WX_ADD_LIGHTS_COUNT];\n  varying highp vec3 v_AddLightsPos[WX_ADD_LIGHTS_COUNT];\n#endif\n\n"+nn+ke()+en()+"\nvoid main()\n{\n#ifdef WX_SKINNED\n    mat4 boneMat = getBoneMat();\n    mat4 modelViewMatrix = u_view * boneMat;\n#else\n    mat4 modelViewMatrix = u_view * u_world;\n#endif\n    mat3 viewMatrixMat3 = mat3(u_view);\n    mat3 normalMatrix = mat3(modelViewMatrix);\n    // TODO ModleViewMatrix Inverse TransposeMatrix\n    // mat3 normalMatrix = transpose(inverse(mat3(modelViewMatrix)));\n\n    vec3 morphedPosition = morphPOSITION(a_position);\n    vec4 mvPosition = modelViewMatrix * vec4(morphedPosition, 1.0);\n\n    // varing\n    v_UV = a_texCoord;\n#ifdef WX_USE_UV1\n    v_UV1 = a_texCoord_1;\n#endif\n#ifdef WX_USE_UV2\n    v_UV2 = a_texCoord_2;\n#endif\n#ifdef WX_USE_UV3\n    v_UV3 = a_texCoord_3;\n#endif\n    v_ViewPosition = mvPosition.xyz;\n\n#ifdef WX_USE_COLOR_0\n    v_Color = a_color;\n#endif\n\n#ifdef WX_USE_TRANSMISSION\n    v_WorldPosition = (u_world * vec4(a_position, 1.0)).xyz;\n#else\n    #ifdef WX_RECEIVE_SHADOW\n        v_WorldPosition = (u_world * vec4(a_position, 1.0)).xyz;\n    #endif\n#endif\n\n#ifdef WX_USE_NORMAL\n    v_Normal = normalize(vec3(normalMatrix * a_normal));\n    #ifdef WX_USE_TANGENT\n        vec3 transformedTangent = (modelViewMatrix * vec4(a_tangent.xyz, 0.0)).xyz;\n        v_Tangent = normalize( transformedTangent );\n        v_BitTangent = normalize(cross(v_Normal, v_Tangent) * a_tangent.w);\n    #endif\n#endif\n\n#ifdef WX_USE_MAIN_DIR_LIGHT\n    // TransformDirection\n    vec3 lightDir = u_mainLightDir;\n\n    v_MainLightDir = normalize(viewMatrixMat3 * lightDir);\n#endif\n\n#ifdef WX_USE_ADD_LIGHTS\n    for(int i = 0; i < WX_ADD_LIGHTS_COUNT; ++i)\n    {\n      vec4 addLightInfo = u_addLightsInfo[i];\n      if (addLightInfo.x == 0.0) {\n        // TransformDirection\n        vec3 addLightDir = u_addLightsDir[i];\n        v_AddLightsDir[i] = normalize(viewMatrixMat3 * addLightDir);\n      } else if (addLightInfo.x == 1.0) {\n        vec3 addlightPos = u_addLightsPos[i];\n\n        // ApplyMatrix\n        v_AddLightsPos[i] = (u_view * vec4(addlightPos, 1.0)).xyz;\n      } else if (addLightInfo.x == 2.0) {\n        vec3 addLightDir = u_addLightsDir[i];\n\n        // TransformDirection\n        v_AddLightsDir[i] = normalize(viewMatrixMat3 * addLightDir);\n        // ApplyMatrix\n        v_AddLightsPos[i] = (u_view * vec4(u_addLightsPos[i], 1.0)).xyz;\n      }\n    }\n#endif\n\n    gl_Position = u_projection * mvPosition;\n\n}\n";Me("standard",(function(e){return e.createEffect({name:"standard",defaultRenderQueue:2e3,passes:[{renderStates:{blendOn:!1,depthWrite:!0,cullOn:!0,cullFace:ue.ECullMode.FRONT},lightMode:"ForwardBase",useMaterialRenderStates:!0,shaders:[0,1]}],properties:[{key:"u_baseColorFactor",type:ue.EUniformType.FLOAT4,default:[1,1,1,1]},{key:"u_metallicRoughnessValues",type:ue.EUniformType.FLOAT2,default:[0,1]},{key:"u_normalScale",type:ue.EUniformType.FLOAT,default:[1]},{key:"u_emissiveFactor",type:ue.EUniformType.FLOAT3,default:[0,0,0]},{key:"u_occlusionStrength",type:ue.EUniformType.FLOAT,default:[1]},{key:"u_specularFactor",type:ue.EUniformType.FLOAT3,default:[1,1,1]},{key:"u_glossinessFactor",type:ue.EUniformType.FLOAT,default:[1]},{key:"u_ior",type:ue.EUniformType.FLOAT,default:[1.5]},{key:"u_clearcoatFactor",type:ue.EUniformType.FLOAT,default:[0]},{key:"u_clearcoatRoughnessFactor",type:ue.EUniformType.FLOAT,default:[0]},{key:"u_alphaCutoff",type:ue.EUniformType.FLOAT,default:[.5]},{key:"u_diffuseSHMat",type:ue.EUniformType.FLOAT3,num:9,default:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]},{key:"u_sheenColorFactor",type:ue.EUniformType.FLOAT3,default:[0,0,0]},{key:"u_sheenRoughnessFactor",type:ue.EUniformType.FLOAT,default:[0]},{key:"u_uvTransform",type:ue.EUniformType.MAT4,default:[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]},{key:"u_normalMapTransform",type:ue.EUniformType.MAT4,default:[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}],images:[{key:"u_brdfLUT",default:"brdf-lut"},{key:"u_baseColorMap",default:"white",macro:"WX_USE_BASECOLORMAP"},{key:"u_metallicRoughnessMap",default:"green",macro:"WX_USE_METALROUGHNESSMAP"},{key:"u_normalMap",default:"white",macro:"WX_USE_NORMALMAP"},{key:"u_emissiveMap",default:"white",macro:"WX_USE_EMISSIVEMAP"},{key:"u_occlusionMap",default:"white",macro:"WX_USE_OCCLUSIONMAP"},{key:"u_clearcoatMap",default:"white",macro:"WX_USE_CLEARCOATMAP"},{key:"u_specularGlossinessMap",default:"white",macro:"WX_USE_SPECULARGLOSSINESSMAP"},{key:"u_transmissionMap",default:"white",macro:"WX_USE_TRANSMISSIONMAP"},{key:"u_sheenColorMap",default:"white",macro:"WX_USE_SHEENCOLORMAP"},{key:"u_clearcoatRoughnessMap",default:"white",macro:"WX_USE_CLEARCOATROUGHNESSMAP"},{key:"u_clearcoatNormalMap",default:"white",macro:"WX_USE_CLEARCOATNORMALMAP"},{key:"u_sheenRoughnessMap",default:"white",macro:"WX_USE_SHEENROUGHNESSMAP"},{key:"u_specularEnvMapMat",default:"white"}],shaders:[on,'#version 100\n\n// Temp fix Uniform limit, remove lut\n#define WX_USE_BRDFLUT true\n\nprecision highp float;\nprecision highp int;\n\nuniform float u_gameTime;\nuniform highp mat4 u_world;\nuniform highp mat4 u_view;\nuniform highp mat4 u_projection;\nuniform highp mat4 u_viewInverse;\n\nvarying highp vec2 v_UV;\nvarying highp vec2 v_UV1;\nvarying highp vec3 v_ViewPosition;\n\n#ifdef WX_USE_COLOR_0\n    varying highp vec3 v_Color;\n#endif\n\n#ifdef WX_USE_NORMAL\n  varying highp vec3 v_Normal;\n\n  #ifdef WX_USE_TANGENT\n      varying highp vec3 v_Tangent;\n      varying highp vec3 v_BitTangent;\n  #endif\n#endif\n\n#ifdef WX_USE_TRANSMISSION\n  varying highp vec3 v_WorldPosition;\n#else\n  #ifdef WX_RECEIVE_SHADOW\n    varying highp vec3 v_WorldPosition;\n  #endif\n#endif\n\n#ifdef WX_USE_MAIN_DIR_LIGHT\n  varying highp vec3 v_MainLightDir;\n#endif\n\n#ifdef WX_USE_ADD_LIGHTS\n  varying highp vec3 v_AddLightsDir[WX_ADD_LIGHTS_COUNT];\n  varying highp vec3 v_AddLightsPos[WX_ADD_LIGHTS_COUNT];\n#endif\n\n\n#define PI 3.141592653589793\n#define PI2 6.283185307179586\n#define PI_HALF 1.5707963267948966\n#define RECIPROCAL_PI 0.3183098861837907\n#define RECIPROCAL_PI2 0.15915494309189535\n#define EPSILON 1e-6\n#define EPSILON_ATAN 1e-2\n\n#define WX_MANUAL_SRGB true\n#define WX_SRGB_FAST_APPROXIMATION true\n\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n\nfloat pow2( const in float x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }\nfloat average( const in vec3 color ) { return dot( color, vec3( 0.3333 ) ); }\n\nstruct GeometricContext {\n\tvec3 position;\n\tvec3 normal;\n\tvec3 viewDir;\n\tvec3 clearcoatNormal;\n};\n\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\n\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\n\nuniform vec4 u_ambientLightColorIns;\nuniform vec3 u_mainLightDir;\nuniform vec4 u_mainLightColorIns;\n\nuniform vec3 u_addLightsPos[4];\nuniform vec3 u_addLightsDir[4];\nuniform vec4 u_addLightsColorIns[4];\nuniform vec4 u_addLightsInfo[4];\n\n\nvec4 SRGBtoLINEAR(vec4 srgbIn)\n{\n#ifdef WX_MANUAL_SRGB\n\n    #ifdef WX_SRGB_FAST_APPROXIMATION\n        vec3 linOut = pow(srgbIn.xyz,vec3(2.2));\n    #else //SRGB_FAST_APPROXIMATION\n        vec3 bLess = step(vec3(0.04045),srgbIn.xyz);\n        vec3 linOut = mix( srgbIn.xyz/vec3(12.92), pow((srgbIn.xyz+vec3(0.055))/vec3(1.055),vec3(2.4)), bLess );\n    #endif //SRGB_FAST_APPROXIMATION\n\n    return vec4(linOut, srgbIn.w);;\n\n#else //MANUAL_SRGB\n    \n    return srgbIn;\n\n#endif //MANUAL_SRGB\n}\n\nvec3 gammaCorrection(vec3 color) {\n  return pow(color, vec3(1.0 / 2.2));\n}\n\nvec3 removeGammaCorrection(vec3 color) {\n  return pow(color, vec3(2.2));\n}\n\n\n// https://github.com/KhronosGroup/glTF/blob/master/extensions/2.0/Vendor/EXT_lights_image_based/README.md#rgbd\nvec3 decodeRGBD(in vec4 color){\n\t\treturn color.rgb / color.a;\n}\n\nfloat getFace( vec3 direction ) {\n\tvec3 absDirection = abs( direction );\n\tfloat face = - 1.0;\n\tif ( absDirection.x > absDirection.z ) {\n\t\tif ( absDirection.x > absDirection.y )\n\t\t\tface = direction.x > 0.0 ? 0.0 : 3.0;\n\t\telse\n\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t} else {\n\t\tif ( absDirection.z > absDirection.y )\n\t\t\tface = direction.z > 0.0 ? 2.0 : 5.0;\n\t\telse\n\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t}\n\treturn face;\n}\nvec2 getUV( vec3 direction, float face ) {\n\tvec2 uv;\n\tif ( face == 0.0 ) {\n\t\tuv = vec2( direction.z, direction.y ) / abs( direction.x ); // pos x\n\t} else if ( face == 1.0 ) {\n\t\tuv = vec2( - direction.x, - direction.z ) / abs( direction.y ); // pos y\n\t} else if ( face == 2.0 ) {\n\t\tuv = vec2( - direction.x, direction.y ) / abs( direction.z ); // pos z\n\t} else if ( face == 3.0 ) {\n\t\tuv = vec2( - direction.z, direction.y ) / abs( direction.x ); // neg x\n\t} else if ( face == 4.0 ) {\n\t\tuv = vec2( - direction.x, direction.z ) / abs( direction.y ); // neg y\n\t} else {\n\t\tuv = vec2( direction.x, direction.y ) / abs( direction.z ); // neg z\n\t}\n\treturn 0.5 * ( uv + 1.0 );\n}\n\n\nvec4 textureEnvMap(sampler2D texture, vec3 position){\n\treturn texture2D(texture, vec2(atan(position.x, position.z) * RECIPROCAL_PI * 0.5+0.5,  acos(position.y) * RECIPROCAL_PI));\n}\n\nvec4 textureEnvMapIncludeMipmapsLod(sampler2D texture, vec3 position, float lod){\n\tlod = floor(lod);\n\n\tif (lod > 7.0) {\n\t\tlod = 7.0;\n\t}\n\n\tfloat posZ = abs(position.z) < EPSILON_ATAN ? EPSILON_ATAN : position.z;\n\n\tvec2 uv = vec2(atan(position.x, posZ) * RECIPROCAL_PI * 0.5 + 0.5, acos(position.y) * RECIPROCAL_PI);\n\n\tfloat scale = pow(2.0, lod);\n\n\treturn texture2D(texture, vec2(uv.x / scale, (uv.y / scale / 2.0) + 1.0 - 1.0/pow(2.0, lod)));\n\n\treturn vec4( position, 0.0);\n}\n\nvec4 textureBilinearEnvMap(sampler2D texture, vec3 direction, float roughness){\n\n\tfloat uvX = (atan(direction.x, direction.z) ) * RECIPROCAL_PI * 0.5 + 0.5;\n\tfloat uvY = acos(direction.y) * RECIPROCAL_PI;\n\tvec2 uv = vec2(uvX, uvY);\n\tvec4 envmap = texture2D(texture, uv);\n\n\treturn envmap;\n\n}\n\n\nvec3 computeDiffuseSHLight(vec3 normal, in vec3 sh[9]) {\n\treturn sh[0] +\n\t\tsh[1] * (normal.y) +\n\t\tsh[2] * (normal.z) +\n\t\tsh[3] * (normal.x) +\n\t\tsh[4] * (normal.y * normal.x) +\n\t\tsh[5] * (normal.y * normal.z) +\n\t\tsh[6] * ((3.0 * normal.z * normal.z) - 1.0) +\n\t\tsh[7] * (normal.z * normal.x) +\n\t\tsh[8] * (normal.x * normal.x - (normal.y * normal.y));\n}\n\n\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\t// dir can be either a direction vector or a normal vector\n\t// upper-left 3x3 of matrix is assumed to be orthogonal\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\n\n\n\n\nvec3 BRDF_Lambert( const in vec3 diffuseColor ) {\n\n\treturn RECIPROCAL_PI * diffuseColor;\n\n} // validated\n\nvec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {\n\n\t// Original approximation by Christophe Schlick \'94\n\t// float fresnel = pow( 1.0 - dotVH, 5.0 );\n\n\t// Optimized variant (presented by Epic at SIGGRAPH \'13)\n\t// https://cdn2.unrealengine.com/Resources/files/2013SiggraphPresentationsNotes-26915738.pdf\n\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n\n} // validated\n\n// Moving Frostbite to Physically Based Rendering 3.0 - page 12, listing 2\n// https://seblagarde.files.wordpress.com/2015/07/course_notes_moving_frostbite_to_pbr_v32.pdf\nfloat V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\n\tfloat a2 = pow2( alpha );\n\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\n\treturn 0.5 / max( gv + gl, EPSILON );\n\n}\n\n// Microfacet Models for Refraction through Rough Surfaces - equation (33)\n// http://graphicrants.blogspot.com/2013/08/specular-brdf-reference.html\n// alpha is "roughness squared" in Disney’s reparameterization\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\n\tfloat a2 = pow2( alpha );\n\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0; // avoid alpha = 0 with dotNH = 1\n\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n\n}\n\n// GGX Distribution, Schlick Fresnel, GGX_SmithCorrelated Visibility\nvec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 f0, const in float f90, const in float roughness ) {\n\n\tfloat alpha = pow2( roughness ); // UE4\'s roughness\n\t// float alpha = roughness;\n\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\n\tvec3 F = F_Schlick( f0, f90, dotVH );\n\n\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\n\tfloat D = D_GGX( alpha, dotNH );\n\n\t// Debug List\n\t// return vec3(alpha, alpha, alpha);\n\t// return f0;\n\t// return vec3(f90, f90, f90);\n\t// return F;\n\t// return vec3(V, V, V);\n\t// return vec3(D, D, D);\n\t// return vec3(( V * D ), ( V * D ), ( V * D ));\n\n\t// return F * V;\n\t// return F * D;\n\n\treturn F * ( V * D );\n}\n\n// Analytical approximation of the DFG LUT, one half of the\n// split-sum approximation used in indirect specular lighting.\n// via \'environmentBRDF\' from "Physically Based Shading on Mobile"\n// https://www.unrealengine.com/blog/physically-based-shading-on-mobile\nvec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\n\tvec4 r = roughness * c0 + c1;\n\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\n\tvec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;\n\n\treturn fab;\n\n}\n\n// Fdez-Agüera\'s "Multiple-Scattering Microfacet Model for Real-Time Image Based Lighting"\n// Approximates multiscattering in order to preserve energy.\n// http://www.jcgt.org/published/0008/01/03/\nvoid computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\n\tvec3 FssEss = specularColor * fab.x + specularF90 * fab.y;\n\n\tfloat Ess = fab.x + fab.y;\n\tfloat Ems = 1.0 - Ess;\n\n\tvec3 Favg = specularColor + ( 1.0 - specularColor ) * 0.047619; // 1/21\n\tvec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );\n\n\tsingleScatter += FssEss;\n\tmultiScatter += Fms * Ems;\n}\n\n\n// temporary\nvec3 clearcoatSpecular = vec3( 0.0 );\nvec3 sheenSpecular = vec3( 0.0 );\n\nvec3 diffuse = vec3( 1.0 );\nfloat opacity = 1.0;\n\nstruct PhysicalMaterial {\n\tvec3 diffuseColor;\n\tvec3 specularColor;\n\tfloat roughness;\n\tfloat specularF90;\n\n\t#ifdef WX_USE_CLEARCOAT\n\t\tfloat clearcoat;\n\t\tfloat clearcoatRoughness;\n\t\tvec3 clearcoatF0;\n\t\tfloat clearcoatF90;\n\t#endif\n\t#ifdef WX_USE_SHEEN\n\t\tvec3 sheenColor;\n\t\tfloat sheenRoughness;\n\t#endif\n};\n\nuniform sampler2D u_brdfLUT;\n\nuniform vec2 u_metallicRoughnessValues;\nuniform vec4 u_baseColorFactor;\nuniform vec3 u_emissiveFactor;\n\nuniform float u_ior;\n\n#ifdef WX_USE_ALPHA_CUTOFF\n\tuniform float u_alphaCutoff;\n#endif\n\n#ifdef WX_USE_CLEARCOAT\n\tuniform float u_clearcoatFactor;\n\tuniform float u_clearcoatRoughnessFactor;\n\tuniform float u_clearcoatNormalScale;\n#endif\n\n#ifdef WX_USE_BASECOLORMAP\n\tuniform sampler2D u_baseColorMap;\n\t// uniform mat3 u_baseColorMapTransform;\n#endif\n#ifdef WX_USE_NORMALMAP\n\tuniform sampler2D u_normalMap;\n\tuniform float u_normalScale;\n\tuniform mat4 u_normalMapTransform;\n#endif\n#ifdef WX_USE_EMISSIVEMAP\n\tuniform sampler2D u_emissiveMap;\n\t// uniform mat3 u_emissiveMapTransform;\n#endif\n#ifdef WX_USE_METALMAP\n\tuniform sampler2D u_metallicMap;\n#endif\n#ifdef WX_USE_ROUGHNESSMAP\n\tuniform sampler2D u_roughnessMap;\n#endif\n#ifdef WX_USE_METALROUGHNESSMAP\n\tuniform sampler2D u_metallicRoughnessMap;\n\t// uniform mat3 u_metallicRoughnessMapTransform;\n#endif\n#ifdef WX_USE_OCCLUSIONMAP\n\tuniform sampler2D u_occlusionMap;\n\tuniform float u_occlusionStrength;\n\t// uniform mat3 u_occlusionMapTransform;\n#endif\n#ifdef WX_USE_CLEARCOATMAP\n\tuniform sampler2D u_clearcoatMap;\n\t// uniform mat3 u_clearcoatMapTransform;\n#endif\n#ifdef WX_USE_CLEARCOATROUGHNESSMAP\n\tuniform sampler2D u_clearcoatRoughnessMap;\n\t// uniform mat3 u_clearcoatRoughnessMapTransform;\n#endif\n#ifdef WX_USE_CLEARCOATNORMALMAP\n\tuniform sampler2D u_clearcoatNormalMap;\n\t// uniform mat3 u_clearcoatNormalMapTransform;\n#endif\n#ifdef WX_USE_SPECULARGLOSSINESS\n\tuniform vec3 u_specularFactor;\n\tuniform float u_glossinessFactor;\n\n\t#ifdef WX_USE_SPECULARGLOSSINESSMAP\n\t\tuniform sampler2D u_specularGlossinessMap;\n\t\t// uniform mat3 u_specularGlossinessMapTransform;\n\t#endif\n#endif\n#ifdef WX_USE_TRANSMISSION\n\tuniform float u_transmissionFactor;\n\n\t#ifdef WX_USE_TRANSMISSIONMAP\n\t\tuniform sampler2D u_transmissionMap;\n\t\t// uniform mat3 u_transmissionMapTransform;\n\t#endif\n#endif\n\n#ifdef WX_USE_SHEEN\n\tuniform vec3 u_sheenColorFactor;\n\tuniform float u_sheenRoughnessFactor;\n\n\t#ifdef WX_USE_SHEENCOLORMAP\n\t\t\tuniform sampler2D u_sheenColorMap;\n\t#endif\n\n\t#ifdef WX_USE_SHEENROUGHNESSMAP\n\t\t\tuniform sampler2D u_sheenRoughnessMap;\n\t#endif\n#endif\n\n#ifdef WX_USE_UVTRANSFORM\n\tuniform mat4 u_uvTransform;\n#endif\n\n#ifdef WX_USE_MAT_ENV\n\tuniform vec3 u_diffuseSHMat[9];\n\tuniform float u_diffuseExpMat;\n\tuniform sampler2D u_specularEnvMapMat;\n\tuniform float u_specularExpMat;\n\tuniform float u_specularEnvMapMipCountMat;\n#else\n\tuniform vec3 u_diffuseSH[9];\n\tuniform float u_diffuseExp;\n\tuniform sampler2D u_specularEnvMap;\n\tuniform float u_specularExp;\n\tuniform float u_specularEnvMapMipCount;\n#endif\n\n\n#ifdef WX_RECEIVE_SHADOW\n\tuniform float u_shadowStrength;\n\tuniform float u_shadowBias;\n\tuniform vec3 u_shadowColor;\n\tuniform sampler2D u_shadowMap;\n\n\tuniform mat4 u_csmLightSpaceMatrices[4];\n\tuniform vec4 u_csmFarBounds;\n\tuniform vec4 u_shadowTilingOffsets[4];\n#endif\n\n// ----- Start Func -----\n\n#ifdef WX_USE_SHEEN\n\t// https://github.com/google/filament/blob/master/shaders/src/brdf.fs\n\tfloat D_Charlie( float roughness, float dotNH ) {\n\n\t\tfloat alpha = pow2( roughness );\n\n\t\t// Estevez and Kulla 2017, "Production Friendly Microfacet Sheen BRDF"\n\t\tfloat invAlpha = 1.0 / alpha;\n\t\tfloat cos2h = dotNH * dotNH;\n\t\tfloat sin2h = max( 1.0 - cos2h, 0.0078125 ); // 2^(-14/2), so sin2h^2 > 0 in fp16\n\n\t\treturn ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );\n\n\t}\n\n\t// https://github.com/google/filament/blob/master/shaders/src/brdf.fs\n\tfloat V_Neubelt( float dotNV, float dotNL ) {\n\n\t\t// Neubelt and Pettineo 2013, "Crafting a Next-gen Material Pipeline for The Order: 1886"\n\t\treturn saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );\n\n\t}\n\n\tvec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {\n\n\t\tvec3 halfDir = normalize( lightDir + viewDir );\n\n\t\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\t\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\t\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\n\t\tfloat D = D_Charlie( sheenRoughness, dotNH );\n\t\tfloat V = V_Neubelt( dotNV, dotNL );\n\n\t\treturn sheenColor * ( D * V );\n\n\t}\n\n\t// This is a curve-fit approxmation to the "Charlie sheen" BRDF integrated over the hemisphere from \n\t// Estevez and Kulla 2017, "Production Friendly Microfacet Sheen BRDF". The analysis can be found\n\t// in the Sheen section of https://drive.google.com/file/d/1T0D1VSyR4AllqIJTQAraEIzjlb5h4FKH/view?usp=sharing\n\tfloat IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n\n\t\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\n\t\tfloat r2 = roughness * roughness;\n\n\t\tfloat a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;\n\n\t\tfloat b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;\n\n\t\tfloat DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );\n\n\t\treturn saturate( DG * RECIPROCAL_PI );\n\n\t}\n\n#endif\n\n#ifdef WX_USE_TRANSMISSION\n\tvec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior,  mat4 modelMatrix ) {\n\t\t// Direction of refracted light.\n\t\tvec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );\n\n\t\tvec3 modelScale;\n\t\tmodelScale.x = length(vec3(modelMatrix[0].xyz));\n\t\tmodelScale.y = length(vec3(modelMatrix[1].xyz));\n\t\tmodelScale.z = length(vec3(modelMatrix[2].xyz));\n\n\t\t// The thickness is specified in local space.\n\t\treturn normalize( refractionVector ) * modelScale * thickness;\n\t}\n\n\tvec3 getIBLVolumeRefractionVec (const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,\n\t\tconst in vec3 specularColor, const in float specularF90, const in vec3 position,  mat4 modelMatrix) {\n\t\t\t\n\t\t\tvec3 transmissionRay = getVolumeTransmissionRay(n, v, 1.0, 1.0, modelMatrix);\n\t\t\tvec3 refractedRayExit = position + transmissionRay;\n\n\t\t\treturn refractedRayExit;\n\t}\n\n\tfloat getRangeAttenuation(float range, float distance)\n\t{\n\t\t// negative range means infinite\n\t\t\tif (range <= 0.0)\n\t\t\t{\n\t\t\t\t\treturn 1.0 / pow(distance, 2.0);\n\t\t\t}\n\t\t\treturn max(min(1.0 - pow(distance / range, 4.0), 1.0), 0.0) / pow(distance, 2.0);\n\t}\n\n\tfloat getSpotAttenuation(vec3 pointToLight, vec3 spotDirection, float outerConeCos, float innerConeCos)\n\t{\n\t\t\tfloat actualCos = dot(normalize(spotDirection), normalize(-pointToLight));\n\t\t\tif (actualCos > outerConeCos)\n\t\t\t{\n\t\t\t\t\tif (actualCos < innerConeCos)\n\t\t\t\t\t{\n\t\t\t\t\t\t\treturn smoothstep(outerConeCos, innerConeCos, actualCos);\n\t\t\t\t\t}\n\t\t\t\t\treturn 1.0;\n\t\t\t}\n\t\t\treturn 0.0;\n\t}\n\n\tvec3 getLightIntensity(vec4 sourceLight, vec3 pointToLight, vec3 color, vec3 direction, float intensity)\n\t{\n\t\tfloat rangeAttenuation = 1.0;\n\t\t\tfloat spotAttenuation = 1.0;\n\t\t\tif (sourceLight.x != 0.0)\n\t\t\t{\n\t\t\t\t\trangeAttenuation = getRangeAttenuation(sourceLight.y, length(pointToLight));\n\t\t\t}\n\t\t\tif (sourceLight.x == 2.0)\n\t\t\t{\n\t\t\t\t\tspotAttenuation = getSpotAttenuation(pointToLight, direction, sourceLight.w, sourceLight.z);\n\t\t\t}\n\t\t\treturn rangeAttenuation * spotAttenuation * color * intensity;\n\t\t//return sourceLight.color;\n\t}\n\n\tfloat iorToRoughness(float roughness, float ior)\n\t{\n\t\t\t// an IOR of 1.0 results in no microfacet refraction\n\t\t\t// an IOR of 1.5 results in the default amount of microfacet refraction.\n\t\t\treturn roughness * clamp(ior * 2.0 - 2.0, 0.0, 1.0);\n\t}\n\n\tvec3 getPunctualTransmissionIntensity( const in vec3 lightDir, const in vec3 view, const in vec3 normal, const in vec3 f0, const in float f90, const in float roughness, const in vec3 baseColor, const in float ior )\n\t{\n\n\t\tfloat alphaRoughness = pow2( roughness ); \n\t\tfloat tranmissionRoughness = iorToRoughness(alphaRoughness, ior);\n\t\tvec3 normalDir = normalize( normal );\n\t\tvec3 viewDir = normalize( view );\n\t\tvec3 lightDirMirror = normalize(lightDir + 2.0 * normalDir * dot(-lightDir, normalDir));\n\t\tvec3 halfDir = normalize( lightDirMirror + viewDir );\n\n\t\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\t\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\t\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\t\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\n\t\tvec3 F = F_Schlick( f0, f90, dotVH );\n\n\t\tfloat V = V_GGX_SmithCorrelated( alphaRoughness, dotNL, dotNV );\n\n\t\tfloat D = D_GGX( alphaRoughness, dotNH );\n\n\t\treturn (1.0 - F) * baseColor * D * V;\n\t}\n#endif\n// ----- end Func -----\n\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance = ambientLightColor;\n\treturn irradiance;\n}\n\nfloat getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n\t// based upon Frostbite 3 Moving to Physically-based Rendering\n\t// page 32, equation 26: E[window1]\n\t// https://seblagarde.files.wordpress.com/2015/07/course_notes_moving_frostbite_to_pbr_v32.pdf\n\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\n\tif ( cutoffDistance > 0.0 ) {\n\t\tdistanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t}\n\treturn distanceFalloff;\n}\n\nvoid Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\n\tvec3 irradiance = dotNL * directLight.color;\n\n\tvec3 brdf = BRDF_GGX( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularF90, material.roughness );\n\n\tvec3 irradianceBRDF = irradiance * brdf;\n\n\t// TODO fix brdf too big or too small\n\tirradianceBRDF = vec3(saturate(irradianceBRDF.x), saturate(irradianceBRDF.y), saturate(irradianceBRDF.z));\n\n\t#ifdef WX_USE_CLEARCOAT\n\t\tfloat dotNLcc = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );\n\t\tvec3 ccIrradiance = dotNLcc * directLight.color;\n\t\tclearcoatSpecular += ccIrradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.clearcoatNormal, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );\n\t#endif\n\n\t#ifdef WX_USE_SHEEN\n\t\tsheenSpecular += irradiance * BRDF_Sheen( directLight.direction, geometry.viewDir, geometry.normal, material.sheenColor, material.sheenRoughness );\n\t#endif\n\n\treflectedLight.directSpecular += irradianceBRDF;\n\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n\t\n\t// reflectedLight.directDiffuse += irradiance;\n\t// reflectedLight.directDiffuse += vec3(dotNL, dotNL, dotNL);\n\t// reflectedLight.directDiffuse += geometry.normal;\n\t// reflectedLight.directDiffuse += directLight.direction;\n}\n\nvoid IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n\nvoid IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {\n\t#ifdef WX_USE_BRDFLUT\n\t\tfloat dotNV = clamp( dot(geometry.normal, geometry.viewDir), 0.001, 0.999);\n\t\t// @Fix change (1.0 - material.roughness) to (material.roughness), for using u_brdfLUT that is Y filp.\n\t\t// @Fix texture2D(u_brdfLUT, vec2(0.0, 1.0)) has Wrong Return. g is 65.\n\t\tvec3 brdf = texture2D(u_brdfLUT, vec2(dotNV, clamp(material.roughness, 0.001, 0.999))).rgb;\n\t\treflectedLight.indirectSpecular += radiance * (material.specularColor * brdf.x + brdf.y);\n\t\treflectedLight.indirectDiffuse += irradiance * material.diffuseColor;\n\n\t\t#ifdef WX_USE_CLEARCOAT\n\t\t\t\tclearcoatSpecular += clearcoatRadiance * (material.specularColor * brdf.x + brdf.y);\n\t\t#endif\n\n\t\t#ifdef WX_USE_SHEEN\n\t\t\t\tsheenSpecular += irradiance * material.sheenColor * IBLSheenBRDF( geometry.normal, geometry.viewDir, material.sheenRoughness );\n\t\t\t\t// sheenSpecular += irradiance;\n\t\t#endif\n\t#else\n\t\t// Both indirect specular and indirect diffuse light accumulate here\n\t\tvec3 singleScattering = vec3( 0.0 );\n\t\tvec3 multiScattering = vec3( 0.0 );\n\t\tvec3 cosineWeightedIrradiance = irradiance;\n\n\t\tcomputeMultiscattering( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );\n\n\t\tvec3 diffuse = material.diffuseColor * ( 1.0 - ( singleScattering + multiScattering ) );\n\n\t\treflectedLight.indirectSpecular += radiance * singleScattering;\n\t\treflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;\n\n\t\treflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;\n\n\t\t#ifdef WX_USE_CLEARCOAT\n\t\t\t\tclearcoatSpecular += clearcoatRadiance * singleScattering;\n\t\t#endif\n\n\t\t#ifdef WX_USE_SHEEN\n\t\t\t\tsheenSpecular += irradiance * material.sheenColor * IBLSheenBRDF( geometry.normal, geometry.viewDir, material.sheenRoughness );\n\t\t#endif\n\n\t#endif\n}\n\nvec3 getIBLRadiance(vec3 viewDir, vec3 normal, float roughness) {\n\tfloat u_specularEnvIntensity = 1.0;\n\n    vec3 reflectVec = reflect( - viewDir, normal );\n\n    // Mixing the reflection with the normal is more accurate and keeps rough objects from gathering light from behind their tangent plane.\n    reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );\n\n    reflectVec = inverseTransformDirection( reflectVec, u_view );\n\n    #ifdef WX_USE_SPECULAR_MIPMAPS\n        float mipCount = 7.0;\n\n        float mip = clamp(roughness * mipCount * 1.5, 0.0, mipCount);\n        float mipF = fract( mip );\n\t\t    float mipInt = floor( mip );\n        float mipBig = clamp(mipInt + 1.0, 0.0, mipCount);\n\n\t\t\t\t#ifdef WX_USE_MAT_ENV\n\t\t\t\t\tvec4 specularEnvMapInt = textureEnvMapIncludeMipmapsLod(u_specularEnvMapMat, reflectVec, mipInt);\n\t\t\t\t\tvec4 specularEnvMapBig = textureEnvMapIncludeMipmapsLod(u_specularEnvMapMat, reflectVec, mipBig);\n\t\t\t\t#else\n\t\t\t\t\tvec4 specularEnvMapInt = textureEnvMapIncludeMipmapsLod(u_specularEnvMap, reflectVec, mipInt);\n\t\t\t\t\tvec4 specularEnvMapBig = textureEnvMapIncludeMipmapsLod(u_specularEnvMap, reflectVec, mipBig);\n\t\t\t\t#endif\n\n        vec4 specularEnvMap = mix(specularEnvMapInt, specularEnvMapBig, mipF);\n\n    #else\n\t\t\t\t#ifdef WX_USE_MAT_ENV\n\t\t\t\t\tvec4 specularEnvMap = textureBilinearEnvMap(u_specularEnvMapMat, reflectVec, roughness);\n\t\t\t\t#else\n\t\t\t\t\tvec4 specularEnvMap = textureBilinearEnvMap(u_specularEnvMap, reflectVec, roughness);\n\t\t\t\t#endif\n    #endif\n\n    #ifdef WX_USE_SPECULAR_RGBD\n        vec3 specularLight = decodeRGBD(specularEnvMap);\n    #else\n        vec3 specularLight = specularEnvMap.rgb;\n        specularLight = removeGammaCorrection(specularLight);\n    #endif\n\n    return specularLight * u_specularEnvIntensity;\n}\n\n#ifdef WX_RECEIVE_SHADOW\n\tfloat unpackDepth(const in vec4 rgbaDepth)\n\t{\n\t\tvec4 bitShift = vec4(1.0 / (256.0 * 256.0 * 256.0), 1.0 / (256.0 * 256.0), 1.0 / 256.0, 1.0);\n\t\tfloat depth = dot(rgbaDepth, bitShift);\n\t\treturn depth;\n\t}\n\n\tfloat shadowCalculation(vec3 posWorld) {\n\t\tfloat srcShadow = 1.0;\n\n\t\tvec4 shadowCoord = u_csmLightSpaceMatrices[0] * vec4(posWorld, 1.0);\n\t\tshadowCoord.xyz = shadowCoord.xyz / shadowCoord.w;\n\t\tshadowCoord = shadowCoord * 0.5 + 0.5;\n\t\tshadowCoord.z = shadowCoord.z + step(shadowCoord.x, 0.001) + step(shadowCoord.y, 0.001) + step(0.999, shadowCoord.x) + step(0.999, shadowCoord.y);\n\t\tshadowCoord.xy = shadowCoord.xy * u_shadowTilingOffsets[0].xy + u_shadowTilingOffsets[0].zw;\n\n\t\tif (shadowCoord.z > 1.0)\n\t\t{\n\t\t\tshadowCoord.z = 1.0;\n\t\t}\n\n\t\tfloat currentDepth = shadowCoord.z;\n\n\t\tfloat bias = u_shadowBias;\n\t\tfloat zRef = currentDepth - bias;\n\n\t\tfloat sourceVal = float(zRef < unpackDepth(texture2D(u_shadowMap, shadowCoord.xy)));\n\t\tsrcShadow = sourceVal;\n\n\t\treturn srcShadow;\n\t\t\n\t\t// return unpackDepth(texture2D(u_shadowMap, shadowCoord.xy));\n\t}\n#endif\n\nvoid main()\n{\n    vec4 diffuseColor = vec4 (diffuse, opacity);\n\n    // ReflectedLight\n    ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n    \n    // Emissive\n    vec3 totalEmissiveRadiance = vec3(0.0);\n    // Transmission\n    vec3 transmissionAll = vec3(0.0);\n    float transmissionFactor = 0.0;\n\n#ifdef WX_USE_BASECOLORMAP\n    #ifdef WX_BASECOLORMAP_USE_UV1\n        vec2 uvBaseColor = v_UV1;\n    #elif defined(WX_BASECOLORMAP_USE_UV2)\n        vec2 uvBaseColor = v_UV2;\n    #elif defined(WX_BASECOLORMAP_USE_UV3)\n        vec2 uvBaseColor = v_UV3;\n    #else\n        vec2 uvBaseColor = v_UV;\n    #endif\n\n    #ifdef WX_USE_UVTRANSFORM_BASECOLOR\n        uvBaseColor = (u_uvTransform * vec4( uvBaseColor, 1.0, 1.0 ) ).xy;\n    #endif\n\n    vec4 baseColor = SRGBtoLINEAR(texture2D(u_baseColorMap, uvBaseColor));\n#else\n    vec4 baseColor = vec4(1.0, 1.0, 1.0, 1.0);\n#endif\n\n#ifdef WX_MANUAL_LINEAR_BASECOLORFACTOR\n    baseColor *= u_baseColorFactor;\n#else\n    baseColor *= SRGBtoLINEAR(u_baseColorFactor);\n#endif\n\n#ifdef WX_USE_ALPHA_CUTOFF\n    if (baseColor.a < u_alphaCutoff) {\n        discard;\n    } else {\n        #ifndef WX_USE_GLTF\n            baseColor.a = 1.0;\n        #endif\n    }\n#endif\n\n    diffuseColor *= baseColor;\n\n#ifdef WX_USE_COLOR_0\n    diffuseColor *= vec4(v_Color, 1.0);\n#endif\n\n    // metallic roughness\n    float roughness = u_metallicRoughnessValues.y;\n    float metallic = u_metallicRoughnessValues.x;\n#ifdef WX_USE_METALROUGHNESSMAP\n    #ifdef WX_METALLICROUGHNESSMAP_USE_UV1\n        vec2 uvMetalRougness = v_UV1;\n    #elif defined(WX_METALLICROUGHNESSMAP_USE_UV2)\n        vec2 uvMetalRougness = v_UV2;\n    #elif defined(WX_METALLICROUGHNESSMAP_USE_UV3)\n        vec2 uvMetalRougness = v_UV3;\n    #else\n        vec2 uvMetalRougness = v_UV;\n    #endif\n\n    #ifdef WX_USE_UVTRANSFORM_METALROUGHNESS\n        uvMetalRougness = (u_uvTransform * vec4( uvMetalRougness, 1.0, 1.0 ) ).xy;\n    #endif\n\n    // Roughness is stored in the \'g\' channel, metallic is stored in the \'b\' channel.\n    // This layout intentionally reserves the \'r\' channel for (optional) occlusion map data\n    vec4 mrSample = texture2D(u_metallicRoughnessMap, uvMetalRougness);\n    roughness *= mrSample.g;\n    metallic *= mrSample.b;\n#else\n    #ifdef WX_USE_ROUGHNESSMAP\n        roughness *= texture2D(u_roughnessMap, v_UV).r;\n    #endif\n    #ifdef WX_USE_METALMAP\n        metallic *= texture2D(u_metallicMap, v_UV).r;\n    #endif\n#endif\n\n    // Normal\n#ifdef WX_USE_NORMAL\n    vec3 normal = normalize(v_Normal);\n\n    #ifndef WX_USE_CULLON\n      #ifndef WX_USE_GLTF\n        float facing = gl_FrontFacing ? -1.0 : 1.0;\n        normal *= facing;\n      #endif\n    #endif\n\n    #ifdef WX_USE_TANGENT\n        vec3 tangent = normalize(v_Tangent);\n\n        #ifdef WX_USE_NORMALMAP\n            #ifdef WX_NORMALMAP_USE_UV1\n                vec2 uvNormal = v_UV1;\n            #elif defined(WX_NORMALMAP_USE_UV2)\n                vec2 uvNormal = v_UV2;\n            #elif defined(WX_NORMALMAP_USE_UV3)\n                vec2 uvNormal = v_UV3;\n            #else\n                vec2 uvNormal = v_UV;\n            #endif\n\n            #ifdef WX_USE_UVTRANSFORM_NORMAL\n                uvNormal = (u_normalMapTransform * vec4( uvNormal, 1.0, 1.0 ) ).xy;\n            #endif\n\n            vec3 normalSample = texture2D(u_normalMap, uvNormal).xyz * 2.0 - 1.0;\n            normalSample *= u_normalScale;\n\n            vec3 bitangent = normalize( v_BitTangent );\n            mat3 vTBN = mat3( tangent, bitangent, normal );\n            normal = normalize( vTBN * normalSample );\n        #endif\n    #else\n        vec3 tangent = vec3(0.0, 0.0, 0.0);\n    #endif\n#else\n    vec3 normal = vec3(0.0, 0.0, 1.0);\n#endif\n\n    // Emissivemap\n    totalEmissiveRadiance = u_emissiveFactor;\n#ifdef WX_USE_EMISSIVEMAP\n    #ifdef WX_EMISSIVEMAP_USE_UV1\n        vec2 uvEmissive = v_UV1;\n    #elif defined(WX_EMISSIVEMAP_USE_UV2)\n        vec2 uvEmissive = v_UV2;\n    #elif defined(WX_EMISSIVEMAP_USE_UV3)\n        vec2 uvEmissive = v_UV3;\n    #else\n        vec2 uvEmissive = v_UV;\n    #endif\n\n    #ifdef WX_USE_UVTRANSFORM_EMISSIVE\n        uvEmissive = (u_uvTransform * vec4( uvEmissive, 1.0, 1.0 ) ).xy;\n    #endif\n\n    vec4 emissiveColor = SRGBtoLINEAR(texture2D(u_emissiveMap, uvEmissive));\n    totalEmissiveRadiance *= emissiveColor.rgb;\n#endif\n      \n    // Accumulation\n    // ----------- start -------------\n    PhysicalMaterial material;\n\n#ifdef WX_USE_SPECULARGLOSSINESS\n    vec3 specularFactor = u_specularFactor;\n    float glossinessFactor = u_glossinessFactor;\n\n    #ifdef WX_USE_SPECULARGLOSSINESSMAP\n        #ifdef WX_SPECULARGLOSSINESSMAP_USE_UV1\n            vec2 uvSpecularGlossiness = v_UV1;\n        #elif defined(WX_EMISSIVEMAP_USE_UV2)\n            vec2 uvSpecularGlossiness = v_UV2;\n        #elif defined(WX_EMISSIVEMAP_USE_UV3)\n            vec2 uvSpecularGlossiness = v_UV3;\n        #else\n            vec2 uvSpecularGlossiness = v_UV;\n        #endif\n\n        #ifdef WX_USE_UVTRANSFORM_SPECULARGLOSSINESS\n            uvSpecularGlossiness = (u_uvTransform * vec4( uvSpecularGlossiness, 1.0, 1.0 ) ).xy;\n        #endif\n\n        vec4 specularGlossinessSample = texture2D(u_specularGlossinessMap, uvSpecularGlossiness);\n        specularFactor *= SRGBtoLINEAR(specularGlossinessSample).rgb;\n        glossinessFactor *= specularGlossinessSample.a;\n    #endif\n\n    material.diffuseColor = diffuseColor.rgb * ( 1.0 - max( specularFactor.r, max( specularFactor.g, specularFactor.b ) ) );\n    material.specularColor = specularFactor;\n    material.specularF90 = 1.0;\n\n    roughness = 1.0 - glossinessFactor;\n#else\n    material.diffuseColor = diffuseColor.rgb * ( 1.0 - metallic );\n    float specularIntensityFactor = 1.0;\n    vec3 specularColorFactor = vec3( 1.0 );\n    material.specularColor = mix( min( pow2( ( u_ior - 1.0 ) / ( u_ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metallic );\n\n    material.specularF90 = 1.0;\n#endif\n\n    material.roughness = max( roughness, 0.0525 );// 0.0525 corresponds to the base mip of a 256 cubemap.\n    material.roughness = min( material.roughness, 1.0 );\n\n    GeometricContext geometry;\n\n    geometry.position = v_ViewPosition;\n    geometry.normal = normal;\n    geometry.viewDir = normalize( vec3(0.0) - v_ViewPosition );\n\n    IncidentLight directLight;\n\n    vec3 iblIrradiance = vec3( 0.0 );\n    vec3 irradiance = vec3( 0.0 );\n    vec3 radiance = vec3( 0.0 );\n    vec3 clearcoatRadiance = vec3( 0.0 );\n\n#ifdef WX_USE_CLEARCOAT\n    #ifdef WX_USE_CLEARCOATMAP\n        #ifdef WX_CLEARCOATMAP_USE_UV1\n            vec2 uvClearCoat = v_UV1;\n        #elif defined(WX_CLEARCOATMAP_USE_UV2)\n            vec2 uvClearCoat = v_UV2;\n        #elif defined(WX_CLEARCOATMAP_USE_UV3)\n            vec2 uvClearCoat = v_UV3;\n        #else\n            vec2 uvClearCoat = v_UV;\n        #endif\n\n        #ifdef WX_USE_UVTRANSFORM_CLEARCOAT\n            uvClearCoat = (u_uvTransform * vec4( uvClearCoat, 1.0, 1.0 ) ).xy;\n        #endif\n\n        vec4 clearCoatSample = texture2D(u_clearcoatMap, uvClearCoat);\n    #else\n        vec4 clearCoatSample = vec4(1.0, 1.0, 1.0, 1.0);\n    #endif\n\n    #ifdef WX_USE_CLEARCOATROUGHNESSMAP\n        #ifdef WX_CLEARCOATROUGHNESSMAP_USE_UV1\n            vec2 uvClearCoatRoughness = v_UV1;\n        #elif defined(WX_CLEARCOATROUGHNESSMAP_USE_UV2)\n            vec2 uvClearCoatRoughness = v_UV2;\n        #elif defined(WX_CLEARCOATROUGHNESSMAPP_USE_UV3)\n            vec2 uvClearCoatRoughness = v_UV3;\n        #else\n            vec2 uvClearCoatRoughness = v_UV;\n        #endif\n\n        #ifdef WX_USE_UVTRANSFORM_CLEARCOATROUGHNESS\n            uvClearCoatRoughness = (u_uvTransform * vec4( uvClearCoatRoughness, 1.0, 1.0 ) ).xy;\n        #endif\n\n        vec4 clearCoatRoughnessSample = texture2D(u_clearcoatRoughnessMap, uvClearCoatRoughness);\n    #else\n        vec4 clearCoatRoughnessSample = vec4(1.0, 1.0, 1.0, 1.0);\n    #endif\n\n    #ifdef WX_USE_CLEARCOATNORMALMAP\n        #ifdef WX_CLEARCOATNORMALMAP_USE_UV1\n            vec2 uvClearCoatNormal = v_UV1;\n        #elif defined(WX_CLEARCOATNORMALMAP_USE_UV2)\n            vec2 uvClearCoatNormal = v_UV2;\n        #elif defined(WX_CLEARCOATNORMALMAP_USE_UV3)\n            vec2 uvClearCoatNormal = v_UV3;\n        #else\n            vec2 uvClearCoatNormal = v_UV;\n        #endif\n\n        #ifdef WX_USE_UVTRANSFORM_CLEARCOATNORMAL\n            uvClearCoatNormal = (u_uvTransform * vec4( uvClearCoatNormal, 1.0, 1.0 ) ).xy;\n        #endif\n\n        vec4 clearCoatNormalSample = texture2D(u_clearcoatNormalMap, uvClearCoatNormal);\n    #else\n        vec4 clearCoatNormalSample = vec4(1.0, 1.0, 1.0, 1.0);\n    #endif\n\n    geometry.clearcoatNormal = geometry.normal;\n\n    material.clearcoat = u_clearcoatFactor * clearCoatSample.r;\n    material.clearcoat = saturate( material.clearcoat ); // Burley clearcoat model\n\n    material.clearcoatRoughness = u_clearcoatRoughnessFactor * clearCoatRoughnessSample.g;\n    material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );\n    material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );\n\n    material.clearcoatF0 = vec3( 0.04 );\n\t  material.clearcoatF90 = 1.0;\n\n    clearcoatRadiance += getIBLRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness );\n#endif\n\n#ifdef WX_USE_SHEEN\n    material.sheenColor = u_sheenColorFactor;\n\n    #ifdef WX_USE_SHEENCOLORMAP\n        #ifdef WX_SHEENCOLORMAP_USE_UV1\n            vec2 uvSheenColor = v_UV1;\n        #elif defined(WX_SHEENCOLORMAP_USE_UV2)\n            vec2 uvSheenColor = v_UV2;\n        #elif defined(WX_SHEENCOLORMAP_USE_UV3)\n            vec2 uvSheenColor = v_UV3;\n        #else\n            vec2 uvSheenColor = v_UV;\n        #endif\n        material.sheenColor *= SRGBtoLINEAR(texture2D( u_sheenColorMap, uvSheenColor )).rgb;\n\t#endif\n\n    material.sheenRoughness = clamp( u_sheenRoughnessFactor, 0.07, 1.0 );\n\n\t#ifdef WX_USE_SHEENROUGHNESSMAP\n        #ifdef WX_SHEENROUGHNESSMAP_USE_UV1\n            vec2 uvSheenRoughness = v_UV1;\n        #elif defined(WX_SHEENROUGHNESSMAP_USE_UV2)\n            vec2 uvSheenRoughness = v_UV2;\n        #elif defined(WX_SHEENROUGHNESSMAP_USE_UV3)\n            vec2 uvSheenRoughness = v_UV3;\n        #else\n            vec2 uvSheenRoughness = v_UV;\n        #endif\n        material.sheenRoughness *= texture2D( u_sheenRoughnessMap, uvSheenRoughness ).a;\n\t#endif\n#endif\n    // ----------- end -------------\n    \n    // MainLights\n#ifdef WX_USE_MAIN_DIR_LIGHT\n    vec3 lightDir = v_MainLightDir;\n\n    vec3 mainLightColor = u_mainLightColorIns.rgb * u_mainLightColorIns.a;\n    directLight.color = mainLightColor;\n\n    #ifdef WX_RECEIVE_SHADOW\n        directLight.color = directLight.color * shadowCalculation(v_WorldPosition);\n    #endif\n    directLight.direction = lightDir;\n    directLight.visible = true;\n    Direct_Physical( directLight, geometry, material, reflectedLight );\n#endif\n  \n    // AddLights\n#ifdef WX_USE_ADD_LIGHTS\n\n    for(int i = 0; i < WX_ADD_LIGHTS_COUNT; ++i)\n    {\n      vec4 addLightInfo = u_addLightsInfo[i];\n      vec3 addLightColor = u_addLightsColorIns[i].rgb * u_addLightsColorIns[i].a;\n\n      if (addLightInfo.x == 0.0) {\n        // Directional Light\n        directLight.direction = v_AddLightsDir[i];\n        Direct_Physical( directLight, geometry, material, reflectedLight );\n      } else if (addLightInfo.x == 1.0) {\n        // Point Light\n        float range = addLightInfo.y;\n        vec3 pointLightPos = v_AddLightsPos[i];\n        vec3 lVector = pointLightPos - geometry.position;\n        \n        float lightDistance = length( lVector );\n        float attenuation = getDistanceAttenuation(lightDistance, range, 2.0);\n\n        directLight.color = addLightColor * attenuation;\n        directLight.direction = normalize( lVector );\n        directLight.visible = ( directLight.color != vec3( 0.0 ) );\n\n        Direct_Physical( directLight, geometry, material, reflectedLight );\n      } else if (addLightInfo.x == 2.0) {\n        // Spot Light\n        float range = addLightInfo.y;\n        vec3 spotLightPos = v_AddLightsPos[i];\n        vec3 spotLightDir = v_AddLightsDir[i];\n        vec3 lVector = spotLightPos - geometry.position;\n\n        directLight.direction = normalize( lVector );\n\n        float angleCos = dot( directLight.direction, spotLightDir );\n        // Use Basic Clamp\n        // float spotAttenuation = clamp((angleCos - addLightInfo.w) / (addLightInfo.z - addLightInfo.w), 0.0, 1.0);\n\n        // Use smoothstep\n        float spotAttenuation = smoothstep( addLightInfo.w, addLightInfo.z, angleCos );\n\n        if ( spotAttenuation > 0.0 ) {\n          float lightDistance = length( lVector );\n    \n          directLight.color = addLightColor * spotAttenuation;\n          directLight.color *= getDistanceAttenuation( lightDistance, range, 1.0 );\n          directLight.visible = ( directLight.color != vec3( 0.0 ) );\n        } else {\n          directLight.color = vec3( 0.0 );\n          directLight.visible = false;\n        }\n\n        Direct_Physical( directLight, geometry, material, reflectedLight );\n      }\n\n      #ifdef WX_USE_TRANSMISSION\n        transmissionFactor = u_transmissionFactor;\n\n        #ifdef WX_USE_TRANSMISSIONMAP\n            transmissionFactor *= texture2D( u_transmissionMap, v_UV ).r;\n        #endif\n\n        vec3 pos = v_WorldPosition;\n        vec3 cameraPos = vec3(u_viewInverse[3][0], u_viewInverse[3][1], u_viewInverse[3][2]);\n\n        vec3 v = normalize( cameraPos - pos );\n        // vec3 n = inverseTransformDirection( normal, u_view );\n        vec3 n = geometry.normal;\n\n        vec3 transmissionVec = getIBLVolumeRefractionVec(n, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90, pos, u_world);\n        vec3 pointToLight = directLight.direction;\n        pointToLight -= transmissionVec;\n        vec3 lightDir = normalize(pointToLight);\n        vec3 intensity =  getLightIntensity(addLightInfo, pointToLight, directLight.color, directLight.direction, u_addLightsColorIns[i].a);\n        transmissionAll += intensity * getPunctualTransmissionIntensity(lightDir, geometry.viewDir, geometry.normal, material.specularColor, material.specularF90, material.roughness, material.diffuseColor, u_ior);\n      #endif\n      \n    }\n#endif\n\n    // AmbientLight\n#ifdef WX_USE_AMBIENT_LIGHT\n    vec3 ambientLightColor = u_ambientLightColorIns.rgb * u_ambientLightColorIns.a;\n    irradiance = getAmbientLightIrradiance( ambientLightColor );\n#endif\n\n#ifdef WX_USE_IBL_DIFFUSE\n    float u_diffuseEnvIntensity = 1.0;\n\n    // vec3 shNormal = geometry.normal;\n    vec3 shNormal = inverseTransformDirection( geometry.normal, u_view );\n    \n    #ifdef WX_USE_MAT_ENV\n      vec3 diffuseLight = computeDiffuseSHLight(shNormal, u_diffuseSHMat);\n    #else\n      vec3 diffuseLight = computeDiffuseSHLight(shNormal, u_diffuseSH);\n    #endif\n\n    // iblIrradiance += diffuseLight * material.diffuseColor * u_diffuseEnvIntensity;\n    iblIrradiance += diffuseLight * u_diffuseEnvIntensity;\n\n#endif\n\n#ifdef WX_USE_IBL_SPECULAR\n    radiance += getIBLRadiance(geometry.viewDir, geometry.normal, material.roughness);\n#endif\n\n    // IndirectDiffuse\n    IndirectDiffuse_Physical( irradiance, geometry, material, reflectedLight );\n    \n    // IndirectSpecular\n    IndirectSpecular_Physical( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );\n  \n    // AO\n    float ao = 1.0;\n#ifdef WX_USE_OCCLUSIONMAP\n    #ifdef WX_OCCLUSIONMAP_USE_UV1\n      vec2 uvOcclusion = v_UV1;\n    #elif defined(WX_OCCLUSIONMAP_USE_UV2)\n      vec2 uvOcclusion = v_UV2;\n    #elif defined(WX_OCCLUSIONMAP_USE_UV3)\n      vec2 uvOcclusion = v_UV3;\n    #else\n      vec2 uvOcclusion = v_UV;\n    #endif\n\n    #ifdef WX_USE_UVTRANSFORM_OCCLUSION\n        uvOcclusion = (u_uvTransform * vec4( uvOcclusion, 1.0, 1.0 ) ).xy;\n    #endif\n\n    ao = texture2D(u_occlusionMap, uvOcclusion).r;\n    ao *= u_occlusionStrength;\n\n    // Diffuse\n    reflectedLight.indirectDiffuse *= ao;\n\n    // SPECULAR\n    #ifdef WX_USE_IBL_SPECULAR\n        float dotNV = saturate( dot(geometry.normal, geometry.viewDir ) );\n        reflectedLight.indirectSpecular *= saturate( pow( dotNV + ao, exp2( - 16.0 * material.roughness - 1.0 ) ) - 1.0 + ao );\n    #endif\n#endif\n\n    vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;\n    vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;\n\n    //  totalSpecular = vec3( 0.0 );\n    //  totalEmissiveRadiance = vec3( 0.0 );\n    totalDiffuse = mix( totalDiffuse, transmissionAll.rgb, transmissionFactor );\n\n    vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;\n\n#ifdef WX_USE_SHEEN\n    // Sheen energy compensation approximation calculation can be found at the end of\n    // https://drive.google.com/file/d/1T0D1VSyR4AllqIJTQAraEIzjlb5h4FKH/view?usp=sharing\n    float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );\n\n    outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecular;\n    // outgoingLight = sheenSpecular;\n#endif\n\n#ifdef WX_USE_CLEARCOAT\n    float dotNVcc = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );\n\n    vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );\n\n    outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + clearcoatSpecular * material.clearcoat;\n#endif\n\n    vec3 color = outgoingLight;\n\n    // Debug OutputColor\n    // color = baseColor.rgb;\n    // color = irradiance;\n    // color = radiance;\n    // color = reflectedLight.directDiffuse;\n    // color = reflectedLight.directSpecular;\n    // color = reflectedLight.directDiffuse + reflectedLight.directSpecular;\n    // color = reflectedLight.indirectDiffuse;\n    // color = reflectedLight.indirectSpecular;\n    // color = reflectedLight.indirectDiffuse + reflectedLight.indirectSpecular;\n    // color = totalDiffuse;\n    // color = totalSpecular;\n    // color = totalEmissiveRadiance;\n\n    // gamma correct\n#ifndef WX_PP_ACTIVE\n    color = gammaCorrection(color);\n#endif\n\n    // Debug OutputColor Last\n    // color = directLight.color;\n    // color = baseColor.rgb;\n    // color = geometry.viewDir;\n    // color = geometry.normal;\n    // color = inverseTransformDirection( geometry.normal, u_view );\n    // color = normal;\n    // color = (v_Normal + vec3(1.0, 1.0, 1.0)) / 2.0;\n    // color = v_Tangent;\n    // color = v_BitTangent;\n    // color = reflect( - geometry.viewDir, geometry.normal );\n    // color = geometry.position;\n    // color = geometry.viewDir;\n    // color = vec3(metallic);\n    // color = material.specularColor;\n    // color = diffuseColor.rgb;\n    // color = vec3(material.roughness);\n    // color = vec3(u_clearcoatRoughnessFactor, u_clearcoatRoughnessFactor, u_clearcoatRoughnessFactor);\n    // color = iblIrradiance;\n    // color = vec3(material.clearcoat);\n    // color = vec3(ao);\n\n    // color = vec3(gl_FrontFacing? 1.0: 0.0, 0.0, 0.0);\n\n    #ifndef WX_USE_BLEND\n      diffuseColor.a = 1.0;\n    #endif\n    \n    gl_FragData[0] = vec4(color, diffuseColor.a);\n}\n']})}));const an="#version 100\n\nuniform highp mat4 u_view;\nuniform highp mat4 u_viewInverse;\nuniform highp mat4 u_vp;\nuniform highp mat4 u_projection;\nuniform mat4 u_lightSpaceMatrix;\nuniform vec4 u_fogInfos;\nuniform vec3 u_fogColor;\nuniform float u_gameTime;\nuniform float u_aspect;\nuniform vec3 u_ambientLight;\nuniform vec3 u_lightDir;\nuniform vec3 u_lightColor;\nuniform vec3 u_shadowColor;\nuniform float u_shadowStrength;\nuniform float u_shadowBias;\nuniform float u_lightWidthPCSS;\nuniform float u_blockSizePCSS;\nuniform vec4 u_csmFarBounds;\nuniform vec4 u_shadowTilingOffsets[4];\nuniform mat4 u_csmLightSpaceMatrices[4];\nuniform vec3 u_SH[9];\n\nuniform highp mat4 u_world;\n\nuniform float u_outlineWidth;\nuniform float u_farthestDistance;\nuniform float u_nearestDistance;\nuniform float u_offsetZ;\n\n"+ke()+"\n\nattribute vec3 a_position;\n\n#ifdef WX_USE_NORMAL\n  attribute highp vec3 a_normal;\n#endif\n\nvarying highp vec3 v_disColor;\n\nvoid main()\n{\n  #ifdef WX_SKINNED\n      mat4 boneMat = getBoneMat();\n      mat4 modelViewMatrix = u_view * boneMat;\n  #else\n      mat4 modelViewMatrix = u_view * u_world;\n  #endif\n\n  vec4 worldPosition = getSkinningWorldPosition(vec4(a_position, 1.0));\n  vec3 cameraPosWS = vec3(u_viewInverse[3][0], u_viewInverse[3][1], u_viewInverse[3][2]);\n\n  vec4 posCS = u_projection *  u_view * worldPosition;\n\n  vec3 zeroWS = (u_projection * u_view * getSkinningWorldPosition(vec4(0, 0, 0, 1))).xyz;\n\n  float objectDistanceToCamera = distance(zeroWS, cameraPosWS);\n  float outlineWidth = 0.01 * u_outlineWidth * smoothstep(u_farthestDistance, u_nearestDistance, objectDistanceToCamera);\n  \n  vec3 normalCS = mat3(u_projection) * (mat3(u_view) * (mat3(u_world) * a_normal));\n\n  gl_Position = vec4(posCS.xy + outlineWidth * normalCS.xy, posCS.zw);\n\n  float offsetZ = u_offsetZ * (- 0.01);\n  vec4 cameraPosCS = u_projection * u_view * vec4(cameraPosWS.xyz, 1);\n\n  gl_Position.z = gl_Position.z + offsetZ * cameraPosCS.z;\n\n  // v_disColor = (mat3(u_world) * a_normal);\n}\n",sn="#version 100\n\nuniform highp mat4 u_view;\nuniform highp mat4 u_viewInverse;\nuniform highp mat4 u_vp;\nuniform highp mat4 u_projection;\nuniform mat4 u_lightSpaceMatrix;\nuniform vec4 u_fogInfos;\nuniform vec3 u_fogColor;\nuniform float u_gameTime;\nuniform float u_aspect;\nuniform vec3 u_ambientLight;\nuniform vec3 u_lightDir;\nuniform vec3 u_lightColor;\nuniform vec3 u_shadowColor;\nuniform float u_shadowStrength;\nuniform float u_shadowBias;\nuniform float u_lightWidthPCSS;\nuniform float u_blockSizePCSS;\nuniform vec4 u_csmFarBounds;\nuniform vec4 u_shadowTilingOffsets[4];\nuniform mat4 u_csmLightSpaceMatrices[4];\nuniform vec3 u_SH[9];\n\nuniform highp mat4 u_world;\n\n"+ke()+"\n\nattribute vec3 a_position;\nattribute highp vec2 a_texCoord;\nattribute highp vec2 a_texCoord_1;\n\nvarying highp vec2 v_UV;\nvarying highp vec2 v_UV1;\nvarying highp vec3 v_ViewPosition;\n\n#ifdef WX_USE_COLOR_0\n    attribute vec3 a_color;\n    varying highp vec3 v_Color;\n#endif\n\n#ifdef WX_USE_NORMAL\n    attribute highp vec3 a_normal;\n    varying highp vec3 v_Normal;\n#endif\n\nvoid main()\n{\n#ifdef WX_SKINNED\n    mat4 boneMat = getBoneMat();\n    mat4 modelViewMatrix = u_view * boneMat;\n#else\n    mat4 modelViewMatrix = u_view * u_world;\n#endif\n    mat3 normalMatrix = mat3(modelViewMatrix);\n    vec4 mvPosition = modelViewMatrix * vec4(a_position, 1.0);\n\n    v_UV = a_texCoord;\n    v_UV1 = a_texCoord_1;\n\n#ifdef WX_USE_COLOR_0\n    v_Color = a_color;\n#endif\n\n#ifdef WX_USE_NORMAL\n    // v_Normal = normalize(vec3(normalMatrix * a_normal));\n    v_Normal = normalize(a_normal);\n\n#endif\n\n    v_ViewPosition = mvPosition.xyz;\n\n    gl_Position = u_projection * mvPosition;\n}\n";Me("toon",(function(e){return e.createEffect({name:"toon",defaultRenderQueue:2e3,passes:[{renderStates:{blendOn:!1,depthWrite:!0,cullOn:!0,cullFace:ue.ECullMode.BACK},lightMode:"ForwardBase",useMaterialRenderStates:!0,shaders:[0,1]},{renderStates:{blendOn:!1,depthWrite:!0,cullOn:!1,cullFace:ue.ECullMode.NONE},lightMode:"ForwardBase",useMaterialRenderStates:!0,shaders:[2,3]}],properties:[{key:"u_baseColorFactor",type:ue.EUniformType.FLOAT4,default:[1,1,1,1]},{key:"u_outlineColor",type:ue.EUniformType.FLOAT4,default:[0,0,0,0]},{key:"u_outlineWidth",type:ue.EUniformType.FLOAT,default:[.4]},{key:"u_farthestDistance",type:ue.EUniformType.FLOAT,default:[100]},{key:"u_nearestDistance",type:ue.EUniformType.FLOAT,default:[.2]},{key:"u_offsetZ",type:ue.EUniformType.FLOAT,default:[2]}],images:[{key:"u_baseColorMap",default:"white",macro:"WX_USE_BASECOLORMAP"},{key:"u_gradientMap",default:"white"}],shaders:[an,"#version 100\n\nprecision highp float;\nprecision highp int;\n\nuniform float u_gameTime;\nuniform highp mat4 u_world;\nuniform highp mat4 u_view;\nuniform highp mat4 u_projection;\nuniform highp mat4 u_viewInverse;\n\nuniform vec4 u_outlineColor;\n\nvarying highp vec3 v_disColor;\n\n\nvoid main()\n{\n    gl_FragData[0] = u_outlineColor;\n    // gl_FragData[0] = vec4(v_disColor, 1.0);\n}\n",sn,"#version 100\n\nprecision highp float;\nprecision highp int;\n\nuniform float u_gameTime;\nuniform highp mat4 u_world;\nuniform highp mat4 u_view;\nuniform highp mat4 u_projection;\nuniform highp mat4 u_viewInverse;\n\nvarying highp vec2 v_UV;\nvarying highp vec2 v_UV1;\nvarying highp vec3 v_ViewPosition;\n\n#ifdef WX_USE_NORMAL\n  varying highp vec3 v_Normal;\n#endif\n\n\n#define PI 3.141592653589793\n#define PI2 6.283185307179586\n#define PI_HALF 1.5707963267948966\n#define RECIPROCAL_PI 0.3183098861837907\n#define RECIPROCAL_PI2 0.15915494309189535\n#define EPSILON 1e-6\n#define EPSILON_ATAN 1e-2\n\n#define WX_MANUAL_SRGB true\n#define WX_SRGB_FAST_APPROXIMATION true\n\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n\nfloat pow2( const in float x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }\nfloat average( const in vec3 color ) { return dot( color, vec3( 0.3333 ) ); }\n\nstruct GeometricContext {\n\tvec3 position;\n\tvec3 normal;\n\tvec3 viewDir;\n\tvec3 clearcoatNormal;\n};\n\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\n\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\n\nuniform vec4 u_ambientLightColorIns;\nuniform vec3 u_mainLightDir;\nuniform vec4 u_mainLightColorIns;\n\nuniform vec3 u_addLightsPos[4];\nuniform vec3 u_addLightsDir[4];\nuniform vec4 u_addLightsColorIns[4];\nuniform vec4 u_addLightsInfo[4];\n\n\nvec4 SRGBtoLINEAR(vec4 srgbIn)\n{\n#ifdef WX_MANUAL_SRGB\n\n    #ifdef WX_SRGB_FAST_APPROXIMATION\n        vec3 linOut = pow(srgbIn.xyz,vec3(2.2));\n    #else //SRGB_FAST_APPROXIMATION\n        vec3 bLess = step(vec3(0.04045),srgbIn.xyz);\n        vec3 linOut = mix( srgbIn.xyz/vec3(12.92), pow((srgbIn.xyz+vec3(0.055))/vec3(1.055),vec3(2.4)), bLess );\n    #endif //SRGB_FAST_APPROXIMATION\n\n    return vec4(linOut, srgbIn.w);;\n\n#else //MANUAL_SRGB\n    \n    return srgbIn;\n\n#endif //MANUAL_SRGB\n}\n\nvec3 gammaCorrection(vec3 color) {\n  return pow(color, vec3(1.0 / 2.2));\n}\n\nvec3 removeGammaCorrection(vec3 color) {\n  return pow(color, vec3(2.2));\n}\n\n\n// https://github.com/KhronosGroup/glTF/blob/master/extensions/2.0/Vendor/EXT_lights_image_based/README.md#rgbd\nvec3 decodeRGBD(in vec4 color){\n\t\treturn color.rgb / color.a;\n}\n\nfloat getFace( vec3 direction ) {\n\tvec3 absDirection = abs( direction );\n\tfloat face = - 1.0;\n\tif ( absDirection.x > absDirection.z ) {\n\t\tif ( absDirection.x > absDirection.y )\n\t\t\tface = direction.x > 0.0 ? 0.0 : 3.0;\n\t\telse\n\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t} else {\n\t\tif ( absDirection.z > absDirection.y )\n\t\t\tface = direction.z > 0.0 ? 2.0 : 5.0;\n\t\telse\n\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t}\n\treturn face;\n}\nvec2 getUV( vec3 direction, float face ) {\n\tvec2 uv;\n\tif ( face == 0.0 ) {\n\t\tuv = vec2( direction.z, direction.y ) / abs( direction.x ); // pos x\n\t} else if ( face == 1.0 ) {\n\t\tuv = vec2( - direction.x, - direction.z ) / abs( direction.y ); // pos y\n\t} else if ( face == 2.0 ) {\n\t\tuv = vec2( - direction.x, direction.y ) / abs( direction.z ); // pos z\n\t} else if ( face == 3.0 ) {\n\t\tuv = vec2( - direction.z, direction.y ) / abs( direction.x ); // neg x\n\t} else if ( face == 4.0 ) {\n\t\tuv = vec2( - direction.x, direction.z ) / abs( direction.y ); // neg y\n\t} else {\n\t\tuv = vec2( direction.x, direction.y ) / abs( direction.z ); // neg z\n\t}\n\treturn 0.5 * ( uv + 1.0 );\n}\n\n\nvec4 textureEnvMap(sampler2D texture, vec3 position){\n\treturn texture2D(texture, vec2(atan(position.x, position.z) * RECIPROCAL_PI * 0.5+0.5,  acos(position.y) * RECIPROCAL_PI));\n}\n\nvec4 textureEnvMapIncludeMipmapsLod(sampler2D texture, vec3 position, float lod){\n\tlod = floor(lod);\n\n\tif (lod > 7.0) {\n\t\tlod = 7.0;\n\t}\n\n\tfloat posZ = abs(position.z) < EPSILON_ATAN ? EPSILON_ATAN : position.z;\n\n\tvec2 uv = vec2(atan(position.x, posZ) * RECIPROCAL_PI * 0.5 + 0.5, acos(position.y) * RECIPROCAL_PI);\n\n\tfloat scale = pow(2.0, lod);\n\n\treturn texture2D(texture, vec2(uv.x / scale, (uv.y / scale / 2.0) + 1.0 - 1.0/pow(2.0, lod)));\n\n\treturn vec4( position, 0.0);\n}\n\nvec4 textureBilinearEnvMap(sampler2D texture, vec3 direction, float roughness){\n\n\tfloat uvX = (atan(direction.x, direction.z) ) * RECIPROCAL_PI * 0.5 + 0.5;\n\tfloat uvY = acos(direction.y) * RECIPROCAL_PI;\n\tvec2 uv = vec2(uvX, uvY);\n\tvec4 envmap = texture2D(texture, uv);\n\n\treturn envmap;\n\n}\n\n\nvec3 computeDiffuseSHLight(vec3 normal, in vec3 sh[9]) {\n\treturn sh[0] +\n\t\tsh[1] * (normal.y) +\n\t\tsh[2] * (normal.z) +\n\t\tsh[3] * (normal.x) +\n\t\tsh[4] * (normal.y * normal.x) +\n\t\tsh[5] * (normal.y * normal.z) +\n\t\tsh[6] * ((3.0 * normal.z * normal.z) - 1.0) +\n\t\tsh[7] * (normal.z * normal.x) +\n\t\tsh[8] * (normal.x * normal.x - (normal.y * normal.y));\n}\n\n\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\t// dir can be either a direction vector or a normal vector\n\t// upper-left 3x3 of matrix is assumed to be orthogonal\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\n\n\n\n\n\n\nuniform highp vec4 u_baseColorFactor;\n\nuniform sampler2D u_baseColorMap;\n\nuniform sampler2D u_gradientMap;\n\nstruct ToonMaterial {\n\tvec3 diffuseColor;\n};\n\nvec3 diffuse = vec3( 1.0 );\nfloat opacity = 1.0;\n\nvec3 BRDF_Lambert( const in vec3 diffuseColor ) {\n\n\treturn RECIPROCAL_PI * diffuseColor;\n\n} // validated\n\nvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\t// dotNL will be from -1.0 to 1.0\n\tfloat dotNL = dot( normal, lightDirection );\n\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n\n\treturn vec3( texture2D( u_gradientMap, coord ).r );\n}\n\nvoid Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\n    vec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;\n\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n\nvoid IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n\n}\n\n\nvoid main()\n{\n    vec4 diffuseColor = vec4( diffuse, opacity );\n\n    // ReflectedLight\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n    \n    // Emissive\n    vec3 totalEmissiveRadiance = vec3(0.0);\n\n#ifdef WX_USE_BASECOLORMAP\n    #ifdef WX_BASECOLORMAP_USE_UV1\n      vec2 uvBaseColor = v_UV1;\n    #elif defined(WX_BASECOLORMAP_USE_UV2)\n      vec2 uvBaseColor = v_UV2;\n    #elif defined(WX_BASECOLORMAP_USE_UV3)\n      vec2 uvBaseColor = v_UV3;\n    #else\n      vec2 uvBaseColor = v_UV;\n    #endif\n\n    vec4 baseColor = texture2D(u_baseColorMap, uvBaseColor) * u_baseColorFactor;\n#else\n    vec4 baseColor = u_baseColorFactor;\n#endif\n\n// Normal\n#ifdef WX_USE_NORMAL\n    vec3 normal = normalize(v_Normal);\n#else\n    vec3 normal = vec3(0.0, 0.0, 1.0);\n#endif\n\n    // Accumulation\n    ToonMaterial material;\n    material.diffuseColor = diffuseColor.rgb;\n\n    GeometricContext geometry;\n\n    geometry.position = v_ViewPosition;\n    geometry.normal = normal;\n    geometry.viewDir = normalize( vec3(0.0) - v_ViewPosition );\n\n    // AddLights\n#ifdef WX_USE_ADD_LIGHTS\n\n    for(int i = 0; i < WX_ADD_LIGHTS_COUNT; ++i)\n    {\n    }\n#endif\n\n    vec3 color = baseColor.rgb;\n\n    \n    // color = (v_Normal + vec3(1.0, 1.0, 1.0)) / 2.0;\n\n    gl_FragData[0] = vec4(color, 1.0);\n}\n"]})})),Me("particle",(function(e){return e.createEffect({name:"particle",properties:[{key:"u_baseColorFactor",type:3,default:[1,1,1,1]}],images:[{key:"u_baseColorMap",default:"white",macro:"WX_USE_BASECOLORMAP"},{key:"u_rampColorMap",default:"white",macro:"WX_USE_RAMPCOLORMAP"}],defaultRenderQueue:3e3,passes:[{renderStates:{cullOn:!1,blendOn:!0,depthWrite:!1},lightMode:"ForwardBase",useMaterialRenderStates:!0,shaders:[0,1]}],shaders:["#version 100\n\n  uniform highp mat4 u_view;\n  uniform highp mat4 u_projection;\n  uniform highp mat4 u_world;\n  \n  attribute vec3 a_position;\n  attribute highp vec2 a_texCoord;\n  attribute vec3 a_offset;\n  attribute vec4 a_color;\n  attribute float a_angle;\n\n  #ifdef WX_BILLBOARDMODE_STRETCHED\n    attribute vec3 a_direction;\n    attribute float a_lengthScale;\n  #endif\n\n  #ifdef WX_USE_RAMPCOLORMAP\n    attribute vec4 a_rampPos;\n  #endif\n\n  #ifdef WX_SPRITESHEET\n    attribute vec4 a_cellPosition;\n  #endif\n\n  varying highp vec2 v_Uv;\n  varying highp vec4 v_Color;\n\n  #ifdef WX_USE_RAMPCOLORMAP\n    varying highp vec4 v_rampData;\n  #endif\n\n  uniform mat4 u_viewInverse;\n\n  #ifdef WX_BILLBOARDMODE_Y\n  vec3 rotate(vec3 yaxis,vec3 rotatedOffset) {\n    vec3 xaxis=normalize(cross(vec3(0.,1.0,0.),yaxis));\n    vec3 zaxis=normalize(cross(yaxis,xaxis));\n    vec3 row0=vec3(xaxis.x,xaxis.y,xaxis.z);\n    vec3 row1=vec3(yaxis.x,yaxis.y,yaxis.z);\n    vec3 row2=vec3(zaxis.x,zaxis.y,zaxis.z);\n    mat3 rotMatrix= mat3(row0,row1,row2);\n    vec3 alignedOffset=rotMatrix*rotatedOffset;\n    return alignedOffset;\n  }\n  #endif\n\n  #ifdef WX_BILLBOARDMODE_STRETCHED\n  vec3 rotateAlign(vec3 toCamera, vec3 rotatedOffset) {\n    vec3 normalizedToCamera = normalize(toCamera);\n    vec3 normalizedCrossVec = normalize(cross(normalize(a_direction), normalizedToCamera));\n    vec3 normalizedCrossResult = normalize(cross(normalizedToCamera, normalizedCrossVec)) * a_lengthScale;\n    vec3 row0 = normalizedCrossVec;\n    vec3 row1 = normalizedCrossResult;\n    vec3 row2 = normalizedToCamera;\n    mat3 rotMatrix = mat3(row0, row1, row2);\n    vec3 alignedOffset = rotMatrix * rotatedOffset;\n    return alignedOffset; \n  }\n  #endif\n\n  vec3 extractScale(mat4 matrix){\n    vec3 scale;\n    scale.x = length(vec4(matrix[0][0],matrix[0][1],matrix[0][2],matrix[0][3]));\n    scale.y = length(vec4(matrix[1][0],matrix[1][1],matrix[1][2],matrix[1][3]));\n    scale.z = length(vec4(matrix[2][0],matrix[2][1],matrix[2][2],matrix[2][3]));\n    return scale;\n  }\n  \n  void main()\n  {\n  #ifdef WX_SPRITESHEET\n    vec2 uvOffset = vec2(a_texCoord.x * a_cellPosition.z ,a_texCoord.y * a_cellPosition.w);\n    v_Uv = vec2(a_cellPosition.x, a_cellPosition.y) + uvOffset;\n  #else\n    v_Uv = a_texCoord;\n  #endif \n    vec4 localPosition = vec4(a_position, 1.0);\n    vec4 cameraPosition;\n    vec3 rotatedOffset;\n    vec3 viewPos;\n    v_Color = a_color;\n  #ifdef WX_BILLBOARDMODE_Y\n    rotatedOffset.x = a_offset.x * cos(a_angle) - a_offset.y * sin(a_angle);\n    rotatedOffset.z = a_offset.x * sin(a_angle) + a_offset.y * cos(a_angle);\n    rotatedOffset.y = 0.0;\n    vec3 yaxis = a_position - vec3(u_viewInverse[3][0], u_viewInverse[3][1], u_viewInverse[3][2]);\n    yaxis.y = 0.0;\n    vec3 alignedOffset = rotate(yaxis, rotatedOffset);\n    cameraPosition = u_view * u_world * vec4(localPosition.xyz + alignedOffset.xyz, 1.0);\n    viewPos = cameraPosition.xyz;\n  #elif defined(WX_BILLBOARDMODE_STRETCHED)\n    rotatedOffset.x = a_offset.x * cos(a_angle) - a_offset.y * sin(a_angle);\n    rotatedOffset.y = a_offset.x * sin(a_angle) + a_offset.y * cos(a_angle);\n    rotatedOffset.z = 0.0;\n    vec3 toCamera = a_position - vec3(u_viewInverse[3][0], u_viewInverse[3][1], u_viewInverse[3][2]);\n    vec3 alignedOffset = rotateAlign(toCamera, rotatedOffset);\n    cameraPosition = u_view * u_world * vec4(localPosition.xyz + alignedOffset.xyz, 1.0);\n    viewPos = cameraPosition.xyz;\n  #elif defined(WX_BILLBOARD)\n    vec3 scale = extractScale(u_world);\n    rotatedOffset.x = (a_offset.x * cos(a_angle) - a_offset.y * sin(a_angle)) * scale.x;\n    rotatedOffset.y = (a_offset.x * sin(a_angle) + a_offset.y * cos(a_angle)) * scale.y;\n    rotatedOffset.z = 0.0;\n    cameraPosition = u_view * u_world * localPosition + vec4(rotatedOffset, 1.0);\n    viewPos = cameraPosition.xyz;\n  #elif defined(WX_RENDERMESH)\n    rotatedOffset.x = a_offset.x * cos(a_angle) - a_offset.z * sin(a_angle);\n    rotatedOffset.z = a_offset.x * sin(a_angle) + a_offset.z * cos(a_angle);\n    rotatedOffset.y = a_offset.y;\n    cameraPosition = u_view * u_world * vec4(localPosition.xyz + rotatedOffset.xyz, 1.0);\n    viewPos = cameraPosition.xyz;\n  #else\n    rotatedOffset.x = a_offset.x * cos(a_angle) - a_offset.y * sin(a_angle);\n    rotatedOffset.y = a_offset.x * sin(a_angle) + a_offset.y * cos(a_angle);\n    rotatedOffset.z = 0.0;\n    cameraPosition = u_view * u_world * vec4(localPosition.xyz + rotatedOffset.xyz, 1.0);\n    viewPos = cameraPosition.xyz;\n  #endif\n  #ifdef WX_USE_RAMPCOLORMAP\n    v_rampData = a_rampPos;\n  #endif\n    gl_Position = u_projection * vec4(viewPos, 1.0);\n  }","#version 100\n  precision mediump float;\n  precision highp int;\n  varying highp vec2 v_Uv;\n  varying highp vec4 v_Color;\n  #ifdef WX_USE_RAMPCOLORMAP\n    varying highp vec4 v_rampData;\n    uniform sampler2D u_rampColorMap;\n  #endif\n\n  uniform highp vec4 u_baseColorFactor;\n  \n  #ifdef WX_USE_BASECOLORMAP\n    uniform sampler2D u_baseColorMap;\n  #endif\n\n  void main()\n  {\n    vec4 baseColor;\n    #ifdef WX_USE_BASECOLORMAP\n      vec4 textureColor = texture2D(u_baseColorMap, v_Uv) * u_baseColorFactor;\n      baseColor = textureColor * v_Color;\n    #else\n      baseColor = v_Color;\n    #endif\n\n    #ifdef WX_USE_RAMPCOLORMAP\n      float alpha=baseColor.a;\n      float remappedIndex=clamp((alpha-v_rampData.x)/v_rampData.y,0.0,1.0);\n      vec4 rampColor = texture2D(u_rampColorMap,vec2(1.0-remappedIndex,0.));\n      baseColor.rgb *= rampColor.rgb;\n      baseColor.a=clamp((alpha*rampColor.a-v_rampData.z)/v_rampData.w,0.0,1.0);\n    #endif\n\n    #ifdef WX_PP_ACTIVE\n        // removeGammaCorrection\n        gl_FragData[0] = vec4(pow(baseColor.rgb, vec3(2.2)), baseColor.a);\n    #else\n        gl_FragData[0] = baseColor;\n    #endif\n\n  }  \n    "]})})),Me("skybox",(function(e){return e.createEffect({name:"skybox",properties:[{key:"u_rotation",type:ue.EUniformType.FLOAT,default:[0]},{key:"u_st",type:ue.EUniformType.FLOAT4,default:[1,1,0,0]}],images:[{key:"u_texture",default:"red"}],defaultRenderQueue:2e3,passes:[{renderStates:{cullOn:!1,blendOn:!1,depthWrite:!1,cullFace:ue.ECullMode.FRONT},lightMode:"Skybox",useMaterialRenderStates:!0,shaders:[0,1]}],shaders:["#version 100\n\nuniform float u_gameTime;\n\nuniform highp mat4 u_world;\nuniform highp mat4 u_view;\nuniform highp mat4 u_viewInverse;\nuniform highp mat4 u_projection;\n\nuniform float u_envRotation;\n#ifdef WX_USE_SKY_2D\nuniform vec4 u_st;\n#endif\n\nattribute vec3 a_position;\nattribute highp vec2 a_texCoord;\nvarying highp vec3 v_uv;\nvarying highp vec3 v_ViewPosition;\n"+nn+"\n\nvoid main()\n{\n\n  mat4 mt_view = u_view;\n\n  mat4 rmt = rotation3dY(u_envRotation);\n  mt_view *= rmt;\n  mt_view = mat4(mat3(mt_view));\n\n#ifdef WX_USE_SKY_CUBE\n    v_uv = a_position;\n#else\n    v_uv = vec3(a_texCoord.xy, 1.0);\n#endif\n\n#ifdef WX_USE_SKY_2D\n    gl_Position = vec4(a_position.xy * u_st.xy + u_st.zw, 1.0, 1.0);\n#else\n    gl_Position = u_projection * mt_view * vec4(a_position, 1.0);\n#endif\n}","#version 100\n\nprecision mediump float;\nprecision highp int;\nvarying highp vec3 v_uv;\n\n#ifdef WX_USE_SKY_CUBE\nuniform samplerCube u_texture;\n#else\nuniform sampler2D u_texture;\n#endif\n\nconst vec2 invAtan = vec2(0.1591, 0.3183);\nvec2 SampleSphericalMap(vec3 v)\n{\n    vec2 uv = vec2(atan(v.z, v.x), asin(v.y));\n    uv *= invAtan;\n    uv += 0.5;\n    return uv;\n}\n\nvoid main()\n{\n  \n#ifdef WX_USE_SKY_CUBE\n  vec4 baseColor = textureCube(u_texture, v_uv);\n#else\n  #ifdef WX_USE_SKY_2D\n      vec2 uv = v_uv.xy;\n      #ifdef WX_USE_SKY_RT\n      uv.y = 1. - uv.y;\n      #endif\n      vec4 baseColor = texture2D(u_texture, uv);\n  #else\n      vec2 sphericalUv = v_uv.xy;\n      #ifdef WX_SAMPLER_SKY_HALF\n          vec4 baseColor = texture2D(u_texture, vec2(sphericalUv.x, sphericalUv.y / 2.0 ));\n      #else\n          vec4 baseColor = texture2D(u_texture, sphericalUv);\n      #endif\n  #endif\n#endif\n\n#ifdef WX_PP_ACTIVE\n  gl_FragData[0] = vec4(pow(baseColor.rgb, vec3(2.2)), baseColor.a);\n#else\n  gl_FragData[0] = baseColor;\n#endif\n\n}  \n"]})})),Me("shadow-caster",(function(e){return e.createEffect({name:"shadow-caster",properties:[{key:"u_baseColorFactor",type:3,default:[1,1,1,1]}],images:[{key:"u_baseColorMap",default:"white",macro:"WX_USE_BASECOLORMAP"}],defaultRenderQueue:2e3,passes:[{renderStates:{cullOn:!0,blendOn:!1,depthWrite:!0,cullFace:ue.ECullMode.FRONT},lightMode:"ShadowCaster",useMaterialRenderStates:!1,shaders:[0,1]}],shaders:["#version 100\n  uniform highp mat4 u_world;\n  uniform highp mat4 u_lightSpaceMatrix;\n\n  "+ke()+"\n  \n  attribute vec3 a_position;\n  attribute highp vec2 a_texCoord;\n  varying highp vec2 v_uv;\n  varying highp float v_z;\n  \n  void main()\n  {\n      v_uv = a_texCoord;\n\n      vec4 worldPosition = getSkinningWorldPosition(vec4(a_position, 1.0));\n      vec4 lightPos = u_lightSpaceMatrix * worldPosition;\n      v_z = lightPos.z / lightPos.w;\n      gl_Position = lightPos;\n  }","#version 100\n  precision mediump float;\n  precision highp int;\n  varying highp vec2 v_uv;\n  varying highp float v_z;\n  \n  uniform highp vec4 u_baseColorFactor;\n  uniform sampler2D u_baseColorMap;\n\n  vec4 packDepth(float depth)\n  {\n    vec4 bitShift = vec4(256.0 * 256.0 * 256.0, 256.0 * 256.0, 256.0, 1.0);\n    vec4 bitMask = vec4(0.0, 1.0 / 256.0, 1.0 / 256.0, 1.0 / 256.0);\n    vec4 res = mod(\n      depth * bitShift * vec4(255.0, 255.0, 255.0, 255.0),\n      vec4(256.0, 256.0, 256.0, 256.0)) / vec4(255.0, 255.0, 255.0, 255.0);\n    res -= res.xxyz * bitMask;\n    return res;\n  }\n\n  void main()\n  {\n    float a;\n#ifdef WX_USE_BASECOLORMAP\n    a = texture2D(u_baseColorMap, v_uv).a * u_baseColorFactor.a;\n#else\n    a = u_baseColorFactor.a;\n#endif\n    if (a < 0.7114514) {\n      discard;\n    }\n\n    gl_FragData[0] = packDepth(v_z * 0.5 + 0.5);\n  }  \n    "]})})),Me("ar-camera-yuv",(function(e){return e.createEffect({name:"ar-camera-yuv",properties:[{key:"u_displayMatrix",type:6,default:[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}],images:[{key:"u_yTexture",default:"black",macro:"WX_AR_CAMERA_READY"},{key:"u_uvTexture",default:"white"},{key:"u_depthTexture",default:"white",macro:"WX_AR_CAMERA_DEPTH"}],defaultRenderQueue:2e3,passes:[{renderStates:{cullOn:!1,blendOn:!1,depthWrite:!0},lightMode:"Skybox",useMaterialRenderStates:!0,shaders:[0,1]}],shaders:["#version 100\n  attribute vec3 a_position;\n  attribute vec2 a_texCoord;\n\n  uniform mat4 u_displayMatrix;\n  varying vec2 v_texCoord;\n\n#ifdef WX_AR_CAMERA_DEPTH\n  uniform sampler2D u_depthTexture;\n#endif\n\n  void main() {\n    v_texCoord = a_texCoord;\n    vec4 pos = u_displayMatrix * vec4(a_position.xy, 1., 1.);\n#ifdef WX_AR_CAMERA_DEPTH\n    vec4 uv = u_displayMatrix * vec4(a_texCoord.xy, 1., 1.);\n    float depth = texture2D(u_depthTexture, uv.xy).x;\n    pos.z = depth;\n#endif\ngl_Position = pos;\n  }","#version 100\n    precision highp float;\n    uniform sampler2D u_yTexture;\n    uniform sampler2D u_uvTexture;\n    varying vec2 v_texCoord;\n\n#ifdef WX_AR_CAMERA_DEPTH\n    uniform sampler2D u_depthTexture;\n#endif\n\n    float unpack(float h, float l) {\n      return h * 0.94117647 + l * 0.0588235;\n    }\n\n    void main() {\n#ifdef WX_AR_CAMERA_READY\n      vec4 yColor = texture2D(u_yTexture, v_texCoord);\n      vec4 uvColor = texture2D(u_uvTexture, v_texCoord);\n\n      float Y, U, V;\n      float R, G, B;\n      Y = yColor.r;\n      U = unpack(uvColor.r, uvColor.g) - 0.5;\n      V = unpack(uvColor.b, uvColor.a) - 0.5;\n      \n      R = Y + 1.402 * V;\n      G = Y - 0.344 * U - 0.714 * V;\n      B = Y + 1.772 * U;\n      \n      // BGRA\n      #ifdef WX_PP_ACTIVE\n        gl_FragData[0] = vec4(pow(vec3(B, G, R), vec3(2.2)), 1.);\n      #else\n        gl_FragData[0] = vec4(B, G, R, 1.0);\n      #endif\n\n#ifdef WX_AR_CAMERA_DEPTH\n    #ifdef WX_AR_CAMERA_DEPTH_DEBUG\n    if (v_texCoord.x <= 0.3333 && v_texCoord.y <= 0.3333) {\n      float depth_debug = texture2D(u_depthTexture, v_texCoord * 3.).r;\n      gl_FragData[0] = vec4(depth_debug, depth_debug, depth_debug, 1.);\n    } else {\n      gl_FragData[0] = vec4(B, G, R, 1.0);\n    }\n    #endif\n#endif\n\n#else\n      gl_FragColor = vec4(0., 0., 0., 1.0);\n#endif\n    }\n    "]})}));var un=__webpack_require__(8317),cn=__webpack_require__.n(un);Me("post-process-blit",(function(e){return e.createEffect({name:"post-process-blit",properties:[{key:"u_alpha",type:ue.EUniformType.FLOAT,default:[1]}],images:[{key:"u_sourceTex",default:"white"}],defaultRenderQueue:2e3,passes:[{renderStates:{cullOn:!1,blendOn:!1,depthWrite:!1,depthTestOn:!1},lightMode:"PostProcess",useMaterialRenderStates:!0,shaders:[0,1]}],shaders:[cn(),__webpack_require__(7526)]})}));var ln=__webpack_require__(1442),fn=__webpack_require__.n(ln);Me("post-process-fxaa",(function(e){return e.createEffect({name:"post-process-fxaa",properties:[{key:"u_width",type:ue.EUniformType.FLOAT,default:[1]},{key:"u_height",type:ue.EUniformType.FLOAT,default:[1]}],images:[{key:"u_sourceTex",default:"white"}],defaultRenderQueue:2e3,passes:[{renderStates:{cullOn:!1,blendOn:!1,depthWrite:!1,depthTestOn:!1},lightMode:"PostProcess",useMaterialRenderStates:!0,shaders:[0,1]}],shaders:[cn(),fn()]})}));var pn="${sample}";function hn(e){var t=e.indexOf(pn);if(t<0)return e;for(var r=e.substring(0,t),n=0;n<100;n++)r+="#if WX_SAMPLE_COUNT > "+n+"\nsum+=sampleAt("+n+".);\n#endif\n";return r+e.substring(t+pn.length)}Me("post-process-blur",(function(e){return e.createEffect({name:"post-process-blur",properties:[{key:"u_width",type:ue.EUniformType.FLOAT,default:[1]},{key:"u_height",type:ue.EUniformType.FLOAT,default:[1]},{key:"u_radius",type:ue.EUniformType.FLOAT,default:[4]},{key:"u_sampleCount",type:ue.EUniformType.FLOAT,default:[1]},{key:"u_sd",type:ue.EUniformType.FLOAT,default:[1]}],images:[{key:"u_sourceTex",default:"white"},{key:"u_horizontalBlur",default:"white"},{key:"u_verticalBlur",default:"white"}],defaultRenderQueue:2e3,passes:[{renderStates:{cullOn:!1,blendOn:!1,depthWrite:!1,depthTestOn:!1},lightMode:"Horizontal",useMaterialRenderStates:!0,shaders:[0,1]},{renderStates:{cullOn:!1,blendOn:!1,depthWrite:!1,depthTestOn:!1},lightMode:"Vertical",useMaterialRenderStates:!0,shaders:[0,2]},{renderStates:{cullOn:!1,blendOn:!1,depthWrite:!1,depthTestOn:!1},lightMode:"Resolve",useMaterialRenderStates:!0,shaders:[0,3]}],shaders:[cn(),hn(__webpack_require__(9760)),hn(__webpack_require__(8235)),__webpack_require__(1666)]})})),Me("post-process-fast-blur",(function(e){return e.createEffect({name:"post-process-fast-blur",properties:[{key:"u_width",type:ue.EUniformType.FLOAT,default:[1]},{key:"u_height",type:ue.EUniformType.FLOAT,default:[1]},{key:"u_radius",type:ue.EUniformType.FLOAT,default:[4]},{key:"u_sampleCount",type:ue.EUniformType.FLOAT,default:[1]}],images:[{key:"u_sourceTex",default:"white"},{key:"u_horizontalBlur",default:"white"},{key:"u_verticalBlur",default:"white"}],defaultRenderQueue:2e3,passes:[{renderStates:{cullOn:!1,blendOn:!1,depthWrite:!1,depthTestOn:!1},lightMode:"Horizontal",useMaterialRenderStates:!0,shaders:[0,1]},{renderStates:{cullOn:!1,blendOn:!1,depthWrite:!1,depthTestOn:!1},lightMode:"Vertical",useMaterialRenderStates:!0,shaders:[0,2]}],shaders:[cn(),__webpack_require__(6240),__webpack_require__(5220)]})}));var dn=__webpack_require__(5229),_n=__webpack_require__.n(dn);Me("post-process-vignette",(function(e){return e.createEffect({name:"post-process-vignette",properties:[{key:"u_width",type:ue.EUniformType.FLOAT,default:[1]},{key:"u_height",type:ue.EUniformType.FLOAT,default:[1]},{key:"u_color",type:ue.EUniformType.FLOAT4,default:[0,0,0,1]},{key:"u_center",type:ue.EUniformType.FLOAT2,default:[.5,.5]},{key:"u_intensity",type:ue.EUniformType.FLOAT,default:[1]},{key:"u_smoothness",type:ue.EUniformType.FLOAT,default:[.2]},{key:"u_roundness",type:ue.EUniformType.FLOAT,default:[1]},{key:"u_rounded",type:ue.EUniformType.FLOAT,default:[0]}],images:[{key:"u_sourceTex",default:"white"}],defaultRenderQueue:2e3,passes:[{renderStates:{cullOn:!1,blendOn:!1,depthWrite:!1,depthTestOn:!1},lightMode:"PostProcess",useMaterialRenderStates:!0,shaders:[0,1]}],shaders:[cn(),_n()]})})),Me("post-process-bloom",(function(e){return e.createEffect({name:"post-process-bloom",properties:[{key:"u_width",type:ue.EUniformType.FLOAT,default:[1]},{key:"u_height",type:ue.EUniformType.FLOAT,default:[1]},{key:"u_threshold",type:ue.EUniformType.FLOAT,default:[1]},{key:"u_softThreshold",type:ue.EUniformType.FLOAT,default:[1]},{key:"u_intensity",type:ue.EUniformType.FLOAT,default:[1]}],images:[{key:"u_sourceTex",default:"white"},{key:"u_horizontalBlur",default:"white"},{key:"u_verticalBlur",default:"white"}],defaultRenderQueue:2e3,passes:[{renderStates:{cullOn:!1,blendOn:!1,depthWrite:!1,depthTestOn:!1},lightMode:"Prefilter",useMaterialRenderStates:!0,shaders:[0,1]}],shaders:[cn(),__webpack_require__(7924)]})}));var yn=__webpack_require__(9400),vn=__webpack_require__.n(yn);Me("post-process-tone",(function(e){return e.createEffect({name:"post-process-tone",properties:[{key:"u_width",type:ue.EUniformType.FLOAT,default:[1]},{key:"u_height",type:ue.EUniformType.FLOAT,default:[1]},{key:"u_exposure",type:ue.EUniformType.FLOAT,default:[1]}],images:[{key:"u_sourceTex",default:"white"}],defaultRenderQueue:2e3,passes:[{renderStates:{cullOn:!1,blendOn:!1,depthWrite:!1,depthTestOn:!1},lightMode:"PostProcess",useMaterialRenderStates:!0,shaders:[0,1]}],shaders:[cn(),vn()]})})),Me("post-process-blend",(function(e){return e.createEffect({name:"post-process-blend",properties:[],images:[{key:"u_sourceTex",default:"white"},{key:"u_bottomTex",default:"white"},{key:"u_upperTex",default:"white"}],defaultRenderQueue:2e3,passes:[{renderStates:{cullOn:!1,blendOn:!1,depthWrite:!1,depthTestOn:!1},lightMode:"Default",useMaterialRenderStates:!0,shaders:[0,1]}],shaders:[cn(),__webpack_require__(1128)]})})),Me("gizmo",(function(e){return e.createEffect({name:"gizmo",properties:[{key:"u_baseColorFactor",type:3,default:[1,1,1,1]},{key:"u_gizmoTransformMatrices",type:6,default:[1,1,1,1],num:5}],defaultRenderQueue:3e3,passes:[{renderStates:{cullOn:!1,blendOn:!1,depthWrite:!1,depthTestOn:!1,primitiveType:ue.EPrimitiveType.LINE_STRIP},lightMode:"ForwardBase",useMaterialRenderStates:!0,shaders:[0,1]}],shaders:["#version 100\n\n  uniform mat4 u_view;\n  uniform mat4 u_viewInverse;\n  uniform mat4 u_vp;\n  uniform mat4 u_projection;\n  uniform mat4 u_lightSpaceMatrix;\n  uniform vec4 u_fogInfos;\n  uniform vec3 u_fogColor;\n  uniform float u_gameTime;\n  uniform float u_aspect;\n  uniform vec3 u_ambientLight;\n  uniform vec3 u_lightDir;\n  uniform vec3 u_lightColor;\n  uniform vec3 u_shadowColor;\n  uniform float u_shadowStrength;\n  uniform float u_shadowBias;\n  uniform float u_lightWidthPCSS;\n  uniform float u_blockSizePCSS;\n  uniform vec4 u_csmFarBounds;\n  uniform vec4 u_shadowTilingOffsets[4];\n  uniform mat4 u_csmLightSpaceMatrices[4];\n  uniform vec3 u_SH[9];\n  \n  \n  uniform mat4 u_world;\n  uniform mat4 u_gizmoTransformMatrices[5];\n  \n  attribute vec3 a_position;\n  attribute vec2 a_gizmoTransformIndex;\n  \n  void main()\n  {\n\n\n    vec4 worldPosition = u_world * u_gizmoTransformMatrices[int(a_gizmoTransformIndex.x)] * vec4(a_position, 1.0);\n    // vec4 worldPosition = u_world * u_gizmoTransformMatrices[0] * vec4(a_position, 1.0);\n    // vec4 worldPosition = u_world * vec4(a_position, 1.0);\n    gl_Position = u_projection * u_view * worldPosition;\n  }","#version 100\n  precision mediump float;\n  precision highp int;\n\n  void main()\n  {\n  gl_FragData[0] = vec4(1.0, 0.0, 1.0, 1.0);\n  }  \n    "]})}));var mn=[{name:"a_position",format:2,offset:0,usage:1},{name:"a_normal",format:2,offset:12,usage:2},{name:"a_texCoord",format:1,offset:24,usage:4},{name:"a_lightMapCoord",format:1,offset:32,usage:5},{name:"a_tangent",format:3,offset:40,usage:3}];function gn(e){var t=e._requestTmpObj("builtin-vertex-layouts");return t.default||(t.default=e.createVertexLayout({attributes:mn,stride:56})),t.default}var bn=new Float32Array([-.5,-.5,.5,0,0,1,0,1,.6909865140914917,.6528356075286865,1,0,0,-1,.5,-.5,.5,0,0,1,1,1,.9966580867767334,.6528356075286865,1,0,0,-1,-.5,.5,.5,0,0,1,0,0,.6909865140914917,.3471641540527344,1,0,0,-1,.5,.5,.5,0,0,1,1,0,.9966580867767334,.3471641540527344,1,0,0,-1,-.5,.5,-.5,0,1,0,0,0,.3097273111343384,.6528357267379761,1,0,0,-1,.5,.5,-.5,0,1,0,1,0,.004055766388773918,.6528357267379761,1,0,0,-1,-.5,-.5,-.5,0,0,-1,0,0,.34716424345970154,.3471641540527344,1,0,0,-1,.5,-.5,-.5,0,0,-1,1,0,.6528358459472656,.3471641540527344,1,0,0,-1,-.5,.5,.5,0,1,0,0,1,.3097273111343384,.3471641540527344,1,0,0,-1,.5,.5,.5,0,1,0,1,1,.004055766388773918,.3471641540527344,1,0,0,-1,-.5,.5,-.5,0,0,-1,0,1,.34716424345970154,.6528357267379761,1,0,0,-1,.5,.5,-.5,0,0,-1,1,1,.6528358459472656,.6528357267379761,1,0,0,-1,-.5,-.5,-.5,0,-1,0,0,1,.34716424345970154,.9959442615509033,1,0,0,-1,-.5,-.5,.5,0,-1,0,0,0,.34716424345970154,.6902726888656616,1,0,0,-1,.5,-.5,.5,0,-1,0,1,0,.6528358459472656,.6902726888656616,1,0,0,-1,.5,-.5,-.5,0,-1,0,1,1,.6528358459472656,.9959442615509033,1,0,0,-1,.5,-.5,.5,1,0,0,0,1,.6902728080749512,.6902726888656616,0,0,-1,-1,.5,.5,.5,1,0,0,0,0,.9959442615509033,.6902726888656616,0,0,-1,-1,.5,.5,-.5,1,0,0,1,0,.9959442615509033,.9959442615509033,0,0,-1,-1,.5,-.5,-.5,1,0,0,1,1,.6902728080749512,.9959442615509033,0,0,-1,-1,-.5,-.5,-.5,-1,0,0,0,1,.3097273111343384,.9959442615509033,0,0,1,-1,-.5,.5,-.5,-1,0,0,0,0,.004055766388773918,.9959442615509033,0,0,1,-1,-.5,.5,.5,-1,0,0,1,0,.004055766388773918,.6902726888656616,0,0,1,-1,-.5,-.5,.5,-1,0,0,1,1,.3097273111343384,.6902726888656616,0,0,1,-1]),wn=new Uint16Array([0,3,2,0,1,3,8,5,4,8,9,5,10,7,6,10,11,7,12,14,13,12,15,14,16,18,17,16,19,18,20,22,21,20,23,22]),xn=Tt.createFromNumber(0,0,0),En=Tt.createFromNumber(1,1,1);function Sn(e,t,r,n,o,i,a,s,u){void 0===r&&(r=1),void 0===n&&(n=32),void 0===o&&(o=16),void 0===i&&(i=Math.PI/2),void 0===a&&(a=2*Math.PI),void 0===s&&(s=Math.PI),void 0===u&&(u=Math.PI),n=Math.max(3,Math.floor(n)),o=Math.max(2,Math.floor(o));for(var c=Math.min(s+u,Math.PI),l=0,f=[],p=0;p<=o;p++){var h=[],d=p/o,_=0;0==p&&0==s?_=.5/n:p==o&&c==Math.PI&&(_=-.5/n);for(var y=0;y<=n;y++){var v=y/n,m=-r*Math.cos(i+v*a)*Math.sin(s+d*u),g=r*Math.cos(s+d*u),b=r*Math.sin(i+v*a)*Math.sin(s+d*u);e.push(m,g,b),e.push(m/3,g/3,b/3),e.push(v+_,1-d),e.push(0,0,0,0,0,0),h.push(l++)}f.push(h)}for(p=0;p<o;p++)for(y=0;y<n;y++){var w=f[p][y+1],x=f[p][y],E=f[p+1][y],S=f[p+1][y+1];(0!==p||s>0)&&t.push(w,S,x),(p!==o-1||c<Math.PI)&&t.push(x,S,E)}}Ce("cube",(function(e){var t=e.createGeometry(gn(e),bn,wn);return t.setBoundBox(xn,En),t.addSubMesh(36,0,0),t}));var Tn=[],On=[];Sn(Tn,On,1);var An=new Float32Array(Tn),Cn=new Uint16Array(On),Mn=Tt.createFromNumber(0,0,0),Pn=Tt.createFromNumber(2,2,2),Rn=On.length;Ce("sphere",(function(e){var t=e.createGeometry(gn(e),An,Cn);return t.setBoundBox(Mn,Pn),t.setBoundBall(Mn,1),t.addSubMesh(Rn,0,0),t}));var Dn=new Float32Array([.4755285680294037,-1,-.1545085906982422,.9510567784309387,0,-.30901601910591125,.10059985518455505,.9995462894439697,.00828967522829771,.9973998069763184,-.30901607871055603,0,-.9510568380355835,-1,.4045087695121765,-1,-.2938928008079529,.80901700258255,0,-.5877853631973267,.20050539076328278,.9995462894439697,.05773448944091797,.9973998069763184,-.5877853035926819,0,-.80901700258255,-1,.2938928008079529,-1,-.4045087397098541,.5877850651741028,0,-.8090171217918396,.3004109859466553,.9995462894439697,.10717926919460297,.9973998069763184,-.8090171217918396,0,-.5877850651741028,-1,.154508575797081,-1,-.4755285084247589,.30901679396629333,0,-.9510565400123596,.4003165066242218,.9995462894439697,.15662389993667603,.9973998069763184,-.9510565996170044,0,-.30901679396629333,-1,0,-1,-.5000002384185791,0,0,-1,.5002219676971436,.9995462894439697,.20606841146945953,.9973998069763184,-1,0,0,-1,-.154508575797081,-1,-.4755284786224365,-.3090171217918396,0,-.9510564804077148,.6001272797584534,.9995462894439697,.2555127739906311,.9973998069763184,-.9510564804077148,0,.3090171217918396,-1,-.2938927412033081,-1,-.40450865030288696,-.5877854228019714,0,-.8090168237686157,.7000327110290527,.9995462894439697,.30495697259902954,.9973998069763184,-.8090168833732605,0,.5877854228019714,-1,-.4045086205005646,-1,-.2938927114009857,-.8090170621871948,0,-.5877851247787476,.7999379634857178,.9995462894439697,.35440075397491455,.9973997473716736,-.5877851247787476,0,.8090170621871948,-1,-.47552838921546936,-1,-.1545085310935974,-.9510565400123596,0,-.3090168535709381,.8998432159423828,.9995462894439697,.40384477376937866,.9973997473716736,-.3090168833732605,0,.9510565400123596,-1,-.5000001192092896,-1,0,-1,0,0,.9997490048408508,.9995462894439697,.45328840613365173,.9973998069763184,0,0,1,-1,-.47552838921546936,-1,.1545085310935974,-.9510565400123596,0,.30901703238487244,.10059934854507446,.9995462894439697,.5027321577072144,.9973998069763184,.30901703238487244,0,.9510564804077148,-1,-.4045085906982422,-1,.29389268159866333,-.8090168833732605,0,.5877853631973267,.20050501823425293,.9995462894439697,.5521758198738098,.9973998069763184,.5877853631973267,0,.8090168833732605,-1,-.29389268159866333,-1,.4045085608959198,-.5877851843833923,0,.8090170621871948,.30041056871414185,.9995462894439697,.6016191244125366,.9973998069763184,.8090170621871948,0,.5877851843833923,-1,-.1545085310935974,-1,.4755283296108246,-.3090169429779053,0,.9510565400123596,.4003159999847412,.9995462894439697,.6510623097419739,.9973998069763184,.9510565400123596,0,.3090169429779053,-1,-1.4901161193847656e-8,-1,.5000000596046448,0,0,1,.5002214908599854,.9995462894439697,.7005053162574768,.9973998069763184,1,0,0,-1,.15450848639011383,-1,.4755282998085022,.3090170621871948,0,.9510565400123596,.6001268029212952,.9995462894439697,.7499484419822693,.9973998069763184,.9510564804077148,0,-.3090170621871948,-1,.29389262199401855,-1,.4045085310935974,.5877852439880371,0,.80901700258255,.7000321745872498,.9995462894439697,.7993921637535095,.9973998069763184,.80901700258255,0,-.5877852439880371,-1,.404508501291275,-1,.29389265179634094,.80901700258255,0,.5877852439880371,.7999374866485596,.9995462894439697,.8488357663154602,.9973998069763184,.5877852439880371,0,-.80901700258255,-1,.4755282700061798,-1,.15450850129127502,.9510565400123596,0,.3090169429779053,.8998427987098694,.9995462894439697,.8982797265052795,.9973998069763184,.3090169429779053,0,-.9510565400123596,-1,.5,-1,0,1,0,0,.9997480511665344,.9995462894439697,.9477241039276123,.9973998069763184,0,0,-1,-1,.4755285680294037,1,-.1545085906982422,.9510567784309387,0,-.30901601910591125,.10059956461191177,.0005692243576049805,.008289572782814503,.3652527928352356,-.30901604890823364,0,-.9510568380355835,-1,.4045087695121765,1,-.2938928008079529,.80901700258255,0,-.5877853631973267,.20050527155399323,.0005692243576049805,.05773448944091797,.3652527928352356,-.5877853035926819,0,-.8090169429779053,-1,.2938928008079529,1,-.4045087397098541,.5877850651741028,0,-.8090171217918396,.3004109859466553,.0005692243576049805,.10717926919460297,.3652527928352356,-.8090171217918396,0,-.5877850651741028,-1,.154508575797081,1,-.4755285084247589,.30901679396629333,0,-.9510565400123596,.4003165066242218,.0005692243576049805,.15662389993667603,.3652527928352356,-.9510565996170044,0,-.30901679396629333,-1,0,1,-.5000002384185791,0,0,-1,.5002219676971436,.0005692243576049805,.20606841146945953,.3652527928352356,-1,0,0,-1,-.154508575797081,1,-.4755284786224365,-.3090171217918396,0,-.9510564804077148,.6001272797584534,.0005692243576049805,.2555127739906311,.3652527928352356,-.9510564804077148,0,.3090171217918396,-1,-.2938927412033081,1,-.40450865030288696,-.5877854228019714,0,-.8090168237686157,.7000327706336975,.0005692243576049805,.30495697259902954,.3652527928352356,-.8090168833732605,0,.5877854228019714,-1,-.4045086205005646,1,-.2938927114009857,-.8090170621871948,0,-.5877851247787476,.7999381422996521,.0005692243576049805,.354401171207428,.3652527928352356,-.5877851247787476,0,.8090170621871948,-1,-.47552838921546936,1,-.1545085310935974,-.9510565400123596,0,-.3090168535709381,.8998434543609619,.0005692243576049805,.4038451611995697,.3652527928352356,-.3090168535709381,0,.9510565400123596,-1,-.5000001192092896,1,0,-1,0,0,.9997491240501404,.0005692243576049805,.4532887637615204,.3652527928352356,0,0,1,-1,-.47552838921546936,1,.1545085310935974,-.9510565400123596,0,.30901703238487244,.10059964656829834,.0005692243576049805,.5027323961257935,.3652527928352356,.30901697278022766,0,.9510565400123596,-1,-.4045085906982422,1,.29389268159866333,-.8090168833732605,0,.5877853631973267,.2005050927400589,.0005692243576049805,.5521758198738098,.3652527928352356,.5877854228019714,0,.8090168833732605,-1,-.29389268159866333,1,.4045085608959198,-.5877851843833923,0,.8090170621871948,.30041056871414185,.0005692243576049805,.6016191244125366,.3652527928352356,.8090170621871948,0,.5877851843833923,-1,-.1545085310935974,1,.4755283296108246,-.3090169429779053,0,.9510565400123596,.4003159999847412,.0005692243576049805,.6510623097419739,.3652527928352356,.9510565400123596,0,.3090169429779053,-1,-1.4901161193847656e-8,1,.5000000596046448,0,0,1,.5002214908599854,.0005692243576049805,.7005053162574768,.3652527928352356,1,0,0,-1,.15450848639011383,1,.4755282998085022,.3090170621871948,0,.9510565400123596,.6001268029212952,.0005692243576049805,.7499484419822693,.3652527928352356,.9510564804077148,0,-.3090170621871948,-1,.29389262199401855,1,.4045085310935974,.5877852439880371,0,.80901700258255,.700032114982605,.0005692243576049805,.7993921637535095,.3652527928352356,.80901700258255,0,-.5877852439880371,-1,.404508501291275,1,.29389265179634094,.80901700258255,0,.5877852439880371,.7999371290206909,.0005692243576049805,.8488357663154602,.3652527928352356,.5877852439880371,0,-.80901700258255,-1,.4755282700061798,1,.15450850129127502,.9510565400123596,0,.3090169429779053,.8998424410820007,.0005692243576049805,.8982797265052795,.3652527928352356,.3090169429779053,0,-.9510565400123596,-1,.5,1,0,1,0,0,.9997478127479553,.0005692243576049805,.9477241039276123,.3652527928352356,0,0,-1,-1,0,-1,0,0,-1,0,.5002238750457764,.500055730342865,.553604245185852,.17257791757583618,-1,0,-4.0938650158750534e-7,-1,0,1,0,0,1,0,.5002244710922241,.5000558495521545,.17481893301010132,.17257797718048096,1,0,7.830051629298396e-8,-1,-.5000001192092896,-1,0,-1,0,0,.0006936856079846621,.9995462894439697,.45328840613365173,.9973998069763184,0,0,1,-1,-.5000001192092896,1,0,-1,0,0,.0006940446328371763,.0005692243576049805,.4532887637615204,.3652527928352356,0,0,1,-1,.5,-1,0,1,0,0,.0006942700129002333,.9995462894439697,.9477241039276123,.9973998069763184,0,0,-1,-1,.5,1,0,1,0,0,.0006939088925719261,.0005692243576049805,.9477241039276123,.3652527928352356,0,0,-1,-1,.4755285680294037,1,-.1545085906982422,.9510567784309387,0,-.30901601910591125,.10059956461191177,.0005692243576049805,.9971683621406555,.3652527928352356,-.30901604890823364,0,-.9510568380355835,-1,.4755285680294037,-1,-.1545085906982422,.9510567784309387,0,-.30901601910591125,.10059985518455505,.9995462894439697,.9971683621406555,.9973998069763184,-.30901607871055603,0,-.9510568380355835,-1,.4045087695121765,-1,-.2938928008079529,0,-1,0,.09885690361261368,.20844608545303345,.4157004952430725,.07238495349884033,-.8457278609275818,0,-.533614456653595,-1,.4755285680294037,-1,-.1545085906982422,0,-1,0,.028388768434524536,.3467476963996887,.3914884924888611,.11990350484848022,-.7257986664772034,0,-.6879071593284607,-1,.2938928008079529,-1,-.4045087397098541,0,-1,0,.20861363410949707,.0986892580986023,.45341116189956665,.034674108028411865,-.9313521385192871,0,-.3641197681427002,-1,.154508575797081,-1,-.4755285084247589,0,-1,0,.3469153642654419,.028220951557159424,.5009297728538513,.010462343692779541,-.9828193783760071,0,-.1845698058605194,-1,0,-1,-.5000002384185791,0,-1,0,.5002239942550659,.003939151763916016,.553604245185852,.0021193623542785645,-1,0,2.5340204601320693e-8,-1,-.154508575797081,-1,-.4755284786224365,0,-1,0,.6535326838493347,.028220951557159424,.6062788367271423,.010462343692779541,-.9828193783760071,0,.18456989526748657,-1,-.2938927412033081,-1,-.40450865030288696,0,-1,0,.7918344140052795,.09868937730789185,.6537972688674927,.03467434644699097,-.9313523173332214,0,.3641192317008972,-1,-.4045086205005646,-1,-.2938927114009857,0,-1,0,.9015910029411316,.2084464430809021,.6915079951286316,.07238513231277466,-.8457282185554504,0,.5336138606071472,-1,-.47552838921546936,-1,-.1545085310935974,0,-1,0,.9720588326454163,.3467479348182678,.7157197594642639,.119903564453125,-.7257992625236511,0,.6879065632820129,-1,-.5000001192092896,-1,0,0,-1,0,.9963404536247253,.500056266784668,.7240625619888306,.1725780963897705,-.8398557901382446,0,.5428096055984497,-1,-.47552838921546936,-1,.1545085310935974,0,-1,0,.9720585942268372,.6533645391464233,.7157197594642639,.22525256872177124,-1,0,-10118088766830624e-22,-1,-.4045085906982422,-1,.29389268159866333,0,-1,0,.9015904068946838,.7916658520698547,.691507875919342,.2727710008621216,-1,0,-8.285851436085068e-7,-1,-.29389268159866333,-1,.4045085608959198,0,-1,0,.7918336987495422,.9014224410057068,.6537968516349792,.3104817271232605,-1,0,-4.6902908934498555e-7,-1,-.1545085310935974,-1,.4755283296108246,0,-1,0,.6535319685935974,.9718905687332153,.6062787175178528,.3346934914588928,-1,0,-3.832987829355261e-7,-1,-1.4901161193847656e-8,-1,.5000000596046448,0,-1,0,.5002233982086182,.9961721301078796,.553604245185852,.34303635358810425,-1,0,-8.053084457060322e-7,-1,.15450848639011383,-1,.4755282998085022,0,-1,0,.34691500663757324,.9718902707099915,.5009297728538513,.3346934914588928,-1,0,-9.092273671740259e-7,-1,.29389262199401855,-1,.4045085310935974,0,-1,0,.20861363410949707,.9014220237731934,.45341116189956665,.3104816675186157,-1,0,-6.892228157084901e-7,-1,.404508501291275,-1,.29389265179634094,0,-1,0,.098857082426548,.7916653156280518,.4157004952430725,.27277088165283203,-1,0,-3.318496624160616e-7,-1,.4755282700061798,-1,.15450850129127502,0,-1,0,.028389133512973785,.6533639430999756,.3914886713027954,.22525256872177124,-1,0,1.0190984056634989e-7,-1,.5,-1,0,0,-1,0,.0041075050830841064,.5000558495521545,.3831457495689392,.17257797718048096,-.8398553729057312,0,-.5428102612495422,-1,.4755285680294037,1,-.1545085906982422,0,1,0,.9720596075057983,.3467476963996887,.33693474531173706,.119903564453125,1,0,-5.740443498325476e-7,-1,.4045087695121765,1,-.2938928008079529,0,1,0,.9015914797782898,.20844608545303345,.3127228617668152,.07238495349884033,1,0,-6.830559300396999e-7,-1,.2938928008079529,1,-.4045087397098541,0,1,0,.7918346524238586,.0986892580986023,.2750120759010315,.03467434644699097,1,0,-8.931256729738379e-7,-1,.154508575797081,1,-.4755285084247589,0,1,0,.6535329818725586,.028220951557159424,.22749347984790802,.010462343692779541,1,0,-10122446383320494e-22,-1,0,1,-.5000002384185791,0,1,0,.5002242922782898,.003939151763916016,.17481893301010132,.002119600772857666,1,0,-9.644246290463343e-8,-1,-.154508575797081,1,-.4755284786224365,0,1,0,.34691566228866577,.028220951557159424,.12214438617229462,.010462343692779541,1,0,10884197081395541e-22,-1,-.2938927412033081,1,-.40450865030288696,0,1,0,.20861418545246124,.09868937730789185,.0746258795261383,.03467434644699097,1,0,14022843970451504e-22,-1,-.4045086205005646,1,-.2938927114009857,0,1,0,.09885760396718979,.20844632387161255,.03691514953970909,.07238531112670898,1,0,9.838694268182735e-7,-1,-.47552838921546936,1,-.1545085310935974,0,1,0,.028389595448970795,.34674781560897827,.012703415006399155,.11990362405776978,1,0,5.983875439596886e-7,-1,-.5000001192092896,1,0,0,1,0,.004108026623725891,.5000561475753784,.004360619001090527,.1725780963897705,.8398556113243103,0,.5428099036216736,-1,-.47552838921546936,1,.1545085310935974,0,1,0,.028389714658260345,.6533644199371338,.012703415006399155,.22525256872177124,.725799024105072,0,.687906801700592,-1,-.4045085906982422,1,.29389268159866333,0,1,0,.0988578200340271,.7916658520698547,.03691532835364342,.2727710008621216,.8457275032997131,0,.533614993095398,-1,-.29389268159866333,1,.4045085608959198,0,1,0,.20861442387104034,.9014224410057068,.07462605834007263,.3104817271232605,.931351900100708,0,.36412039399147034,-1,-.1545085310935974,1,.4755283296108246,0,1,0,.3469158709049225,.9718906283378601,.12214449793100357,.3346935510635376,.9828193187713623,0,.18457035720348358,-1,-1.4901161193847656e-8,1,.5000000596046448,0,1,0,.5002241730690002,.9961722493171692,.17481884360313416,.343036413192749,1,0,2.4648217689104968e-8,-1,.15450848639011383,1,.4755282998085022,0,1,0,.6535326838493347,.9718905687332153,.22749342024326324,.3346935510635376,.9828193187713623,0,-.1845702826976776,-1,.29389262199401855,1,.4045085310935974,0,1,0,.7918344140052795,.9014224410057068,.2750118374824524,.31048184633255005,.9313521981239319,0,-.36411967873573303,-1,.404508501291275,1,.29389265179634094,0,1,0,.9015910029411316,.7916657328605652,.31272268295288086,.2727710008621216,.8457278609275818,0,-.533614456653595,-1,.4755282700061798,1,.15450850129127502,0,1,0,.9720590710639954,.6533643007278442,.33693450689315796,.22525256872177124,.7257993817329407,0,-.6879064440727234,-1,.5,1,0,0,1,0,.996340811252594,.5000560879707336,.3452773690223694,.1725780963897705,.8398562669754028,0,-.5428088903427124,-1]),Nn=new Uint16Array([0,21,20,0,1,21,1,22,21,1,2,22,2,23,22,2,3,23,3,24,23,3,4,24,4,25,24,4,5,25,5,26,25,5,6,26,6,27,26,6,7,27,7,28,27,7,8,28,8,29,28,8,9,29,42,30,43,42,10,30,10,31,30,10,11,31,11,32,31,11,12,32,12,33,32,12,13,33,13,34,33,13,14,34,14,35,34,14,15,35,15,36,35,15,16,36,16,37,36,16,17,37,17,38,37,17,18,38,18,39,38,18,19,39,44,46,45,44,47,46,48,49,40,50,48,40,49,67,40,51,50,40,67,66,40,52,51,40,66,65,40,53,52,40,65,64,40,54,53,40,64,63,40,55,54,40,63,62,40,56,55,40,62,61,40,57,56,40,61,60,40,58,57,40,60,59,40,59,58,40,68,69,41,87,68,41,69,70,41,86,87,41,70,71,41,85,86,41,71,72,41,84,85,41,72,73,41,83,84,41,73,74,41,82,83,41,74,75,41,81,82,41,75,76,41,80,81,41,76,77,41,79,80,41,77,78,41,78,79,41]),In=Tt.createFromNumber(0,0,0),Ln=Tt.createFromNumber(1,2,1);Ce("cylinder",(function(e){var t=e.createGeometry(gn(e),Dn,Nn);return t.setBoundBox(In,Ln),t.addSubMesh(240,0,0),t}));var Fn=new Float32Array([-5.678913339579594e-9,-.10497161746025085,-1,-.08775380253791809,.44548818469047546,-.8909766674041748,1.0009496212005615,.0009514093399047852,0,0,0,0,-5.678913339579594e-9,-.10497161746025085,-1,.08775380253791809,.44548821449279785,-.8909766674041748,.0009514391422271729,-.0009496212005615234,0,0,0,0,.19509032368659973,-.10497161746025085,-.9807852506637573,.08775380253791809,.44548821449279785,-.8909766674041748,1.0009496212005615,.0009514093399047852,0,0,0,0,.19509032368659973,-.10497161746025085,-.9807852506637573,.25988829135894775,.44548869132995605,-.8567367792129517,.0009514391422271729,-.0009496212005615234,0,0,0,0,.3826834261417389,-.10497161746025085,-.9238795042037964,.25988829135894775,.44548869132995605,-.8567367792129517,1.0009496212005615,.0009514093399047852,0,0,0,0,.3826834261417389,-.10497161746025085,-.9238795042037964,.42203545570373535,.44548848271369934,-.7895733714103699,.0009514391422271729,-.0009496212005615234,0,0,0,0,.5555702447891235,-.10497161746025085,-.8314695954322815,.42203545570373535,.44548848271369934,-.7895733714103699,1.0009496212005615,.0009514093399047852,0,0,0,0,.5555702447891235,-.10497161746025085,-.8314695954322815,.5679646134376526,.44548842310905457,-.6920666098594666,.0009514391422271729,-.0009496212005615234,0,0,0,0,.7071067690849304,-.10497161746025085,-.7071067690849304,.5679646134376526,.44548842310905457,-.6920666098594666,1.0009496212005615,.0009514093399047852,0,0,0,0,.7071067690849304,-.10497161746025085,-.7071067690849304,.6920667886734009,.4454883933067322,-.5679644346237183,.0009514391422271729,-.0009496212005615234,0,0,0,0,.8314695954322815,-.10497161746025085,-.5555702447891235,.6920667886734009,.4454883933067322,-.5679644346237183,1.0009496212005615,.0009514093399047852,0,0,0,0,.8314695954322815,-.10497161746025085,-.5555702447891235,.7895731925964355,.4454883635044098,-.42203593254089355,.0009514391422271729,-.0009496212005615234,0,0,0,0,.9238795042037964,-.10497161746025085,-.3826834261417389,.7895731925964355,.4454883635044098,-.42203593254089355,1.0009496212005615,.0009514093399047852,0,0,0,0,.9238795042037964,-.10497161746025085,-.3826834261417389,.856736958026886,.4454883933067322,-.2598881423473358,.0009514391422271729,-.0009496212005615234,0,0,0,0,.9807852506637573,-.10497161746025085,-.19509030878543854,.856736958026886,.4454883933067322,-.2598881423473358,1.0009496212005615,.0009514093399047852,0,0,0,0,.9807852506637573,-.10497161746025085,-.19509030878543854,.8909766674041748,.4454883337020874,-.0877537727355957,.0009514391422271729,-.0009496212005615234,0,0,0,0,1,-.10497161746025085,1.955777406692505e-8,.8909766674041748,.4454883337020874,-.0877537727355957,1.0009496212005615,.0009514093399047852,0,0,0,0,1,-.10497161746025085,1.955777406692505e-8,.8909766674041748,.4454883337020874,.0877537727355957,.0009514391422271729,-.0009496212005615234,0,0,0,0,.9807852506637573,-.10497161746025085,.19509033858776093,.856736958026886,.44548842310905457,.2598881423473358,.0009514391422271729,-.0009496212005615234,0,0,0,0,.9807852506637573,-.10497161746025085,.19509033858776093,.8909766674041748,.4454883337020874,.0877537727355957,1.0009496212005615,.0009514093399047852,0,0,0,0,.9238795042037964,-.10497161746025085,.38268348574638367,.7895732522010803,.44548821449279785,.4220360517501831,.0009514391422271729,-.0009496212005615234,0,0,0,0,.9238795042037964,-.10497161746025085,.38268348574638367,.856736958026886,.44548842310905457,.2598881423473358,1.0009496212005615,.0009514093399047852,0,0,0,0,.8314695954322815,-.10497161746025085,.5555702447891235,.6920667886734009,.4454882740974426,.5679645538330078,.0009514391422271729,-.0009496212005615234,0,0,0,0,.8314695954322815,-.10497161746025085,.5555702447891235,.7895732522010803,.44548821449279785,.4220360517501831,1.0009496212005615,.0009514093399047852,0,0,0,0,.7071067690849304,-.10497161746025085,.7071067690849304,.5679647326469421,.4454883635044098,.6920666694641113,.0009514391422271729,-.0009496212005615234,0,0,0,0,.7071067690849304,-.10497161746025085,.7071067690849304,.6920667886734009,.4454882740974426,.5679645538330078,1.0009496212005615,.0009514093399047852,0,0,0,0,.5555702447891235,-.10497161746025085,.8314695954322815,.4220355749130249,.4454882740974426,.7895734310150146,.0009514391422271729,-.0009496212005615234,0,0,0,0,.5555702447891235,-.10497161746025085,.8314695954322815,.5679647326469421,.4454883635044098,.6920666694641113,1.0009496212005615,.0009514093399047852,0,0,0,0,.3826834261417389,-.10497161746025085,.9238795042037964,.25988829135894775,.44548851251602173,.8567368388175964,.0009514391422271729,-.0009496212005615234,0,0,0,0,.3826834261417389,-.10497161746025085,.9238795042037964,.4220355749130249,.4454882740974426,.7895734310150146,1.0009496212005615,.0009514093399047852,0,0,0,0,.19509032368659973,-.10497161746025085,.9807852506637573,.08775380253791809,.44548818469047546,.8909766674041748,.0009514391422271729,-.0009496212005615234,0,0,0,0,.19509032368659973,-.10497161746025085,.9807852506637573,.25988829135894775,.44548851251602173,.8567368388175964,1.0009496212005615,.0009514093399047852,0,0,0,0,-5.678913339579594e-9,-.10497161746025085,1,-.08775380253791809,.44548821449279785,.8909766674041748,.0009514391422271729,-.0009496212005615234,0,0,0,0,-5.678913339579594e-9,-.10497161746025085,1,.08775380253791809,.44548818469047546,.8909766674041748,1.0009496212005615,.0009514093399047852,0,0,0,0,-.19509032368659973,-.10497161746025085,.9807852506637573,-.25988826155662537,.445488303899765,.8567370772361755,.0009514391422271729,-.0009496212005615234,0,0,0,0,-.19509032368659973,-.10497161746025085,.9807852506637573,-.08775380253791809,.44548821449279785,.8909766674041748,1.0009496212005615,.0009514093399047852,0,0,0,0,-.38268348574638367,-.10497161746025085,.9238795042037964,-.4220356345176697,.44548842310905457,.7895733118057251,.0009514391422271729,-.0009496212005615234,0,0,0,0,-.38268348574638367,-.10497161746025085,.9238795042037964,-.25988826155662537,.445488303899765,.8567370772361755,1.0009496212005615,.0009514093399047852,0,0,0,0,-.5555702447891235,-.10497161746025085,.8314695954322815,-.5679647326469421,.4454881548881531,.6920667290687561,.0009514391422271729,-.0009496212005615234,0,0,0,0,-.5555702447891235,-.10497161746025085,.8314695954322815,-.4220356345176697,.44548842310905457,.7895733118057251,1.0009496212005615,.0009514093399047852,0,0,0,0,-.7071067690849304,-.10497161746025085,.7071067690849304,-.6920667290687561,.44548842310905457,.567964494228363,.0009514391422271729,-.0009496212005615234,0,0,0,0,-.7071067690849304,-.10497161746025085,.7071067690849304,-.5679647326469421,.4454881548881531,.6920667290687561,1.0009496212005615,.0009514093399047852,0,0,0,0,-.8314695954322815,-.10497161746025085,.5555702447891235,-.7895732522010803,.44548821449279785,.4220360517501831,.0009514391422271729,-.0009496212005615234,0,0,0,0,-.8314695954322815,-.10497161746025085,.5555702447891235,-.6920667290687561,.44548842310905457,.567964494228363,1.0009496212005615,.0009514093399047852,0,0,0,0,-.9238795042037964,-.10497161746025085,.38268348574638367,-.856736958026886,.4454883933067322,.2598881125450134,.0009514391422271729,-.0009496212005615234,0,0,0,0,-.9238795042037964,-.10497161746025085,.38268348574638367,-.7895732522010803,.44548821449279785,.4220360517501831,1.0009496212005615,.0009514093399047852,0,0,0,0,-.9807852506637573,-.10497161746025085,.19509033858776093,-.8909767866134644,.44548824429512024,.08775343745946884,.0009514391422271729,-.0009496212005615234,0,0,0,0,-.9807852506637573,-.10497161746025085,.19509033858776093,-.856736958026886,.4454883933067322,.2598881125450134,1.0009496212005615,.0009514093399047852,0,0,0,0,-.9999999403953552,-.10497161746025085,1.955777406692505e-8,-.8909767866134644,.44548824429512024,-.08775343745946884,.0009514391422271729,-.0009496212005615234,0,0,0,0,-.9999999403953552,-.10497161746025085,1.955777406692505e-8,-.8909767866134644,.44548824429512024,.08775343745946884,1.0009496212005615,.0009514093399047852,0,0,0,0,-.9807852506637573,-.10497161746025085,-.19509030878543854,-.8909767866134644,.44548824429512024,-.08775343745946884,1.0009496212005615,.0009514093399047852,0,0,0,0,-.9807852506637573,-.10497161746025085,-.19509030878543854,-.856736958026886,.4454883933067322,-.2598881721496582,.0009514391422271729,-.0009496212005615234,0,0,0,0,-.9238795042037964,-.10497161746025085,-.3826834261417389,-.856736958026886,.4454883933067322,-.2598881721496582,1.0009496212005615,.0009514093399047852,0,0,0,0,-.9238795042037964,-.10497161746025085,-.3826834261417389,-.7895731925964355,.4454882740974426,-.42203593254089355,.0009514391422271729,-.0009496212005615234,0,0,0,0,-.8314695954322815,-.10497161746025085,-.5555702447891235,-.7895731925964355,.4454882740974426,-.42203593254089355,1.0009496212005615,.0009514093399047852,0,0,0,0,-.8314695954322815,-.10497161746025085,-.5555702447891235,-.6920668482780457,.44548824429512024,-.567964494228363,.0009514391422271729,-.0009496212005615234,0,0,0,0,-.7071067690849304,-.10497161746025085,-.7071067690849304,-.6920668482780457,.44548824429512024,-.567964494228363,1.0009496212005615,.0009514093399047852,0,0,0,0,-.7071067690849304,-.10497161746025085,-.7071067690849304,-.5679647326469421,.4454882740974426,-.6920666694641113,.0009514391422271729,-.0009496212005615234,0,0,0,0,-.5555702447891235,-.10497161746025085,-.8314695954322815,-.5679647326469421,.4454882740974426,-.6920666694641113,1.0009496212005615,.0009514093399047852,0,0,0,0,-.5555702447891235,-.10497161746025085,-.8314695954322815,-.42203566431999207,.44548851251602173,-.7895731925964355,.0009514391422271729,-.0009496212005615234,0,0,0,0,-.38268348574638367,-.10497161746025085,-.9238795042037964,-.42203566431999207,.44548851251602173,-.7895731925964355,1.0009496212005615,.0009514093399047852,0,0,0,0,-.38268348574638367,-.10497161746025085,-.9238795042037964,-.259888231754303,.4454883933067322,-.856736958026886,.0009514391422271729,-.0009496212005615234,0,0,0,0,-.19509032368659973,-.10497161746025085,-.9807852506637573,-.259888231754303,.4454883933067322,-.856736958026886,1.0009496212005615,.0009514093399047852,0,0,0,0,-.19509032368659973,-.10497161746025085,-.9807852506637573,-.08775380253791809,.44548818469047546,-.8909766674041748,.0009514391422271729,-.0009496212005615234,0,0,0,0,-5.678913339579594e-9,.10497245192527771,-.8950279951095581,-.08775380253791809,.44548818469047546,-.8909766674041748,.9990485906600952,1.0009496212005615,0,0,0,0,-5.678913339579594e-9,.10497245192527771,-.8950279951095581,.08775380253791809,.44548821449279785,-.8909766674041748,-.0009496510028839111,.9990485906600952,0,0,0,0,.17461130023002625,.10497245192527771,-.8778302073478699,.08775380253791809,.44548821449279785,-.8909766674041748,.9990485906600952,1.0009496212005615,0,0,0,0,.17461130023002625,.10497245192527771,-.8778302073478699,.25988829135894775,.44548869132995605,-.8567367792129517,-.0009496510028839111,.9990485906600952,0,0,0,0,.3425123393535614,.10497245192527771,-.8268979787826538,.25988829135894775,.44548869132995605,-.8567367792129517,.9990485906600952,1.0009496212005615,0,0,0,0,.3425123393535614,.10497245192527771,-.8268979787826538,.42203545570373535,.44548848271369934,-.7895733714103699,-.0009496510028839111,.9990485906600952,0,0,0,0,.49725088477134705,.10497245192527771,-.7441885471343994,.42203545570373535,.44548848271369934,-.7895733714103699,.9990485906600952,1.0009496212005615,0,0,0,0,.49725088477134705,.10497245192527771,-.7441885471343994,.5679646134376526,.44548842310905457,-.6920666098594666,-.0009496510028839111,.9990485906600952,0,0,0,0,.6328803300857544,.10497245192527771,-.6328803300857544,.5679646134376526,.44548842310905457,-.6920666098594666,.9990485906600952,1.0009496212005615,0,0,0,0,.6328803300857544,.10497245192527771,-.6328803300857544,.6920667886734009,.4454883933067322,-.5679644346237183,-.0009496510028839111,.9990485906600952,0,0,0,0,.7441885471343994,.10497245192527771,-.49725088477134705,.6920667886734009,.4454883933067322,-.5679644346237183,.9990485906600952,1.0009496212005615,0,0,0,0,.7441885471343994,.10497245192527771,-.49725088477134705,.7895731925964355,.4454883635044098,-.42203593254089355,-.0009496510028839111,.9990485906600952,0,0,0,0,.8268979787826538,.10497245192527771,-.3425123393535614,.7895731925964355,.4454883635044098,-.42203593254089355,.9990485906600952,1.0009496212005615,0,0,0,0,.8268979787826538,.10497245192527771,-.3425123393535614,.856736958026886,.4454883933067322,-.2598881423473358,-.0009496510028839111,.9990485906600952,0,0,0,0,.8778302073478699,.10497245192527771,-.17461128532886505,.856736958026886,.4454883933067322,-.2598881423473358,.9990485906600952,1.0009496212005615,0,0,0,0,.8778302073478699,.10497245192527771,-.17461128532886505,.8909766674041748,.4454883337020874,-.0877537727355957,-.0009496510028839111,.9990485906600952,0,0,0,0,.8950279951095581,.10497245192527771,1.955777406692505e-8,.8909766674041748,.4454883337020874,-.0877537727355957,.9990485906600952,1.0009496212005615,0,0,0,0,.8950279951095581,.10497245192527771,1.955777406692505e-8,.8909766674041748,.4454883337020874,.0877537727355957,-.0009496510028839111,.9990485906600952,0,0,0,0,.8778302073478699,.10497245192527771,.17461131513118744,.856736958026886,.44548842310905457,.2598881423473358,-.0009496510028839111,.9990485906600952,0,0,0,0,.8778302073478699,.10497245192527771,.17461131513118744,.8909766674041748,.4454883337020874,.0877537727355957,.9990485906600952,1.0009496212005615,0,0,0,0,.8268979787826538,.10497245192527771,.3425123989582062,.7895732522010803,.44548821449279785,.4220360517501831,-.0009496510028839111,.9990485906600952,0,0,0,0,.8268979787826538,.10497245192527771,.3425123989582062,.856736958026886,.44548842310905457,.2598881423473358,.9990485906600952,1.0009496212005615,0,0,0,0,.7441885471343994,.10497245192527771,.4972509443759918,.6920667886734009,.4454882740974426,.5679645538330078,-.0009496510028839111,.9990485906600952,0,0,0,0,.7441885471343994,.10497245192527771,.4972509443759918,.7895732522010803,.44548821449279785,.4220360517501831,.9990485906600952,1.0009496212005615,0,0,0,0,.6328803300857544,.10497245192527771,.6328803300857544,.5679647326469421,.4454883635044098,.6920666694641113,-.0009496510028839111,.9990485906600952,0,0,0,0,.6328803300857544,.10497245192527771,.6328803300857544,.6920667886734009,.4454882740974426,.5679645538330078,.9990485906600952,1.0009496212005615,0,0,0,0,.49725088477134705,.10497245192527771,.7441885471343994,.4220355749130249,.4454882740974426,.7895734310150146,-.0009496510028839111,.9990485906600952,0,0,0,0,.49725088477134705,.10497245192527771,.7441885471343994,.5679647326469421,.4454883635044098,.6920666694641113,.9990485906600952,1.0009496212005615,0,0,0,0,.3425123393535614,.10497245192527771,.8268979787826538,.25988829135894775,.44548851251602173,.8567368388175964,-.0009496510028839111,.9990485906600952,0,0,0,0,.3425123393535614,.10497245192527771,.8268979787826538,.4220355749130249,.4454882740974426,.7895734310150146,.9990485906600952,1.0009496212005615,0,0,0,0,.17461130023002625,.10497245192527771,.8778302073478699,.08775380253791809,.44548818469047546,.8909766674041748,-.0009496510028839111,.9990485906600952,0,0,0,0,.17461130023002625,.10497245192527771,.8778302073478699,.25988829135894775,.44548851251602173,.8567368388175964,.9990485906600952,1.0009496212005615,0,0,0,0,-5.678913339579594e-9,.10497245192527771,.8950279951095581,-.08775380253791809,.44548821449279785,.8909766674041748,-.0009496510028839111,.9990485906600952,0,0,0,0,-5.678913339579594e-9,.10497245192527771,.8950279951095581,.08775380253791809,.44548818469047546,.8909766674041748,.9990485906600952,1.0009496212005615,0,0,0,0,-.17461130023002625,.10497245192527771,.8778302073478699,-.25988826155662537,.445488303899765,.8567370772361755,-.0009496510028839111,.9990485906600952,0,0,0,0,-.17461130023002625,.10497245192527771,.8778302073478699,-.08775380253791809,.44548821449279785,.8909766674041748,.9990485906600952,1.0009496212005615,0,0,0,0,-.3425123989582062,.10497245192527771,.8268979787826538,-.4220356345176697,.44548842310905457,.7895733118057251,-.0009496510028839111,.9990485906600952,0,0,0,0,-.3425123989582062,.10497245192527771,.8268979787826538,-.25988826155662537,.445488303899765,.8567370772361755,.9990485906600952,1.0009496212005615,0,0,0,0,-.4972509443759918,.10497245192527771,.7441885471343994,-.5679647326469421,.4454881548881531,.6920667290687561,-.0009496510028839111,.9990485906600952,0,0,0,0,-.4972509443759918,.10497245192527771,.7441885471343994,-.4220356345176697,.44548842310905457,.7895733118057251,.9990485906600952,1.0009496212005615,0,0,0,0,-.6328803300857544,.10497245192527771,.6328803300857544,-.6920667290687561,.44548842310905457,.567964494228363,-.0009496510028839111,.9990485906600952,0,0,0,0,-.6328803300857544,.10497245192527771,.6328803300857544,-.5679647326469421,.4454881548881531,.6920667290687561,.9990485906600952,1.0009496212005615,0,0,0,0,-.7441885471343994,.10497245192527771,.4972509443759918,-.7895732522010803,.44548821449279785,.4220360517501831,-.0009496510028839111,.9990485906600952,0,0,0,0,-.7441885471343994,.10497245192527771,.4972509443759918,-.6920667290687561,.44548842310905457,.567964494228363,.9990485906600952,1.0009496212005615,0,0,0,0,-.8268979787826538,.10497245192527771,.3425123989582062,-.856736958026886,.4454883933067322,.2598881125450134,-.0009496510028839111,.9990485906600952,0,0,0,0,-.8268979787826538,.10497245192527771,.3425123989582062,-.7895732522010803,.44548821449279785,.4220360517501831,.9990485906600952,1.0009496212005615,0,0,0,0,-.8778302073478699,.10497245192527771,.17461131513118744,-.8909767866134644,.44548824429512024,.08775343745946884,-.0009496510028839111,.9990485906600952,0,0,0,0,-.8778302073478699,.10497245192527771,.17461131513118744,-.856736958026886,.4454883933067322,.2598881125450134,.9990485906600952,1.0009496212005615,0,0,0,0,-.8950279951095581,.10497245192527771,1.955777406692505e-8,-.8909767866134644,.44548824429512024,-.08775343745946884,-.0009496510028839111,.9990485906600952,0,0,0,0,-.8950279951095581,.10497245192527771,1.955777406692505e-8,-.8909767866134644,.44548824429512024,.08775343745946884,.9990485906600952,1.0009496212005615,0,0,0,0,-.8778302073478699,.10497245192527771,-.17461128532886505,-.8909767866134644,.44548824429512024,-.08775343745946884,.9990485906600952,1.0009496212005615,0,0,0,0,-.8778302073478699,.10497245192527771,-.17461128532886505,-.856736958026886,.4454883933067322,-.2598881721496582,-.0009496510028839111,.9990485906600952,0,0,0,0,-.8268979787826538,.10497245192527771,-.3425123393535614,-.856736958026886,.4454883933067322,-.2598881721496582,.9990485906600952,1.0009496212005615,0,0,0,0,-.8268979787826538,.10497245192527771,-.3425123393535614,-.7895731925964355,.4454882740974426,-.42203593254089355,-.0009496510028839111,.9990485906600952,0,0,0,0,-.7441885471343994,.10497245192527771,-.49725088477134705,-.7895731925964355,.4454882740974426,-.42203593254089355,.9990485906600952,1.0009496212005615,0,0,0,0,-.7441885471343994,.10497245192527771,-.49725088477134705,-.6920668482780457,.44548824429512024,-.567964494228363,-.0009496510028839111,.9990485906600952,0,0,0,0,-.6328803300857544,.10497245192527771,-.6328803300857544,-.6920668482780457,.44548824429512024,-.567964494228363,.9990485906600952,1.0009496212005615,0,0,0,0,-.6328803300857544,.10497245192527771,-.6328803300857544,-.5679647326469421,.4454882740974426,-.6920666694641113,-.0009496510028839111,.9990485906600952,0,0,0,0,-.4972509443759918,.10497245192527771,-.7441885471343994,-.5679647326469421,.4454882740974426,-.6920666694641113,.9990485906600952,1.0009496212005615,0,0,0,0,-.4972509443759918,.10497245192527771,-.7441885471343994,-.42203566431999207,.44548851251602173,-.7895731925964355,-.0009496510028839111,.9990485906600952,0,0,0,0,-.3425123989582062,.10497245192527771,-.8268979787826538,-.42203566431999207,.44548851251602173,-.7895731925964355,.9990485906600952,1.0009496212005615,0,0,0,0,-.3425123989582062,.10497245192527771,-.8268979787826538,-.259888231754303,.4454883933067322,-.856736958026886,-.0009496510028839111,.9990485906600952,0,0,0,0,-.17461130023002625,.10497245192527771,-.8778302073478699,-.259888231754303,.4454883933067322,-.856736958026886,.9990485906600952,1.0009496212005615,0,0,0,0,-.17461130023002625,.10497245192527771,-.8778302073478699,-.08775380253791809,.44548818469047546,-.8909766674041748,-.0009496510028839111,.9990485906600952,0,0,0,0]),kn=new Uint16Array([63,127,64,63,64,0,61,125,126,61,126,62,59,123,124,59,124,60,57,121,122,57,122,58,55,119,120,55,120,56,53,117,118,53,118,54,51,115,116,51,116,52,48,112,114,48,114,50,46,110,113,46,113,49,44,108,111,44,111,47,42,106,109,42,109,45,40,104,107,40,107,43,38,102,105,38,105,41,36,100,103,36,103,39,34,98,101,34,101,37,32,96,99,32,99,35,30,94,97,30,97,33,28,92,95,28,95,31,26,90,93,26,93,29,24,88,91,24,91,27,22,86,89,22,89,25,20,84,87,20,87,23,18,82,85,18,85,21,17,81,83,17,83,19,15,79,80,15,80,16,13,77,78,13,78,14,11,75,76,11,76,12,9,73,74,9,74,10,7,71,72,7,72,8,5,69,70,5,70,6,3,67,68,3,68,4,1,65,66,1,66,2]),Un=Tt.createFromNumber(0,0,0),Bn=Tt.createFromNumber(1,1,1),jn=kn.length;Ce("specialCylinder",(function(e){var t=e.createGeometry(function(e){return e.createVertexLayout({attributes:Vn,stride:48})}(e),Fn,kn);return t.setBoundBox(Un,Bn),t.addSubMesh(jn,0,0),t}));var Vn=[{name:"a_normal",format:2,offset:12,usage:2},{name:"a_position",format:2,offset:0,usage:1},{name:"a_tangent",format:3,offset:40,usage:3},{name:"a_texCoord",format:1,offset:24,usage:4}];function zn(e,t,r,n,o,i,a){void 0===r&&(r=1),void 0===n&&(n=1),void 0===o&&(o=1),void 0===i&&(i=1),void 0===a&&(a=!1);for(var s=r/2,u=n/2,c=Math.floor(o),l=Math.floor(i),f=c+1,p=l+1,h=r/c,d=n/l,_=0;_<p;_++)for(var y=_*d-u,v=0;v<f;v++){var m=v*h-s;a?e.push(m,-y,0,v/c,1-_/l):e.push(m,0,-y,0,1,0,v/c,1-_/l,0,0,0,0,1,1)}for(_=0;_<l;_++)for(v=0;v<c;v++){var g=v+f*_,b=v+f*(_+1),w=v+1+f*(_+1),x=v+1+f*_;t.push(g,x,b),t.push(b,x,w)}}var Gn=[],Wn=[];zn(Gn,Wn,1,1);var Xn=new Float32Array(Gn),Hn=new Uint16Array(Wn),qn=Tt.createFromNumber(0,0,0),Yn=Tt.createFromNumber(1,.05,1),Zn=Wn.length;Ce("plane",(function(e){var t=e.createGeometry(gn(e),Xn,Hn);return t.setBoundBox(qn,Yn),t.addSubMesh(Zn,0,0),t}));var Kn=[{name:"a_position",format:2,offset:0,usage:1},{name:"a_texCoord",format:1,offset:12,usage:4}],Qn=[],$n=[];function Jn(e,t,r,n,o){return function(i){return i.createTexture({source:[new Uint8Array([e,t,r,n])],pixelFormat:o||ue.ETextureFormat.RGBA8,width:1,height:1,magFilter:ue.EFilterMode.NEAREST,minFilter:ue.EFilterMode.NEAREST,wrapU:ue.EWrapMode.CLAMP_TO_EDGE,wrapV:ue.EWrapMode.CLAMP_TO_EDGE,anisoLevel:1})}}function eo(e,t,r,n){var o=new Uint8Array([e,t,r,n]);return function(e){return e.createTexture({type:ue.ETextureType.Cube,slices:6,source:[o,o,o,o,o,o],width:1,height:1,magFilter:ue.EFilterMode.NEAREST,minFilter:ue.EFilterMode.NEAREST,wrapU:ue.EWrapMode.CLAMP_TO_EDGE,wrapV:ue.EWrapMode.CLAMP_TO_EDGE,anisoLevel:1})}}Ce("ar-camera-plane",(function(e){Qn.length=0,$n.length=0,zn(Qn,$n,2,2,2,2,!0);var t=e.createGeometry(e.createVertexLayout({attributes:Kn,stride:20}),new Float32Array(Qn),new Uint16Array($n));return t.setBoundBox(new Tt,Tt.createFromNumber(2,2,.05)),t.addSubMesh($n.length,0,0),t})),Ce("ar-camera-plane-80x80",(function(e){Qn.length=0,$n.length=0,zn(Qn,$n,2,2,80,80,!0);var t=e.createGeometry(e.createVertexLayout({attributes:Kn,stride:20}),new Float32Array(Qn),new Uint16Array($n));return t.setBoundBox(new Tt,Tt.createFromNumber(2,2,.05)),t.addSubMesh($n.length,0,0),t})),Pe("white",Jn(255,255,255,255)),Pe("transparent",Jn(255,255,255,0)),Pe("black",Jn(0,0,0,255)),Pe("red",Jn(255,0,0,255)),Pe("green",Jn(0,255,0,255)),Pe("blue",Jn(0,0,255,255)),Pe("yellow",Jn(255,255,0,255)),Pe("bump",Jn(128,128,255,255)),Pe("babyblue",Jn(62,131,248,255)),Pe("babygreen",Jn(167,245,82,255)),Pe("babyred",Jn(254,85,47,255)),Re("white",eo(255,255,255,255)),Re("transparent",eo(255,255,255,0)),Re("black",eo(0,0,0,255)),Re("red",eo(255,0,0,255)),Re("green",eo(0,255,0,255)),Re("blue",eo(0,0,255,255)),Re("yellow",eo(255,255,0,255)),Ne("global-forward-base",(function(e){return new(he(e).UniformDescriptor)({uniforms:[{name:"u_view",type:ue.EUniformType.MAT4,needTranspose:!0},{name:"u_viewInverse",type:ue.EUniformType.MAT4,needTranspose:!0},{name:"u_projection",type:ue.EUniformType.MAT4,needTranspose:!0},{name:"u_vp",type:ue.EUniformType.MAT4,needTranspose:!0},{name:"u_gameTime",type:ue.EUniformType.FLOAT},{name:"u_fogColor",type:ue.EUniformType.FLOAT3},{name:"u_fogInfos",type:ue.EUniformType.FLOAT4},{name:"u_ambientLightColorIns",type:ue.EUniformType.FLOAT4},{name:"u_mainLightDir",type:ue.EUniformType.FLOAT3},{name:"u_mainLightColorIns",type:ue.EUniformType.FLOAT4},{name:"u_addLightsPos",type:ue.EUniformType.FLOAT3,num:4},{name:"u_addLightsDir",type:ue.EUniformType.FLOAT3,num:4},{name:"u_addLightsColorIns",type:ue.EUniformType.FLOAT4,num:4},{name:"u_addLightsInfo",type:ue.EUniformType.FLOAT4,num:4},{name:"u_shadowBias",type:ue.EUniformType.FLOAT},{name:"u_shadowColor",type:ue.EUniformType.FLOAT3},{name:"u_shadowMap",type:ue.EUniformType.SAMPLER},{name:"u_csmLightSpaceMatrices",type:ue.EUniformType.MAT4,num:4},{name:"u_csmFarBounds",type:ue.EUniformType.FLOAT4},{name:"u_shadowTilingOffsets",type:ue.EUniformType.FLOAT4,num:4},{name:"u_diffuseSH",type:ue.EUniformType.FLOAT3,num:9},{name:"u_diffuseExp",type:ue.EUniformType.FLOAT},{name:"u_specularEnvMap",type:ue.EUniformType.SAMPLER},{name:"u_specularExp",type:ue.EUniformType.FLOAT},{name:"u_envRotation",type:ue.EUniformType.FLOAT}]})})),Ne("global-forward-add",(function(e){return e.createUniformBlockDesc({uniforms:[{name:"u_view",type:ue.EUniformType.MAT4,needTranspose:!0},{name:"u_viewInverse",type:ue.EUniformType.MAT4,needTranspose:!0},{name:"u_projection",type:ue.EUniformType.MAT4,needTranspose:!0},{name:"u_vp",type:ue.EUniformType.MAT4,needTranspose:!0},{name:"u_fogColor",type:ue.EUniformType.FLOAT3},{name:"u_fogInfos",type:ue.EUniformType.FLOAT4},{name:"u_gameTime",type:ue.EUniformType.FLOAT}]})})),Ne("global-shadow-caster",(function(e){return e.createUniformBlockDesc({uniforms:[{name:"u_lightSpaceMatrix",type:ue.EUniformType.MAT4,needTranspose:!0}]})}));var to=function(e,t){for(var r=0,n=t.length,o=e.length;r<n;r++,o++)e[o]=t[r];return e};function ro(){return[{name:"u_world",type:ue.EUniformType.MAT4,needTranspose:!0},{name:"u_lightMapScaleOffset",type:ue.EUniformType.FLOAT4},{name:"u_lightMap",type:ue.EUniformType.SAMPLER},{name:"u_morphWeights",type:ue.EUniformType.FLOAT4,num:8}]}Ne("mesh-static",(function(e){return e.createUniformBlockDesc({uniforms:ro()})})),De("static-3d",(function(e){return new(he(e).VertexDataDescriptor)({vuMap:[["a_position","u_world",ue.EVertexBatchOperator.MatrixMultiple],["a_lightMapCoord","u_lightMapScaleOffset",ue.EVertexBatchOperator.UVST]]})}));var no=function(){function e(){this.schema={},this.priority=1/0,this._version=0,this._isAdded=!1,this._isRemoved=!1,this._dataCache={},this._dataStrPre={},this._dataStrCache={},this._assetsLoadingCache={},this._hasLoadingAssets=!1,this._dataDirty=!1}return e.SPLIT_DATA=function(e){var t=e.split(";"),r={};return t.forEach((function(e){var t=e.indexOf(":"),n=e.substring(0,t).trim(),o=e.substring(t+1).trim();r[n]=o})),r},Object.defineProperty(e.prototype,"el",{get:function(){return this._el},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"scene",{get:function(){return this._el.scene},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"version",{get:function(){return this._version},enumerable:!1,configurable:!0}),e.prototype.setData=function(e){this._dataCache2=Object.assign(this._dataCache2||{},e),this._dataDirty=!0,this._beforeTick()},e.prototype.setDataOne=function(e,t){this._dataCache2=this._dataCache2||{},this._dataCache2[e]=t,this._dataDirty=!0,this._beforeTick()},e.prototype.getData=function(e){return this._currentData[e]},e.prototype._init=function(e,t,r){void 0===r&&(r=!1),this._el=e,r?this._dataStrCache=Object.assign({},t,this._dataStrCache):Object.assign(this._dataStrCache,t)},e.prototype._init2=function(e,t){this._el=e,this._dataCache2=Object.assign(this._dataCache2||{},t)},e.prototype._added=function(e){var t=this;if(!this._isAdded){var r=this._currentData=this._parseData();if(!this._hasLoadingAssets)return this.onAdd(e,r),this._preData=r,this._isAdded=!0,void(this._version+=1);var n=[],o=function(e){var t=i._assetsLoadingCache[e].promise;n.push(t.then((function(t){r[e]=t.value})).catch((function(t){r[e]=void 0})))},i=this;for(var a in this._assetsLoadingCache)o(a);Promise.all(n).then((function(){t._isRemoved||(t.onAdd(e,r),t._preData=r,t._hasLoadingAssets=!1,t._isAdded=!0,t._version+=1)}))}},e.prototype._superHackPrepareData=function(){this._currentData=this._parseData()},e.prototype._update=function(e){Object.assign(this._dataStrCache,e),this._dataDirty=!0},e.prototype._updateOne=function(e,t){var r;Object.assign(this._dataStrCache,((r={})[e]=t,r)),this._dataDirty=!0},e.prototype._beforeTick=function(){if(this._isAdded){var e=this._dataCache;if(this._dataDirty&&(e=this._parseData()),this._currentData=e,this._hasLoadingAssets)for(var t in this._hasLoadingAssets=!1,this._assetsLoadingCache){var r=this._assetsLoadingCache[t];r.state!==ar.Loading?e[t]=r.value:this._hasLoadingAssets=!0}this._hasLoadingAssets||e===this._preData||(this.onUpdate(e,this._preData),this._preData=e,this._version+=1)}},e.prototype._tick=function(e){this._isAdded&&!this._isRemoved&&this.onTick(e,this._preData)},e.prototype._removed=function(e){this._isAdded&&this.onRemove(e,this._preData),this._isRemoved=!0},e.prototype._release=function(){this._isAdded&&(this.onRelease(this._preData),this._el=void 0,this._preData=void 0,this._currentData=void 0,this._dataCache=void 0,this._dataCache2=void 0,this._dataStrCache=void 0,this._dataStrPre=void 0)},e.prototype._parseData=function(){var e=this,t=e.schema,r=e.scene,n=e._dataStrPre,o=e._dataCache,i=e._assetsLoadingCache,a=e._dataStrCache,s=this._dataCache2||{};for(var u in this._hasLoadingAssets=this._hasLoadingAssets||!1,t)if(void 0===s[u]){var c=t[u],l=a[u];if(void 0===l){if(void 0!==o[u]){s[u]=o[u];continue}n[u]=void 0}else if(n[u]===l){s[u]=o[u];continue}var f=Dr(c.type,l,c.defaultValue,r);void 0!==f?(ir(f)?f.state!==ar.Loading?s[u]=f.value:(i[u]=f,this._hasLoadingAssets=!0):s[u]=f,n[u]=l):n[u]=void 0}return this._dataCache=s,this._dataCache2=void 0,this._dataStrCache={},this._dataDirty=!1,s},e.prototype.onAdd=function(e,t){},e.prototype.onUpdate=function(e,t){},e.prototype.onTick=function(e,t){},e.prototype.onRemove=function(e,t){},e.prototype.onRelease=function(e){},e.TYPE="component",e.EVENTS=[],e}();const oo=no;var io={};function ao(e){return io[e]}function so(e,t){io[e]?Ee.warn("Component "+e+" is already existed !"):(t.TYPE=e,io[e]=t)}const uo=function(){function e(){this.isObservable=!0,this._set=new Set}return Object.defineProperty(e.prototype,"count",{get:function(){return this._set.size},enumerable:!1,configurable:!0}),e.prototype.add=function(e,t,r){if(void 0===r&&(r=!1),!e)return this;if(!this._set.has(e)){var n={handler:e,isOnce:r,priority:t||0,pre:void 0,next:void 0};if(this._set.add(e),!this._head)return this._head=n,this;t=t||0;for(var o=this._head;o.next&&t<o.priority;)o=o.next;return n.pre=o.pre,n.next=o,o.pre=n,n.pre?n.pre.next=n:this._head=n,this}},e.prototype.addOnce=function(e,t){return this.add(e,t,!0),this},e.prototype.clear=function(){return this._head=void 0,this._set.clear(),this},e.prototype.remove=function(e){var t=this._head;if(!e||!this._set.has(e))return this;for(;t&&(null==t?void 0:t.handler)!==e;)t=t.next;if(!t)return this;if(this._set.delete(e),0===this.count)return this._head=void 0,this;if(!t.pre)return this._head=t.next,t.next.pre=void 0,this;if(!t.next)return t.pre.next=void 0,this;var r=t.pre,n=t.next;return r.next=n,n.pre=r,this},e.prototype.notify=function(e,t){for(var r=this._head;r;){r.isOnce&&(r.pre?r.next?(r.pre.next=r.next,r.next.pre=r.pre):r.pre.next=void 0:(this._head=r.next,r.next&&(r.next.pre=void 0)),this._set.delete(r.handler));var n=!1;try{n=r.handler(e,t)}catch(e){Ee.throw(e)}var o=r.next;if(!0===n)return this;r=o}return this},e}();var co=function(){function e(e,t){this._el=e,this._triggerElementEvent=t,this.isEventManager=!0,this._observables={},this._caches={},this._wxmlBind={}}return e.prototype.add=function(e,t,r){return this._observables[e]||(this._observables[e]=new uo),this._observables[e].add(t,r),this},e.prototype.addOnce=function(e,t,r){return this._observables[e]||(this._observables[e]=new uo),this._observables[e].addOnce(t,r),this},e.prototype.remove=function(e,t){return this._observables[e]?(this._observables[e].remove(t),this):this},e.prototype.has=function(e){var t;return!(!this._wxmlBind[e]&&!(null===(t=this._observables[e])||void 0===t?void 0:t.count))},e.prototype.getCount=function(e){return this.has(e)?this._observables[e].count:0},e.prototype.clear=function(e){if(this._observables[e])return this._observables[e].clear(),this},e.prototype.trigger=function(e,t,r,n,o){return void 0===r&&(r=!0),void 0===n&&(n=!0),void 0===o&&(o=!1),this._observables[e]||(this._observables[e]=new uo),r?(this._triggerEvent(e,t,n,o),this):(this._caches[e]={value:t,toXML:n,bubbles:o},this)},e.prototype.flush=function(e){if(this._observables[e]){var t=this._caches[e];return t&&(delete this._caches[e],this._triggerEvent(e,t.value,t.toXML,t.bubbles)),this}},e.prototype._triggerEvent=function(e,t,r,n){var o,i=this._el;if(r&&i.inXML&&this._triggerElementEvent(e,{el:this._el,value:t},{bubbles:n}),n){if(this._el.scene)for(var a=this._el.scene.parent,s=i.inXML;i!==a;)null===(o=i.event._observables[e])||void 0===o||o.notify(t,this._el),!s&&r&&i.inXML&&(i.event._triggerElementEvent(e,{el:this._el,value:t},{bubbles:n}),s=!0),i=i.parent}else this._observables[e].notify(t,this._el)},e.prototype._bindWXMLListener=function(e){this._wxmlBind[e]=!0},e.prototype.flushAll=function(){for(var e in this._caches)this.flush(e);return this},e}();const lo=co;var fo={},po={"anim-keyframe":["animator","keyframe"],"anim-clipmap":["animator","clipMap"],"anim-autoplay":["animator","autoPlay"]},ho=function(){function e(t,r){this._type=t,this.defaultComponents=fo,this.dataMapping=po,this.neverTick=!1,this._inXML=!1,this._children=[],this._components={},this._sortedComps=[],this._componentsDirty=!1,this._inited=!1,this._isAdded=!1,e._IDS[t]=e._IDS[t]||0,this._id=t+"-"+(e._IDS[t]+=1),this._event=new lo(this,r)}return Object.defineProperty(e.prototype,"id",{get:function(){return this._backendId},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"name",{get:function(){return this._name},set:function(e){this._name=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"_elId",{get:function(){return this._id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"inXML",{get:function(){return this._inXML},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"scene",{get:function(){return this._scene},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){return this._parent},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"event",{get:function(){return this._event},enumerable:!1,configurable:!0}),e.prototype._addToParent=function(e){this._parent=e;var t=e.scene;(null==t?void 0:t.ready)&&!this._isAdded&&this.dfs((function(e){e._scene=t,e._added()}))},e.prototype._removeFromParent=function(){this.dfs((function(e){e._removed(),e._scene=void 0}))},e.prototype._initDefaultComponents=function(){for(var e in this.defaultComponents){var t=this._components[e];t||(t=new(ao(e)));var r=this.defaultComponents[e];t._init(this,r),this._components[e]=t}this._componentsDirty=!0},e.prototype._added=function(){if(!this._isAdded){this._backendId&&this.scene._addElById(this._backendId,this),this._sort();for(var e=0,t=this._sortedComps;e<t.length;e++)t[e]._added(this._parent);this._isAdded=!0}},e.prototype._removed=function(){if(this._isAdded){this._sort();for(var e=0,t=this._sortedComps;e<t.length;e++)t[e]._removed(this._parent);this._backendId&&this.scene._removeElById(this._backendId),this._isAdded=!1}},e.prototype.getChildAtIndex=function(e){return this._children[e]},e.prototype.getChildByFilter=function(e){for(var t=0,r=this._children;t<r.length;t++){var n=r[t];if(e(n))return n}},e.prototype.getChildrenByFilter=function(e){return this._children.filter((function(t){return e(t)}))},e.prototype.getChildByClass=function(e){return this.getChildByFilter((function(t){return t._type===e.TYPE}))},e.prototype.getChildByName=function(e){return this.getChildByFilter((function(t){return t.name===e}))},e.prototype.getChildrenByName=function(e){return this.getChildrenByFilter((function(t){return t.name===e}))},e.prototype.dfs=function(e,t,r,n){void 0===n&&(n=function(){return!1});var o=this._children,i=t,a=!1;if(r||(a=n(this,i=e(this,t))),!a&&o)for(var s=0;s<o.length;s+=1)o[s].dfs(e,i,!1,n)},e.prototype.addComponent=function(e,t){var r=e.TYPE;this._components[r]&&Ee.error("Component '"+r+"' is already in element "+this._elId+"!");var n=new e;return n._init2(this,t),this._components[r]=n,this._parent&&this._scene&&(n._added(this._parent),this._componentsDirty=!0),n},e.prototype.getComponent=function(e){return e.substring?this._components[e]:this._components[e.TYPE]},e.prototype.removeComponent=function(e){this._removeAttribute(e.TYPE)},e.prototype.setAttribute=function(e,t){this._setAttribute(e,t)},e.prototype._beforeTick=function(){this._sort();for(var e=0,t=this._sortedComps;e<t.length;e++)t[e]._beforeTick();this._event.flushAll()},e.prototype._sort=function(){this._componentsDirty&&(this._sortedComps=Object.values(this._components).sort((function(e,t){return e.priority-t.priority})),this._componentsDirty=!1)},e.prototype._tick=function(e){for(var t=0,r=this._sortedComps;t<r.length;t++)r[t]._tick(e)},e.prototype._release=function(){this._sort();for(var e=0,t=this._sortedComps;e<t.length;e++){var r=t[e];this._components[r.constructor.TYPE]&&r._release()}this._sortedComps=void 0,this._event=void 0,this._components=void 0,this._children=void 0,this._parent=void 0},e.prototype._associateValue=function(e){this._inited||(this._inXML=!!e,this._initDefaultComponents(),this.scene!==this&&(this._inited=!0))},e.prototype.addChild=function(e){this._appendChild(e,!0)},e.prototype.removeChild=function(e){this._removeChild(e,void 0,!0)},e.prototype.setId=function(e){this._setId(e)},e.prototype.release=function(){var e=this;this.dfs((function(t){t!==e&&t._release()})),this._release()},e.prototype._appendChild=function(e,t){if(void 0===t&&(t=!1),this.scene===this&&!this._inited){for(var r in this._components)this._components[r]._superHackPrepareData();this.scene._initScene(),this.scene._added(),this._inited=!0}e._addToParent(this),this._children.push(e)},e.prototype._removeChild=function(e,t,r){void 0===r&&(r=!1),void 0===t&&(t=this._children.indexOf(e)),t<0||(e._removeFromParent(),this._children.splice(t,1))},e.prototype._insertBefore=function(e,t,r){e._addToParent(this),void 0===r&&t&&(r=this._children.indexOf(t)),void 0!==r?this._children.splice(r,0,e):this._children.push(e)},e.prototype._replaceChild=function(e,t,r){e._addToParent(this),void 0===r&&t&&(r=this._children.indexOf(t)),void 0!==r?(this._children[r]._removeFromParent(),this._children.splice(r,1,e)):this._children.push(e)},e.prototype._spliceBefore=function(e,t,r){var n,o=this;r._children.forEach((function(e){return e._addToParent(o)}));var i=e;"number"!=typeof e&&(i=this._children.indexOf(e)),(n=this._children).splice.apply(n,function(e,t){for(var r=0,n=t.length,o=e.length;r<n;r++,o++)e[o]=t[r];return e}([i,t],r._children)).forEach((function(e){return e._removeFromParent()}))},e.prototype._spliceAppend=function(e){e._addToParent(this),this._children.push(e)},e.prototype._spliceRemove=function(e,t){var r=this._children.indexOf(e);this._children.splice(r,t).forEach((function(e){return e._removeFromParent()}))},e.prototype._setId=function(e){this.scene?(this._backendId&&this.scene._removeElById(e),this.scene._addElById(e,this),this._backendId=e):this._backendId=e},e.prototype._setStyleScope=function(e){},e.prototype._setStyle=function(e){},e.prototype._addClass=function(e,t){},e.prototype._removeClass=function(e,t){},e.prototype._clearClasses=function(){},e.prototype._setAttribute=function(e,t){if("name"!==e){var r=this.dataMapping[e];if(r){e=r[0];var n=r[1],o=this._components[e];if(o)return void o._updateOne(n,t);t=n+":"+t}var i=this._components[e];if(i){var a=oo.SPLIT_DATA(t);i._update(a)}else{var s=ao(e);s&&(this._components[e]&&Ee.throw(new Error("Component '"+e+"' is already in element "+this._elId+"!")),(i=new s)._init(this,oo.SPLIT_DATA(t)),this._components[e]=i,this._parent&&this._scene&&(i._added(this._parent),this._componentsDirty=!0))}}else this._name=t},e.prototype._removeAttribute=function(e){var t=this._components[e];t&&(this._scene&&t._removed(this),t._release(),delete this._components[e],this._componentsDirty=!0)},e.prototype._setWXMLListener=function(e){this._event._bindWXMLListener(e)},e.prototype._setText=function(e){},e.TYPE="element",e._IDS={},e}();const _o=ho;var yo={};function vo(e){return yo[e]}function mo(e,t){yo[e]?Ee.warn("Element "+e+" is already existed !"):(t.TYPE=e,yo[e]=t)}var go=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},e(t,r)};return function(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),bo={};const wo=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.schema=bo,t._totalCount=0,t._totalWeight=0,t._currentCount=0,t._currentWeight=0,t._errorMap={},t._loadedAssets={},t}return go(t,e),t.prototype._addAsset=function(e){this._totalCount+=1,this._totalWeight+=e.weight},t.prototype._removeAsset=function(e){this._totalCount-=1,this._totalWeight-=e.weight,this._currentCount-=1,this._currentWeight-=e.weight},t.prototype._onProgressOne=function(e,t){this._currentWeight-=e.weight*e.progress,this._currentWeight+=e.weight*t,e.progress=t,this.el.event.trigger("progress",{progress:this._currentWeight/this._totalWeight,asset:e})},t.prototype._onLoadOne=function(e,t){this._currentCount+=1,this._loadedAssets[this._getName(e)]=e,t&&(this._errorMap[this._getName(e)]=t),this._currentCount===this._totalCount&&this.el.event.trigger("loaded",{errors:this._errorMap,assets:this._loadedAssets})},t.prototype._getName=function(e){return e.type+"-"+e.assetId},t.EVENTS=["progress","loaded"],t}(oo),xo=function(){function e(e,t){this._scene=e,this.schema={},Pr(t)||Rr(t,{create:function(e,r,n){return n.assets.getAssetWithState(t,e,r)}})}return Object.defineProperty(e.prototype,"scene",{get:function(){return this._scene},enumerable:!1,configurable:!0}),e.prototype._parseOptions=function(e){for(var t in this.schema){var r=this.schema[t];r&&"string"==typeof e[t]&&(e[t]=Dr(r.type,e[t],r.defaultValue,this._scene))}},e.prototype.load=function(e,t){Ee.throw(new Error("Not implemented !"))},e.prototype.cancel=function(e){e.canceled=!0},e.prototype.release=function(e,t){},e.prototype.getBuiltin=function(){return[]},e}();var Eo={};function So(){return Object.keys(Eo)}function To(e){return Eo[e]}function Oo(e,t){Eo[e]?Ee.warn("AssetLoader "+e+" is already existed !"):Eo[e]=t}var Ao=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},e(t,r)};return function(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Co=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.priority=10,t._loaders={},t._store={},t}return Ao(t,e),t.prototype.addAsset=function(e,t,r){this._store[e]=this._store[e]||{},this._store[e][t]?Ee.error(new Error("Asset "+e+" "+t+" is already existed !")):this._store[e][t]={value:r,state:ar.Existed,__isAsset:!0}},t.prototype.loadAsset=function(e,t){var r,n=e.type,o=e.assetId,i=e.defer,a=null==t?void 0:t.getComponent(wo),s=null===(r=this._store[n])||void 0===r?void 0:r[o];if(s)return s.state!==ar.Defer||i?void Ee.error(new Error("Asset "+n+" "+o+" has already been loaded !")):(s.__group=a,s.__params.weight=e.weight,null==a||a._addAsset(s.__params),this._loadAsset(s));if(this._getLoader(n)){if(s=this._store[n][o]={__isAsset:!0,__params:e,__group:a,state:i?ar.Defer:ar.Loading},null==a||a._addAsset(e),!i)return this._loadAsset(s)}else Ee.error(new Error("Loader for type "+n+" is not existed!"))},t.prototype._loadAsset=function(e){var t=this,r=e.__params;r.options=r.options||{};var n=this._getLoader(r.type);return e.state=ar.Loading,n._parseOptions(r.options),e.promise=new Promise((function(o,i){r.startTs=Date.now(),r.progress=0,n.load(r,{onLoading:function(r){return t._handleLoadOne(e,r,void 0,void 0,o,i)},onLoaded:function(r){return t._handleLoadOne(e,1,r,void 0,o,i)},onError:function(r){return t._handleLoadOne(e,1,void 0,r,o,i)}})})),e.promise},t.prototype.releaseAsset=function(e,t){var r,n=null===(r=this._store[e])||void 0===r?void 0:r[t];if(n){var o=this._getLoader(e),i=n.state===ar.Loading;o&&n.__params&&(i?o.cancel(n.__params):o.release(n.__params,n.value)),n.state=ar.Undefined,n.__group&&n.__group._removeAsset(n.__params),delete this._store[e][t]}},t.prototype.getAsset=function(e,t,r){var n=this.getAssetWithState(e,t,r);if(n.state===ar.Existed)return n.value},t.prototype.getAssetWithState=function(e,t,r){var n=this._store[e];if(!n)return this._tryBuiltin(e,t,r);var o=n[t];return o||(o=this._tryBuiltin(e,t,r)),(null==o?void 0:o.state)===ar.Defer&&this._loadAsset(o),o.state!==ar.Undefined?o:n[r]||o},t.prototype.cancelAsset=function(e,t){var r=this._getLoader(e),n=this._store[e][t];n.state===ar.Loading&&r.cancel(n.__params)},t.prototype._registerLoadersAndLoadBuiltinAssets=function(){for(var e=0,t=So();e<t.length;e++){var r=t[e],n=this._getLoader(r);if(n){var o=n.getBuiltin();if(o.length)for(var i=0,a=o;i<a.length;i++){var s=a[i],u=s.assetId,c=s.src,l=s.options;this.loadAsset({assetId:u,src:c,options:l,type:r,defer:!0})}}}var f=new Ir(this.scene);f.initByEffect(this.getAsset("effect","standard")),this.addAsset("material","default",f)},t.prototype._checkAssetIsDefer=function(e,t){var r,n=null===(r=this._store[e])||void 0===r?void 0:r[t];return n&&n.state===ar.Defer},t.prototype.onRelease=function(e){this._cancelAll()},t.prototype._cancelAll=function(){for(var e in this._store){var t=this._getLoader(e),r=this._store[e];for(var n in r){var o=r[n];o.state===ar.Loading&&t.cancel(o.__params)}}},t.prototype._handleLoadOne=function(e,t,r,n,o,i){var a=e.__params,s=e.__group,u=a.type,c=a.assetId,l=a.canceled,f=this._store[u][c];if(f.state===ar.Loading)return l?(f.state=ar.Undefined,delete this._store[u][c],i(new Error("Assets load canceled!"))):(a.duration=(Date.now()-a.startTs)/1e3,n?(f.state=ar.Undefined,delete this._store[u][c],null==s||s._onProgressOne(a,1),null==s||s._onLoadOne(a,n),i(n)):1===t&&r?(f.state=ar.Existed,e.value=r,null==s||s._onProgressOne(a,1),null==s||s._onLoadOne(a),o(e)):void(null==s||s._onProgressOne(a,t)))},t.prototype._tryBuiltin=function(e,t,r){var n=Oe(e,t);return n||r&&(n=Oe(e,r),t=r),n?(this._store[e]=this._store[e]||{},this._store[e][t]={value:n(this.scene),state:ar.Existed,__isAsset:!0}):{state:ar.Undefined,__isAsset:!0}},t.prototype._getLoader=function(e){if(!this._loaders[e]){var t=To(e);t&&(this._store[e]=this._store[e]||{},this._loaders[e]=new t(this.scene,e))}return this._loaders[e]},t}(oo);const Mo=Co;var Po;!function(e){e.Camera="Camera",e.Clear="Clear",e.Cull="Cull",e.Render="Render",e.Script="Script"}(Po||(Po={}));const Ro=function(){function e(e,t,r,n){this._parent=e,this._id=t,this._name=r,this._options=n,this.type=Po.Script,this._inputs={},this._outputs={},this._isActive=!1,this.onInit(this.options)}return Object.defineProperty(e.prototype,"options",{get:function(){return this._options},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"name",{get:function(){return this._name},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"id",{get:function(){return this._id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"scene",{get:function(){return this._parent.scene},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"output",{get:function(){return this._output},enumerable:!1,configurable:!0}),e.prototype.onInit=function(e){},e.prototype.getInput=function(e){return this._inputs[e]&&this._inputs[e].output},e.prototype._addInput=function(e,t){this._inputs[e]&&Ee.throw(new Error("Input '"+e+"' is already in node '"+this._name+"("+this._id+"))' !")),this.inputTypes[e]||Ee.throw(new Error("Input '"+e+"' is not defined in node '"+this._name+"("+this._id+"))' !")),this.inputTypes[e]!==t.outputType&&Ee.throw(new Error("Input '"+e+"(type: "+t.outputType+"))' dose not match requirement type '"+this.inputTypes[e]+"' of node '"+this._name+"("+this._id+")' !")),this._inputs[e]=t,t._outputs[this.id]=e},e.prototype._removeInput=function(e){if(e._output){var t=e._output[this.id];delete e._outputs[this.id],delete this._inputs[t]}},e.prototype._execute=function(e){this._isActive||(this.onActive(e,this._options),this._isActive=!0),this.onExecute(e,this._options)},e.prototype._disable=function(e){this._isActive&&(this.onDisable(e,this._options),this._isActive=!1)},e.prototype.reset=function(){this._inputs={},this._outputs={}},e.prototype.onActive=function(e,t){},e.prototype.onExecute=function(e,t){},e.prototype.onDisable=function(e,t){},e}(),Do=function(){function e(e,t){this._scene=e,this.isRenderTexture=!0,this._initByOptions(t)}return e.IS=function(e){return e&&!!e.isRenderTexture},Object.defineProperty(e.prototype,"depthStencil",{get:function(){return this._depthStencil},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"texture",{get:function(){return this._color},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"depthTexture",{get:function(){return this._depthStencil},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"renderPass",{get:function(){return this._pass},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this._height},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"width",{get:function(){return this._width},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"id",{get:function(){return this._pass.id},enumerable:!1,configurable:!0}),e.prototype._initByOptions=function(e){var t=e.width,r=e.height;t&&r||Ee.throw(new Error("RenderTexture must has width and height!")),this._width=t,this._height=r;var n=ue.ETextureFormat.Depth_Stencil;this._color=this._scene.createTexture({width:this._width,height:this._height,wrapU:ue.EWrapMode.CLAMP_TO_EDGE,wrapV:ue.EWrapMode.CLAMP_TO_EDGE,minFilter:ue.EFilterMode.LINEAR,magFilter:ue.EFilterMode.LINEAR,pixelFormat:e.isHDR?ue.ETextureFormat.RGBA16F:ue.ETextureFormat.RGBA8,sampleCount:1,isRenderTarget:!0}),this._depthStencil=this._scene.createTexture({width:this._width,height:this._height,sampleCount:1,pixelFormat:n,isRenderTarget:!0,wrapU:ue.EWrapMode.CLAMP_TO_EDGE,wrapV:ue.EWrapMode.CLAMP_TO_EDGE,minFilter:ue.EFilterMode.LINEAR,magFilter:ue.EFilterMode.LINEAR,isWriteOnly:!0}),this._pass=new(he(this._scene).RenderPass)({colors:[{texture:this._color}],depth:{texture:this._depthStencil},stencil:n!==ue.ETextureFormat.Depth_Stencil?void 0:{texture:this._depthStencil}})},e}();var No=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},e(t,r)};return function(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Io=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type=Po.Camera,t.inputTypes={camera:"Camera"},t.outputType="Camera",t}return No(t,e),t.prototype.onInit=function(e){this._output=e.camera},t}(Ro),Lo=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type=Po.Cull,t.inputTypes={camera:"Camera"},t.outputType="MeshList",t}return No(t,e),t.prototype.onActive=function(){this._output=new(he(this.scene).ScalableList)(this.options.initSize||2048)},t.prototype.onExecute=function(e,t){this.getInput("camera").cull(this._output,t.lightMode)},t.prototype.onDisable=function(){this._output=void 0},t}(Ro),Fo=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type=Po.Script,t.inputTypes={},t.outputType="RenderTarget",t}return No(t,e),t.prototype.onActive=function(e,t){this._output=t.createRenderTarget()},t.prototype.onDisable=function(){this._output=void 0},t}(Ro),ko=(function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type=Po.Script,t.inputTypes={},t.outputType="Camera",t}No(t,e),t.prototype.onActive=function(e,t){this._output=t.viewObject},t.prototype.onDisable=function(){this._output=void 0}}(Ro),function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type=Po.Clear,t.inputTypes={camera:"Camera",renderTarget:"RenderTarget"},t.outputType="None",t}return No(t,e),t.prototype.onExecute=function(e,t){var r=this.getInput("renderTarget"),n=this.getInput("camera").view;if(r&&n){var o=he(this.scene).renderEnv;o.setRenderPass(r.renderPass),o.clearView(n)}},t}(Ro)),Uo=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type=Po.Render,t.outputType="RenderTarget",t}return No(t,e),t.prototype.onInit=function(e){this.inputTypes=Object.assign({camera:"Camera",renderTarget:"RenderTarget",meshList:"MeshList",lightList:"LightList"},e.inputTypes||this._inputTypes||{})},t.prototype.onActive=function(e,t){this._uniformBlocks=t.createUniformBlocks()},t.prototype.onExecute=function(e,t){var r;if(e.enableInstance(),t.uniformsMap){var n=function(e){var n=t.uniformsMap[e],i=n.inputKey,a=(n.name,n.index,o.getInput(i));if(!a)return"continue";a instanceof Do&&(a=a.texture),null===(r=o._uniformBlocks)||void 0===r||r.forEach((function(t){return t.setUniform(e,a)}))},o=this;for(var i in t.uniformsMap)n(i)}for(var a=0;a<this._uniformBlocks.length;a+=1){var s=this._uniformBlocks[a];s&&he(this.scene).renderEnv.setEnvUniform(a,s)}var u=this.getInput("renderTarget");this._output=u,u&&(he(this.scene).renderEnv.setRenderPass(u.renderPass),this.onRender(e,t))},t.prototype.onRender=function(e,t){var r,n=this.getInput("camera"),o=he(this.scene).renderEnv,i=e.lights._getMainLight(n);(null==i?void 0:i.castShadow)&&(null===(r=this._uniformBlocks)||void 0===r||r.forEach((function(e){i._copyLightMatrices(e),e.hasKey("u_shadowBias")&&e.setUniform("u_shadowBias",[i.shadowBias])}))),this._preReceiveShadow!==!!(null==i?void 0:i.castShadow)&&(this._preReceiveShadow=!!(null==i?void 0:i.castShadow),o.changeVirtualMacros({WX_RECEIVE_SHADOW:this._preReceiveShadow})),n.draw(this.getInput("meshList"),t.lightMode)},t.prototype.onDisable=function(){this._output=void 0,this._uniformBlocks=void 0},t}(Ro),Bo=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return No(t,e),t.prototype.onRender=function(e,t){var r=this.getInput("camera"),n=e.lights._getMainLight(r);r.drawLight(n,this.getInput("meshList"),t.lightMode)},t}(Uo),jo=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},e(t,r)};return function(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Vo=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type=Po.Camera,t._onCompileDone=function(e){var r=e.length;if(!r)return t._firstNode=void 0,void(t._lastNode=void 0);t._firstNode=e[0],t._lastNode=e[r-1],t.inputTypes=t._firstNode.inputTypes,t.outputType=t._firstNode.outputType},t}return jo(t,e),t.prototype.onActive=function(e,t){this._subRG?this._subRG._active(this.scene):(this._subRG=new t.RGClass("subRG-"+this.name,t.options||{}),this._subRG._active(this.scene),this._subRG._compile(this._onCompileDone))},t.prototype.onExecute=function(e,t){this._firstNode&&this._lastNode&&(this._firstNode._inputs=this._inputs,this._output=this._lastNode._output),this._subRG._execute()},t.prototype.onDisable=function(e,t){this._subRG._disable()},t.prototype.showDebugInfo=function(){return this._subRG.showDebugInfo()},t}(Ro),zo=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},e(t,r)};return function(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Go=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type=Po.Cull,t.inputTypes={camera:"Camera"},t.outputType="None",t}return zo(t,e),t.prototype.onExecute=function(e,t){var r=this.getInput("camera"),n=t.globalUniforms,o=e.lights._getMainLightInfo(r);n.setUniform("u_ambientLightColorIns",o.ambientColorIns),n.setUniform("u_mainLightDir",o.mainDir),n.setUniform("u_mainLightColorIns",o.mainColorIns),e.changeMacros({WX_USE_AMBIENT_LIGHT:o.hasAmbient,WX_USE_MAIN_DIR_LIGHT:o.hasMainDir});var i=e.lights._getAddLightsInfo(r);i.count?(n.setUniform("u_addLightsPos",i.pos),n.setUniform("u_addLightsDir",i.dir),n.setUniform("u_addLightsColorIns",i.colorIns),n.setUniform("u_addLightsInfo",i.info),e.changeMacros({WX_USE_ADD_LIGHTS:!0,WX_ADD_LIGHTS_COUNT:i.count})):e.changeMacros({WX_USE_ADD_LIGHTS:!1})},t}(Ro),Wo=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},e(t,r)};return function(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Xo=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._defaultMat=null,t._skyboxEffect=null,t._2dst=(new _r).setValue(1,1,0,0),t.type=Po.Script,t.inputTypes={camera:"Camera"},t.outputType="MeshList",t}return Wo(t,e),t.prototype.onActive=function(){var e=he(this.scene);if(this._vlCube||(this._vlCube=new e.VertexLayout({attributes:[{name:"a_position",format:ue.EVertexFormat.FLOAT3,usage:ue.EVertexLayoutUsage.POSITION,offset:0}],stride:12})),this._vbCube||(this._vbCube=new e.VertexBuffer(new Float32Array([-1,-1,-1,1,-1,-1,-1,1,-1,1,1,-1,-1,-1,1,1,-1,1,-1,1,1,1,1,1]),this._vlCube)),this._ibCube||(this._ibCube=new e.IndexBuffer(new Uint16Array([4,6,7,7,4,5,5,7,3,3,5,1,1,5,4,4,1,0,0,2,4,4,6,2,2,3,0,0,1,3,3,7,2,2,6,7]))),this._vlSphere||(this._vlSphere=new e.VertexLayout({attributes:[{name:"a_position",format:2,offset:0,usage:1},{name:"a_normal",format:2,offset:12,usage:2},{name:"a_texCoord",format:1,offset:24,usage:4},{name:"a_lightMapCoord",format:1,offset:32,usage:5},{name:"a_tangent",format:3,offset:40,usage:3}],stride:56})),!this._vbSphere||!this._ibSphere){var t=[],r=[];Sn(t,r,1,64,32);var n=new Float32Array(t),o=new Uint16Array(r);this._vbSphere=new e.VertexBuffer(n,this._vlSphere),this._ibSphere=new e.IndexBuffer(o),this._numberIndicesSphere=r.length}if(!this._mr){var i=this._ub=new e.UniformBlock(new e.UniformDescriptor({uniforms:[{name:"u_hack_avoid_empty",type:ue.EUniformType.FLOAT}]})),a=new e.CullingComponent(new e.Entity3D);a.setActive(!1);var s=this._mr=new e.MeshRendererComponent(new e.Entity3D,{meshCount:1,uniformBlock:i,renderType:ue.EMeshRenderType.Static3D,culling:a});s.setVertexBuffer(0,this._vbCube),s.setIndexBuffer(0,this._ibCube),s.setNumIndices(0,36)}if(!this._list){var u=this._list=new e.ScalableList(1);u.begin(),u.add(this._mr.id),u.end()}this._output=this._list},t.prototype.onExecute=function(e){var t;if(null===(t=e.env)||void 0===t?void 0:t.skyMap){var r=e.env,n=r.skyMap,o=r.rotation,i=r.useHalfSkyMap,a=r.isSky2D,s=r.isSkyRT,u=n.type===ue.ETextureType.Cube;if(this._skyboxEffect||(this._skyboxEffect=this.scene.assets.getAsset("effect","skybox")),this._defaultMat||(this._defaultMat=this.scene.createMaterial(this._skyboxEffect,{u_texture:this.scene.assets.getAsset("cube-texture","white")}),this._mr.setMaterial(0,this._defaultMat.kanataMaterial)),a){var c=this.scene.assets.getAsset("geometry","ar-camera-plane");this._mr.setVertexBuffer(0,c.vertexBuffer),this._mr.setIndexBuffer(0,c.indexBuffer),this._mr.setNumIndices(0,c.subMeshes[0].length);var l=this.scene.width/this.scene.height,f=n.width/n.height,p=f/l;f>l?this._2dst.setValue(p,-1,(p-1)/2,0):this._2dst.setValue(1,-1/p,0,(1/p-1)/2),this._defaultMat.setVector("u_st",this._2dst)}else u?(this._mr.setVertexBuffer(0,this._vbCube),this._mr.setIndexBuffer(0,this._ibCube),this._mr.setNumIndices(0,36)):(this._mr.setVertexBuffer(0,this._vbSphere),this._mr.setIndexBuffer(0,this._ibSphere),this._mr.setNumIndices(0,this._numberIndicesSphere));this._defaultMat.setTexture("u_texture",n),this._defaultMat.setFloat("u_rotation",o),this._defaultMat.setMacros({WX_USE_SKY_2D:!u&&a,WX_USE_SKY_RT:s,WX_USE_SKY_CUBE:u,WX_SAMPLER_SKY_HALF:i});var h=this.getInput("camera");h.bgStatesClear?this._defaultMat.clearRenderStates(h.bgStates):this._defaultMat.setRenderStates(h.bgStates)}},t}(Ro),Ho=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},e(t,r)};return function(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),qo=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type=Po.Script,t.inputTypes={camera:"Camera"},t.outputType="MeshList",t}return Ho(t,e),t.prototype.onActive=function(){var e=this.scene.ar,t=new(he(this.scene).ScalableList)(1),r=this._mesh=null==e?void 0:e._useCameraMesh(this.getInput("camera"));r&&(t.begin(),t.add(r.id),t.end()),this._output=t},t.prototype.onExecute=function(e,t){var r=this.getInput("camera");r.bgStatesClear?this._mesh.material.clearRenderStates(r.bgStates):this._mesh.material.setRenderStates(r.bgStates)},t.prototype.onDisable=function(e,t){var r;null===(r=e.scene.ar)||void 0===r||r._removeCameraMesh(this.getInput("camera"))},t}(Ro),Yo=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},e(t,r)};return function(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Zo="post-process-blit",Ko="post-process-fast-blur",Qo={};function $o(e){return Qo[e]}function Jo(e,t,r){Qo[e]?Ee.warn("RGPostProcessNode "+e+" is already existed !"):Qo[e]={clz:t,schema:r}}var ei=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type=Po.Script,t.outputType="RenderTarget",t}return Yo(t,e),t.prototype.onCreatedData=function(e,t,r,n){},t.prototype.onFillData=function(e,t,r,n){for(var o=this.getInput("sourceTex"),i=0;i<t.length;i++)t[i].setTexture("u_sourceTex",o.texture),t[i].setFloat("u_width",o.width),t[i].setFloat("u_height",o.height)},t.prototype.changeViewport=function(e,t){this._views[e]=this._getView(he(this.scene),t)},t.prototype.getEffectByName=function(e){return this.scene.assets.getAsset("effect",e)},t.prototype.onActive=function(e,t){var r=this,n=he(this.scene),o=this.scene._requestTmpObj("post-process-static");o._LIST||(o._LIST=new n.ScalableList(1),o._VB=new n.VertexBuffer(new Float32Array([-1,1,0,1,1,1,1,1,-1,-1,0,0,1,-1,1,0]),new n.VertexLayout({attributes:[{name:"a_position",format:ue.EVertexFormat.FLOAT2,offset:0,usage:ue.EVertexLayoutUsage.POSITION},{name:"a_uv",format:ue.EVertexFormat.FLOAT2,offset:8,usage:ue.EVertexLayoutUsage.UV0}],stride:16})),o._NODE=new n.Entity3D,o._IB=new n.IndexBuffer(new Uint16Array([0,1,2,2,1,3])),o._CULL=new n.CullingComponent(o._NODE),o._CULL.setActive(!1),o._UB=new n.UniformBlock(new n.UniformDescriptor({uniforms:[{name:"u_hack_avoid_empty",type:ue.EUniformType.FLOAT}]})),o._CAM=new n.CameraComponent(o._NODE),o._VIEW=this._getView(n,{x:0,y:0,w:1,h:1}),o._CAM.view=o._VIEW),this._passes=this.onGetPasses(e,t),this._passes&&(this._meshes=[],this._materials=[],this._views=[],this._passes.forEach((function(e,i){var a,s,u,c=e.effect,l=e.viewport;if(c){var f=r.scene.createMaterial(c),p=new n.MeshRendererComponent(new n.Entity3D,{meshCount:1,uniformBlock:o._UB,renderType:ue.EMeshRenderType.Static3D,culling:o._CULL});p.setVertexBuffer(0,o._VB),p.setIndexBuffer(0,o._IB),p.setNumIndices(0,6),p.setMaterial(0,f.kanataMaterial),t.final&&i===r._passes.length-1&&f.setMacro("WX_PP_TO_SRGB",!0),null===(a=r._meshes)||void 0===a||a.push(p),null===(s=r._materials)||void 0===s||s.push(f),null===(u=r._views)||void 0===u||u.push(l?r._getView(n,l):o._VIEW)}})),this._output=this._passes[this._passes.length-1].renderTarget,this.onCreatedData(e,this._materials,this._passes,t))},t.prototype._getView=function(e,t){return new e.View({passAction:{colorAction:ue.ELoadAction.DONTCARE,depthAction:ue.ELoadAction.DONTCARE,stencilAction:ue.ELoadAction.DONTCARE},viewport:t,scissor:{x:0,y:0,w:1,h:1}})},t.prototype.onExecute=function(e,t){var r,n=this;if(this._materials){var o=this.scene._requestTmpObj("post-process-static"),i=he(this.scene),a=this._passes,s=o._LIST;this.onFillData(e,this._materials,this._passes,t),s.usedSize=1,null===(r=this._meshes)||void 0===r||r.forEach((function(e,t){var r=a[t];r?(s.dataView[0]=e.id,i.renderEnv.setRenderPass(r.renderTarget.renderPass),o._CAM.view=n._views[t],o._CAM.draw(s,r.lightMode)):s.dataView[0]=0}))}},t.prototype.onDisable=function(){this._passes=void 0,this._meshes=void 0,this._materials=void 0},t}(Ro),ti=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},e(t,r)};return function(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),ri=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.inputTypes={sourceTex:"RenderTarget"},t}return ti(t,e),t.prototype.onGetPasses=function(e,t){return[{effect:this.getEffectByName(Zo),renderTarget:t.data.dstTex,lightMode:"PostProcess"}]},t}(ei);Jo("blit",ri,{});var ni=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},e(t,r)};return function(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),oi=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.inputTypes={sourceTex:"RenderTarget"},t}return ni(t,e),t.prototype.onGetPasses=function(e,r){var n=this.getEffectByName("post-process-blur"),o=this.getEffectByName(Zo),i=[],a=this.scene._requestTmpObj("pp-rts");if(!a.blur){a.blur=[];for(var s=0;s<3;s++)a.blur.push(this.scene.createRenderTexture({width:2===s?e.scene.width:e.scene.width/t.sampleRate,height:2===s?e.scene.height:e.scene.height/t.sampleRate,isHDR:r.hdr}))}return i.push({effect:o,renderTarget:a.blur[2],lightMode:"PostProcess"}),i.push({effect:n,renderTarget:a.blur[0],lightMode:"Horizontal"}),i.push({effect:n,renderTarget:a.blur[1],lightMode:"Vertical"}),i.push({effect:o,renderTarget:a.blur[2],lightMode:"PostProcess"}),i},t.prototype.onFillData=function(r,n,o,i){var a;e.prototype.onFillData.call(this,r,n,o,i);var s=this.getInput("sourceTex");if(s){for(var u=this.scene._requestTmpObj("pp-rts"),c=1;c<n.length-1;c++)n[c].setFloat("u_radius",i.data.radius),n[c].setMacro("WX_SAMPLE_COUNT",2*Math.ceil(i.data.radius/t.sampleRate)+1);n[3].setMacro("WX_USE_UNIFORM_ALPHA",!0),n[3].setRenderState("blendOn",!0),n[3].setFloat("u_alpha",Math.min(i.data.radius/t.sampleRate*.5,1)),n[0].setTexture("u_sourceTex",s.texture),n[1].setTexture("u_sourceTex",s.texture),n[2].setTexture("u_sourceTex",u.blur[0].texture),n[3].setTexture("u_sourceTex",u.blur[1].texture),0===(null===(a=i.data)||void 0===a?void 0:a.radius)&&(n[1].setMacro("WX_SAMPLE_COUNT",1),n[2].setMacro("WX_SAMPLE_COUNT",1))}},t.sampleRate=4,t}(ei);Jo("blur",oi,{radius:{type:"number",defaultValue:5}});var ii=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},e(t,r)};return function(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),ai=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.inputTypes={sourceTex:"RenderTarget"},t}return ii(t,e),t.prototype.onGetPasses=function(e,r){var n=this.getEffectByName(Ko),o=[],i=this.scene._requestTmpObj("pp-rts");if(!i.fastblur){i.fastblur=[];for(var a=0;a<3;a++)i.fastblur.push(this.scene.createRenderTexture({width:2===a?e.scene.width:e.scene.width/t.sampleRate,height:2===a?e.scene.height:e.scene.height/t.sampleRate,isHDR:r.hdr}))}for(a=0;a<t.iterations-1;a++)o.push({effect:n,renderTarget:i.fastblur[0],lightMode:"Horizontal"}),o.push({effect:n,renderTarget:i.fastblur[1],lightMode:"Vertical"});return o.push({effect:n,renderTarget:i.fastblur[0],lightMode:"Horizontal"}),o.push({effect:n,renderTarget:i.fastblur[2],lightMode:"Vertical"}),o},t.prototype.onFillData=function(r,n,o,i){var a;e.prototype.onFillData.call(this,r,n,o,i);var s=this.getInput("sourceTex");if(s){for(var u=this.scene._requestTmpObj("pp-rts"),c=0;c<n.length;c++)c%2==0?n[c].setTexture("u_sourceTex",u.fastblur[1].texture):n[c].setTexture("u_sourceTex",u.fastblur[0].texture),n[c].setFloat("u_radius",i.data.radius*(1+.1*(Math.floor(.5*c)-.5*t.iterations)));n[0].setTexture("u_sourceTex",s.texture),0===(null===(a=i.data)||void 0===a?void 0:a.radius)&&n[n.length-1].setTexture("u_sourceTex",s.texture)}},t.sampleRate=2,t.iterations=6,t}(ei);Jo("fastblur",ai,{radius:{type:"number",defaultValue:5}});var si=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},e(t,r)};return function(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Jo("bloom",function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.inputTypes={sourceTex:"RenderTarget"},t}return si(t,e),t.prototype.onGetPasses=function(e,r){var n=this.getEffectByName("post-process-bloom"),o=this.getEffectByName(Ko),i=(this.getEffectByName(Zo),this.getEffectByName("post-process-blend")),a=[],s=this.scene._requestTmpObj("pp-rts");if(!s.bloom){s.bloom=[];for(var u=0;u<3;u++)s.bloom.push(this.scene.createRenderTexture({width:2===u?e.scene.width:e.scene.width/t.sampleRate,height:2===u?e.scene.height:e.scene.height/t.sampleRate,isHDR:r.hdr}))}for(a.push({effect:n,renderTarget:s.bloom[0],lightMode:"Prefilter"}),u=0;u<t.iterations;u++)a.push({effect:o,renderTarget:s.bloom[1],lightMode:"Horizontal"}),a.push({effect:o,renderTarget:s.bloom[0],lightMode:"Vertical"});return a.push({effect:i,renderTarget:s.bloom[2],lightMode:"Default"}),a},t.prototype.onFillData=function(t,r,n,o){e.prototype.onFillData.call(this,t,r,n,o);var i=this.getInput("sourceTex");if(i){var a=this.scene._requestTmpObj("pp-rts");r[0].setTexture("u_sourceTex",i.texture);for(var s=1;s<r.length-1;s++)s%2==0?r[s].setTexture("u_sourceTex",a.bloom[1].texture):r[s].setTexture("u_sourceTex",a.bloom[0].texture);for(r[r.length-1].setTexture("u_bottomTex",i.texture),r[r.length-1].setTexture("u_upperTex",a.bloom[1].texture),s=0;s<r.length-1;s++)r[s].setFloat("u_radius",o.data.radius),r[s].setFloat("u_threshold",o.data.threshold),r[s].setFloat("u_softThreshold",o.data.softThreshold),r[s].setFloat("u_intensity",o.data.intensity)}},t.sampleRate=4,t.iterations=4,t}(ei),{threshold:{type:"number",defaultValue:.5},softThreshold:{type:"number",defaultValue:0},radius:{type:"number",defaultValue:20},intensity:{type:"number",defaultValue:2}});var ui=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},e(t,r)};return function(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Jo("fxaa",function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.inputTypes={sourceTex:"RenderTarget"},t}return ui(t,e),t.prototype.onGetPasses=function(e,t){var r=this.scene._requestTmpObj("pp-rts");return r.fxaa||(r.fxaa=this.scene.createRenderTexture({width:e.scene.width,height:e.scene.height,isHDR:t.hdr})),[{effect:this.getEffectByName("post-process-fxaa"),renderTarget:r.fxaa,lightMode:"PostProcess"}]},t}(ei),{});var ci=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},e(t,r)};return function(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Jo("tone",function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.inputTypes={sourceTex:"RenderTarget"},t}return ci(t,e),t.prototype.onGetPasses=function(e,t){var r=this.scene._requestTmpObj("pp-rts");return r.tone||(r.tone=this.scene.createRenderTexture({width:e.scene.width,height:e.scene.height,isHDR:t.hdr})),[{effect:this.getEffectByName("post-process-tone"),renderTarget:r.tone,lightMode:"PostProcess"}]},t}(ei),{exposure:{type:"number",defaultValue:1}});var li=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},e(t,r)};return function(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Jo("vignette",function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.inputTypes={sourceTex:"RenderTarget"},t}return li(t,e),t.prototype.onGetPasses=function(e,t){var r=this.scene._requestTmpObj("pp-rts");return r.vignette||(r.vignette=this.scene.createRenderTexture({width:e.scene.width,height:e.scene.height,isHDR:t.hdr})),[{effect:this.getEffectByName("post-process-vignette"),renderTarget:r.vignette,lightMode:"PostProcess"}]},t.prototype.onFillData=function(t,r,n,o){e.prototype.onFillData.call(this,t,r,n,o);var i=o.data,a=r[0].uniforms;a.setUniform("u_center",i.center),a.setUniform("u_color",i.color),a.setUniform("u_intensity",[i.intensity]),a.setUniform("u_smoothness",[i.smoothness]),a.setUniform("u_roundness",[i.roundness]),a.setUniform("u_rounded",[i.rounded?1:0])},t}(ei),{color:{type:"number-array",defaultValue:[0,0,0,1]},center:{type:"number",defaultValue:[.5,.5]},intensity:{type:"number",defaultValue:1},smoothness:{type:"number",defaultValue:1},roundness:{type:"number",defaultValue:1},rounded:{type:"number",defaultValue:0}});const fi=function(){function e(e,t){var r=this;this._name=e,this._options=t,this._isActive=!1,this._isDirty=!1,this._unusedIds=[],this._digraph=[],this._sorted=[],this._handleCamerasChange=function(e){r.onCamerasChange(e.cameras,e.changedCameras)}}return Object.defineProperty(e.prototype,"name",{get:function(){return this._name},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"scene",{get:function(){return this._scene},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"context",{get:function(){return this.scene.render},enumerable:!1,configurable:!0}),e.prototype.createNode=function(e,t,r){var n,o=0;return this._unusedIds.length>0?(n=new t(this,o=this._unusedIds.pop(),e,r),this._digraph[o]={node:n,ins:0,dist:[]}):(n=new t(this,o=this._digraph.length,e,r),this._digraph.push({node:n,ins:0,dist:[]})),this._isDirty=!0,n},e.prototype.destroyNode=function(e){var t=this,r=e.id,n=this._digraph[r];n&&(n.ins=0,n.dist.forEach((function(e){return t.disconnect(n.node,t._digraph[e].node)})),this._digraph[r]=void 0,this._unusedIds.push(r),this._isDirty=!0)},e.prototype.connect=function(e,t,r){var n=this._digraph[e.id],o=this._digraph[t.id];n&&o||Ee.throw(new Error("From or Out is not in this graph!")),r&&t._addInput(r,e),o.ins+=1,n.dist.push(t.id),this._isDirty=!0},e.prototype.disconnect=function(e,t){var r=this._digraph[e.id],n=this._digraph[t.id];r&&n||Ee.throw(new Error("From or Out is not in this graph!"));var o=r.dist.indexOf(t.id);o<0||(t._removeInput(e),r.dist.splice(o,1),n.ins-=1,this._isDirty=!0)},e.prototype._active=function(e){this._isActive||(this._scene=e,e.render.camerasChangeEvent.add(this._handleCamerasChange),this.onActive(e.render,this._options),this._isActive=!0)},e.prototype._disable=function(){this._isActive&&(this._scene.render.camerasChangeEvent.remove(this._handleCamerasChange),this.onDisable(this._scene.render,this._options),this._clear(),this._isActive=!1)},e.prototype._execute=function(){this._isDirty&&this._compile();var e=this.scene.render;this.onExecuteBegin(e,this._options),this._sorted.forEach((function(t){return t._execute(e)})),this.onExecuteDone(e,this._options)},e.prototype._clear=function(e){var t=this;this._unusedIds.length=0,this._digraph=this._digraph.map((function(r){if(!r)return r;var n=r.node;if(e&&e(n))return n.reset(),r.dist.length=0,r.ins=0,r;t._unusedIds.push(n.id),n._disable(t._scene.render)})),this._isDirty=!0,this._sorted.length=0},e.prototype.onActive=function(e,t){},e.prototype.onCamerasChange=function(e,t){},e.prototype.onExecuteBegin=function(e,t){},e.prototype.onExecuteDone=function(e,t){},e.prototype.onDisable=function(e,t){},e.prototype._compile=function(e){var t=this,r=this._digraph.map((function(e){return e?e.ins:-1}));for(this._sorted=[];;){for(var n=!1,o=function(e){var o=i._digraph[e],a=r[e];return!o||a<0?"continue":0===a?(o.dist.forEach((function(e,n){t._digraph[e]||(o.dist.splice(n,1),delete o.node._outputs[e]),r[e]-=1})),r[e]=-1,i._sorted.push(o.node),n=!0,"break"):void 0},i=this,a=0;a<this._digraph.length&&"break"!==o(a);a+=1);if(!n)break}for(a=0;a<this._digraph.length;a+=1)if(-1!==r[a]){var s=this._digraph[a].node;Ee.throw(new Error("RenderGraph "+this.name+" has Cycle! Node "+s.name+"("+s.id+"))"))}this._isDirty=!1,e&&e(this._sorted)},e.prototype.showDebugInfo=function(e){var t="Compiled: "+!this._isDirty+"\n";return this._sorted&&(t+=this._sorted.map((function(e){return e.name+"("+e.id+")"})).join(" -> ")),t+="\n",this._sorted.filter((function(e){return e instanceof Vo})).forEach((function(e){t+="\n"+e.name+"：\n "+e.showDebugInfo()})),e&&e(this._digraph,this._sorted),t},e}();var pi=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},e(t,r)};return function(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),hi=(new Tt,new Float32Array(1)),di=new Float32Array(3),_i=(new Float32Array(4),function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return pi(t,e),t.prototype.onActive=function(e,t){var r=this.scene.assets,n=he(this.scene);this._globalUniforms=this._globalUniforms||{fbUniforms:new n.UniformBlock(r.getAsset("uniform-desc","global-forward-base")),uiUniforms:new n.UniformBlock(r.getAsset("uniform-desc","global-forward-base")),scUniforms:new n.UniformBlock(r.getAsset("uniform-desc","global-shadow-caster"))},this._rebuildRG(t)},t.prototype._rebuildRG=function(e){this._clear();var t=e.camera;this._buildNodesForCamera(t,e)},t.prototype._buildNodesForCamera=function(e,t){var r,n,o=this;n=e.postProcess.length?this.createNode("render-target",Fo,{createRenderTarget:function(){return o._createPostProcessRT(e)}}):this.createNode("render-target",Fo,{createRenderTarget:function(){return o._createRT(e)}});var i=this.createNode("camera-"+e.el.id,Io,{camera:e}),a=this.createNode("fb-cull",Lo,{lightMode:"ForwardBase"}),s=this.createNode("fb-lights",Go,{globalUniforms:this._globalUniforms.fbUniforms}),u=this.createNode("fb-clear",ko,{}),c=this.createNode("fb-render",Uo,{lightMode:"ForwardBase",createUniformBlocks:function(){return[o._globalUniforms.fbUniforms]},inputTypes:{shadowMap:"RenderTarget"},uniformsMap:{u_shadowMap:{inputKey:"shadowMap",name:"color"}}});if("skybox"===e.background){var l=this.createNode("skybox",Xo,{}),f=this.createNode("skybox-render",Uo,{lightMode:"Skybox",createUniformBlocks:function(){return[o._globalUniforms.fbUniforms]}});this.connect(i,l,"camera"),this.connect(i,f,"camera"),this.connect(l,f,"meshList"),this.connect(n,f,"renderTarget"),this.connect(f,c)}else if("ar"===e.background){var p=this.createNode("ar",qo,{}),h=this.createNode("ar-render",Uo,{lightMode:"Skybox",createUniformBlocks:function(){return[o._globalUniforms.fbUniforms]}});this.connect(i,p,"camera"),this.connect(i,h,"camera"),this.connect(p,h,"meshList"),this.connect(n,h,"renderTarget"),this.connect(h,c)}var d,_=this.context.lights._getMainLight(e);if(null==_?void 0:_.castShadow){var y=this.createNode("sc-render-target",Fo,{createRenderTarget:function(){return o._createRT(e,"ShadowCaster")}}),v=this.createNode("shadow-caster",Bo,{lightMode:"ShadowCaster",createUniformBlocks:function(){return[o._globalUniforms.scUniforms]}});this.connect(i,v,"camera"),this.connect(y,v,"renderTarget"),this.connect(a,v,"meshList"),this.connect(v,c,"shadowMap")}if(this.connect(i,a,"camera"),this.connect(i,c,"camera"),this.connect(n,u,"renderTarget"),this.connect(i,u,"camera"),this.connect(n,c,"renderTarget"),this.connect(u,c),this.connect(i,s,"camera"),this.connect(s,c),this.connect(a,c,"meshList"),null===(r=e.postProcess)||void 0===r?void 0:r.length){var m=n,g=e.hdr;e.postProcess.forEach((function(e,t){var r,n=null===(r=$o(e.type))||void 0===r?void 0:r.clz;if(n){var i=o.createNode("post-process-"+e.type,n,{hdr:g,data:e.data});o.connect(m,i,"sourceTex"),0===t&&o.connect(c,i),m=i}})),d=this.createNode("final-blit",ri,{final:!0,data:{dstTex:this._createRT(e)}}),this.connect(m,d,"sourceTex")}},t.prototype._createRT=function(e,t){void 0===t&&(t="ForwardBase");var r=null;return r=e.renderTarget?e.renderTarget:{renderPass:he(this.scene).RenderPass.SCREEN_RENDER_PASS,width:0,height:0},"ShadowCaster"===t&&(r=e.el.scene.createRenderTexture({width:2048,height:2048})),r},t.prototype.onExecuteBegin=function(e,t){var r,n,o=e.env,i=this._globalUniforms.fbUniforms,a={WX_PP_ACTIVE:!!(null===(r=this._options.camera.postProcess)||void 0===r?void 0:r.length)};hi[0]=this.scene.timestamp/1e3,i.setUniform("u_gameTime",hi),o&&(a.WX_USE_IBL_DIFFUSE=o.hasDiffuse,o.hasDiffuse&&(i.setUniform("u_diffuseSH",o.diffuseSH),hi[0]=o.diffuseExp,i.setUniform("u_diffuseExp",hi)),a.WX_USE_IBL_SPECULAR=o.hasSpecular,o.hasSpecular&&(a.WX_USE_SPECULAR_RGBD=o.specularRGBD,a.WX_USE_SPECULAR_MIPMAPS=o.specularMipmaps,i.setUniform("u_specularEnvMapMipCount",o.specularMipmapCount),i.setUniform("u_specularEnvMap",o.specularMap),hi[0]=o.specularExp,i.setUniform("u_specularExp",hi)),hi[0]=o.rotation,i.setUniform("u_envRotation",hi)),di[0]=e.shadowColor[0],di[1]=e.shadowColor[1],di[2]=e.shadowColor[2],i.setUniform("u_shadowColor",di),null===(n=this._globalUniforms.uiUniforms)||void 0===n||n.copy(i),e.changeMacros(a)},t.prototype._createPostProcessRT=function(e){var t=e.renderTarget||this.scene,r=t.width,n=t.height;return this.scene.createRenderTexture({width:r,height:n,isHDR:e.hdr})},t}(fi));const yi=_i;var vi=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},e(t,r)};return function(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();const mi=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._shadowFallbackRegistered=!1,t._subGraphs={},t._mainLights={},t}return vi(t,e),t.prototype.onActive=function(e){this._rebuildRG(e.cameras,e.changedCameras)},t.prototype.onCamerasChange=function(e,t){this._rebuildRG(e,t)},t.prototype._rebuildRG=function(e,t){var r,n=this,o={};this._clear((function(e){var r=n._subGraphs[e.id];return r&&t.indexOf(r)<0?(o[r.id]=e,!0):(delete n._subGraphs[e.id],!1)})),e.forEach((function(e){var t=o[e.id];t||(t=n.createNode("subGraph-"+e.el._elId,Vo,{RGClass:yi,options:{camera:e}}),n._subGraphs[t.id]=e),r&&n.connect(r,t),r=t}))},t.prototype.onExecuteBegin=function(e){for(var t in this._subGraphs){var r=this._subGraphs[t],n=e.lights._getMainLight(r),o=this._mainLights[r.el._elId];n===o&&(null==n?void 0:n.castShadow)===(null==o?void 0:o.castShadow)||(e._modifyCameraImportantProps(r),this._mainLights[r.el._elId]=n)}if(!this._shadowFallbackRegistered){var i=this.scene.assets.getAsset("effect","shadow-caster");i&&(he(this.scene).renderEnv.registerFallbackEffect("ShadowCaster",i.kanataEffect),this._shadowFallbackRegistered=!0)}},t.prototype.onExecuteDone=function(e){},t.prototype.onDisable=function(e){this._shadowFallbackRegistered&&he(this.scene).renderEnv.registerFallbackEffect("ShadowCaster",void 0)},t}(fi);var gi=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},e(t,r)};return function(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),bi=function(){function e(e,t){this._isDirty=!1,this._raw=e||new Float32Array(4),this._offset=t||0,this._isDirty=!1}return Object.defineProperty(e.prototype,"x",{get:function(){return this._raw[this._offset]},set:function(e){this._isDirty=!0,this._raw[this._offset]=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"y",{get:function(){return this._raw[this._offset+1]},set:function(e){this._isDirty=!0,this._raw[this._offset+1]=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"z",{get:function(){return this._raw[this._offset+2]},set:function(e){this._isDirty=!0,this._raw[this._offset+2]=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"w",{get:function(){return this._raw[this._offset+3]},set:function(e){this._isDirty=!0,this._raw[this._offset+3]=e},enumerable:!1,configurable:!0}),e.fromEulerAngles=function(t,r){return r=r||new e,ot.fromEulerAngles(t._raw,t._offset,Oi._raw,Oi._offset),r.set(Oi),r},e.createFromMatrix4=function(t,r){return r=r||new e,ot.fromMatrix4(t._raw,t._offset,Oi._raw,Oi._offset),r.set(Oi),r},e.createFromAxisAngle=function(t,r,n){return n=n||new e,Sr.createRotationAxis(t,r,Si),e.createFromMatrix4(Si,n),n},e.lookRotation=function(t,r,n){return n=n||new e,Sr.lookAt(Tt.ZERO,t,r,Si),e.createFromMatrix4(Si,n),n},e.createFromNumber=function(t,r,n,o){var i=new Float32Array(4);return i[0]=t,i[1]=r,i[2]=n,i[3]=o,new e(i)},e.createFromArray=function(t){return 4!==t.length&&Ee.throw(new Error("create Quaternion error:array length is wrong")),new e(new Float32Array(t))},e.createFromTypedArray=function(t,r){return void 0===r&&(r=0),t.length-r<4&&Ee.throw(new Error("create Quaternion error:array length is wrong")),new e(t,r)},e.createFromUnitVectors=function(t,r){return(new e).setFromUnitVectors(t,r)},e.prototype.set=function(e){return this._isDirty=!0,nt(e._raw,e._offset,this._raw,this._offset),this},e.prototype.setValue=function(e,t,r,n){this._isDirty=!0;var o=this._raw;return o[this._offset+0]=e,o[this._offset+1]=t,o[this._offset+2]=r,o[this._offset+3]=n,this},e.prototype.slerp=function(t,r,n){return n=n||new e,ot.slerp(this._raw,this._offset,t._raw,t._offset,r,Oi._raw,Oi._offset),n.set(Oi),n},e.prototype.invert=function(t){return t=t||new e,ot.invert(this._raw,this._offset,Oi._raw,Oi._offset),t.set(Oi),t},e.prototype.add=function(t,r){return r=r||new e,tt(this._raw,this._offset,t._raw,t._offset,Oi._raw,Oi._offset),r.set(Oi),r},e.prototype.sub=function(t,r){return r=r||new e,rt(this._raw,this._offset,t._raw,t._offset,Oi._raw,Oi._offset),r.set(Oi),r},e.prototype.multiply=function(t,r){return r=r||new e,ot.multiply(this._raw,this._offset,t._raw,t._offset,Oi._raw,Oi._offset),r.set(Oi),r},e.prototype.premultiply=function(e){return this.multiply(e,this)},e.prototype.dot=function(e){return 5,r=(t=this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w).toString().includes("e")?+t:+t+"e5",Math.round(r)/Math.pow(10,5);var t,r},e.prototype.length=function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)},e.prototype.normalize=function(){this._isDirty=!0;var e=this.length();return 0===e?(this._raw[this._offset]=0,this._raw[this._offset+1]=0,this._raw[this._offset+2]=0,this._raw[this._offset+3]=1):(e=1/e,this._raw[this._offset]=this._raw[this._offset]*e,this._raw[this._offset+1]=this._raw[this._offset+1]*e,this._raw[this._offset+2]=this._raw[this._offset+2]*e,this._raw[this._offset+3]=this._raw[this._offset+3]*e),this},e.prototype.setFromUnitVectors=function(e,t){var r=e.dot(t)+1;return r<1e-6?(r=0,Math.abs(e.x)>Math.abs(e.z)?(this._raw[this._offset]=-e.y,this._raw[this._offset+1]=e.x,this._raw[this._offset+2]=0,this._raw[this._offset+3]=r):(this._raw[this._offset]=0,this._raw[this._offset+1]=-e.z,this._raw[this._offset+2]=e.y,this._raw[this._offset+3]=r)):(this._raw[this._offset]=e.y*t.z-e.z*t.y,this._raw[this._offset+1]=e.z*t.x-e.x*t.z,this._raw[this._offset+2]=e.x*t.y-e.y*t.x,this._raw[this._offset+3]=r),this.normalize()},e.prototype.setFromYawRollPitch=function(e,t,r){ot.fromYawRollPitch(e,r,t,this._raw,this._offset),this._isDirty=!0},e.prototype.setFromEulerAngles=function(e){this.setFromYawRollPitch(e.x,e.y,e.z)},e.prototype.angleTo=function(e){var t=Math.max(-1,Math.min(1,this.dot(e)));return 2*Math.acos(Math.abs(t))},e.prototype.rotateTowards=function(e,t){var r=this.angleTo(e);if(0===r)return this;var n=Math.min(1,t/r);return this.slerp(e,n)},e.prototype.clone=function(){var t=new e;return nt(this._raw,this._offset,t._raw,t._offset),t},e.prototype.isDefault=function(){return et(this._raw,this._offset,Ti._raw,Ti._offset)},e.prototype.toEulerAngles=function(e){return e=e||new Tt,ot.toEulerAngles(this._raw,this._offset,Ai._raw,Ai._offset),e.set(Ai),e},e.prototype.equal=function(e){return et(this._raw,this._offset,e._raw,e._offset)},e.fromPhysics=function(t){return e.createFromNumber(t.x,t.y,t.z,t.w)},e.prototype.fromPhysics=function(e){return this._isDirty=!0,this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w,this},e.clearPhysicsPool=function(){this.physicsPool&&this.physicsPool.clear()},e.prototype.toPhysics=function(){return e.Phys3D?(e.physicsPool||(e.physicsPool=new xt(e.Phys3D)),e.physicsPool.from(this)):(Ee.error("quaternion convert error: no physics engine found."),null)},e.prototype.setArray=function(e,t){if(this._isDirty=!0,t)for(var r=0;r<4;r+=1)this._raw[this._offset+r]=e[t+r];else this._raw.set(e,this._offset);return this},e.prototype.transformVector3=function(e){var t=2*this.w,r=Tt.createFromNumber(this.x,this.y,this.z);return r.cross(e).scale(t).add(e.scale(t*this.w-1)).add(r.scale(2*r.dot(e)))},e.prototype.toAxisUnit=function(){return this.transformVector3(Tt.ONE)},e}();const wi=bi;var xi="try to set value to read only quaternion",Ei=function(e){function t(t,r){return e.call(this,t,r)||this}return gi(t,e),Object.defineProperty(t.prototype,"x",{get:function(){return this._raw[this._offset]},set:function(e){Ee.error(xi)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"y",{get:function(){return this._raw[this._offset+1]},set:function(e){Ee.error(xi)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"z",{get:function(){return this._raw[this._offset+2]},set:function(e){Ee.error(xi)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"w",{get:function(){return this._raw[this._offset+3]},set:function(e){Ee.error(xi)},enumerable:!1,configurable:!0}),t.prototype.set=function(){return Ee.error(xi),this},t.prototype.setValue=function(){return Ee.error(xi),this},t}(bi);bi.DEFAULT=new Ei(new Float32Array([0,0,0,1]));var Si=new Sr,Ti=bi.DEFAULT.clone(),Oi=new bi,Ai=new Tt,Ci=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},e(t,r)};return function(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Mi=new Sr,Pi={nodeId:{type:"string"},position:{type:"number-array",defaultValue:[0,0,0]},rotation:{type:"number-array",defaultValue:[0,0,0]},scale:{type:"number-array",defaultValue:[1,1,1]},visible:{type:"boolean",defaultValue:!0},layer:{type:"number",defaultValue:0}},Ri=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.schema=Pi,t.priority=100,t._isWorldDirty=!0,t}return Ci(t,e),Object.defineProperty(t.prototype,"node",{get:function(){return this._node},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"worldMatrix",{get:function(){return this._calcWorld(),this._worldMat},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"worldPosition",{get:function(){return this._calcWorld(),this._worldPos},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"worldQuaternion",{get:function(){return this._calcWorld(),this._worldQuaternion},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"worldScale",{get:function(){return this._calcWorld(),this._worldScale},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"worldForward",{get:function(){return this._calcWorld(),this._worldForward},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"worldUp",{get:function(){return this._calcWorld(),this._worldUp},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"worldRight",{get:function(){return this._calcWorld(),this._worldRight},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"position",{get:function(){return this._position},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"rotation",{get:function(){return this._rotation},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"quaternion",{get:function(){return this._quat},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"scale",{get:function(){return this._scale},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"visible",{get:function(){return this._visible},set:function(e){this._visible!==e&&(this._version+=1),this._visible=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"layer",{get:function(){return this._node.getLayer()},set:function(e){this._node.getLayer()!==e&&(this._version+=1),this._node.setLayer(e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_finalMask",{get:function(){return this._node.getMixedLayerMask()},enumerable:!1,configurable:!0}),t.prototype.setLocalMatrix=function(e){var t=this._position,r=this._quat;e.decomposeTransRotMatScale(t,Mi,this._scale),ot.fromMatrix4(Mi._raw,0,r._raw,r._offset),ot.toEulerAngles(r._raw,r._offset,this._rotation._raw,0),t._isDirty=!0},t.prototype.onAdd=function(e,r){if(!this._node){var n=this._node=new(he(this.scene).Entity3D);n.setUsingEuler(!1),this._worldMat=new Sr(n.float32View,n.worldMatrixOffset),this._position=new Tt(n.float32View,n.localPositionOffset),this._quat=new wi(n.float32View,n.localQuaternionOffset),this._scale=new Tt(n.float32View,n.localScaleOffset),this._rotation=new Tt,this._worldPos=new Tt,this._worldScale=new Tt,this._worldRotMat=new Sr,this._worldForward=new Tt,this._worldRight=new Tt(this._worldRotMat._raw,0),this._worldUp=new Tt(this._worldRotMat._raw,4)}var o=e.getComponent(t);o?o.node.addChild(this._node):this.scene.rootNode.addChild(this._node),this._processData(r),this._node.setLocalMatrixDirty()},t.prototype.onUpdate=function(e,t){this._processData(e,t)},t.prototype.onRemove=function(e,t){t.nodeId&&this.scene._removeNodeById(t.nodeId),this._node.removeFromParent()},t.prototype.onRelease=function(e){this._node.destroy(),this._node=void 0},t.prototype._processData=function(e,t){var r=e.nodeId,n=e.position,o=e.rotation,i=e.scale,a=e.visible,s=e.layer;this._visible=a,this.layer=s,r&&r!==(null==t?void 0:t.nodeId)&&(this.scene._addNodeById(r,this),(null==t?void 0:t.nodeId)&&this.scene._removeNodeById(t.nodeId)),n!==(null==t?void 0:t.position)&&this._position.setArray(n),o!==(null==t?void 0:t.rotation)&&(this._rotation.setArray(o.map((function(e){return e*Math.PI/180}))),ot.fromEulerAngles(this._rotation._raw,0,this._quat._raw,this._quat._offset)),i!==(null==t?void 0:t.scale)&&this._scale.setArray(i)},t.prototype._checkDirty=function(e){var t=this,r=t._position,n=t._quat,o=t._scale,i=t._rotation,a=r._isDirty||n._isDirty||o._isDirty||i._isDirty;return n._isDirty?ot.toEulerAngles(n._raw,n._offset,i._raw,0):i._isDirty&&ot.fromEulerAngles(this._rotation._raw,0,this._quat._raw,this._quat._offset),a&&this._node.setLocalMatrixDirty(),r._isDirty=!1,o._isDirty=!1,n._isDirty=!1,i._isDirty=!1,e||a},t.prototype._setDirty=function(){this._isWorldDirty=!0,this._version+=1},t.prototype._calcWorld=function(){this._isWorldDirty&&(he(this.scene).refreshNodesWorldTransform(),it.decomposeTransRotMatScale(this._worldMat._raw,this._worldMat._offset,this._worldPos._raw,0,this._worldRotMat._raw,0,this._worldScale._raw,0),this._worldQuaternion=wi.createFromMatrix4(this._worldRotMat),Je.scale(this._worldRotMat._raw,8,-1,this._worldForward._raw,0),this._isWorldDirty=!1)},t}(oo);const Di=Ri;var Ni,Ii=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},e(t,r)};return function(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();!function(e){e.Ambient="ambient",e.Directional="directional",e.Point="point",e.Spot="spot"}(Ni||(Ni={}));var Li={type:{type:"string",defaultValue:"directional"},color:{type:"color",defaultValue:[1,1,1,1]},range:{type:"number",defaultValue:1},intensity:{type:"number",defaultValue:1},innerConeAngle:{type:"number",defaultValue:0},outerConeAngle:{type:"number",defaultValue:45},castShadow:{type:"boolean",defaultValue:!1},shadowDistance:{type:"number",defaultValue:10},shadowBias:{type:"number",defaultValue:.002}};const Fi=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.schema=Li,t.priority=200,t}return Ii(t,e),Object.defineProperty(t.prototype,"type",{get:function(){return this._currentData.type},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"color",{get:function(){return this._currentData.color},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"intensity",{get:function(){return this._currentData.intensity},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"range",{get:function(){return this._currentData.range},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"innerConeAngle",{get:function(){return this._currentData.innerConeAngle*Math.PI/180},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"outerConeAngle",{get:function(){return this._currentData.outerConeAngle*Math.PI/180},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"castShadow",{get:function(){return this._currentData.castShadow},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"shadowDistance",{get:function(){return this._currentData.shadowDistance},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"shadowBias",{get:function(){return this._currentData.shadowBias},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"lightCamera",{get:function(){return this._lightCamera},enumerable:!1,configurable:!0}),t.prototype._getType=function(){switch(this.type){case Ni.Directional:return 0;case Ni.Point:return 1;case Ni.Spot:return 2;default:return-1}},t.prototype.onAdd=function(e,t){this.scene.render.lights._addLight(this),this._changeLightCamera(t)},t.prototype.onUpdate=function(e,t){this.scene.render.lights._modifyLight(this),this._changeLightCamera(e)},t.prototype.onTick=function(e,t){var r=this.el.getComponent(Di);this._preTrsVersion!==r.version&&(this.scene.render.lights._modifyLight(this),this._preTrsVersion=r.version)},t.prototype.onRemove=function(e,t){this.scene.render.lights._removeLight(this)},t.prototype.onRelease=function(e){},t.prototype._changeLightCamera=function(e){if(e.castShadow&&this.type===Ni.Directional){if(!this._lightCamera){this._lightCamera=new(he(this.scene).LightCameraComponent),this._lightCamera.shadowFilterMode=ue.EShadowFitMode.FitFrustum,this._lightCamera.shadowMode=ue.EShadowMode.OneCascade_PCF,this._lightCamera.setCascadedSplits(1,1,1);var t={colorAction:ue.ELoadAction.CLEAR,depthAction:ue.ELoadAction.CLEAR,stencilAction:ue.ELoadAction.LOAD,clearColor:[1,1,1,1],clearDepth:1,clearStencil:0},r={x:0,y:0,w:1,h:1},n=r;this._lightCamera.view=new(he(this.scene).View)({passAction:t,viewport:r,scissor:n})}this._lightCamera.shadowDistance=e.shadowDistance}else this._lightCamera=void 0},t.prototype._copyLightMatrices=function(e){this._lightCamera.prepareUniforms(e)},t}(oo);var ki=function(){function e(){this._mainInfo={hasAmbient:!1,hasMainDir:!1,ambientColorIns:new Float32Array(4),mainDir:new Float32Array(3),mainColorIns:new Float32Array(4)},this._addInfo={count:0,info:new Float32Array(16),dir:new Float32Array(12),pos:new Float32Array(12),colorIns:new Float32Array(16)},this._lights=[],this._isDirty=!1}return e.prototype._addLight=function(e){this._lights.indexOf(e)<0&&(this._lights.push(e),this._isDirty=!0)},e.prototype._removeLight=function(e){var t=this._lights.indexOf(e);t>=0&&(this._lights.splice(t,1),this._isDirty=!0)},e.prototype._modifyLight=function(e){this._isDirty=!0},e.prototype._getMainLight=function(e){return this._mainDir},e.prototype._getMainLightInfo=function(e){var t;if(!this._isDirty)return this._mainInfo;var r=this._mainInfo;r.hasAmbient=!1,r.hasMainDir=!1,this._mainDir=void 0;for(var n=0,o=0,i=this._lights;o<i.length;o++){var a=i[o];a.el.getComponent(Di).visible&&this._cullLight(e,a)&&(a.type!==Ni.Ambient||r.hasAmbient?a.type!==Ni.Directional||r.hasMainDir||(this._mainDir=a,r.mainDir.set(a.el.getComponent(Di).worldForward.toArray()),null===(t=a.lightCamera)||void 0===t||t.setLightDir(r.mainDir[0],r.mainDir[1],r.mainDir[2]),r.mainColorIns.set(a.color),r.mainColorIns[3]=a.intensity,r.hasMainDir=!0,n+=1):(r.ambientColorIns.set(a.color),r.ambientColorIns[3]=a.intensity,r.hasAmbient=!0,n+=1))}return this._lights.length===n&&(this._isDirty=!1),this._mainInfo},e.prototype._getAddLightsInfo=function(e){if(this._isDirty){for(var t=this._addInfo,r=0,n=0,o=this._lights;n<o.length;n++){var i=o[n];if(r>=4)break;if(i.type!==Ni.Ambient&&i!==this._mainDir&&this._cullLight(e,i)){var a=i.el.getComponent(Di),s=a.worldPosition,u=a.worldForward,c=4*r;t.info[c]=i._getType(),t.info[c+1]=i.range,t.info[c+2]=Math.cos(i.innerConeAngle),t.info[c+3]=Math.cos(i.outerConeAngle),t.colorIns.set(i.color,c),t.colorIns[c+3]=i.intensity,c=3*r,t.dir.set(u.toArray(),c),t.pos.set(s.toArray(),c),r+=1}}t.count=r,this._isDirty=!1}return this._addInfo},e.prototype._cullLight=function(e,t){var r=t.el.getComponent(Di);return!!r.visible&&(e.cullMask&r._finalMask)===r._finalMask},e}();const Ui=ki;var Bi=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},e(t,r)};return function(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),ji={alpha:{type:"boolean",defaultValue:!1},shadowColor:{type:"color",defaultValue:[110/255,122/255,161/255]}},Vi=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.priority=400,t.schema=ji,t._lights=new Ui,t._sortedCameras=[],t._dirtyCameras=[],t._features={},t._camerasChangeEvent=new uo,t}return Bi(t,e),Object.defineProperty(t.prototype,"lights",{get:function(){return this._lights},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"env",{get:function(){return this._env},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"camerasChangeEvent",{get:function(){return this._camerasChangeEvent},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"cameras",{get:function(){return this._sortedCameras},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"changedCameras",{get:function(){return this._dirtyCameras},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"renderGraph",{get:function(){return this._renderGraph},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"shadowColor",{get:function(){return this._currentData.shadowColor},enumerable:!1,configurable:!0}),t.prototype.changeMacros=function(e){he(this.scene).renderEnv.changeMacros(e)},t.prototype.getMacro=function(e){return he(this.scene).renderEnv.getMacro(e)},t.prototype.changeFeatures=function(e){for(var t in e)this._features[t]!==e[t]&&(this._dirtyFeatures=this._dirtyFeatures||{},this._dirtyFeatures[t]=e[t])},t.prototype.getFeature=function(e){return this._features[e]},t.prototype.onAdd=function(e,t){he(this.scene).renderEnv.setInternalInstanceInfo(ue.EMeshRenderType.Static3D,[{uniformKey:"u_world",attributeName:"a_world",type:ue.EUniformType.MAT4},{uniformKey:"u_lightMapScaleOffset",attributeName:"a_lightMapScaleOffset",type:ue.EUniformType.FLOAT4}],["u_lightCountFA","u_lightIndicesFA"])},t.prototype.onTick=function(){var e,t=he(this.scene);if(he(this.scene).refreshNodesWorldTransform(),this._renderGraph||this.useRenderGraph(new mi("internal-forward-base",{})),this._dirtyFeatures){for(var r=0,n=this._sortedCameras;r<n.length;r++){var o=n[r];this._dirtyCameras.indexOf(o)<0||this._checkCameraFeaturesDirty(o)&&this._dirtyCameras.push(o)}Object.assign(this._features,this._dirtyFeatures)}if(this._dirtyCameras.length){for(var i=0,a=this._dirtyCameras;i<a.length;i++)o=a[i],this._fillCameraFeatures(o);this._sortCameras(),this._camerasChangeEvent.notify(this)}this._dirtyCameras.length=0,this._dirtyFeatures=void 0,t.renderEnv.beginFrame(),null===(e=this._renderGraph)||void 0===e||e._execute(),t.renderEnv.endFrame()},t.prototype._checkCameraFeaturesDirty=function(e){for(var t=0,r=e.allowFeatures;t<r.length;t++){var n=r[t];if(void 0!==this._dirtyFeatures[n])return!0}return!1},t.prototype._fillCameraFeatures=function(e){for(var t={},r=0,n=e.allowFeatures;r<n.length;r++){var o=n[r],i=this._features[o];void 0!==i&&(t[o]=i)}e._setFeatures(t)},t.prototype.onRelease=function(e){this._dirtyFeatures=void 0,this._dirtyCameras=void 0,this._sortedCameras=void 0},t.prototype.useRenderGraph=function(e){this._renderGraph&&e._disable(),this._renderGraph=e,e._active(this.scene)},t.prototype.enableInstance=function(){he(this.scene).renderEnv.useInstance=!0},t.prototype.disableInstance=function(){he(this.scene).renderEnv.useInstance=!1},t.prototype._addCamera=function(e){this._sortedCameras.indexOf(e)<0&&(this._sortedCameras.push(e),this._dirtyCameras.push(e))},t.prototype._removeCamera=function(e){this._sortedCameras.indexOf(e)>=0&&(this._sortedCameras.splice(this._sortedCameras.indexOf(e),1),this._dirtyCameras.push(e))},t.prototype._modifyCameraImportantProps=function(e){this._sortedCameras.indexOf(e)>=0&&this._dirtyCameras.push(e)},t.prototype._sortCameras=function(){this._sortedCameras.sort((function(e,t){return e.depth-t.depth}))},t.prototype._setEnv=function(e){this._env=e},t}(oo);const zi=Vi;var Gi=function(){return Gi=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Gi.apply(this,arguments)};function Wi(e,t){if(!e)throw t}function Xi(e,t){return new TextDecoder(t).decode(e)}function Hi(e,t){var r=new Promise((function(r,n){e(Gi(Gi({},t),{success:function(e){r(e)},fail:function(e){n(e)}}))}));return t.success&&(r=r.then(t.success)),t.fail&&(r=r.catch(t.fail)),r}var qi=function(){function e(t,r){void 0===r&&(r=0),this.head=0,this.buffer=t,this._size=t.byteLength,this.floatView=new Float32Array(t,r,Math.floor(this._size/e.TypeSize[e.Type.Float])),this.uint32View=new Uint32Array(t,r,Math.floor(this._size/e.TypeSize[e.Type.UInt32])),this.uint16View=new Uint16Array(t,r,Math.floor(this._size/e.TypeSize[e.Type.UInt16]))}return Object.defineProperty(e.prototype,"size",{get:function(){return this._size},enumerable:!1,configurable:!0}),e.prototype.testSufficient=function(e,t){var r=(t-this.head%t)%t;return this.head+r+e>this._size?-1:r},e.prototype.testSufficientByType=function(t){return this.testSufficient(e.TypeSize[t],e.TypeAlignment[t])},e.prototype.read=function(t){var r=this.testSufficientByType(t);if(r<0)throw"[StreamReader]read buffer out of bound.";this.head+=r;var n=this[e.Type[t].toLowerCase()+"View"][this.head/e.TypeAlignment[t]];return this.head+=e.TypeSize[t],n},e.prototype.write=function(t,r){var n=this.testSufficientByType(t);if(n<0)throw"[StreamReader]write buffer out of bound.";this.head+=n,this[e.Type[t].toLowerCase()+"View"][this.head/e.TypeAlignment[t]]=r,this.head+=e.TypeSize[t]},e.prototype.reserve=function(t){var r=this.testSufficientByType(t);if(r<0)throw"[StreamReader]write buffer out of bound.";this.head+=r;var n=this[e.Type[t].toLowerCase()+"View"],o=this.head/e.TypeAlignment[t];return this.head+=e.TypeSize[t],{write:function(e){n[o]=e}}},e.prototype.readChunk=function(e){if(this.head+e>this._size)throw"[StreamReader]read chunk out of bound.";var t=this.buffer.slice(this.head,this.head+e);return this.head+=e,t},e.prototype.align=function(e){var t=this.testSufficient(0,e);if(t<0)throw"[StreamReader]align buffer out of bound.";this.head+=t},e.prototype.end=function(){return this.head===this._size},e.prototype.pos=function(){return this.head},e}();!function(e){var t,r,n;!function(e){e[e.Float=0]="Float",e[e.UInt32=1]="UInt32",e[e.UInt16=2]="UInt16"}(n=e.Type||(e.Type={})),e.TypeAlignment=((t={})[n.Float]=4,t[n.UInt32]=4,t[n.UInt16]=2,t),e.TypeSize=((r={})[n.Float]=4,r[n.UInt32]=4,r[n.UInt16]=2,r)}(qi||(qi={}));var Yi=/^file\:\/\/\//,Zi=/^wxfile\:\/\//,Ki=/^http(s)?\:\/\//,Qi=/^cloud\:\/\//,$i=/^data\:/;function Ji(e){return Yi.test(e)||Zi.test(e)||!1}function ea(e){return Ki.test(e)}function ta(e){return Qi.test(e)}function ra(e){return $i.test(e)}var na=/^cloud:\/\/([a-z0-9-]+)\./;function oa(e){return!function(e){return Ji(e)||ea(e)||ta(e)}(e)}function ia(e){return/^https:\/\/mmbizwxaminiprogram-1258344707.cos.ap-guangzhou.myqcloud.com\/xr-frame\//.test(e)}var aa=function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function a(e){try{u(n.next(e))}catch(e){i(e)}}function s(e){try{u(n.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}u((n=n.apply(e,t||[])).next())}))},sa=function(e,t){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},ua=function(){function e(e){this.cacheMap={},this.getStorage=e.getStorage,this.setStorage=e.setStorage,this.cacheStorageKey=e.cacheStorageKey}return e.prototype.validateCacheMap=function(e){if("object"!=typeof e)return!1;for(var t=0,r=Object.keys(e);t<r.length;t++){var n=r[t],o=e[n];o.localPath?o.expires&&Date.now()>o.expires&&delete e[n]:delete e[n]}return!0},e.prototype.initCache=function(){return aa(this,void 0,void 0,(function(){var e;return sa(this,(function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,Hi(this.getStorage(),{key:this.cacheStorageKey})];case 1:return e=t.sent().data,this.validateCacheMap(e)&&(this.cacheMap=e),[3,3];case 2:return t.sent(),[3,3];case 3:return[2]}}))}))},e.prototype.saveCacheMap=function(){return aa(this,void 0,void 0,(function(){return sa(this,(function(e){return[2,Hi(this.setStorage(),{key:this.cacheStorageKey,data:this.cacheMap}).catch((function(e){Ee.warn("[Cache]saveCacheMap faild: ",e)}))]}))}))},e.prototype.updateCacheMap=function(e,t){t?this.cacheMap[e]=t:delete this.cacheMap[e],this.saveCacheMap()},e.prototype.clearCache=function(){this.cacheMap={},this.saveCacheMap()},e}(),ca=new ua({getStorage:function(){return fe.getStorage},setStorage:function(){return fe.setStorage},cacheStorageKey:"wxfTempDirCache"});function la(e){return ia(e),ca}function fa(e,t){var r={localPath:null!=t?t:""};return e["Last-Modified"]&&(r.lastModified=new Date(e["Last-Modified"]).getTime()),e.ETag&&(r.eTag=e.ETag),e.Expires&&(r.expires=new Date(e.Expires).getTime()),r}function pa(e){var t={};return e.lastModified&&(t["If-Modified-Since"]=new Date(e.lastModified).toUTCString()),e.eTag&&(t["If-None-Match"]=e.eTag),t}var ha=function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function a(e){try{u(n.next(e))}catch(e){i(e)}}function s(e){try{u(n.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}u((n=n.apply(e,t||[])).next())}))},da=function(e,t){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}};function _a(e,t){return ha(this,void 0,Promise,(function(){var r,n,o,i,a,s;return da(this,(function(u){switch(u.label){case 0:return"binary"===t&&Ji(e)?[4,Hi(fe.getFileSystemManager().open,{filePath:e})]:[3,8];case 1:return r=u.sent().fd,[4,Hi(fe.getFileSystemManager().fstat,{fd:r})];case 2:if(!((n=u.sent().stats.size)>0))return[3,6];o=new ArrayBuffer(n),i=0,u.label=3;case 3:return n>0?(a=Math.min(n,10485760),[4,Hi(fe.getFileSystemManager().read,{fd:r,arrayBuffer:o,offset:i,length:a})]):[3,5];case 4:return u.sent(),i+=a,n-=a,[3,3];case 5:return fe.getFileSystemManager().close({fd:r}),[2,o];case 6:throw"read file error: file size is 0.";case 7:return[3,10];case 8:return[4,Hi(fe.getFileSystemManager().readFile,{filePath:e,encoding:"binary"===t?void 0:"utf-8"})];case 9:return s=u.sent().data,"json"===t?[2,JSON.parse(s)]:[2,s];case 10:return[2]}}))}))}function ya(e){return ha(this,void 0,Promise,(function(){var t,r;return da(this,(function(n){switch(n.label){case 0:if(t=la(e),!(r=t.cacheMap[e]))return[3,4];n.label=1;case 1:return n.trys.push([1,3,,4]),[4,Hi(fe.getFileSystemManager().access,{path:r.localPath})];case 2:return n.sent(),[2,!0];case 3:return n.sent(),t.updateCacheMap(e),[2,!1];case 4:return[2,!1]}}))}))}function va(e,t){return ha(this,void 0,Promise,(function(){var r,n,o,i,a,s,u,c,l;return da(this,(function(f){switch(f.label){case 0:return r=la(e),[4,ya(e)];case 1:return n=f.sent(),o="",n?[3,3]:[4,Hi(fe.downloadFile,{url:e,enableHttp2:!0,header:{"Cache-Control":"max-age=604800"},__skipDomainCheck__:ia(e)})];case 2:return i=f.sent(),u=i.tempFilePath,c=i.header,l=fa(c,u),r.updateCacheMap(e,l),o=u,[3,7];case 3:a=r.cacheMap[e],f.label=4;case 4:return f.trys.push([4,6,,7]),[4,Hi(fe.downloadFile,{url:e,enableHttp2:!0,header:pa(a),__skipDomainCheck__:ia(e)})];case 5:return s=f.sent(),u=s.tempFilePath,c=s.header,304===s.statusCode?o=a.localPath:(l=fa(c,u),r.updateCacheMap(e,l),o=u),[3,7];case 6:return"downloadFile:fail file data is empty"===f.sent().errMsg&&(o=a.localPath),[3,7];case 7:return[4,_a(o,t)];case 8:return[2,[f.sent(),o]]}}))}))}var ma="";function ga(e,t){return ha(this,void 0,Promise,(function(){var r,n,o,i,a;return da(this,(function(s){switch(s.label){case 0:return r=la(e),[4,ya(e)];case 1:if(n=s.sent(),o="",n)return[3,3];if("",u=e,c=na.exec(u),(i=c&&c.length>1?c[1]:"")&&i!==ma){ma=i;try{fe.cloud.init({env:i})}catch(e){throw"初始化微信云环境"+i+"失败: "+e}}else if(!i)throw"获取微信云环境ID失败: "+e;return[4,Hi(fe.cloud.downloadFile,{fileID:e})];case 2:return a=s.sent().tempFilePath,r.updateCacheMap(e,a),o=a,[3,4];case 3:o=r.cacheMap[e].localPath,s.label=4;case 4:return[4,_a(o,t)];case 5:return[2,[s.sent(),o]]}var u,c}))}))}function ba(e,t){var r=e.split(","),n=(r[0],r[1]);if(n){var o=void 0;try{o=Object.values(pe)[0].decodeBase64(n)}catch(e){o=fe.base64ToArrayBuffer(n)}if("binary"===t)return o;var i=Xi(o,"utf-8");return"utf-8"===t?i:JSON.parse(i)}return"binary"===t?new ArrayBuffer(0):"utf-8"===t?"":{}}function wa(e,t){return r=this,n=void 0,i=function(){var r,n,o,i,a,s,u,c,l,f;return function(e,t){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}}(this,(function(p){switch(p.label){case 0:return void 0!==fe&&void 0!==fe.getFileSystemManager?[3,7]:[4,("undefined"!=typeof __global?__global:window).fetch(e)];case 1:return r=p.sent(),"binary"!==t&&void 0!==t?[3,3]:(u={},[4,r.arrayBuffer()]);case 2:return[2,(u.data=p.sent(),u)];case 3:return"utf-8"!==t?[3,5]:(c={},[4,r.text()]);case 4:return[2,(c.data=p.sent(),c)];case 5:return l={},[4,r.json()];case 6:return[2,(l.data=p.sent(),l)];case 7:return"binary"!==(n=null!=t?t:"binary")&&"utf-8"!==n&&"json"!==n&&(n="json"),ra(e)?[2,{data:ba(e,n)}]:[3,8];case 8:return ea(e)?[4,va(e,n)]:[3,10];case 9:return o=p.sent(),a=o[0],s=o[1],[2,{data:a,filePath:s}];case 10:return ta(e)?[4,ga(e,n)]:[3,12];case 11:return i=p.sent(),a=i[0],s=i[1],[2,{data:a,filePath:s}];case 12:return f={},[4,_a(e,n)];case 13:return[2,(f.data=p.sent(),f.filePath=e,f)]}}))},new((o=Promise)||(o=Promise))((function(e,t){function a(e){try{u(i.next(e))}catch(e){t(e)}}function s(e){try{u(i.throw(e))}catch(e){t(e)}}function u(t){var r;t.done?e(t.value):(r=t.value,r instanceof o?r:new o((function(e){e(r)}))).then(a,s)}u((i=i.apply(r,n||[])).next())}));var r,n,o,i}var xa,Ea,Sa=function(){return Sa=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Sa.apply(this,arguments)},Ta=function(){function e(e,t){var r,n=this;this._scene=e,this.description=t,this._isNoProperties=!1,this._isNoImages=!1,this._effect=void 0,this._uniformMacroTable={},!xa&&(xa={blendOn:!1,blendSrc:ue.EBlendFactor.ZERO,blendSrcAlpha:ue.EBlendFactor.ONE,blendDst:ue.EBlendFactor.ZERO,blendDstAlpha:ue.EBlendFactor.ONE_MINUS_SRC_ALPHA,blendFunc:ue.EBlendEquation.FUNC_ADD,cullOn:!1,cullFace:ue.ECullMode.NONE,depthWrite:!1,depthTestOn:!1,depthTestComp:0,stencilWriteMask:0,stencilTestOn:!1,stencilRef:0,stencilReadMask:0,stencilComp:0,stencilPass:ue.EStencilOp.ZERO,stencilFail:ue.EStencilOp.ZERO,stencilZFail:ue.EStencilOp.ZERO,primitiveType:ue.EPrimitiveType.TRIANGLES},Ea=Sa(Sa({},xa),{blendOn:!0,blendSrc:ue.EBlendFactor.SRC_ALPHA,blendDst:ue.EBlendFactor.ONE_MINUS_SRC_ALPHA,blendFunc:ue.EBlendEquation.FUNC_ADD,cullOn:!0,cullFace:ue.ECullMode.FRONT,depthWrite:!0,depthTestOn:!0,depthTestComp:ue.ECompareFunc.LEQUAL,colorWrite:15,stencilWriteMask:255,stencilRef:0,stencilReadMask:255,stencilComp:ue.ECompareFunc.ALWAYS,stencilPass:ue.EStencilOp.KEEP,stencilFail:ue.EStencilOp.KEEP,stencilZFail:ue.EStencilOp.KEEP,primitiveType:ue.EPrimitiveType.TRIANGLES}));var o=[];if(t.properties&&0!==t.properties.length)for(var i=0,a=t.properties;i<a.length;i++){var s=a[i];o.push({name:s.key,type:s.type,num:s.num}),s.macro&&(this._uniformMacroTable[s.key]=s.macro)}else this._isNoProperties=!0;if(t.images&&0!==t.images.length)for(var u=0;u<t.images.length;u++){var c=t.images[u],l=c.key,f=c.macro;o.push({name:l,type:ue.EUniformType.SAMPLER}),f&&(this._uniformMacroTable[l]=f)}else this._isNoImages=!0;if(this._shaderUniformBlockDesc=this._scene.createUniformBlockDesc({uniforms:o}),this._defaultUniforms=this._scene.createUniformBlock(this._shaderUniformBlockDesc),!this._isNoProperties)for(var p=0,h=t.properties;p<h.length;p++)l=(s=h[p]).key,this._defaultUniforms.setUniform(l,s.default);if(t.images){var d=function(e){var r=t.images[e],o=Dr("texture",r.default,void 0,_.scene);(null==o?void 0:o.state)===ar.Loading?(_._loadingTextures=_._loadingTextures||{},_._loadingTextures[r.key]=o,o.promise.then((function(e){n._defaultUniforms.setUniform(r.key,Mr(e.value)?e.value.texture:e.value)})).finally((function(){delete n._loadingTextures[r.key]}))):o&&_._defaultUniforms.setUniform(r.key,Mr(o.value)?o.value.texture:o.value)},_=this;for(u=0;u<t.images.length;u++)d(u)}var y=t.passes;y.map((function(e,t){return e.index=t,e})),y.sort((function(e,t){return e.lightMode===t.lightMode?e.index>t.index?1:-1:e.lightMode>t.lightMode?1:-1}));var v=this._effect=new(he(this._scene).Effect)(t.name,y.length,[],y.map((function(e){return{lightMode:e.lightMode,shaders:e.shaders}})),t.shaders,[],!0),m=0;(null===(r=he(this._scene).renderEnv)||void 0===r?void 0:r.isNotWrongEffectSort)||y.sort((function(e,t){return e.lightMode===t.lightMode?1:-1}));for(var g=0,b=t.passes;g<b.length;g++){var w=b[g];v.setUseMaterialStates(m,void 0===w.useMaterialRenderStates||w.useMaterialRenderStates);var x=w.renderStates||{};v.setBlendOn(m,void 0!==x.blendOn?x.blendOn:Ea.blendOn),v.setBlendSrcRGB(m,void 0!==x.blendSrc?x.blendSrc:Ea.blendSrc),v.setBlendDstRGB(m,void 0!==x.blendDst?x.blendDst:Ea.blendDst),v.setBlendSrcAlpha(m,void 0!==x.blendSrcAlpha?x.blendSrcAlpha:Ea.blendSrcAlpha),v.setBlendDstAlpha(m,void 0!==x.blendDstAlpha?x.blendDstAlpha:Ea.blendDstAlpha),v.setBlendFunc(m,void 0!==x.blendFunc?x.blendFunc:Ea.blendFunc),v.setCullOn(m,void 0!==x.cullOn?x.cullOn:Ea.cullOn),v.getCullOn(m)&&v.setCullFace(m,void 0!==x.cullFace?x.cullFace:Ea.cullFace),v.setDepthTestComp(m,void 0!==x.depthTestComp?x.depthTestComp:Ea.depthTestComp),v.setDepthTestOn(m,void 0!==x.depthTestOn?x.depthTestOn:Ea.depthTestOn),v.setDepthWrite(m,void 0!==x.depthWrite?x.depthWrite:Ea.depthWrite),v.setPrimitiveType(m,void 0!==x.primitiveType?x.primitiveType:Ea.primitiveType),v.setStencilTestOn(m,void 0!==x.stencilTestOn?x.stencilTestOn:Ea.stencilTestOn),v.setStencilComp(m,void 0!==x.stencilComp?x.stencilComp:Ea.stencilComp),v.setStencilPass(m,void 0!==x.stencilPass?x.stencilPass:Ea.stencilPass),v.setStencilFail(m,void 0!==x.stencilFail?x.stencilFail:Ea.stencilFail),v.setStencilZFail(m,void 0!==x.stencilZFail?x.stencilZFail:Ea.stencilZFail),v.setStencilWriteMask(m,void 0!==x.stencilWriteMask?x.stencilWriteMask:Ea.stencilWriteMask),v.setStencilReadMask(m,void 0!==x.stencilReadMask?x.stencilReadMask:Ea.stencilReadMask),v.setStencilRef(m,void 0!==x.stencilRef?x.stencilRef:Ea.stencilRef),m+=1}delete t.passes,delete t.shaders}return Object.defineProperty(e.prototype,"name",{get:function(){return this.description.name},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"scene",{get:function(){return this._scene},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"kanataEffect",{get:function(){return this._effect},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"passCount",{get:function(){var e;return null===(e=this._effect)||void 0===e?void 0:e.passCount},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"loadingTextures",{get:function(){return this._loadingTextures},enumerable:!1,configurable:!0}),e.prototype._createUniforms=function(){if(this._defaultUniforms)return this._defaultUniforms.clone()},e.prototype._getMarcoByUniform=function(e){return this._uniformMacroTable[e]},e.prototype.warmUp=function(){var e;return null===(e=this._effect)||void 0===e||e.warmUp(),!0},e}();const Oa=Ta;var Aa=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},e(t,r)};return function(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();const Ca=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.priority=100,t._animators=new Set,t}return Aa(t,e),t.prototype.onTick=function(e,t){this._animators.forEach((function(t){t._tickAnimation(e)}))},t.prototype._addAnimator=function(e){this._animators.add(e)},t.prototype._removeAnimator=function(e){this._animators.delete(e)},t}(oo);var Ma,Pa=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},e(t,r)};return function(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Ra=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(e,n[o])&&(r[n[o]]=e[n[o]])}return r};!function(e){e[e.Playing=0]="Playing",e[e.Paused=1]="Paused",e[e.Stopt=2]="Stopt"}(Ma||(Ma={}));var Da={keyframe:{type:"keyframe"},clipMap:{type:"dict"},autoPlay:{type:"dict"}},Na=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.schema=Da,t.priority=200,t._clips=new Map,t._animation2Clips=new Map,t._currents={},t}return Pa(t,e),t.prototype.onAdd=function(e,t){this._processData(t,null),this.scene.animation._addAnimator(this)},t.prototype.onUpdate=function(e,t){this._processData(e,t)},t.prototype.onRemove=function(e,t){this.scene.animation._removeAnimator(this),this.stop()},t.prototype.onRelease=function(e){this._clips=void 0,this._animation2Clips=void 0},t.prototype.addAnimation=function(e,t){if(!this._animation2Clips.has(e)){for(var r=0,n=e.clipNames;r<n.length;r++){var o=n[r],i=(null==t?void 0:t[o])||o;if(this._clips.has(i))Ee.warn("Clip "+i+" has already existed, ignore...");else if(this._clips.set(i,[e,o]),this._autoPlay){var a=this._autoPlay,s=a.clip,u=Ra(a,["clip"]);s?s===i&&this._startAutoPlay(i,u):this._startAutoPlay(i,u)}}return e}},t.prototype.createAnimation=function(e,t,r){var n=new e(this.scene,t);return this.addAnimation(n,r),n},t.prototype.removeAnimation=function(e){var t,r,n=this;e&&(null===(t=this._animation2Clips)||void 0===t?void 0:t.has(e))&&(null===(r=this._animation2Clips)||void 0===r||r.get(e).forEach((function(e){n._clips.delete(e)})))},t.prototype._tickAnimation=function(e){var t=e/1e3;for(var r in this._currents){var n=this._currents[r];if(n.delay-=t,!(n.delay>0)){var o=n.anim,i=n.duration,a=n.time,s=n.reverse,u=n.loop,c=n.direction,l=n.state,f=n.speed;if(l===Ma.Playing){var p=a/i;p=p>1?1:p,o.onUpdate(this.el,p,s),1!==p||0!==u?1===p?(n.loop-=1,n.time=0,"both"===c&&(n.reverse=!n.reverse)):n.time+=t*f:this.stop(r)}}}},t.prototype._processData=function(e,t){var r=this;if(e.keyframe!==(null==t?void 0:t.keyframe)?(this.removeAnimation(null==t?void 0:t.keyframe),this.addAnimation(e.keyframe,e.clipMap)):(e.clipMap,null==t||t.clipMap),this._autoPlay=e.autoPlay,e.autoPlay){var n=e.autoPlay,o=n.clip,i=Ra(n,["clip"]);if(o&&!this._clips.has(o))return;this._clips.forEach((function(e,t){o?o===t&&r._startAutoPlay(t,i):r._startAutoPlay(t,i)}))}},t.prototype.play=function(e,t){if(!this._currents[e]){var r=this._clips.get(e);if(r){if(!this._currents[e]){var n=t||{},o=n.speed,i=n.loop,a=n.delay,s=n.direction,u=Ra(n,["speed","loop","delay","direction"]),c=r[0],l=r[1],f=c.onPlay(this.el,l,u),p=this._currents[e]={anim:c,speed:o||1,duration:f.duration,delay:null!=a?a:f.delay||0,loop:null!=i?i:f.loop||0,direction:s||f.direction||"forwards",reverse:!1,time:0,state:Ma.Playing};p.reverse="backwards"===p.direction}}else Ee.warn("Clip "+e+" is not existed, ignore...")}},t.prototype.pauseToFrame=function(e,t){var r;this.play(e);var n=null===(r=this._currents[e])||void 0===r?void 0:r.anim;n&&(n.onUpdate(this.el,t,!1),this.pause(e))},t.prototype.pause=function(e){if(e){var t=this._currents[e];(null==t?void 0:t.state)===Ma.Playing&&(t.anim.onPause(this.el),t.state=Ma.Paused)}else for(var r in this._currents)this.pause(r)},t.prototype.resume=function(e){if(e){var t=this._currents[e];(null==t?void 0:t.state)===Ma.Paused&&(t.anim.onResume(this.el),t.state=Ma.Playing)}else for(var r in this._currents)this.resume(r)},t.prototype.stop=function(e){if(e){var t=this._currents[e];t.anim.onStop(this.el),t.state=Ma.Stopt,this.el.event.trigger("anim-stop",{name:e}),delete this._currents[e]}else for(var r in this._currents)this.stop(r)},t.prototype._startAutoPlay=function(e,t){if(this._autoPlay){var r={};for(var n in t){var o=t[n];try{r[n]=parseFloat(o)}catch(e){r[n]=o}}this.play(e,r)}},t.EVENTS=["anim-stop"],t}(oo);const Ia=Na;var La,Fa=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},e(t,r)};return function(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();function ka(e){return e!==La.Init&&e!==La.Error}!function(e){e[e.Init=0]="Init",e[e.Detecting=1]="Detecting",e[e.Detected=2]="Detected",e[e.Error=3]="Error"}(La||(La={}));var Ua={mode:{type:"string"},image:{type:"image"},src:{type:"string"},autoSync:{type:"number-array"}},Ba=new Tt,ja=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.schema=Ua,t._state=La.Init,t._errorMessage="",t._filePath="",t._is3d=!1,t._fetchCancelMap={},t._rawData={},t._rawScale=1,t._autoSync=void 0,t}return Fa(t,e),Object.defineProperty(t.prototype,"mode",{get:function(){return this._mode},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"state",{get:function(){return this._state},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"errorMessage",{get:function(){return this._errorMessage},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"arActive",{get:function(){return this._state===La.Detected},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"score",{get:function(){var e;return(null===(e=this._rawData)||void 0===e?void 0:e.score)||0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"gesture",{get:function(){var e,t;return null!==(t=null===(e=this._rawData)||void 0===e?void 0:e.gesture)&&void 0!==t?t:-1},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"filePath",{get:function(){return this._filePath},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"trackId",{get:function(){return this._trackId},enumerable:!1,configurable:!0}),t.prototype.onAdd=function(e,t){this._processData(t),this.el.getComponent(Di).visible=!1},t.prototype.onUpdate=function(e,t){this._processData(e)},t.prototype.onRemove=function(e,t){ka(this._state)&&this.el.scene.ar._removeTracker(this)},t.prototype.getPosition=function(e,t,r){var n,o;if(void 0===r&&(r=!0),this._state===La.Detected){var i=(null===(n=this._rawData)||void 0===n?void 0:n.points3d)||(null===(o=this._rawData)||void 0===o?void 0:o.points),a=null==i?void 0:i[e];if(a){var s=t||new Tt;if(this._is3d)return s.setValue(a.x,a.y,a.z),s;if(this.scene.ar._convertScreenPoint(2*a.x-1,1-2*a.y,s),!r)return s;var u=this.el.getComponent(Di);return s.sub(u.position,s),s.x/=this._rawScale,s.y/=this._rawScale,s}}},t.prototype._switch=function(e){this.arActive!==e&&(this._setState(e?La.Detected:La.Detecting),this.el.getComponent(Di).visible=e,e||(this._rawData={}),this.el.event.trigger("ar-tracker-switch",e))},t.prototype._setRawData=function(e,t){var r,n,o,i=this;this._rawData.score=(null!==(r=e.score)&&void 0!==r?r:"Hand"===this._mode)?e.score-2:e.score,this._rawData.gesture=e.gesture,this._rawData.points=e.points,this._rawData.points3d=e.points3d,this._rawData.confidence=e.confidence,this._rawData.origin=e.origin,this._rawData.size=e.size,this._rawData.angle=e.angle,this._rawScale=t,null===(n=this.el.getComponent(Di))||void 0===n||n.scale.setValue(t,t,t),this._is3d=!!e.points3d,(null===(o=this._autoSync)||void 0===o?void 0:o.length)&&this._autoSync.forEach((function(e,t){var r,n=null===(r=i.el.getChildAtIndex(t))||void 0===r?void 0:r.getComponent(Di);if(n&&-1!==e){var o=i.getPosition(e,Ba);o&&n.position.set(o)}}))},t.prototype._processData=function(e){var t=this,r=this.scene.ar;if(r){if(r._support(e.mode))return r.ready?void this._processTracker(e):(this._defer&&this.scene.event.remove("ar-ready",this._defer),this._defer=function(){return t._processTracker(e)},void this.scene.event.addOnce("ar-ready",this._defer));this._setState(La.Error,"AR track mode "+e.mode+" is not supported in current ar system now, ignore...")}else this._setState(La.Error,"ar-system is not existed in scene, ignore...")},t.prototype._processTracker=function(e){var t,r=this,n=this.scene.ar;if(this._autoSync=e.autoSync,this._mode=e.mode,ka(this._state)&&(n._removeTracker(this),this._trackId=void 0,this._filePath=""),this._setState(La.Init),"Marker"!==e.mode&&"OSD"!==e.mode)return this._trackId=this.scene.ar._addTacker(this),void this._setState(La.Detecting);if(e.image||e.src)if(e.image)this._saveAndUseFile(e.image.localPath);else if(e.src){if(void 0!==this._fetchCancelMap[e.src])return;for(var o in this._fetchCancelMap)this._fetchCancelMap[o]=!0;if(t=e.src,/^wxfile:\/\/tmp\_/.test(t)||oa(e.src))return void this._saveAndUseFile(e.src);this._fetchCancelMap[e.src]=!1,wa(e.src).then((function(t){var n=t.filePath;r._fetchCancelMap[e.src]||r._saveAndUseFile(n,e.src)})).catch((function(t){r._setState(La.Error,"Tracker src "+e.src+" is invalid, ignore..."+(t.message||t))})).finally((function(){delete r._fetchCancelMap[e.src]}))}},t.prototype._saveAndUseFile=function(e,t){var r=(t=t||e).split("?")[0].split("."),n=r.pop();try{if(r.length<1)throw new Error("Tracker src must have extension like '.jpg'(2d) or '.map'(3d) !");var o=fe.env.USER_DATA_PATH+"/xr-frame-ar-tracker-"+this.el._elId+"."+n;oa(e)?fe.getFileSystemManager().copyFileSync(e,o):fe.getFileSystemManager().saveFileSync(e,o),this._filePath=o,this._trackId=this.scene.ar._addTacker(this),this._setState(La.Detecting),fe.getFileSystemManager().unlink({filePath:o})}catch(e){this._setState(La.Error,"Ar tracker process file error: "+(e.message||e))}},t.prototype._setState=function(e,t){this._state=e,this._errorMessage=t||"",this.el.event.trigger("ar-tracker-state",this),t&&Ee.error(this._errorMessage,se.AR)},t.EVENTS=["ar-tracker-switch","ar-tracker-state"],t}(oo);const Va=ja;var za=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},e(t,r)};return function(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Ga={type:{type:"string"},assetId:{type:"string"},src:{type:"string"},defer:{type:"boolean"},weight:{type:"number",defaultValue:1},options:{type:"dict",defaultValue:{}}};const Wa=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.schema=Ga,t._inited=!1,t}return za(t,e),Object.defineProperty(t.prototype,"loadParams",{get:function(){return this._loadParams},enumerable:!1,configurable:!0}),t.prototype.onAdd=function(e,t){if(t.type&&t.assetId||Ee.throw(new Error("Asset must load with params: type, assetId")),this._loadParams=t,!t.src&&!this.scene.assets._checkAssetIsDefer(t.type,t.assetId))return this._parent=e,void Ee.warn("Wait src for asset "+t.type+", "+t.assetId+"...");this.scene.assets.loadAsset(this._loadParams,e),this._inited=!0},t.prototype.onUpdate=function(e,t){this._inited?Ee.warn("'src' for asset '"+e.assetId+"' has already been set, you can't change it anymore!"):(this._loadParams.src=e.src,this.scene.assets.loadAsset(this._loadParams,this._parent),this._parent=void 0,this._inited=!0)},t.prototype.onRemove=function(e,t){this.scene.assets.releaseAsset(this._loadParams.type,this._loadParams.assetId)},t}(oo);var Xa=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},e(t,r)};return function(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Ha=(new Tt).setValue(0,1,0),qa=new Tt,Ya={target:{type:"transform"},renderTarget:{type:"render-texture"},isPerspective:{type:"boolean",defaultValue:!0},cullMask:{type:"number",defaultValue:4294967295},depth:{type:"number",defaultValue:0},fov:{type:"number",defaultValue:60},near:{type:"number",defaultValue:.1},far:{type:"number",defaultValue:100},orthSize:{type:"number",defaultValue:4},background:{type:"string",defaultValue:"default"},isARCamera:{type:"boolean",defaultValue:!1},isClearDepth:{type:"boolean",defaultValue:!0},isClearStencil:{type:"boolean",defaultValue:!0},isClearColor:{type:"boolean",defaultValue:!0},clearDepth:{type:"number",defaultValue:1},clearStencil:{type:"number",defaultValue:0},clearColor:{type:"color",defaultValue:[0,0,0,1]},postProcess:{type:"array",defaultValue:[]},allowFeatures:{type:"array",defaultValue:[]}};function Za(e){return void 0!==e.buffer}var Ka=new Sr,Qa=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.schema=Ya,t.priority=200,t._background="default",t._postProcess=[],t._hdr=!1,t._bgStates={},t._bgStatesClear=!0,t._allowFeatures=[],t._features={},t._preVisible=!0,t._modifyToRenderSystem=function(){t.scene.render._modifyCameraImportantProps(t)},t}return Xa(t,e),Object.defineProperty(t.prototype,"depth",{get:function(){return this._depth},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"renderTarget",{get:function(){return this._renderTarget},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"view",{get:function(){var e;return null===(e=this._cameraComp)||void 0===e?void 0:e.view},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"id",{get:function(){return this._id},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"bgStates",{get:function(){return this._bgStates},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"bgStatesClear",{get:function(){return this._bgStatesClear},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"background",{get:function(){return this._background},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"target",{get:function(){return this._target},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"near",{get:function(){return this._cameraComp.near},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"far",{get:function(){return this._cameraComp.far},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"cullMask",{get:function(){return this._cameraComp.cullingMask},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"postProcess",{get:function(){return this._postProcess},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hdr",{get:function(){return this._hdr},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"allowFeatures",{get:function(){return this._allowFeatures},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"features",{get:function(){return this._features},enumerable:!1,configurable:!0}),t.prototype.cull=function(e,t){this._cameraComp&&(this._changeAspect(),this._cameraComp.cull(e,t))},t.prototype.clear=function(){this.view&&(this._changeAspect(),he(this.scene).renderEnv.clearView(this.view))},t.prototype.draw=function(e,t){e.usedSize&&this._cameraComp&&(this._changeAspect(),this._cameraComp.draw(e,t))},t.prototype.drawLight=function(e,t,r){e.lightCamera&&t.usedSize&&(this._changeAspect(),e.lightCamera.draw(this._cameraComp,t,r))},t.prototype.convertWorldPositionToClip=function(e,t){var r=Ka;return this._projMatrix.multiply(this._viewMatrix,r).transformPoint(e,t)},t.prototype.convertClipPositionToWorld=function(e,t){var r=Ka;return this._projMatrix.multiply(this._viewMatrix,r).inverse(r).transformPoint(e,t)},t.prototype.changeViewMatrix=function(e,t){this._cameraComp&&(e?(t=Za(t)?t:null==t?void 0:t._raw.slice(t._offset,t._offset+16),this._cameraComp.changeViewMatrix(e,t)):this._cameraComp.changeViewMatrix(!1))},t.prototype.changeProjectMatrix=function(e,t){this._cameraComp&&(e?(t=Za(t)?t:null==t?void 0:t._raw.slice(t._offset,t._offset+16),this._cameraComp.changeProjectionMatrix(e,t)):this._cameraComp.changeProjectionMatrix(!1))},t.prototype.setBackgroundRenderStates=function(e){Object.assign(this._bgStates,e||{}),this._bgStatesClear=!1},t.prototype.clearBackgroundRenderStates=function(){this._bgStatesClear=!0},t.prototype._setFeatures=function(e){this._features=e},t.prototype.onAdd=function(e,t){var r=this.el.getComponent(Di);if(!this._cameraComp){var n=he(this.scene);this._cameraComp=new n.CameraComponent(r.node),this._cameraComp.cullingMask=4294967295,this._viewMatrix=new Sr(this._cameraComp._f32view,n.CameraComponent.OFFSETS.viewMatrix),this._projMatrix=new Sr(this._cameraComp._f32view,n.CameraComponent.OFFSETS.projectionMatrix),this._id=this._cameraComp.id}this._processData(t,void 0),this._cameraComp.active=!0,r.visible&&this.scene.render._addCamera(this),this._preVisible=r.visible},t.prototype.onUpdate=function(e,t){this._processData(e,t)},t.prototype.onTick=function(e,t){var r=this.el.getComponent(Di);this._preVisible!==r.visible&&(r.visible?this.scene.render._addCamera(this):this.scene.render._removeCamera(this),this._preVisible=r.visible)},t.prototype.onRemove=function(e,t){this._cameraComp.active=!1,this._preVisible&&this.scene.render._removeCamera(this)},t.prototype.onRelease=function(e){var t;this._cameraComp&&(null===(t=this._cameraComp)||void 0===t||t.destroy(),this._cameraComp=null)},t.prototype._processData=function(e,t){var r,n=this,o=e.target,i=e.renderTarget,a=e.depth,s=e.isPerspective,u=e.fov,c=e.near,l=e.far,f=e.orthSize,p=e.background,h=e.isARCamera,d=e.isClearColor,_=e.isClearDepth,y=e.isClearStencil,v=e.clearColor,m=e.clearDepth,g=e.clearStencil,b=e.postProcess,w=e.allowFeatures,x=this._cameraComp;if(x.cullingMask=e.cullMask,s!==(null==t?void 0:t.isPerspective)&&(x.isProjection=s),a!==(null==t?void 0:t.depth)&&(this._depth=a,this._modifyToRenderSystem()),u!==(null==t?void 0:t.fov)&&(x.fov=u*Math.PI/180),c!==(null==t?void 0:t.near)&&(x.near=c),l!==(null==t?void 0:t.far)&&(x.far=l),f!==(null==t?void 0:t.orthSize)&&(x.orthoSize=f),o!==(null==t?void 0:t.target)){this._target=o,x.targetTransform=o?o.node.id:0;var E=this.el.getComponent(Di),S=E.position,T=E.quaternion;qa.set(S).sub(o.position,qa),wi.lookRotation(qa,Ha,T)}if(i!==(null==t?void 0:t.renderTarget)&&(this._renderTarget=i,this._modifyToRenderSystem()),p!==(null==t?void 0:t.background)&&("ar"!==p||this.scene.ar?(this._background=p,"default"!==p&&this._rebuildView(e),this._modifyToRenderSystem()):Ee.error("Camera background 'ar' request ARSystem, ignore...",se.AR)),b!==(null==t?void 0:t.postProcess)){var O=!1;this._postProcess=b.map((function(e){var t=n.scene.assets.getAsset("post-process",e);return O=O||(null==t?void 0:t.isHDR),t})).filter((function(e){return!!e})),this._hdr=O,this._rebuildView(e),this._modifyToRenderSystem()}w!==(null==t?void 0:t.allowFeatures)&&(this._allowFeatures=w,this._modifyToRenderSystem()),h!==(null==t?void 0:t.isARCamera)&&(null===(r=this.el.scene.ar)||void 0===r||r._setTrackCamera(this,!h)),h&&o&&Ee.error("Camera that enabled `isARCamera` property must not have `target` !"),d===(null==t?void 0:t.isClearColor)&&_===(null==t?void 0:t.isClearDepth)&&y===(null==t?void 0:t.isClearStencil)&&v===(null==t?void 0:t.clearColor)&&m==m&&g==g||this._rebuildView(e)},t.prototype._changeAspect=function(){var e=this._renderTarget;Do.IS(e)?this._cameraComp.aspect=e.width/e.height:this._cameraComp.aspect=Math.floor(this.scene.width)/Math.floor(this.scene.height)},t.prototype._rebuildView=function(e){var t,r=e.isClearColor,n=e.isClearDepth,o=e.isClearStencil,i={};i.colorAction=r?ue.ELoadAction.CLEAR:ue.ELoadAction.LOAD,i.depthAction=n?ue.ELoadAction.CLEAR:ue.ELoadAction.LOAD,i.stencilAction=o?ue.ELoadAction.CLEAR:ue.ELoadAction.LOAD,i.clearColor=(null===(t=this._postProcess)||void 0===t?void 0:t.length)?function(e){return[Math.pow(e[0],2.2),Math.pow(e[1],2.2),Math.pow(e[2],2.2),e[3]]}(e.clearColor):e.clearColor,i.clearDepth=e.clearDepth,i.clearStencil=e.clearStencil;var a=this._viewport,s=a?a.xMin:0,u=a?a.yMin:0,c=a?a.width:1,l=a?a.height:1,f={x:s,y:u,w:c,h:l},p={x:s,y:u,w:c,h:l};this._cameraComp.view=new(he(this.scene).View)({passAction:i,viewport:f,scissor:p})},t}(oo);const $a=Qa;var Ja=function(){function e(e,t,r){this.isSpherical=!0,this.center=new Tt,this.radius=e||0,this.phi=t||0,this.theta=r||0}return e.prototype.set=function(e,t,r){return this.radius=e,this.phi=t,this.theta=r,this},e.prototype.clone=function(){return(new e).copy(this)},e.prototype.copy=function(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this},e.prototype.makeSafe=function(){var t=e.EPS;return this.phi=Math.max(t,Math.min(Math.PI-t,this.phi)),this},e.prototype.setFromVector3=function(e){return this.setFromCartesianCoords(e.x,e.y,e.z)},e.prototype.setFromCartesianCoords=function(e,t,r){var n;return this.radius=Math.sqrt(e*e+t*t+r*r),0===this.radius?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,r),this.phi=Math.acos((1,(n=t/this.radius)<-1?-1:n>1?1:n))),this},e.prototype.toVector3=function(e){e=e||new Tt;var t=this,r=t.radius,n=t.phi,o=t.theta,i=t.center;return e.x=r*Math.sin(n)*Math.sin(o)+i.x,e.y=r*Math.cos(n)+i.y,e.z=r*Math.sin(n)*Math.cos(o)+i.z,e},e.EPS=1e-6,e}();const es=Ja;var ts,rs,ns=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},e(t,r)};return function(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),os=(new Tt).setValue(0,1,0);!function(e){e[e.NONE=-1]="NONE",e[e.MOVE=0]="MOVE",e[e.ZOOM_OR_PAN=1]="ZOOM_OR_PAN"}(ts||(ts={})),function(e){e[e.NONE=-1]="NONE",e[e.MOVE=0]="MOVE",e[e.ZOOM=1]="ZOOM",e[e.PAN=2]="PAN"}(rs||(rs={}));var is=new cr,as=new cr,ss=new Tt,us=new es,cs={isLockX:{type:"boolean",defaultValue:!1},isLockY:{type:"boolean",defaultValue:!1},isLockZoom:{type:"boolean",defaultValue:!1},isLockRotate:{type:"boolean",defaultValue:!1},isLockMove:{type:"boolean",defaultValue:!1},enableDamping:{type:"boolean",defaultValue:!0},zoomMax:{type:"number",defaultValue:1/0},zoomMin:{type:"number",defaultValue:-1/0},panSpeed:{type:"number",defaultValue:1},rotateSpeed:{type:"number",defaultValue:1},zoomSpeed:{type:"number",defaultValue:1},dampingFactor:{type:"number",defaultValue:.1}},ls=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.schema=cs,t.isLockX=!1,t.isLockY=!1,t.isLockZoom=!1,t.isLockRotate=!1,t.isLockMove=!1,t.isEnabled=!1,t.zoomMax=1/0,t.zoomMin=-1/0,t.panSpeed=1,t.rotateSpeed=1,t.zoomSpeed=1,t.enableDamping=!0,t.dampingFactor=.1,t._eye=new Tt,t._spherical=new es,t._originSpherical=new es,t._mouseInfo=null,t._tmpVec=new Tt,t._tmpUp=new Tt,t.overBounding=!1,t._onResize=function(){var e=t.scene,r=e.width,n=e.height;t._radius=(r+n)/4},t._handleTouchStart=function(e){t._mouseInfo.isDown=!0;var r=e.touches[0],n=e.touches[1];switch(e.touches.length){case 1:t._mouseInfo.startX=r.pageX,t._mouseInfo.startY=r.pageY,t._mouseInfo.state=ts.MOVE;break;case 2:t._mouseInfo.startPointerDistance=is.setValue(r.pageX,r.pageY).sub(as.setValue(n.pageX,n.pageY)).length(),t._mouseInfo.startX=(r.pageX+n.pageX)/2,t._mouseInfo.startY=(r.pageY+n.pageY)/2,t._mouseInfo.state=ts.ZOOM_OR_PAN}var o=t.scene.event;t.scene.event.remove("touchstart",t._handleTouchStart),o.add("touchmove",t._handleTouchMove),o.addOnce("touchend",t._handleTouchEnd)},t._handleTouchMove=function(e){if(t._mouseInfo.isDown)switch(t._mouseInfo.state){case ts.MOVE:1===e.touches.length?t._handleToucheMove(e):2===e.touches.length&&(t._handleTouchEnd(e),t._handleTouchStart(e));break;case ts.ZOOM_OR_PAN:1===e.touches.length||2===e.touches.length&&t._handleToucheZoomOrPan(e)}},t._handleTouchEnd=function(e){t._mouseInfo.isDown=!1,t._mouseInfo.state=ts.NONE,t.scene.event.remove("touchmove",t._handleTouchMove),t.scene.event.remove("touchend",t._handleTouchEnd),t.scene.event.addOnce("touchstart",t._handleTouchStart)},t._handleToucheZoomOrPan=function(e){var r=e.touches[0],n=e.touches[1],o=is.setValue(r.pageX,r.pageY).sub(as.setValue(n.pageX,n.pageY)).length(),i=o-t._mouseInfo.startPointerDistance;t._mouseInfo.startPointerDistance=o,r.pageX,t._mouseInfo.startX,r.pageY,t._mouseInfo.startY,t._mouseInfo.startX=(r.pageX+n.pageX)/2,t._mouseInfo.startY=(r.pageY+n.pageY)/2,i<-2?i=-2:i>2&&(i=2);var a=.02*-i+1;t._scale(a)},t._handleMouseWheel=function(e){var r=e.deltaY;r<-50?r=-50:r>50&&(r=50);var n=.001*r+1;t._scale(n)},t}return ns(t,e),Object.defineProperty(t.prototype,"damping",{get:function(){return this.enableDamping&&(Math.abs(us.radius)>.01||Math.abs(us.theta)>.01||Math.abs(us.phi)>.01||ss.length()>1e-4)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"target",{get:function(){return this._target},enumerable:!1,configurable:!0}),t.prototype.onAdd=function(e,t){this._processData(t),this._onResize(),this.enable()},t.prototype.onUpdate=function(e){this._processData(e)},t.prototype.onTick=function(e,t){var r,n;(null===(r=this._camera)||void 0===r?void 0:r.target)&&this._target!==this._camera.target.position&&(this._target=null===(n=this._camera)||void 0===n?void 0:n.target.position.clone(),this._resetSpherical()),this._updateTransform()},t.prototype.onRemove=function(){this.disable()},t.prototype._processData=function(e){for(var t in this._camera||(this._camera=this.el.getComponent($a),this._transform=this.el.getComponent(Di)),e)this[t]=e[t]},t.prototype.enable=function(){var e;this.isEnabled||((null===(e=this._camera)||void 0===e?void 0:e.target)?(this._mouseInfo={startX:0,startY:0,isDown:!1,startPointerDistance:0,state:ts.NONE,dampState:rs.NONE},this.scene.event.addOnce("touchstart",this._handleTouchStart),this.scene.event.add("wheel",this._handleMouseWheel),this.isEnabled=!0):Ee.warn("'CameraOrbitControl' requires an camera with valid 'target' !"))},t.prototype.disable=function(){this.isEnabled&&(this.isEnabled=!1,this.scene.event.remove("wheel",this._handleMouseWheel),this.scene.event.remove("touchstart",this._handleTouchStart))},t.prototype._resetSpherical=function(){this._spherical.setFromVector3(this._eye.set(this._transform.position).sub(this._target,this._eye)),this._originSpherical.copy(this._spherical)},t.prototype._rotate=function(e,t){if(!this.isLockRotate){var r=this._mouseInfo,n=r.startX,o=r.startY,i=(e-n)/this._radius*-this.rotateSpeed,a=(t-o)/this._radius*-this.rotateSpeed;Math.abs(i)<.01&&Math.abs(a)<.01||(this.isLockX&&(i=0),this.isLockY&&(a=0),us.theta=i,us.phi=a,this._mouseInfo.startX=e,this._mouseInfo.startY=t,this._mouseInfo.dampState=rs.MOVE)}},t.prototype._scale=function(e){if(!this.isLockZoom){var t=this._spherical.radius,r=this.zoomMax,n=this.zoomMin,o=t*e;o>r?us.radius=r-t:o<n?us.radius=n-t:(us.radius=(o-t)*this.zoomSpeed,us.radius>0&&us.radius<.01&&(us.radius=.015)),this._mouseInfo.dampState=rs.ZOOM}},t.prototype._move=function(e,t){if(!this.isLockMove){this._camera;var r=this._transform,n=r.position,o=r.worldRight,i=r.worldUp,a=this.panMax,s=this.panMin;this._tmpVec.set(o),this._tmpUp.set(i);var u=this._setVector3Length(this._tmpVec,e);if(u.add(this._setVector3Length(this._tmpUp,-t)),u.scale(this.panSpeed),a||s){var c=this._tmpVec.set(n).add(u,this._tmpVec);c.x>=a.x?(u.x=a.x-n.x,this.overBounding=!0):c.x<=s.x&&(u.x=s.x-n.x,this.overBounding=!0),c.y>=a.y?(u.y=a.y-n.y,this.overBounding=!0):c.y<=s.y&&(u.y=s.y-n.y,this.overBounding=!0),c.z>=a.z?(u.z=a.z-n.z,this.overBounding=!0):c.x<=s.x&&(u.z=s.z-n.z,this.overBounding=!0)}ss.set(u),this._mouseInfo.dampState=rs.PAN}},t.prototype._updateTransform=function(){if(this.damping){var e=this._transform,t=e.position,r=e.quaternion;switch(this._eye.set(t).sub(this._target,this._eye),this._mouseInfo.dampState){case rs.PAN:this._target.add(ss);break;case rs.MOVE:this._spherical.theta+=us.theta,this._spherical.phi+=us.phi,this._spherical.makeSafe(),this._spherical.toVector3(this._eye);break;case rs.ZOOM:this._spherical.radius+=us.radius,this._spherical.makeSafe(),this._spherical.toVector3(this._eye)}if(this._eye.add(this._target,t),wi.lookRotation(this._eye,os,r),!this.enableDamping)return ss.setValue(0,0,0),void(us.theta=us.phi=0);var n=1-this.dampingFactor;this.overBounding?(ss.setValue(0,0,0),this.overBounding=!1):ss.scale(n),us.theta*=n,us.phi*=n;var o=(us.radius*=n)+this._spherical.radius;(o>this.zoomMax||o<this.zoomMin)&&(us.radius=0)}},t.prototype._handleToucheMove=function(e){this._rotate(e.touches[0].pageX,e.touches[0].pageY)},t.prototype._setVector3Length=function(e,t){return e.normalize().scale(t)},t}(oo);const fs=ls;var ps=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},e(t,r)};return function(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),hs={rotation:{type:"number",defaultValue:0},isSky2D:{type:"boolean",defaultValue:!1},diffuseExp:{type:"number",defaultValue:1},specularExp:{type:"number",defaultValue:1},envData:{type:"env-data"},skyMap:{type:"texture"}},ds=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.schema=hs,t._isSky2D=!1,t._isSkyRT=!1,t}return ps(t,e),Object.defineProperty(t.prototype,"useHalfSkyMap",{get:function(){var e;return!!(null===(e=this._envData)||void 0===e?void 0:e.useHalfSkyMap)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"skyMap",{get:function(){var e;return this._skyMap||(null===(e=this._envData)||void 0===e?void 0:e.skyboxMap)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isSky2D",{get:function(){return this._isSky2D},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isSkyRT",{get:function(){return this._isSkyRT},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"rotation",{get:function(){return this._rotation},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasDiffuse",{get:function(){var e;return!!(null===(e=this._envData)||void 0===e?void 0:e.hasDiffuse)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"diffuseSH",{get:function(){var e;return null===(e=this._envData)||void 0===e?void 0:e.diffuseSH},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"diffuseExp",{get:function(){return this._diffuseExp},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasSpecular",{get:function(){var e;return!!(null===(e=this._envData)||void 0===e?void 0:e.hasSpecular)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"specularRGBD",{get:function(){var e;return null===(e=this._envData)||void 0===e?void 0:e.specularRGBD},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"specularMipmaps",{get:function(){var e;return null===(e=this._envData)||void 0===e?void 0:e.specularMipmaps},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"specularMipmapCount",{get:function(){var e;return null===(e=this._envData)||void 0===e?void 0:e.specularMipmapCount},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"specularMap",{get:function(){var e;return null===(e=this._envData)||void 0===e?void 0:e.specularMap},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"specularExp",{get:function(){return this._specularExp},enumerable:!1,configurable:!0}),t.prototype.onAdd=function(e,t){this._processData(t),this.scene.render._setEnv(this)},t.prototype.onUpdate=function(e,t){this._processData(e)},t.prototype._processData=function(e){this._rotation=e.rotation*Math.PI/180,this._diffuseExp=e.diffuseExp,this._specularExp=e.specularExp,this._envData=e.envData,this._skyMap=Mr(e.skyMap)?e.skyMap.texture:e.skyMap,this._isSky2D=!!e.isSky2D,this._isSkyRT=e.skyMap instanceof Do},t.prototype.onRemove=function(e,t){this.scene.render._setEnv(void 0)},t}(oo);const _s=ds;var ys=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},e(t,r)};return function(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),vs={neverCull:{type:"boolean",defaultValue:!1},castShadow:{type:"boolean",defaultValue:!1},receiveShadow:{type:"boolean",defaultValue:!1},geometry:{type:"geometry"},material:{type:"material",defaultValue:"default"},uniforms:{type:"map"},states:{type:"map"},envData:{type:"env-data"}},ms=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.schema=vs,t.priority=300,t}return ys(t,e),Object.defineProperty(t.prototype,"geometry",{get:function(){return this._geometry},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"material",{get:function(){return this._material},set:function(e){if(this._mesh){for(var t=0;t<this._geometry.getSubMeshCount();t+=1)this._mesh.setMaterial(t,e.kanataMaterial);this._material=e}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"morphWeights",{get:function(){var e;return null===(e=this._mesh)||void 0===e?void 0:e.uniforms.getUniform("u_morphWeights")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"id",{get:function(){return this._mesh.id},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_visible",{set:function(e){var t;null===(t=this._cull)||void 0===t||t.setActive(e)},enumerable:!1,configurable:!0}),t.prototype.onAdd=function(e,t){this._mesh||t.geometry&&(this._rebuildMesh(t.geometry,t.neverCull),this._setMeshData(t.geometry,t.material,t.uniforms,t.states,t.castShadow,t.receiveShadow,t.envData))},t.prototype.onTick=function(e,t){var r;null===(r=this._material)||void 0===r||r._checkTextures(e)},t.prototype.onUpdate=function(e,t){this._mesh&&((e.geometry!==t.geometry&&e.geometry.getSubMeshCount()!==t.geometry.getSubMeshCount()||e.neverCull!==t.neverCull)&&this._rebuildMesh(e.geometry,e.neverCull),this._setMeshData(e.geometry,e.material,e.uniforms,e.states,e.castShadow,e.receiveShadow,e.envData))},t.prototype.onRemove=function(e,t){var r;null===(r=this._cull)||void 0===r||r.setActive(!1)},t.prototype.onRelease=function(e){var t,r;null===(t=this._mesh)||void 0===t||t.destroy(),null===(r=this._cull)||void 0===r||r.destroy(),this._mesh=void 0,this._cull=void 0},t.prototype._rebuildMesh=function(e,t){var r=this.el.getComponent(Di);this._trs=r,this._cull||(this._cull=new(he(this.scene).CullingComponent)(r.node),this._cull.bindEntity(r.node)),this._geometry=e,this._mesh=new(he(this.scene).MeshRendererComponent)(r.node,{meshCount:e.getSubMeshCount(),renderType:this._getMeshType(),uniformBlock:new(he(this.scene).UniformBlock)(this._getUniformDesc()),culling:t?void 0:this._cull,macros:this._getMarcos(e)})},t.prototype._setMeshData=function(e,t,r,n,o,i,a){r||n?this._sourceMaterial===t&&this._sourceMaterial!==this._material||(this._material=t.clone()):this._material=t,r&&this._material._parseUniforms(r),n&&this._material._parseRenderStates(n),a&&this._material._parseEnvData(a),this._sourceMaterial=t;for(var s=0;s<e.getSubMeshCount();s+=1){var u=e.subMeshes[s];this._mesh.setIndexBuffer(s,e.indexBuffer),this._mesh.setVertexBuffer(s,e.vertexBuffer),this._mesh.setStartIndex(s,u.offset),this._mesh.setNumIndices(s,u.length),this._mesh.setMaterial(s,this._material.kanataMaterial)}this._cull.setBoundingBallCenter(e._raw,Nt.OFFSETS.center),this._cull.setBoundingBallRadius(e._raw[Nt.OFFSETS.radius]),this._mesh.castShadow=!!o,this._mesh.changeMacros({WX_RECEIVE_SHADOW:!!i})},t.prototype._getMarcos=function(e){var t={},r=e.vertexLayout,n=!!r.getConfigByUsage(ue.EVertexLayoutUsage.UV1);t.WX_USE_UV1=n,r.getConfigByUsage(ue.EVertexLayoutUsage.UV2)&&(t.WX_USE_UV2=!0),r.getConfigByUsage(ue.EVertexLayoutUsage.UV3)&&(t.WX_USE_UV3=!0);var o=!!r.getConfigByUsage(ue.EVertexLayoutUsage.NORMAL);t.WX_USE_NORMAL=o;var i=!!r.getConfigByUsage(ue.EVertexLayoutUsage.TANGENT);t.WX_USE_TANGENT=i;var a=!!r.getConfigByUsage(ue.EVertexLayoutUsage.COLOR);return t.WX_USE_MESH_COLOR=a,t},t.prototype._getUniformDesc=function(){return this.scene.assets.getAsset("uniform-desc","mesh-static")},t.prototype._getMeshType=function(){return ue.EMeshRenderType.Static3D},t}(oo);const gs=ms;var bs=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},e(t,r)};return function(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),ws={model:{type:"gltf"},castShadow:{type:"boolean",defaultValue:!1},receiveShadow:{type:"boolean",defaultValue:!1},neverCull:{type:"boolean",defaultValue:!1},states:{type:"map"}},xs=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.schema=ws,t.priority=300,t._subRoots=[],t._nodeMap=new Map,t._animations=[],t._meshes=[],t._inited=!1,t}return bs(t,e),t.prototype.onAdd=function(e,t){this._inited=!0,this.releaseSubTree(),t.model&&this.buildSubTree(t)},t.prototype.onUpdate=function(e,t){var r;e.model!==t.model&&(this.releaseSubTree(),e.model&&this.buildSubTree(e)),e.states!==t.states&&(null===(r=this._meshes)||void 0===r?void 0:r.length)&&this._meshes.forEach((function(t){return t[0].material._parseRenderStates(e.states)}))},t.prototype.onRemove=function(e,t){this.releaseSubTree()},t.prototype.onRelease=function(e){},t.prototype.buildSubTree=function(e){var t=this,r={castShadow:!!e.castShadow,receiveShadow:!!e.receiveShadow,neverCull:!!e.neverCull},n=e.model.instantiate(this.el,r),o=n[0],i=n[1],a=n[2],s=n[3];this._subRoots=o,this._meshes=s,this._nodeMap.clear(),i.forEach((function(e,r){if(r.data.name&&(t._nodeMap.set(r.data.name,{el:e,hasMesh:!1}),r.data.mesh)){var n=t._nodeMap.get(r.data.name);Object.assign(n,{hasMesh:!0,meshName:r.data.mesh.name,meshes:[]});for(var o=0,i=e._children;o<i.length;o++){var a=i[o];a.getComponent(gs)&&n.meshes.push(a.getComponent(gs))}}}));var u=this.el.getComponent(Ia);u||(u=this.el.addComponent(Ia)),this._animations=a;for(var c=0,l=a;c<l.length;c++){var f=l[c];u.addAnimation(f)}if(e.states)for(var p=0,h=s;p<h.length;p++)h[p][0].material._parseRenderStates(e.states);this.el.event.trigger("gltf-loaded",{target:this.el},!0,!0,!0)},t.prototype.releaseSubTree=function(){for(var e=0;e<this._subRoots.length;e++)this.el.removeChild(this._subRoots[e]);this._subRoots=[],this._nodeMap.clear();var t=this.el.getComponent(Ia);if(t)for(var r=0,n=this._animations;r<n.length;r++){var o=n[r];t.removeAnimation(o)}this._animations=[]},t.prototype.getInternalNodeByName=function(e){return this._nodeMap.get(e).el},t.prototype._dfs=function(e){for(var t=function(e,t){for(var r=0,n=t.length,o=e.length;r<n;r++,o++)e[o]=t[r];return e}([],this._subRoots);t.length>0;){var r=t.pop();e(r);for(var n=0,o=r._children;n<o.length;n++){var i=o[n];t.push(i)}}},Object.defineProperty(t.prototype,"meshes",{get:function(){return this._meshes.map((function(e){return e[0]}))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_meshesWithTransform",{get:function(){return this._meshes},enumerable:!1,configurable:!0}),t.prototype.calcTotalBoundBox=function(){for(var e=Zt.BoundingBox.createInfinite(),t=0;t<this._meshes.length;t++){var r=this._meshes[t][0],n=r.geometry.boundBox.center.sub(r.geometry.boundBox.size.scale(.5)),o=r.geometry.boundBox.center.add(r.geometry.boundBox.size.scale(.5)),i=r.el.getComponent(Di);i.worldMatrix.transformPoint(n,n),i.worldMatrix.transformPoint(o,o),e.adoptMin(n),e.adoptMax(o)}var a=this.el.getComponent(Di);e.min=a.worldMatrix.inverse().transformPoint(e.min),e.max=a.worldMatrix.inverse().transformPoint(e.max);var s=new kt;return s.center=e.max.add(e.min).scale(.5),s.size=e.max.sub(e.min),s},t.prototype.getPrimitivesByNodeName=function(e){var t,r=this._nodeMap.get(e);return r&&r.hasMesh&&null!==(t=r.meshes)&&void 0!==t?t:[]},t.prototype.getPrimitivesByMeshName=function(e){var t=[];return this._nodeMap.forEach((function(r,n){var o;r.hasMesh&&r.meshName===e&&t.push({nodeName:n,primitives:null!==(o=r.meshes)&&void 0!==o?o:[]})})),t},t.EVENTS=["gltf-loaded"],t}(oo);const Es=xs;var Ss=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},e(t,r)};return function(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Ts={assetId:{type:"string"},effect:{type:"effect",defaultValue:"simple"},uniforms:{type:"map"},states:{type:"map"},renderQueue:{type:"number"},envData:{type:"env-data"}};const Os=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.schema=Ts,t._preUniformStrs={},t._preStateStrs={},t._delta=0,t}return Ss(t,e),t.prototype.onAdd=function(e,t){t.assetId?(this._material=new Ir(this.scene),this._processData(t,null),this.scene.assets.addAsset("material",t.assetId,this._material)):Ee.error("You must give data 'assetId' for asset-material component !")},t.prototype.onUpdate=function(e,t){this._processData(e,t)},t.prototype.onRemove=function(e,t){t.assetId&&this.scene.assets.releaseAsset("material",t.assetId)},t.prototype._processData=function(e,t){var r=e.effect,n=e.uniforms,o=e.states,i=e.renderQueue,a=e.envData;r&&r!==(null==t?void 0:t.effect)&&(this._material.initByEffect(r),this._effect=r),n&&n!==(null==t?void 0:t.uniforms)&&this._material._parseUniforms(n),o&&o!==(null==t?void 0:t.states)&&this._material._parseRenderStates(o),i&&i!==(null==t?void 0:t.renderQueue)&&(this._material.renderQueue=i),a!==(null==t?void 0:t.envData)&&this._material._parseEnvData(a)},t}(oo);var As;!function(e){e[e.Normal=0]="Normal",e[e.Emoji=1]="Emoji",e[e.C0=2]="C0"}(As||(As={}));var Cs,Ms,Ps=function(e){var t=e.charCodeAt(0);return t<=31?As.C0:55296<=t&&t<=56319?As.Emoji:As.Normal},Rs={fontFamily:"",bold:"",italic:"",size:0},Ds=function(e,t,r,n,o,i){if(""===t||0===o)return null;var a=1;Rs.fontFamily=i,Rs.size=50*o*1.5,Rs.size>256&&(a=256/Rs.size,Rs.size=256);var s=t.codePointAt(0);if(!s)return null;var u=he(e).getGlyphInfo(Rs,s);if(!u)return null;var c=function(e,t,r){var n=t.code,o=t.tex,i=t.uv_x,a=t.uv_y,s=t.uv_w,u=t.uv_h,c=t.advance,l=t.bearing_x,f=t.bearing_y,p=t.width,h=t.height,d=[i,a+u,i,a,i+s,a,i+s,a+u],_={character:e,offsetX:0,offsetY:0,bearingX:0,bearingY:0,advance:c/r,width:0,height:0,texture:0,uvs:d};return 0===n?(_.bearingX=l/r,_.bearingY=f/r,_.width=p/r,_.height=h/r,_.texture=o,_.uvs=d):1!==n&&(o?(_.bearingX=l/r,_.bearingY=f/r,_.width=p/r,_.height=h/r,_.texture=o,_.uvs=d):_.advance=0),_}(t,u,78*a);return c},Ns=function(e,t,r,n,o,i){for(var a=[],s=0;s<t.length;s++){var u=t[s],c=Ps(u);if(c===As.Emoji)u+=t[s+1],s++;else if(c===As.C0)continue;var l=Ds(e,u,0,0,o,i);l&&a.push(l)}return a};function Is(e,t,r,n,o,i,a,s){for(var u=0;u<e.length;u++){switch(s){case Cs.Center:e[u].x+=-1===o?0:(o-i)/2;break;case Cs.Right:e[u].x+=-1===o?0:o-i}e[u].y-=r+(r+n)*(t-1)/2}}function Ls(e,t,r,n,o,i,a,s,u,c){for(var l=0,f=0,p=0,h=0,d=0,_=[],y=0;y<e.length;y++){var v,m,g=e[y],b=g.width||0,w=g.height||0,x=g.advance||0,E=g.offsetX||0,S=g.offsetY||0,T=g.bearingX||0,O=g.bearingY||0,A=g.texture,C=x,M=O,P=w-O;if(-1!==n&&l+C>n){var R=l;p=Math.max(p,l),l=0,f-=(h+d)*i,Is(_,i,h,d,n,R,0,c),_=[],h=M,d=P}else h=Math.max(h,M),d=Math.max(d,P);v=l+E+T,m=f+S+O,l+=C;var D=void 0;if(0!==A){var N=r.indexOf(A);-1!==N?(D={character:g.character,x:v,y:m,width:b,height:w,batchIndex:N,glyph:g},t[N].push(D),_.push(D)):(r.push(A),t.push([]),D={character:g.character,x:v,y:m,width:b,height:w,batchIndex:r.length-1,glyph:g},t[r.length-1].push(D),_.push(D))}}0!==_.length&&(Is(_,i,h,d,n,R=l,0,c),f-=(h+d)*i,p=Math.max(p,l));var I=-f,L=-1===n?p:n,F=-1===o?-f:o;for(y=0;y<t.length;y++)for(var k=t[y],U=0;U<k.length;U++){var B=k[U];switch(u){case Ms.Middle:B.y-=-1===o?0:(F-I)/2;break;case Ms.Bottom:B.y-=-1===o?0:F-I}B.x-=L*a[0],B.y+=F*(1-a[1])}}!function(e){e[e.Left=0]="Left",e[e.Center=1]="Center",e[e.Right=2]="Right"}(Cs||(Cs={})),function(e){e[e.Top=0]="Top",e[e.Middle=1]="Middle",e[e.Bottom=2]="Bottom"}(Ms||(Ms={}));var Fs=function(e,t,r,n,o,i,a,s,u,c){var l=4*t*zs;e[l+0]=r,e[l+1]=n,e[l+zs]=o,e[l+zs+1]=i,e[l+2*zs]=a,e[l+2*zs+1]=s,e[l+3*zs]=u,e[l+3*zs+1]=c},ks=function(e,t,r){var n=4*t*zs;e[n+3]=r[0],e[n+3+1]=r[1],e[n+zs+3]=r[2],e[n+zs+3+1]=r[3],e[n+2*zs+3]=r[4],e[n+2*zs+3+1]=r[5],e[n+3*zs+3]=r[6],e[n+3*zs+3+1]=r[7]};function Us(e,t,r){for(var n=0;n<r.length;n++){var o=r[n],i=o.width,a=o.height,s=o.x,u=o.y;Fs(e,n,s,u-a,s,u,s+i,u,s+i,u-a),ks(e,n,o.glyph.uvs),t[6*n]=4*n,t[6*n+1]=4*n+1,t[6*n+2]=4*n+2,t[6*n+3]=4*n,t[6*n+4]=4*n+2,t[6*n+5]=4*n+3}}var Bs=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},e(t,r)};return function(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),js={value:{type:"string"},size:{type:"number",defaultValue:1},color:{type:"number-array",defaultValue:[0,0,0,1]},anchor:{type:"number-array",defaultValue:[0,1]},width:{type:"number"},height:{type:"number"},lineHeight:{type:"number"},padding:{type:"number-array",defaultValue:[0,0,0,0]},horzAlign:{type:"string",defaultValue:"left"},vertAlign:{type:"string",defaultValue:"top"},neverCull:{type:"boolean",defaultValue:!1},uniforms:{type:"map"},states:{type:"map"}},Vs=[{name:"a_position",format:2,offset:0,usage:1},{name:"a_texCoord",format:1,offset:12,usage:4},{name:"a_normal",format:2,offset:20,usage:2}],zs=8,Gs=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.schema=js,t.priority=300,t._value="",t._size=20,t._color=[0,0,0,1],t._anchor=[0,1],t._width=void 0,t._height=void 0,t._lineHeight=1,t._padding=[0,0,0,0],t._horzAlign=Cs.Left,t._vertAlign=Ms.Top,t._glyphs=[],t._renderDatas=[],t}return Bs(t,e),Object.defineProperty(t.prototype,"id",{get:function(){return this._mesh.id},enumerable:!1,configurable:!0}),t.prototype.onAdd=function(e,t){this._material=new Ir(this.scene),this._material.initByEffect(this.scene.assets.getAsset("effect","simple")),this._processData(t,{}),this._updateRenderData(t),this._glyphs.length>0&&(this._rebuildMesh(t.neverCull),this._setMeshData(this._material,t.uniforms))},t.prototype.onTick=function(e,t){var r,n,o;this._trs&&(null===(r=this._cull)||void 0===r||r.setActive(this._trs.visible),null===(n=this._cull)||void 0===n||n.setLayer(this._trs.layer)),null===(o=this._material)||void 0===o||o._checkTextures(e)},t.prototype.onUpdate=function(e,t){this._mesh&&(this._rebuildMesh(!0),this._processData(e,t),this._updateRenderData(e),this._setMeshData(this._material,e.uniforms,e.states))},t.prototype.onRemove=function(e,t){var r;null===(r=this._cull)||void 0===r||r.setActive(!1)},t.prototype.onRelease=function(e){this._mesh.destroy(),this._cull.destroy(),this._mesh=void 0,this._cull=void 0,this._glyphs=[],this._renderDatas=[]},t.prototype._processData=function(e,t){var r=e.value,n=e.size,o=e.color,i=e.anchor,a=e.width,s=e.height,u=e.lineHeight,c=e.padding,l=e.vertAlign,f=e.horzAlign;if(r&&r!==(null==t?void 0:t.value)&&(this._value=r),n&&n!==(null==t?void 0:t.size)&&(this._size=n),o&&o!==(null==t?void 0:t.color)&&(this._color=o),i&&i!==(null==t?void 0:t.anchor)&&(this._anchor=i),a&&a!==(null==t?void 0:t.width)&&(this._width=a),s&&s!==(null==t?void 0:t.height)&&(this._height=s),u&&u!==(null==t?void 0:t.lineHeight)&&(this._lineHeight=u),c&&c!==(null==t?void 0:t.padding)&&(this._padding=c),l&&l!==(null==t?void 0:t.vertAlign))switch(l.toLowerCase()){case"top":this._vertAlign=Ms.Top;break;case"middle":this._vertAlign=Ms.Middle;break;case"bottom":this._vertAlign=Ms.Bottom}if(f&&f!==(null==t?void 0:t.horzAlign))switch(f.toLowerCase()){case"left":this._horzAlign=Cs.Left;break;case"center":this._horzAlign=Cs.Center;break;case"right":this._horzAlign=Cs.Right}},t.prototype._updateRenderData=function(e){var t=this._value,r=Ns(this.scene,t,0,0,e.size,"Arial");if(this._glyphs=r,this._glyphs.length>0){var n=[],o=[];Ls(this._glyphs,n,o,void 0===this._width?-1:this._width,void 0===this._height?-1:this._height,this._lineHeight,this._anchor,this._padding,this._vertAlign,this._horzAlign),this._renderDatas=[];for(var i=0;i<n.length;i++){var a=o[i],s=n[i],u=s.length,c=4*u,l=6*u,f=new Float32Array(c*zs),p=new Uint16Array(l);Us(f,p,s);var h={vertexBuffer:new(he(this.scene).VertexBuffer)(f,this._getVertexLayout()),indexBuffer:new(he(this.scene).IndexBuffer)(p,!1),vertexNum:c,indiceNum:l,texture:a};this._renderDatas.push(h)}}},t.prototype._rebuildMesh=function(e){var t=this.el.getComponent(Di);this._trs=t,this._cull||(this._cull=new(he(this.scene).CullingComponent)(t.node),this._cull.bindEntity(t.node)),this._mesh=new(he(this.scene).MeshRendererComponent)(t.node,{meshCount:this._renderDatas.length,renderType:this._getMeshType(),uniformBlock:new(he(this.scene).UniformBlock)(this._getUniformDesc()),culling:e?void 0:this._cull,macros:{}})},t.prototype._setMeshData=function(e,t,r){t||r?this._sourceMaterial===e&&this._sourceMaterial!==this._material||(this._material=e.clone()):this._material=e,t&&this._material._parseUniforms(t),r&&this._material._parseRenderStates(r),this._sourceMaterial=e;for(var n=0;n<this._renderDatas.length;n+=1){var o=this._renderDatas[n];this._mesh.setVertexBuffer(n,o.vertexBuffer),this._mesh.setIndexBuffer(n,o.indexBuffer),this._mesh.setStartIndex(n,0),this._mesh.setNumIndices(n,o.indiceNum),this._mesh.setMaterial(n,this._material.kanataMaterial),this._material.setFontTexture("u_baseColorMap",o.texture),this._material.alphaMode="BLEND",this._material.setRenderState("cullOn",!1),this._material.renderQueue=3e3}},t.prototype._getUniformDesc=function(){return this.scene.assets.getAsset("uniform-desc","mesh-static")},t.prototype._getMeshType=function(){return ue.EMeshRenderType.Static3D},t.prototype._getVertexLayout=function(){var e=this.scene._requestTmpObj("builtin-text-vertex-layouts");return e.text||(e.text=this.scene.createVertexLayout({attributes:Vs,stride:32})),e.text},t.QueryGlyphs=Ns,t.Typesetting=Ls,t.FillRenderData=Us,t}(oo);const Ws=Gs;var Xs=function(){function e(){}return e.prototype.setProperty=function(e){var t=this;null==e||e.forEach((function(e){var r=e[0],n=e[1];switch(typeof t[r]){case"number":t[r]=parseFloat(n);break;case"object":var o=n.split(" ");t[r]=Tt.createFromNumber(parseFloat(o[0]),parseFloat(o[1]),parseFloat(o[2]))}}))},e}(),Hs=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},e(t,r)};return function(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();const qs=function(e){function t(){var t=e.call(this)||this;return t.direction=Tt.createFromNumber(0,1,0),t.direction2=Tt.createFromNumber(0,1,0),t.minEmitBox=Tt.createFromNumber(-.5,-.5,-.5),t.maxEmitBox=Tt.createFromNumber(.5,.5,.5),t}return Hs(t,e),t.prototype.startDirection=function(e,t){var r=mt(this.direction.x,this.direction2.x),n=mt(this.direction.y,this.direction2.y),o=mt(this.direction.z,this.direction2.z),i=Tt.createFromNumber(r,n,o);t.set(i.normalize().transformDirection(e))},t.prototype.startPosition=function(e,t){var r=mt(this.minEmitBox.x,this.maxEmitBox.x),n=mt(this.minEmitBox.y,this.maxEmitBox.y),o=mt(this.minEmitBox.z,this.maxEmitBox.z),i=Tt.createFromNumber(r,n,o);t.set(i.applyMatrix4(e))},t}(Xs);var Ys=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},e(t,r)};return function(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();const Zs=function(e){function t(){var t=e.call(this)||this;return t.direction=Tt.createFromNumber(0,1,0),t.direction2=Tt.createFromNumber(0,1,0),t}return Ys(t,e),t.prototype.startDirection=function(e,t){var r=mt(this.direction.x,this.direction2.x),n=mt(this.direction.y,this.direction2.y),o=mt(this.direction.z,this.direction2.z),i=Tt.createFromNumber(r,n,o);t.set(i.normalize().transformDirection(e))},t.prototype.startPosition=function(e,t){t.set(Tt.createFromNumber(0,0,0).applyMatrix4(e))},t}(Xs),Ks=[[.07450980392156863,.07450980392156863,.07058823529411765,.0784313725490196,.0784313725490196,.06274509803921569,.07058823529411765,.07058823529411765,.07058823529411765,.06666666666666667,.07058823529411765,.0588235294117647,.06666666666666667,.08235294117647057,.07058823529411765,.07058823529411765,.07058823529411765,.06666666666666667,.0588235294117647,.06274509803921569,.07058823529411765,.06666666666666667,.07450980392156863,.06274509803921569,.07450980392156863,.08235294117647057,.06666666666666667,.07058823529411765,.06666666666666667,.07058823529411765,.06666666666666667,.0784313725490196,.07058823529411765,.07450980392156863,.07450980392156863,.07450980392156863,.06666666666666667,.06274509803921569,.09803921568627452,.07450980392156863,.0784313725490196,.0784313725490196,.0588235294117647,.07058823529411765,.09411764705882353,.07450980392156863,.07058823529411765,.10980392156862745,.06274509803921569,.06666666666666667,.07058823529411765,.07058823529411765,.07058823529411765,.07450980392156863,.07058823529411765,.07058823529411765,.07058823529411765,.07058823529411765,.09411764705882353,.07058823529411765,.07058823529411765,.09411764705882353,.07058823529411765,.06666666666666667,.06666666666666667,.07058823529411765,.07058823529411765,.09019607843137255,.07058823529411765,.08235294117647057,.06274509803921569,.0784313725490196,.0588235294117647,.09019607843137255,.07058823529411765,.07450980392156863,.06274509803921569,.08627450980392157,.06666666666666667,.0588235294117647,.0784313725490196,.07058823529411765,.06274509803921569,.07058823529411765,.0588235294117647,.07450980392156863,.07450980392156863,.054901960784313725,.08627450980392157,.0784313725490196,.06274509803921569,.07450980392156863,.07450980392156863,.07058823529411765,.07058823529411765,.06274509803921569,.0784313725490196,.07058823529411765,.07058823529411765,.0784313725490196,.07058823529411765,.06666666666666667,.07058823529411765,.07058823529411765,.07450980392156863,.1450980392156863,.07058823529411765],[.09019607843137255,.08235294117647057,.07450980392156863,.07058823529411765,.09019607843137255,.0784313725490196,.06274509803921569,.06274509803921569,.0784313725490196,.07058823529411765,.06666666666666667,.06666666666666667,.07450980392156863,.07450980392156863,.06666666666666667,.07450980392156863,.09019607843137255,.06666666666666667,.07058823529411765,.07058823529411765,.07450980392156863,.06666666666666667,.10196078431372549,.06274509803921569,.07058823529411765,.07450980392156863,.07058823529411765,.0588235294117647,.06274509803921569,.07058823529411765,.0588235294117647,.07058823529411765,.06666666666666667,.07058823529411765,.06666666666666667,.07058823529411765,.07058823529411765,.0784313725490196,.0784313725490196,.07058823529411765,.0784313725490196,.07450980392156863,.07450980392156863,.07058823529411765,.06666666666666667,.07058823529411765,.07058823529411765,.07450980392156863,.07058823529411765,.07450980392156863,.07450980392156863,.07058823529411765,.08235294117647057,.07058823529411765,.08235294117647057,.07058823529411765,.07058823529411765,.07058823529411765,.07058823529411765,.07450980392156863,.07058823529411765,.06666666666666667,.0784313725490196,.07450980392156863,.07058823529411765,.054901960784313725,.06666666666666667,.07058823529411765,.07058823529411765,.06274509803921569,.0784313725490196,.0784313725490196,.06666666666666667,.07058823529411765,.07058823529411765,.07058823529411765,.06666666666666667,.07450980392156863,.0588235294117647,.07058823529411765,.07450980392156863,.07450980392156863,.0784313725490196,.07058823529411765,.06666666666666667,.06666666666666667,.07450980392156863,.050980392156862744,.0588235294117647,.07450980392156863,.07058823529411765,.0588235294117647,.07058823529411765,.07058823529411765,.07450980392156863,.0784313725490196,.06274509803921569,.07058823529411765,.10588235294117647,.07450980392156863,.07450980392156863,.0588235294117647,.07058823529411765,.0588235294117647,.07058823529411765,.08235294117647057,.0784313725490196],[.0784313725490196,.0588235294117647,.07058823529411765,.06666666666666667,.0784313725490196,.0588235294117647,.06666666666666667,.0784313725490196,.07450980392156863,.0784313725490196,.06274509803921569,.050980392156862744,.06666666666666667,.07450980392156863,.07058823529411765,.07450980392156863,.09411764705882353,.06666666666666667,.09411764705882353,.06666666666666667,.0784313725490196,.07450980392156863,.07058823529411765,.06666666666666667,.07450980392156863,.07450980392156863,.06274509803921569,.07450980392156863,.054901960784313725,.07450980392156863,.0588235294117647,.07058823529411765,.07058823529411765,.07058823529411765,.06666666666666667,.07058823529411765,.06666666666666667,.07058823529411765,.0784313725490196,.07450980392156863,.07450980392156863,.0588235294117647,.07058823529411765,.07450980392156863,.07450980392156863,.06274509803921569,.06274509803921569,.06274509803921569,.07058823529411765,.07450980392156863,.07058823529411765,.06666666666666667,.07058823529411765,.07450980392156863,.06666666666666667,.06666666666666667,.07450980392156863,.07058823529411765,.0784313725490196,.0588235294117647,.07450980392156863,.07058823529411765,.07450980392156863,.07450980392156863,.07450980392156863,.07058823529411765,.07450980392156863,.07450980392156863,.0588235294117647,.07058823529411765,.06666666666666667,.07450980392156863,.06274509803921569,.06666666666666667,.0588235294117647,.08235294117647057,.06666666666666667,.08627450980392157,.08627450980392157,.0784313725490196,.07058823529411765,.08235294117647057,.07450980392156863,.06666666666666667,.07058823529411765,.13725490196078433,.10196078431372549,.07450980392156863,.07058823529411765,.06666666666666667,.07058823529411765,.07450980392156863,.07058823529411765,.07450980392156863,.06666666666666667,.07058823529411765,.06274509803921569,.07058823529411765,.07450980392156863,.07450980392156863,.07058823529411765,.07450980392156863,.07058823529411765,.07058823529411765,.0588235294117647,.08627450980392157,.07058823529411765],[.06666666666666667,.08235294117647057,.0588235294117647,.0784313725490196,.07058823529411765,.0588235294117647,.07450980392156863,.0784313725490196,.10980392156862745,.07058823529411765,.08235294117647057,.08627450980392157,.0588235294117647,.06274509803921569,.08235294117647057,.07058823529411765,.06666666666666667,.07058823529411765,.07058823529411765,.09411764705882353,.06666666666666667,.08235294117647057,.06666666666666667,.07058823529411765,.07450980392156863,.07450980392156863,.07058823529411765,.07450980392156863,.09411764705882353,.07058823529411765,.06666666666666667,.07058823529411765,.07058823529411765,.07058823529411765,.0784313725490196,.07450980392156863,.07450980392156863,.07450980392156863,.06666666666666667,.08235294117647057,.09019607843137255,.06274509803921569,.08235294117647057,.06666666666666667,.07450980392156863,.07058823529411765,.07058823529411765,.08235294117647057,.0784313725490196,.08627450980392157,.08627450980392157,.07058823529411765,.050980392156862744,.07058823529411765,.0588235294117647,.06666666666666667,.07450980392156863,.07058823529411765,.07058823529411765,.07058823529411765,.07058823529411765,.07450980392156863,.09803921568627452,.06666666666666667,.07058823529411765,.07450980392156863,.07058823529411765,.07450980392156863,.07058823529411765,.07058823529411765,.07058823529411765,.09411764705882353,.0588235294117647,.06274509803921569,.07058823529411765,.07058823529411765,.0784313725490196,.1176470588235294,.10196078431372549,.09019607843137255,.0784313725490196,.07058823529411765,.0784313725490196,.08235294117647057,.07058823529411765,.07058823529411765,.06666666666666667,.09019607843137255,.07450980392156863,.07450980392156863,.07058823529411765,.07058823529411765,.07450980392156863,.07450980392156863,.07450980392156863,.07058823529411765,.07058823529411765,.07450980392156863,.07450980392156863,.07058823529411765,.0784313725490196,.0784313725490196,.07450980392156863,.07450980392156863,.06666666666666667,.07058823529411765,.07058823529411765],[.11372549019607843,.054901960784313725,.07058823529411765,.06666666666666667,.0588235294117647,.0784313725490196,.09019607843137255,.06666666666666667,.08627450980392157,.07058823529411765,.054901960784313725,.07450980392156863,.08235294117647057,.050980392156862744,.06274509803921569,.07058823529411765,.07450980392156863,.06274509803921569,.050980392156862744,.043137254901960784,.0784313725490196,.0784313725490196,.06274509803921569,.06274509803921569,.07450980392156863,.06274509803921569,.06274509803921569,.0588235294117647,.08235294117647057,.07450980392156863,.08627450980392157,.07450980392156863,.07058823529411765,.07058823529411765,.07058823529411765,.06666666666666667,.07450980392156863,.07058823529411765,.06666666666666667,.0588235294117647,.054901960784313725,.09411764705882353,.07058823529411765,.07058823529411765,.0784313725490196,.0588235294117647,.09411764705882353,.0784313725490196,.0784313725490196,.10980392156862745,.07058823529411765,.07450980392156863,.06274509803921569,.07058823529411765,.07450980392156863,.06666666666666667,.06666666666666667,.07058823529411765,.07058823529411765,.07058823529411765,.07450980392156863,.07450980392156863,.07450980392156863,.06666666666666667,.06666666666666667,.07450980392156863,.07058823529411765,.09019607843137255,.06274509803921569,.07450980392156863,.07058823529411765,.07450980392156863,.07450980392156863,.07058823529411765,.054901960784313725,.07058823529411765,.09019607843137255,.0784313725490196,.07058823529411765,.07450980392156863,.09803921568627452,.07058823529411765,.07058823529411765,.07058823529411765,.07058823529411765,.07058823529411765,.07058823529411765,.07058823529411765,.07450980392156863,.07450980392156863,.07058823529411765,.07058823529411765,.07450980392156863,.07450980392156863,.06666666666666667,.07058823529411765,.07058823529411765,.07058823529411765,.07058823529411765,.07450980392156863,.07450980392156863,.07058823529411765,.07450980392156863,.07058823529411765,.07058823529411765,.07058823529411765,.07450980392156863],[.07450980392156863,.07450980392156863,.07450980392156863,.09019607843137255,.10588235294117647,.07450980392156863,.0784313725490196,.07450980392156863,.07058823529411765,.0784313725490196,.0784313725490196,.06666666666666667,.07058823529411765,.09019607843137255,.07450980392156863,.0588235294117647,.054901960784313725,.06666666666666667,.07450980392156863,.1176470588235294,.06274509803921569,.08235294117647057,.07058823529411765,.06666666666666667,.07058823529411765,.08627450980392157,.0588235294117647,.0784313725490196,.06666666666666667,.07450980392156863,.07450980392156863,.0588235294117647,.06666666666666667,.07450980392156863,.07450980392156863,.07058823529411765,.07058823529411765,.0588235294117647,.12549019607843137,.06666666666666667,.06274509803921569,.0784313725490196,.06666666666666667,.07450980392156863,.08235294117647057,.0588235294117647,.06274509803921569,.0784313725490196,.07450980392156863,.08235294117647057,.07450980392156863,.06666666666666667,.06666666666666667,.0588235294117647,.06666666666666667,.07058823529411765,.06274509803921569,.07058823529411765,.07058823529411765,.07450980392156863,.06666666666666667,.07058823529411765,.07058823529411765,.08235294117647057,.10196078431372549,.07450980392156863,.09019607843137255,.07058823529411765,.07058823529411765,.07058823529411765,.0784313725490196,.07450980392156863,.06666666666666667,.07058823529411765,.07058823529411765,.07450980392156863,.0588235294117647,.06274509803921569,.06274509803921569,.0784313725490196,.07058823529411765,.07058823529411765,.07450980392156863,.07058823529411765,.07058823529411765,.07450980392156863,.07058823529411765,.07450980392156863,.07450980392156863,.07058823529411765,.07058823529411765,.0588235294117647,.06274509803921569,.0588235294117647,.07058823529411765,.09411764705882353,.07058823529411765,.07450980392156863,.07058823529411765,.07450980392156863,.07058823529411765,.07058823529411765,.07058823529411765,.07058823529411765,.07450980392156863,.07058823529411765,.07450980392156863],[.07058823529411765,.0784313725490196,.10196078431372549,.08235294117647057,.07450980392156863,.07450980392156863,.07058823529411765,.0784313725490196,.06274509803921569,.07058823529411765,.09019607843137255,.050980392156862744,.06666666666666667,.08235294117647057,.07058823529411765,.0784313725490196,.08235294117647057,.06666666666666667,.054901960784313725,.0588235294117647,.11372549019607843,.0784313725490196,.0784313725490196,.06666666666666667,.06274509803921569,.047058823529411764,.0784313725490196,.08235294117647057,.06274509803921569,.0784313725490196,.07450980392156863,.0784313725490196,.08627450980392157,.054901960784313725,.06666666666666667,.10588235294117647,.07058823529411765,.07450980392156863,.0588235294117647,.07450980392156863,.07450980392156863,.07450980392156863,.06666666666666667,.07058823529411765,.08235294117647057,.07450980392156863,.06274509803921569,.06666666666666667,.06666666666666667,.08627450980392157,.09411764705882353,.07450980392156863,.07058823529411765,.07058823529411765,.07058823529411765,.07058823529411765,.07058823529411765,.06274509803921569,.07450980392156863,.07450980392156863,.07450980392156863,.10196078431372549,.0784313725490196,.07450980392156863,.07450980392156863,.07058823529411765,.06274509803921569,.07058823529411765,.07058823529411765,.050980392156862744,.07058823529411765,.07450980392156863,.050980392156862744,.06666666666666667,.06666666666666667,.06274509803921569,.07058823529411765,.06666666666666667,.07058823529411765,.07058823529411765,.07058823529411765,.07058823529411765,.06666666666666667,.07058823529411765,.0784313725490196,.06666666666666667,.07450980392156863,.06274509803921569,.07058823529411765,.0784313725490196,.07450980392156863,.07450980392156863,.07058823529411765,.08235294117647057,.0784313725490196,.08627450980392157,.07058823529411765,.07058823529411765,.07058823529411765,.07450980392156863,.07058823529411765,.07058823529411765,.07058823529411765,.07450980392156863,.06666666666666667,.09019607843137255,.07450980392156863],[.06666666666666667,.06274509803921569,.08235294117647057,.07450980392156863,.09803921568627452,.06666666666666667,.06274509803921569,.08235294117647057,.10196078431372549,.0784313725490196,.10588235294117647,.07058823529411765,.07450980392156863,.07058823529411765,.07058823529411765,.06666666666666667,.07450980392156863,.0784313725490196,.054901960784313725,.06274509803921569,.10980392156862745,.0784313725490196,.06666666666666667,.06666666666666667,.050980392156862744,.07058823529411765,.054901960784313725,.08235294117647057,.0588235294117647,.07450980392156863,.07058823529411765,.07058823529411765,.07450980392156863,.07058823529411765,.07450980392156863,.07450980392156863,.07450980392156863,.07058823529411765,.054901960784313725,.07450980392156863,.07058823529411765,.07058823529411765,.07450980392156863,.07058823529411765,.07058823529411765,.07450980392156863,.06666666666666667,.0784313725490196,.07450980392156863,.07058823529411765,.0784313725490196,.07058823529411765,.07058823529411765,.07058823529411765,.07058823529411765,.0784313725490196,.0588235294117647,.0588235294117647,.06666666666666667,.08627450980392157,.08235294117647057,.07058823529411765,.0588235294117647,.07058823529411765,.07450980392156863,.07450980392156863,.07058823529411765,.0784313725490196,.06274509803921569,.07450980392156863,.07450980392156863,.06666666666666667,.07450980392156863,.06666666666666667,.07058823529411765,.06274509803921569,.07058823529411765,.07058823529411765,.07058823529411765,.07058823529411765,.07058823529411765,.07058823529411765,.07450980392156863,.07058823529411765,.07058823529411765,.08235294117647057,.07450980392156863,.07450980392156863,.07058823529411765,.06666666666666667,.07058823529411765,.07450980392156863,.09411764705882353,.07058823529411765,.11372549019607843,.07450980392156863,.07450980392156863,.09803921568627452,.07058823529411765,.07058823529411765,.07058823529411765,.07058823529411765,.07058823529411765,.07058823529411765,.07058823529411765,.07450980392156863,.07450980392156863],[.06274509803921569,.07450980392156863,.07450980392156863,.07058823529411765,.08235294117647057,.06666666666666667,.0588235294117647,.06666666666666667,.06666666666666667,.09803921568627452,.08235294117647057,.07058823529411765,.0784313725490196,.07058823529411765,.0588235294117647,.0784313725490196,.06666666666666667,.0784313725490196,.06274509803921569,.06666666666666667,.07450980392156863,.07058823529411765,.07058823529411765,.06274509803921569,.07058823529411765,.06274509803921569,.07450980392156863,.07450980392156863,.07058823529411765,.06666666666666667,.10588235294117647,.07450980392156863,.0784313725490196,.07450980392156863,.07450980392156863,.0784313725490196,.0784313725490196,.07058823529411765,.07450980392156863,.07450980392156863,.0784313725490196,.07450980392156863,.07450980392156863,.06666666666666667,.07058823529411765,.07450980392156863,.07450980392156863,.07450980392156863,.07058823529411765,.08235294117647057,.07450980392156863,.07058823529411765,.07058823529411765,.07058823529411765,.06666666666666667,.07058823529411765,.08235294117647057,.07450980392156863,.0784313725490196,.0784313725490196,.0588235294117647,.07450980392156863,.07058823529411765,.0784313725490196,.06666666666666667,.07058823529411765,.07450980392156863,.07058823529411765,.0784313725490196,.0784313725490196,.07058823529411765,.07058823529411765,.06274509803921569,.07058823529411765,.06666666666666667,.07058823529411765,.07058823529411765,.07058823529411765,.07058823529411765,.0784313725490196,.07058823529411765,.0784313725490196,.07450980392156863,.07450980392156863,.07058823529411765,.07058823529411765,.07450980392156863,.07450980392156863,.07058823529411765,.07450980392156863,.07450980392156863,.07058823529411765,.0784313725490196,.07450980392156863,.06274509803921569,.07058823529411765,.07058823529411765,.07450980392156863,.07058823529411765,.07058823529411765,.07058823529411765,.07058823529411765,.07058823529411765,.07058823529411765,.08627450980392157,.09803921568627452,.07450980392156863],[.06274509803921569,.06666666666666667,.07058823529411765,.06666666666666667,.06274509803921569,.08235294117647057,.06666666666666667,.07058823529411765,.07058823529411765,.07450980392156863,.08235294117647057,.0784313725490196,.06666666666666667,.050980392156862744,.06666666666666667,.08235294117647057,.06274509803921569,.07058823529411765,.0588235294117647,.06666666666666667,.07450980392156863,.07058823529411765,.06274509803921569,.054901960784313725,.0784313725490196,.0784313725490196,.07450980392156863,.07058823529411765,.08627450980392157,.08235294117647057,.0588235294117647,.0784313725490196,.06274509803921569,.07450980392156863,.07450980392156863,.06666666666666667,.0588235294117647,.0588235294117647,.08235294117647057,.06666666666666667,.07450980392156863,.07058823529411765,.07058823529411765,.06274509803921569,.07058823529411765,.07058823529411765,.08235294117647057,.0784313725490196,.06666666666666667,.07450980392156863,.07058823529411765,.07450980392156863,.07450980392156863,.07058823529411765,.0588235294117647,.054901960784313725,.07058823529411765,.07058823529411765,.06274509803921569,.0588235294117647,.0588235294117647,.08235294117647057,.07058823529411765,.06666666666666667,.07450980392156863,.06666666666666667,.07450980392156863,.0784313725490196,.08627450980392157,.07450980392156863,.07058823529411765,.07058823529411765,.06666666666666667,.07450980392156863,.0784313725490196,.07450980392156863,.07058823529411765,.07450980392156863,.07058823529411765,.07058823529411765,.07058823529411765,.07450980392156863,.07450980392156863,.0784313725490196,.07450980392156863,.07058823529411765,.07450980392156863,.07450980392156863,.07450980392156863,.0784313725490196,.07058823529411765,.06274509803921569,.0784313725490196,.07058823529411765,.07450980392156863,.07450980392156863,.07450980392156863,.07058823529411765,.0784313725490196,.06666666666666667,.07450980392156863,.07450980392156863,.07058823529411765,.07058823529411765,.07058823529411765,.07058823529411765,.0588235294117647],[.08235294117647057,.07058823529411765,.06666666666666667,.06274509803921569,.054901960784313725,.054901960784313725,.07058823529411765,.07450980392156863,.08235294117647057,.06666666666666667,.06666666666666667,.09019607843137255,.07450980392156863,.06666666666666667,.09411764705882353,.08235294117647057,.06274509803921569,.07450980392156863,.054901960784313725,.06274509803921569,.06274509803921569,.07450980392156863,.06274509803921569,.0588235294117647,.07058823529411765,.10980392156862745,.07058823529411765,.0588235294117647,.050980392156862744,.07450980392156863,.07058823529411765,.06274509803921569,.08235294117647057,.06666666666666667,.07450980392156863,.07058823529411765,.0784313725490196,.07450980392156863,.07058823529411765,.06274509803921569,.07450980392156863,.07058823529411765,.07058823529411765,.07450980392156863,.06274509803921569,.07058823529411765,.0784313725490196,.08627450980392157,.07450980392156863,.0588235294117647,.07058823529411765,.07058823529411765,.07450980392156863,.06666666666666667,.08627450980392157,.08235294117647057,.10588235294117647,.06666666666666667,.06666666666666667,.07450980392156863,.07058823529411765,.07450980392156863,.07450980392156863,.06666666666666667,.07058823529411765,.07450980392156863,.054901960784313725,.07058823529411765,.0784313725490196,.06666666666666667,.0784313725490196,.07058823529411765,.07058823529411765,.07450980392156863,.0784313725490196,.07450980392156863,.07450980392156863,.07058823529411765,.07058823529411765,.06274509803921569,.08627450980392157,.07450980392156863,.07450980392156863,.07058823529411765,.07058823529411765,.07450980392156863,.07058823529411765,.07058823529411765,.07058823529411765,.0784313725490196,.07058823529411765,.07058823529411765,.07058823529411765,.07450980392156863,.08235294117647057,.07450980392156863,.07450980392156863,.06666666666666667,.08627450980392157,.06666666666666667,.08235294117647057,.07058823529411765,.06666666666666667,.07450980392156863,.06666666666666667,.047058823529411764,.07450980392156863],[.0588235294117647,.08627450980392157,.07058823529411765,.07058823529411765,.07450980392156863,.09019607843137255,.0784313725490196,.06274509803921569,.07058823529411765,.054901960784313725,.06666666666666667,.0588235294117647,.06274509803921569,.09411764705882353,.0784313725490196,.0588235294117647,.07450980392156863,.06274509803921569,.06666666666666667,.06666666666666667,.06274509803921569,.08235294117647057,.07450980392156863,.08235294117647057,.07450980392156863,.0784313725490196,.0784313725490196,.08235294117647057,.08235294117647057,.0784313725490196,.047058823529411764,.09411764705882353,.07450980392156863,.0784313725490196,.0784313725490196,.08235294117647057,.07450980392156863,.0784313725490196,.08235294117647057,.06666666666666667,.06666666666666667,.0784313725490196,.09411764705882353,.07058823529411765,.07450980392156863,.07058823529411765,.09019607843137255,.0784313725490196,.10980392156862745,.0588235294117647,.0588235294117647,.07058823529411765,.07058823529411765,.07450980392156863,.07450980392156863,.08235294117647057,.06666666666666667,.0784313725490196,.07058823529411765,.07450980392156863,.07450980392156863,.07058823529411765,.08627450980392157,.06666666666666667,.06274509803921569,.054901960784313725,.08235294117647057,.07058823529411765,.07058823529411765,.08235294117647057,.054901960784313725,.09019607843137255,.07450980392156863,.07058823529411765,.11372549019607843,.0784313725490196,.07058823529411765,.07058823529411765,.07058823529411765,.07450980392156863,.07450980392156863,.0588235294117647,.09019607843137255,.08627450980392157,.06274509803921569,.07450980392156863,.0784313725490196,.0588235294117647,.07450980392156863,.06274509803921569,.07450980392156863,.07058823529411765,.06666666666666667,.07450980392156863,.0784313725490196,.06274509803921569,.0588235294117647,.06666666666666667,.06274509803921569,.09803921568627452,.1176470588235294,.07058823529411765,.07058823529411765,.07058823529411765,.08235294117647057,.07450980392156863,.07058823529411765],[.0588235294117647,.08627450980392157,.06666666666666667,.06666666666666667,.054901960784313725,.09019607843137255,.050980392156862744,.07058823529411765,.07450980392156863,.06274509803921569,.050980392156862744,.0588235294117647,.054901960784313725,.0784313725490196,.07058823529411765,.1176470588235294,.08627450980392157,.054901960784313725,.047058823529411764,.09411764705882353,.06666666666666667,.0784313725490196,.09019607843137255,.06274509803921569,.0784313725490196,.06666666666666667,.08627450980392157,.0588235294117647,.06666666666666667,.08627450980392157,.06274509803921569,.06274509803921569,.09411764705882353,.0784313725490196,.06666666666666667,.07058823529411765,.07450980392156863,.09019607843137255,.07450980392156863,.07450980392156863,.08235294117647057,.07058823529411765,.07450980392156863,.07058823529411765,.0784313725490196,.07058823529411765,.06666666666666667,.050980392156862744,.07450980392156863,.06666666666666667,.06666666666666667,.07058823529411765,.10588235294117647,.07058823529411765,.054901960784313725,.07450980392156863,.07058823529411765,.08235294117647057,.06666666666666667,.08235294117647057,.07450980392156863,.08627450980392157,.10980392156862745,.07058823529411765,.07058823529411765,.09019607843137255,.07450980392156863,.07450980392156863,.07058823529411765,.06666666666666667,.07058823529411765,.06666666666666667,.054901960784313725,.07450980392156863,.06274509803921569,.07058823529411765,.08235294117647057,.0784313725490196,.07058823529411765,.07058823529411765,.07450980392156863,.07450980392156863,.07058823529411765,.07058823529411765,.07058823529411765,.06666666666666667,.06666666666666667,.09019607843137255,.07058823529411765,.07450980392156863,.07058823529411765,.07058823529411765,.06666666666666667,.07450980392156863,.07450980392156863,.07450980392156863,.09803921568627452,.07450980392156863,.0784313725490196,.07450980392156863,.07058823529411765,.07450980392156863,.07058823529411765,.06274509803921569,.07058823529411765,.07058823529411765,.07058823529411765],[.06666666666666667,.08235294117647057,.06274509803921569,.07450980392156863,.0784313725490196,.0588235294117647,.07058823529411765,.06666666666666667,.06274509803921569,.09019607843137255,.07058823529411765,.08627450980392157,.06274509803921569,.07450980392156863,.06274509803921569,.06666666666666667,.07058823529411765,.09019607843137255,.07058823529411765,.1411764705882353,.06666666666666667,.08627450980392157,.06666666666666667,.050980392156862744,.06274509803921569,.08627450980392157,.07450980392156863,.054901960784313725,.0588235294117647,.07450980392156863,.06274509803921569,.0784313725490196,.07058823529411765,.07058823529411765,.07450980392156863,.0784313725490196,.07450980392156863,.06274509803921569,.07450980392156863,.07058823529411765,.07058823529411765,.07058823529411765,.08627450980392157,.07450980392156863,.08235294117647057,.06666666666666667,.0588235294117647,.0784313725490196,.07450980392156863,.06666666666666667,.07058823529411765,.07450980392156863,.0588235294117647,.06666666666666667,.07450980392156863,.06666666666666667,.07058823529411765,.08627450980392157,.07058823529411765,.06666666666666667,.08627450980392157,.06666666666666667,.09803921568627452,.0784313725490196,.0588235294117647,.06666666666666667,.07450980392156863,.06666666666666667,.06666666666666667,.07058823529411765,.0784313725490196,.06666666666666667,.09803921568627452,.07058823529411765,.07450980392156863,.0784313725490196,.07450980392156863,.07058823529411765,.06666666666666667,.054901960784313725,.07450980392156863,.07058823529411765,.11372549019607843,.07058823529411765,.06666666666666667,.0784313725490196,.07450980392156863,.07450980392156863,.07058823529411765,.07450980392156863,.1176470588235294,.07450980392156863,.06666666666666667,.06666666666666667,.07450980392156863,.07450980392156863,.07450980392156863,.07058823529411765,.07058823529411765,.06666666666666667,.07450980392156863,.07058823529411765,.07058823529411765,.07450980392156863,.07058823529411765,.07058823529411765,.07058823529411765],[.07450980392156863,.07450980392156863,.07058823529411765,.06274509803921569,.07058823529411765,.06666666666666667,.09411764705882353,.08235294117647057,.07058823529411765,.07058823529411765,.0588235294117647,.0784313725490196,.0784313725490196,.06666666666666667,.08235294117647057,.07058823529411765,.06274509803921569,.06666666666666667,.0784313725490196,.06274509803921569,.07450980392156863,.07058823529411765,.06274509803921569,.0784313725490196,.054901960784313725,.07058823529411765,.07058823529411765,.0588235294117647,.06274509803921569,.0588235294117647,.054901960784313725,.06666666666666667,.06666666666666667,.06666666666666667,.07450980392156863,.054901960784313725,.07058823529411765,.07450980392156863,.06666666666666667,.06274509803921569,.07450980392156863,.08235294117647057,.0588235294117647,.09803921568627452,.07058823529411765,.09019607843137255,.06666666666666667,.06274509803921569,.0588235294117647,.06274509803921569,.07450980392156863,.07450980392156863,.0784313725490196,.06666666666666667,.07058823529411765,.10196078431372549,.0784313725490196,.10196078431372549,.07450980392156863,.07058823529411765,.050980392156862744,.10588235294117647,.06274509803921569,.06666666666666667,.07058823529411765,.06666666666666667,.054901960784313725,.0588235294117647,.06666666666666667,.07450980392156863,.08235294117647057,.08627450980392157,.06666666666666667,.0784313725490196,.07450980392156863,.06274509803921569,.0588235294117647,.07450980392156863,.0784313725490196,.06274509803921569,.06666666666666667,.07450980392156863,.0588235294117647,.0588235294117647,.09803921568627452,.07450980392156863,.0784313725490196,.07450980392156863,.07450980392156863,.07450980392156863,.06274509803921569,.09019607843137255,.06666666666666667,.06666666666666667,.07450980392156863,.07450980392156863,.06274509803921569,.07450980392156863,.07450980392156863,.07450980392156863,.07450980392156863,.0784313725490196,.07058823529411765,.07058823529411765,.07058823529411765,.07058823529411765,.07450980392156863],[.06666666666666667,.06274509803921569,.06666666666666667,.09803921568627452,.10196078431372549,.07058823529411765,.07058823529411765,.06274509803921569,.07450980392156863,.06666666666666667,.0784313725490196,.13725490196078433,.06274509803921569,.06666666666666667,.0784313725490196,.06666666666666667,.06666666666666667,.09803921568627452,.0784313725490196,.06274509803921569,.07058823529411765,.06666666666666667,.07058823529411765,.07450980392156863,.07450980392156863,.07058823529411765,.06666666666666667,.06274509803921569,.06666666666666667,.07058823529411765,.07058823529411765,.07058823529411765,.06666666666666667,.0784313725490196,.08627450980392157,.0588235294117647,.06666666666666667,.07058823529411765,.07058823529411765,.07058823529411765,.07058823529411765,.08235294117647057,.07450980392156863,.0784313725490196,.0588235294117647,.07450980392156863,.07058823529411765,.054901960784313725,.06666666666666667,.0784313725490196,.07058823529411765,.10588235294117647,.07450980392156863,.06666666666666667,.07450980392156863,.12941176470588237,.08627450980392157,.07058823529411765,.07058823529411765,.06274509803921569,.0784313725490196,.07450980392156863,.09803921568627452,.09411764705882353,.10980392156862745,.17647058823529413,.2235294117647059,.10196078431372549,.09803921568627452,.09019607843137255,.08235294117647057,.054901960784313725,.07058823529411765,.08627450980392157,.0784313725490196,.07058823529411765,.07450980392156863,.06666666666666667,.07450980392156863,.1176470588235294,.07450980392156863,.050980392156862744,.07450980392156863,.08235294117647057,.07058823529411765,.07058823529411765,.07450980392156863,.06666666666666667,.07058823529411765,.06666666666666667,.07058823529411765,.07058823529411765,.06274509803921569,.08627450980392157,.07058823529411765,.07058823529411765,.07058823529411765,.07058823529411765,.07058823529411765,.07058823529411765,.07450980392156863,.07058823529411765,.07058823529411765,.07058823529411765,.07058823529411765,.06666666666666667,.07450980392156863],[.07058823529411765,.0588235294117647,.06274509803921569,.0784313725490196,.06666666666666667,.07058823529411765,.0588235294117647,.07058823529411765,.09411764705882353,.1568627450980392,.12549019607843137,.0784313725490196,.10588235294117647,.10196078431372549,.08235294117647057,.06274509803921569,.07058823529411765,.08627450980392157,.07058823529411765,.050980392156862744,.0588235294117647,.054901960784313725,.06666666666666667,.0588235294117647,.07058823529411765,.06274509803921569,.054901960784313725,.07058823529411765,.06274509803921569,.08627450980392157,.0588235294117647,.06666666666666667,.07058823529411765,.06666666666666667,.0784313725490196,.0784313725490196,.06666666666666667,.07058823529411765,.07058823529411765,.06666666666666667,.07058823529411765,.07058823529411765,.07450980392156863,.07450980392156863,.06666666666666667,.07058823529411765,.07450980392156863,.07058823529411765,.0588235294117647,.07450980392156863,.0588235294117647,.11372549019607843,.06666666666666667,.07058823529411765,.0784313725490196,.0784313725490196,.08235294117647057,.06666666666666667,.0784313725490196,.08627450980392157,.07058823529411765,.1176470588235294,.6901960784313725,.8196078431372549,.7647058823529411,.6666666666666665,.6549019607843136,.6627450980392156,.5686274509803921,.615686274509804,.5254901960784314,.44313725490196076,.10980392156862745,.09019607843137255,.09803921568627452,.09411764705882353,.08235294117647057,.12156862745098039,.09803921568627452,.08235294117647057,.054901960784313725,.06666666666666667,.10980392156862745,.09411764705882353,.0784313725490196,.06666666666666667,.06274509803921569,.07450980392156863,.07450980392156863,.07450980392156863,.13333333333333333,.07058823529411765,.07058823529411765,.07450980392156863,.07450980392156863,.07450980392156863,.07058823529411765,.06274509803921569,.07450980392156863,.07058823529411765,.07058823529411765,.07450980392156863,.07058823529411765,.07058823529411765,.07058823529411765,.07058823529411765,.07450980392156863],[.09411764705882353,.08627450980392157,.08235294117647057,.09019607843137255,.12941176470588237,.050980392156862744,.08235294117647057,.1176470588235294,.06274509803921569,.07450980392156863,.07450980392156863,.08235294117647057,.06666666666666667,.06666666666666667,.08235294117647057,.054901960784313725,.08235294117647057,.07450980392156863,.054901960784313725,.1176470588235294,.08627450980392157,.09411764705882353,.06666666666666667,.0784313725490196,.07450980392156863,.0784313725490196,.07058823529411765,.07058823529411765,.07450980392156863,.0784313725490196,.07058823529411765,.08627450980392157,.07058823529411765,.06274509803921569,.07450980392156863,.06274509803921569,.08235294117647057,.07058823529411765,.06666666666666667,.07450980392156863,.09803921568627452,.08627450980392157,.0784313725490196,.0588235294117647,.06666666666666667,.06274509803921569,.07450980392156863,.054901960784313725,.06666666666666667,.06666666666666667,.08627450980392157,.0588235294117647,.07058823529411765,.09411764705882353,.06666666666666667,.0784313725490196,.06666666666666667,.06274509803921569,.09019607843137255,.07450980392156863,.7137254901960784,.6431372549019607,.6862745098039216,.5450980392156862,.803921568627451,.6980392156862745,.5450980392156862,.8117647058823529,.9294117647058823,.8588235294117647,.6235294117647059,.6392156862745098,.6745098039215687,.5882352941176471,.15294117647058825,.10588235294117647,.09411764705882353,.0784313725490196,.07450980392156863,.07058823529411765,.0784313725490196,.050980392156862744,.07058823529411765,.07450980392156863,.06274509803921569,.0784313725490196,.0784313725490196,.054901960784313725,.07450980392156863,.06666666666666667,.047058823529411764,.06274509803921569,.07450980392156863,.07450980392156863,.07058823529411765,.07450980392156863,.07058823529411765,.07058823529411765,.07058823529411765,.07058823529411765,.07450980392156863,.0784313725490196,.07058823529411765,.07058823529411765,.07058823529411765,.07058823529411765,.07058823529411765],[.0784313725490196,.09411764705882353,.054901960784313725,.07058823529411765,.09019607843137255,.06274509803921569,.06274509803921569,.08627450980392157,.0588235294117647,.08627450980392157,.07058823529411765,.07450980392156863,.06666666666666667,.07058823529411765,.06274509803921569,.0784313725490196,.07058823529411765,.050980392156862744,.10980392156862745,.06666666666666667,.07450980392156863,.12941176470588237,.06666666666666667,.06666666666666667,.07450980392156863,.07450980392156863,.08627450980392157,.09019607843137255,.06274509803921569,.09803921568627452,.06274509803921569,.09803921568627452,.07058823529411765,.07058823529411765,.12156862745098039,.07450980392156863,.0588235294117647,.07058823529411765,.0784313725490196,.0784313725490196,.0784313725490196,.07058823529411765,.07450980392156863,.050980392156862744,.06274509803921569,.07058823529411765,.08235294117647057,.06666666666666667,.09803921568627452,.06666666666666667,.06274509803921569,.07450980392156863,.0588235294117647,.08627450980392157,.0784313725490196,.0784313725490196,.06666666666666667,.07450980392156863,.2549019607843137,.596078431372549,.7647058823529411,.7058823529411765,.6039215686274509,.8156862745098039,.3176470588235294,.7882352941176471,.9725490196078431,.9647058823529412,.984313725490196,.9529411764705881,.9921568627450981,.9294117647058823,.9490196078431371,.7137254901960784,.6274509803921569,.25098039215686274,.06666666666666667,.0588235294117647,.050980392156862744,.09803921568627452,.09411764705882353,.0784313725490196,.08627450980392157,.047058823529411764,.07058823529411765,.07450980392156863,.07450980392156863,.06666666666666667,.054901960784313725,.054901960784313725,.0784313725490196,.12549019607843137,.06666666666666667,.07450980392156863,.08627450980392157,.047058823529411764,.07450980392156863,.07058823529411765,.07058823529411765,.07058823529411765,.07058823529411765,.07450980392156863,.07058823529411765,.07058823529411765,.07450980392156863,.07450980392156863,.07058823529411765],[.08235294117647057,.07450980392156863,.054901960784313725,.07058823529411765,.1176470588235294,.06666666666666667,.09803921568627452,.12156862745098039,.07450980392156863,.07058823529411765,.0588235294117647,.07450980392156863,.10588235294117647,.12156862745098039,.07450980392156863,.0588235294117647,.06666666666666667,.09411764705882353,.06274509803921569,.10980392156862745,.0784313725490196,.07058823529411765,.08235294117647057,.054901960784313725,.07058823529411765,.06666666666666667,.054901960784313725,.06274509803921569,.06666666666666667,.07058823529411765,.06666666666666667,.07058823529411765,.07058823529411765,.09019607843137255,.06274509803921569,.07058823529411765,.07450980392156863,.07450980392156863,.0588235294117647,.054901960784313725,.0784313725490196,.07450980392156863,.07058823529411765,.07450980392156863,.07058823529411765,.07450980392156863,.0784313725490196,.08627450980392157,.054901960784313725,.0588235294117647,.10588235294117647,.07058823529411765,.0588235294117647,.050980392156862744,.07058823529411765,.07058823529411765,.08235294117647057,.1411764705882353,.5411764705882353,.5647058823529412,.6784313725490196,.7411764705882353,.7490196078431373,.403921568627451,.38431372549019616,.6039215686274509,.8549019607843137,.9607843137254902,.9294117647058823,.9568627450980393,.7686274509803923,.9333333333333332,.9568627450980393,.9098039215686274,.5843137254901961,.5607843137254902,.4470588235294118,.1450980392156863,.07058823529411765,.07058823529411765,.0784313725490196,.06666666666666667,.08235294117647057,.07450980392156863,.06666666666666667,.07450980392156863,.08627450980392157,.07450980392156863,.07450980392156863,.10588235294117647,.06274509803921569,.0784313725490196,.07450980392156863,.07058823529411765,.07058823529411765,.09019607843137255,.07450980392156863,.07058823529411765,.07058823529411765,.07058823529411765,.07058823529411765,.06666666666666667,.06666666666666667,.07058823529411765,.07058823529411765,.07058823529411765,.07058823529411765],[.11372549019607843,.054901960784313725,.07450980392156863,.06274509803921569,.08235294117647057,.06274509803921569,.0784313725490196,.06666666666666667,.07058823529411765,.06666666666666667,.08235294117647057,.08627450980392157,.07450980392156863,.10980392156862745,.06274509803921569,.06274509803921569,.06274509803921569,.08627450980392157,.07058823529411765,.10196078431372549,.07450980392156863,.07450980392156863,.07058823529411765,.07450980392156863,.08235294117647057,.06274509803921569,.06274509803921569,.10196078431372549,.07058823529411765,.09411764705882353,.06274509803921569,.06274509803921569,.09019607843137255,.0588235294117647,.06666666666666667,.06666666666666667,.0784313725490196,.0588235294117647,.10588235294117647,.09803921568627452,.07450980392156863,.07450980392156863,.07450980392156863,.06666666666666667,.06274509803921569,.07450980392156863,.054901960784313725,.12941176470588237,.0588235294117647,.06666666666666667,.06274509803921569,.054901960784313725,.06274509803921569,.06666666666666667,.08627450980392157,.25098039215686274,.5058823529411764,.7098039215686275,.8509803921568627,.9254901960784313,.9058823529411765,.8627450980392157,.8823529411764706,.9098039215686274,.8627450980392157,.8117647058823529,.7529411764705882,.6901960784313725,.9490196078431371,.8823529411764706,.8509803921568627,.8627450980392157,.9019607843137255,.8313725490196079,.5882352941176471,.6,.47450980392156855,.3294117647058823,.08235294117647057,.09019607843137255,.06666666666666667,.07058823529411765,.07450980392156863,.07058823529411765,.06666666666666667,.09411764705882353,.07450980392156863,.08235294117647057,.07450980392156863,.054901960784313725,.07450980392156863,.07450980392156863,.07058823529411765,.07058823529411765,.07058823529411765,.07058823529411765,.0784313725490196,.07450980392156863,.07058823529411765,.06666666666666667,.06666666666666667,.07450980392156863,.07058823529411765,.07058823529411765,.07058823529411765,.09411764705882353,.07058823529411765],[.06274509803921569,.10588235294117647,.07450980392156863,.08627450980392157,.050980392156862744,.0588235294117647,.09019607843137255,.06666666666666667,.07058823529411765,.07058823529411765,.06666666666666667,.08627450980392157,.12156862745098039,.10588235294117647,.07058823529411765,.06666666666666667,.10588235294117647,.06666666666666667,.0588235294117647,.08235294117647057,.07450980392156863,.07058823529411765,.08235294117647057,.06666666666666667,.06274509803921569,.06666666666666667,.06274509803921569,.09019607843137255,.07058823529411765,.0784313725490196,.10196078431372549,.06274509803921569,.08235294117647057,.07058823529411765,.06274509803921569,.06666666666666667,.06666666666666667,.08235294117647057,.06274509803921569,.07450980392156863,.07450980392156863,.054901960784313725,.08627450980392157,.0588235294117647,.06666666666666667,.06666666666666667,.08235294117647057,.0784313725490196,.1411764705882353,.08627450980392157,.06666666666666667,.09803921568627452,.08235294117647057,.43137254901960786,.8431372549019608,.8235294117647058,.8980392156862745,.9686274509803922,.9529411764705881,.9490196078431371,.8784313725490196,.9215686274509803,.803921568627451,.7882352941176471,.9254901960784313,.807843137254902,.9568627450980393,.7803921568627452,.6941176470588235,.6,.9215686274509803,.9411764705882352,.8470588235294118,.8627450980392157,.8823529411764706,.47843137254901963,.3607843137254902,.37254901960784315,.41568627450980394,.1843137254901961,.09019607843137255,.10588235294117647,.07450980392156863,.0784313725490196,.07058823529411765,.07058823529411765,.07058823529411765,.07058823529411765,.07450980392156863,.06666666666666667,.07450980392156863,.0784313725490196,.07450980392156863,.07450980392156863,.06274509803921569,.07058823529411765,.07450980392156863,.07058823529411765,.0588235294117647,.0588235294117647,.06274509803921569,.07450980392156863,.06666666666666667,.06666666666666667,.07058823529411765,.07058823529411765,.07058823529411765],[.06274509803921569,.08235294117647057,.07058823529411765,.0784313725490196,.0588235294117647,.07058823529411765,.06274509803921569,.06274509803921569,.0588235294117647,.06666666666666667,.09411764705882353,.10196078431372549,.06274509803921569,.09411764705882353,.07058823529411765,.06274509803921569,.0784313725490196,.0784313725490196,.09019607843137255,.12549019607843137,.07058823529411765,.10588235294117647,.07450980392156863,.07450980392156863,.054901960784313725,.050980392156862744,.0784313725490196,.0784313725490196,.07450980392156863,.07450980392156863,.0784313725490196,.0588235294117647,.0588235294117647,.07058823529411765,.0784313725490196,.054901960784313725,.08235294117647057,.09019607843137255,.0588235294117647,.07450980392156863,.06666666666666667,.0588235294117647,.07058823529411765,.07058823529411765,.054901960784313725,.07450980392156863,.054901960784313725,.0588235294117647,.12156862745098039,.13725490196078433,.13333333333333333,.19607843137254904,.5411764705882353,.4549019607843137,.5647058823529412,.6823529411764706,.807843137254902,.7960784313725491,.8745098039215686,.9372549019607842,.9568627450980393,.9411764705882352,.9686274509803922,.8627450980392157,.6470588235294117,.5529411764705883,.7372549019607844,.7686274509803923,.8666666666666667,.5843137254901961,.5411764705882353,.5568627450980392,.6196078431372549,.807843137254902,.7215686274509804,.7137254901960784,.35294117647058826,.2549019607843137,.20392156862745098,.30980392156862746,.1803921568627451,.06274509803921569,.07450980392156863,.07058823529411765,.07450980392156863,.08235294117647057,.0784313725490196,.06666666666666667,.07058823529411765,.07058823529411765,.06666666666666667,.07450980392156863,.09019607843137255,.07450980392156863,.08627450980392157,.0784313725490196,.07450980392156863,.07058823529411765,.06274509803921569,.07058823529411765,.0784313725490196,.07058823529411765,.07058823529411765,.07058823529411765,.06666666666666667,.07450980392156863,.07058823529411765],[.0588235294117647,.11372549019607843,.06274509803921569,.07450980392156863,.13725490196078433,.06274509803921569,.0784313725490196,.10980392156862745,.0784313725490196,.10196078431372549,.09019607843137255,.06666666666666667,.0588235294117647,.0784313725490196,.07058823529411765,.054901960784313725,.07058823529411765,.06274509803921569,.06274509803921569,.06274509803921569,.08627450980392157,.08235294117647057,.07450980392156863,.07058823529411765,.0784313725490196,.14901960784313725,.07450980392156863,.06666666666666667,.07450980392156863,.06666666666666667,.050980392156862744,.06666666666666667,.054901960784313725,.06666666666666667,.06666666666666667,.06666666666666667,.054901960784313725,.07450980392156863,.07058823529411765,.054901960784313725,.07058823529411765,.0784313725490196,.054901960784313725,.06666666666666667,.08235294117647057,.054901960784313725,.10980392156862745,.3686274509803922,.3058823529411765,.5019607843137255,.8196078431372549,.8941176470588236,.6823529411764706,.8431372549019608,.7333333333333333,.6627450980392156,.7450980392156863,.7764705882352942,.592156862745098,.3294117647058823,.5254901960784314,.8627450980392157,.9450980392156861,.9647058823529412,.9490196078431371,.9686274509803922,.6666666666666665,.6352941176470588,.7215686274509804,.6745098039215687,.6941176470588235,.5372549019607843,.47843137254901963,.7647058823529411,.8156862745098039,.7803921568627452,.5450980392156862,.27058823529411763,.2235294117647059,.2823529411764706,.22745098039215686,.1176470588235294,.08235294117647057,.08235294117647057,.06666666666666667,.06274509803921569,.054901960784313725,.07450980392156863,.07450980392156863,.07058823529411765,.0588235294117647,.11372549019607843,.06666666666666667,.0784313725490196,.0784313725490196,.09019607843137255,.07450980392156863,.08235294117647057,.06666666666666667,.06274509803921569,.06274509803921569,.07058823529411765,.07058823529411765,.07450980392156863,.07450980392156863,.07450980392156863,.06666666666666667],[.06666666666666667,.06666666666666667,.06666666666666667,.09411764705882353,.06666666666666667,.0588235294117647,.0784313725490196,.06666666666666667,.0588235294117647,.08627450980392157,.11372549019607843,.1411764705882353,.07058823529411765,.054901960784313725,.11372549019607843,.06666666666666667,.07058823529411765,.09019607843137255,.047058823529411764,.06274509803921569,.08627450980392157,.06274509803921569,.09411764705882353,.12156862745098039,.0784313725490196,.06274509803921569,.07450980392156863,.0588235294117647,.08235294117647057,.06666666666666667,.09411764705882353,.054901960784313725,.10196078431372549,.0588235294117647,.06274509803921569,.08235294117647057,.10980392156862745,.09019607843137255,.08627450980392157,.054901960784313725,.09411764705882353,.06666666666666667,.10980392156862745,.06666666666666667,.08235294117647057,.20784313725490197,.6588235294117646,.7764705882352942,.9058823529411765,.8196078431372549,.8352941176470589,.7254901960784313,.7607843137254902,.8274509803921568,.6392156862745098,.8941176470588236,.7803921568627452,.8627450980392157,.6588235294117646,.6509803921568627,.47843137254901963,.6549019607843136,.615686274509804,.6705882352941175,.996078431372549,.9725490196078431,.7686274509803923,.6196078431372549,.7254901960784313,.5411764705882353,.6941176470588235,.8705882352941177,.6078431372549019,.6,.38431372549019616,.8784313725490196,.7647058823529411,.6235294117647059,.39607843137254906,.19607843137254904,.09411764705882353,.21568627450980393,.09019607843137255,.07450980392156863,.07450980392156863,.10196078431372549,.0784313725490196,.08627450980392157,.07450980392156863,.07450980392156863,.0588235294117647,.07450980392156863,.0588235294117647,.07450980392156863,.08627450980392157,.08627450980392157,.0784313725490196,.06274509803921569,.07058823529411765,.08235294117647057,.07450980392156863,.07450980392156863,.07058823529411765,.07058823529411765,.07450980392156863,.07450980392156863,.07058823529411765],[.0588235294117647,.08627450980392157,.06666666666666667,.06274509803921569,.06274509803921569,.050980392156862744,.07058823529411765,.06666666666666667,.07058823529411765,.06274509803921569,.06666666666666667,.07058823529411765,.10588235294117647,.06274509803921569,.10980392156862745,.10588235294117647,.0784313725490196,.13725490196078433,.0784313725490196,.10196078431372549,.07450980392156863,.08235294117647057,.10588235294117647,.054901960784313725,.06274509803921569,.06274509803921569,.0784313725490196,.07058823529411765,.06666666666666667,.0784313725490196,.06666666666666667,.0588235294117647,.07058823529411765,.07058823529411765,.07450980392156863,.0784313725490196,.0588235294117647,.07450980392156863,.07058823529411765,.06666666666666667,.07058823529411765,.0784313725490196,.08235294117647057,.20784313725490197,.8156862745098039,.8431372549019608,.7529411764705882,.8745098039215686,.8274509803921568,.8392156862745098,.7960784313725491,.6588235294117646,.7254901960784313,.6980392156862745,.5607843137254902,.8392156862745098,.8431372549019608,.8235294117647058,.7921568627450981,.8313725490196079,.6549019607843136,.6862745098039216,.6549019607843136,.5137254901960784,.5568627450980392,.5803921568627451,.9725490196078431,.9686274509803922,.6784313725490196,.8627450980392157,.5882352941176471,.6039215686274509,.803921568627451,.5411764705882353,.6274509803921569,.4980392156862745,.7686274509803923,.7176470588235294,.5254901960784314,.5058823529411764,.2,.1803921568627451,.12549019607843137,.0784313725490196,.0784313725490196,.07058823529411765,.12941176470588237,.08627450980392157,.07058823529411765,.050980392156862744,.07058823529411765,.0588235294117647,.07450980392156863,.07450980392156863,.0784313725490196,.0588235294117647,.06666666666666667,.07450980392156863,.07450980392156863,.07058823529411765,.07058823529411765,.07450980392156863,.07450980392156863,.07058823529411765,.0784313725490196,.07450980392156863,.08235294117647057],[.06666666666666667,.07058823529411765,.07058823529411765,.06274509803921569,.054901960784313725,.050980392156862744,.10588235294117647,.06274509803921569,.07450980392156863,.07058823529411765,.07450980392156863,.12549019607843137,.0588235294117647,.08627450980392157,.06274509803921569,.09411764705882353,.06274509803921569,.13333333333333333,.08627450980392157,.08235294117647057,.06666666666666667,.0784313725490196,.07058823529411765,.0588235294117647,.06274509803921569,.10588235294117647,.08235294117647057,.07450980392156863,.08235294117647057,.08235294117647057,.10196078431372549,.07058823529411765,.07058823529411765,.07058823529411765,.08627450980392157,.08627450980392157,.08235294117647057,.06274509803921569,.0588235294117647,.07058823529411765,.06666666666666667,.1411764705882353,.11372549019607843,.6666666666666665,.8901960784313725,.7725490196078433,.8196078431372549,.8745098039215686,.8745098039215686,.7607843137254902,.7372549019607844,.8431372549019608,.8470588235294118,.8352941176470589,.8196078431372549,.8352941176470589,.7725490196078433,.7058823529411765,.8470588235294118,.7411764705882353,.7254901960784313,.7254901960784313,.6196078431372549,.6235294117647059,.5529411764705883,.6235294117647059,.5686274509803921,.7137254901960784,.8588235294117647,.7490196078431373,.8,.6039215686274509,.5254901960784314,.6509803921568627,.5843137254901961,.7254901960784313,.3764705882352941,.6196078431372549,.4470588235294118,.35294117647058826,.43529411764705883,.12941176470588237,.1450980392156863,.11372549019607843,.0784313725490196,.0784313725490196,.0784313725490196,.06666666666666667,.0784313725490196,.07058823529411765,.06666666666666667,.06274509803921569,.07450980392156863,.07058823529411765,.08235294117647057,.07058823529411765,.0588235294117647,.07058823529411765,.07058823529411765,.07058823529411765,.07450980392156863,.07058823529411765,.07058823529411765,.07058823529411765,.07450980392156863,.06274509803921569,.07450980392156863],[.06666666666666667,.0784313725490196,.07450980392156863,.07450980392156863,.07450980392156863,.06274509803921569,.054901960784313725,.08235294117647057,.0784313725490196,.0784313725490196,.0588235294117647,.06666666666666667,.09411764705882353,.12156862745098039,.08627450980392157,.08235294117647057,.0588235294117647,.07058823529411765,.06666666666666667,.13333333333333333,.09019607843137255,.07058823529411765,.07058823529411765,.09803921568627452,.07450980392156863,.11372549019607843,.07058823529411765,.0784313725490196,.08235294117647057,.07058823529411765,.09019607843137255,.12549019607843137,.07058823529411765,.08235294117647057,.07058823529411765,.07058823529411765,.10196078431372549,.06274509803921569,.09019607843137255,.10980392156862745,.10588235294117647,.17254901960784313,.9254901960784313,.8745098039215686,.8941176470588236,.8627450980392157,.8745098039215686,.8666666666666667,.8823529411764706,.8274509803921568,.8901960784313725,.8431372549019608,.7882352941176471,.807843137254902,.8784313725490196,.8705882352941177,.8196078431372549,.7803921568627452,.6705882352941175,.7254901960784313,.6980392156862745,.6941176470588235,.6705882352941175,.6901960784313725,.6078431372549019,.6431372549019607,.43529411764705883,.6980392156862745,.4,.7137254901960784,.6823529411764706,.8352941176470589,.48627450980392156,.47843137254901963,.5882352941176471,.5019607843137255,.4549019607843137,.3411764705882353,.6470588235294117,.29411764705882354,.2235294117647059,.30980392156862746,.13725490196078433,.2235294117647059,.10196078431372549,.0784313725490196,.06666666666666667,.07058823529411765,.06666666666666667,.07450980392156863,.06274509803921569,.0588235294117647,.0784313725490196,.07450980392156863,.06666666666666667,.0784313725490196,.06666666666666667,.07450980392156863,.07450980392156863,.07450980392156863,.0784313725490196,.047058823529411764,.07058823529411765,.09803921568627452,.07058823529411765,.07450980392156863,.06666666666666667],[.08627450980392157,.07450980392156863,.0784313725490196,.07450980392156863,.06666666666666667,.0784313725490196,.06666666666666667,.08235294117647057,.09019607843137255,.09411764705882353,.07058823529411765,.12549019607843137,.09803921568627452,.08235294117647057,.08235294117647057,.10196078431372549,.0588235294117647,.08627450980392157,.10980392156862745,.09019607843137255,.050980392156862744,.06666666666666667,.08235294117647057,.06666666666666667,.10196078431372549,.0784313725490196,.13725490196078433,.07058823529411765,.07450980392156863,.11372549019607843,.07450980392156863,.06666666666666667,.06666666666666667,.07058823529411765,.0784313725490196,.06666666666666667,.0784313725490196,.09803921568627452,.07450980392156863,.07058823529411765,.37254901960784315,.8431372549019608,.7686274509803923,.7725490196078433,.8313725490196079,.8431372549019608,.8627450980392157,.7725490196078433,.8117647058823529,.8862745098039215,.8745098039215686,.7372549019607844,.8235294117647058,.7843137254901962,.7725490196078433,.8117647058823529,.8235294117647058,.7607843137254902,.7921568627450981,.8509803921568627,.6941176470588235,.7372549019607844,.6627450980392156,.7019607843137254,.611764705882353,.611764705882353,.596078431372549,.5686274509803921,.5843137254901961,.4117647058823529,.6941176470588235,.6313725490196078,.7921568627450981,.5019607843137255,.42745098039215684,.44313725490196076,.49411764705882355,.22745098039215686,.4705882352941176,.6627450980392156,.20784313725490197,.2627450980392157,.3254901960784313,.09411764705882353,.09411764705882353,.06666666666666667,.07450980392156863,.07450980392156863,.07058823529411765,.06666666666666667,.0784313725490196,.06274509803921569,.09019607843137255,.07058823529411765,.09019607843137255,.08235294117647057,.07058823529411765,.07450980392156863,.07058823529411765,.07058823529411765,.07058823529411765,.07058823529411765,.07058823529411765,.07058823529411765,.07058823529411765,.08627450980392157,.10196078431372549],[.0784313725490196,.06666666666666667,.07058823529411765,.08235294117647057,.07450980392156863,.11372549019607843,.07058823529411765,.07450980392156863,.09411764705882353,.06666666666666667,.08627450980392157,.08235294117647057,.050980392156862744,.07058823529411765,.08235294117647057,.09803921568627452,.06666666666666667,.06666666666666667,.07058823529411765,.09803921568627452,.10980392156862745,.0784313725490196,.07058823529411765,.08235294117647057,.08235294117647057,.09019607843137255,.07450980392156863,.09803921568627452,.06274509803921569,.06666666666666667,.06274509803921569,.0784313725490196,.07450980392156863,.0784313725490196,.0784313725490196,.0588235294117647,.08627450980392157,.0784313725490196,.16862745098039217,.10980392156862745,.9215686274509803,.8588235294117647,.9019607843137255,.8627450980392157,.8627450980392157,.8313725490196079,.8235294117647058,.8745098039215686,.8196078431372549,.8901960784313725,.8705882352941177,.8431372549019608,.8235294117647058,.803921568627451,.6588235294117646,.803921568627451,.7490196078431373,.7882352941176471,.6941176470588235,.7294117647058823,.6235294117647059,.7215686274509804,.7568627450980392,.5725490196078431,.6980392156862745,.6980392156862745,.6470588235294117,.49411764705882355,.49019607843137253,.27058823529411763,.32156862745098036,.6784313725490196,.592156862745098,.6039215686274509,.5019607843137255,.29411764705882354,.2627450980392157,.33333333333333326,.3294117647058823,.7137254901960784,.2627450980392157,.25098039215686274,.23137254901960783,.21568627450980393,.08235294117647057,.07058823529411765,.050980392156862744,.054901960784313725,.07450980392156863,.06274509803921569,.07450980392156863,.0784313725490196,.06666666666666667,.07450980392156863,.09411764705882353,.07058823529411765,.07058823529411765,.07058823529411765,.07450980392156863,.07058823529411765,.07450980392156863,.07058823529411765,.07058823529411765,.06666666666666667,.06666666666666667,.07450980392156863,.07450980392156863],[.06274509803921569,.07058823529411765,.054901960784313725,.07450980392156863,.06274509803921569,.0588235294117647,.07058823529411765,.07450980392156863,.08627450980392157,.07058823529411765,.08235294117647057,.1568627450980392,.08235294117647057,.0784313725490196,.07450980392156863,.12156862745098039,.0784313725490196,.10588235294117647,.09411764705882353,.07450980392156863,.07450980392156863,.0588235294117647,.06666666666666667,.07450980392156863,.08235294117647057,.10196078431372549,.0588235294117647,.06666666666666667,.0784313725490196,.07058823529411765,.06666666666666667,.07058823529411765,.06666666666666667,.09411764705882353,.07058823529411765,.08235294117647057,.0784313725490196,.08627450980392157,.07058823529411765,.7882352941176471,.8509803921568627,.9294117647058823,.9098039215686274,.8823529411764706,.8313725490196079,.8549019607843137,.8235294117647058,.8196078431372549,.8588235294117647,.7843137254901962,.803921568627451,.8627450980392157,.8666666666666667,.7568627450980392,.6862745098039216,.7019607843137254,.8,.7490196078431373,.7803921568627452,.7019607843137254,.7372549019607844,.7647058823529411,.6745098039215687,.6196078431372549,.7294117647058823,.8470588235294118,.7372549019607844,.35294117647058826,.5843137254901961,.3411764705882353,.34509803921568627,.21176470588235294,.29411764705882354,.5215686274509804,.47843137254901963,.47450980392156855,.26666666666666666,.28627450980392155,.2901960784313726,.8470588235294118,.35294117647058826,.2549019607843137,.25098039215686274,.10588235294117647,.10196078431372549,.09411764705882353,.10196078431372549,.11372549019607843,.08235294117647057,.06274509803921569,.0784313725490196,.07450980392156863,.07058823529411765,.07058823529411765,.050980392156862744,.07450980392156863,.07058823529411765,.07058823529411765,.07450980392156863,.06666666666666667,.13333333333333333,.07058823529411765,.0588235294117647,.07058823529411765,.06274509803921569,.07450980392156863,.07058823529411765],[.07058823529411765,.06666666666666667,.15294117647058825,.0784313725490196,.047058823529411764,.06274509803921569,.06274509803921569,.07450980392156863,.0588235294117647,.06274509803921569,.10588235294117647,.08235294117647057,.0784313725490196,.0588235294117647,.09803921568627452,.09411764705882353,.0588235294117647,.13725490196078433,.06274509803921569,.06274509803921569,.09411764705882353,.07058823529411765,.10196078431372549,.09411764705882353,.054901960784313725,.07058823529411765,.09411764705882353,.06666666666666667,.08627450980392157,.09019607843137255,.07450980392156863,.07058823529411765,.07058823529411765,.07450980392156863,.07058823529411765,.09411764705882353,.10196078431372549,.16470588235294115,.8313725490196079,.8627450980392157,.8745098039215686,.9372549019607842,.8509803921568627,.8470588235294118,.8666666666666667,.8196078431372549,.7921568627450981,.9529411764705881,.7686274509803923,.8,.8235294117647058,.8666666666666667,.8392156862745098,.8705882352941177,.9215686274509803,.7294117647058823,.7411764705882353,.7529411764705882,.7882352941176471,.7803921568627452,.7450980392156863,.7843137254901962,.7215686274509804,.7058823529411765,.6666666666666665,.6549019607843136,.6313725490196078,.4705882352941176,.403921568627451,.45098039215686275,.3568627450980392,.09019607843137255,.2235294117647059,.21176470588235294,.5372549019607843,.4705882352941176,.3137254901960784,.21568627450980393,.27450980392156865,.7098039215686275,.4588235294117647,.2627450980392157,.23137254901960783,.14901960784313725,.09803921568627452,.09019607843137255,.054901960784313725,.07058823529411765,.07058823529411765,.09411764705882353,.09019607843137255,.07450980392156863,.0588235294117647,.07450980392156863,.07058823529411765,.0588235294117647,.0784313725490196,.07058823529411765,.07058823529411765,.07058823529411765,.054901960784313725,.07058823529411765,.07058823529411765,.07058823529411765,.06666666666666667,.07058823529411765,.07058823529411765],[.09019607843137255,.054901960784313725,.06666666666666667,.054901960784313725,.06274509803921569,.0784313725490196,.06666666666666667,.08235294117647057,.0784313725490196,.0588235294117647,.06666666666666667,.08627450980392157,.10196078431372549,.09019607843137255,.09411764705882353,.0784313725490196,.09019607843137255,.1176470588235294,.0784313725490196,.09019607843137255,.09019607843137255,.09019607843137255,.06666666666666667,.07450980392156863,.06274509803921569,.07450980392156863,.054901960784313725,.08235294117647057,.08235294117647057,.09411764705882353,.07450980392156863,.07450980392156863,.06666666666666667,.07450980392156863,.0588235294117647,.0784313725490196,.047058823529411764,.33333333333333326,.8156862745098039,.7450980392156863,.7803921568627452,.8470588235294118,.9254901960784313,.8392156862745098,.8823529411764706,.7372549019607844,.8705882352941177,.8117647058823529,.7215686274509804,.7843137254901962,.8,.7450980392156863,.8862745098039215,.6588235294117646,.803921568627451,.7921568627450981,.8156862745098039,.7294117647058823,.8313725490196079,.8313725490196079,.6745098039215687,.7450980392156863,.7607843137254902,.7450980392156863,.6745098039215687,.7058823529411765,.6431372549019607,.7372549019607844,.40784313725490196,.30980392156862746,.3764705882352941,.2823529411764706,.09803921568627452,.1176470588235294,.36470588235294116,.46274509803921565,.44313725490196076,.2784313725490196,.33333333333333326,.9098039215686274,.5529411764705883,.2627450980392157,.23921568627450981,.28627450980392155,.10196078431372549,.08235294117647057,.06274509803921569,.07058823529411765,.06274509803921569,.07058823529411765,.09019607843137255,.0784313725490196,.050980392156862744,.06274509803921569,.07450980392156863,.07058823529411765,.06274509803921569,.08627450980392157,.07450980392156863,.08627450980392157,.07450980392156863,.07450980392156863,.07058823529411765,.07058823529411765,.06666666666666667,.07058823529411765,.07058823529411765],[.06666666666666667,.047058823529411764,.0784313725490196,.07450980392156863,.08235294117647057,.07058823529411765,.07450980392156863,.08235294117647057,.06274509803921569,.0784313725490196,.06274509803921569,.09803921568627452,.0784313725490196,.0588235294117647,.08235294117647057,.08235294117647057,.09803921568627452,.07450980392156863,.06274509803921569,.10588235294117647,.07058823529411765,.06274509803921569,.06666666666666667,.06274509803921569,.06274509803921569,.06666666666666667,.0784313725490196,.0784313725490196,.0784313725490196,.12549019607843137,.07058823529411765,.08235294117647057,.08235294117647057,.06666666666666667,.07058823529411765,.06666666666666667,.08235294117647057,.8549019607843137,.7686274509803923,.9019607843137255,.8509803921568627,.8117647058823529,.8156862745098039,.8941176470588236,.8705882352941177,.8588235294117647,.7450980392156863,.8823529411764706,.803921568627451,.8392156862745098,.7686274509803923,.7254901960784313,.7215686274509804,.8901960784313725,.8862745098039215,.7490196078431373,.7843137254901962,.7843137254901962,.7450980392156863,.6823529411764706,.803921568627451,.8117647058823529,.7137254901960784,.6901960784313725,.7294117647058823,.7294117647058823,.5882352941176471,.5411764705882353,.43529411764705883,.4117647058823529,.48627450980392156,.23921568627450981,.35294117647058826,.27450980392156865,.23137254901960783,.3176470588235294,.49019607843137253,.3882352941176471,.29411764705882354,.807843137254902,.5372549019607843,.23921568627450981,.25098039215686274,.4470588235294118,.14901960784313725,.06666666666666667,.07450980392156863,.07450980392156863,.06274509803921569,.07058823529411765,.054901960784313725,.0588235294117647,.06666666666666667,.0784313725490196,.07058823529411765,.07450980392156863,.054901960784313725,.06666666666666667,.0784313725490196,.07450980392156863,.07058823529411765,.07450980392156863,.0784313725490196,.0784313725490196,.07058823529411765,.06666666666666667,.07058823529411765],[.09803921568627452,.07058823529411765,.0588235294117647,.06666666666666667,.0784313725490196,.06274509803921569,.07058823529411765,.06274509803921569,.07058823529411765,.0588235294117647,.07450980392156863,.06666666666666667,.06666666666666667,.06274509803921569,.08235294117647057,.06274509803921569,.08627450980392157,.08627450980392157,.06666666666666667,.08627450980392157,.07058823529411765,.0784313725490196,.08627450980392157,.06666666666666667,.10196078431372549,.10980392156862745,.08627450980392157,.06666666666666667,.0784313725490196,.08235294117647057,.0784313725490196,.06666666666666667,.0588235294117647,.08235294117647057,.10196078431372549,.10588235294117647,.1411764705882353,.8431372549019608,.6588235294117646,.8666666666666667,.8745098039215686,.7372549019607844,.7843137254901962,.7058823529411765,.8431372549019608,.8901960784313725,.8117647058823529,.8705882352941177,.7137254901960784,.8313725490196079,.7764705882352942,.7098039215686275,.7568627450980392,.7372549019607844,.8745098039215686,.8588235294117647,.7882352941176471,.8470588235294118,.803921568627451,.8392156862745098,.7764705882352942,.7372549019607844,.7098039215686275,.7607843137254902,.6588235294117646,.611764705882353,.3921568627450981,.23921568627450981,.30980392156862746,.43137254901960786,.2980392156862745,.3294117647058823,.3921568627450981,.2627450980392157,.4392156862745098,.2627450980392157,.34509803921568627,.43137254901960786,.40784313725490196,.6431372549019607,.6745098039215687,.2627450980392157,.25098039215686274,.34901960784313724,.43529411764705883,.06666666666666667,.07058823529411765,.06274509803921569,.09019607843137255,.06274509803921569,.06274509803921569,.06666666666666667,.07058823529411765,.07450980392156863,.07058823529411765,.0588235294117647,.08627450980392157,.07058823529411765,.07450980392156863,.07450980392156863,.07058823529411765,.0588235294117647,.07450980392156863,.07058823529411765,.07058823529411765,.07058823529411765,.07058823529411765],[.07058823529411765,.0588235294117647,.0784313725490196,.07058823529411765,.07058823529411765,.06274509803921569,.06274509803921569,.07058823529411765,.11372549019607843,.10196078431372549,.07450980392156863,.054901960784313725,.07450980392156863,.10588235294117647,.0784313725490196,.08235294117647057,.06666666666666667,.12549019607843137,.043137254901960784,.06274509803921569,.07058823529411765,.08627450980392157,.09019607843137255,.06666666666666667,.10980392156862745,.10588235294117647,.07450980392156863,.07450980392156863,.06666666666666667,.06274509803921569,.08235294117647057,.054901960784313725,.09411764705882353,.0588235294117647,.08627450980392157,.12156862745098039,.7764705882352942,.8470588235294118,.7647058823529411,.8392156862745098,.8392156862745098,.7607843137254902,.8156862745098039,.8431372549019608,.7294117647058823,.9137254901960784,.8549019607843137,.7450980392156863,.7607843137254902,.8196078431372549,.7215686274509804,.6784313725490196,.6862745098039216,.6745098039215687,.7137254901960784,.7647058823529411,.8,.7803921568627452,.8784313725490196,.7254901960784313,.7921568627450981,.7529411764705882,.47450980392156855,.6078431372549019,.6980392156862745,.7019607843137254,.38431372549019616,.3254901960784313,.30980392156862746,.33333333333333326,.3686274509803922,.33725490196078434,.36470588235294116,.2901960784313726,.3803921568627451,.4,.3254901960784313,.33725490196078434,.32156862745098036,.6823529411764706,.7843137254901962,.36470588235294116,.2980392156862745,.33725490196078434,.4470588235294118,.13725490196078433,.07058823529411765,.08235294117647057,.07058823529411765,.07450980392156863,.07058823529411765,.07058823529411765,.06666666666666667,.07450980392156863,.09019607843137255,.0784313725490196,.07450980392156863,.07450980392156863,.07450980392156863,.054901960784313725,.07450980392156863,.0588235294117647,.07450980392156863,.11372549019607843,.06274509803921569,.07058823529411765,.08235294117647057],[.06274509803921569,.08235294117647057,.06274509803921569,.050980392156862744,.07450980392156863,.06666666666666667,.08235294117647057,.10196078431372549,.0784313725490196,.06666666666666667,.10588235294117647,.08627450980392157,.06666666666666667,.08235294117647057,.10196078431372549,.09019607843137255,.09803921568627452,.10588235294117647,.047058823529411764,.08627450980392157,.06274509803921569,.054901960784313725,.09411764705882353,.050980392156862744,.0784313725490196,.06274509803921569,.06274509803921569,.0784313725490196,.0784313725490196,.07058823529411765,.0784313725490196,.07058823529411765,.09803921568627452,.0588235294117647,.08235294117647057,.0784313725490196,.7098039215686275,.7019607843137254,.7137254901960784,.6549019607843136,.7137254901960784,.8705882352941177,.8823529411764706,.7843137254901962,.9098039215686274,.7725490196078433,.803921568627451,.8627450980392157,.6823529411764706,.6980392156862745,.5843137254901961,.5254901960784314,.6313725490196078,.6627450980392156,.6823529411764706,.7098039215686275,.7098039215686275,.6784313725490196,.6705882352941175,.7058823529411765,.7098039215686275,.34509803921568627,.6039215686274509,.5568627450980392,.7098039215686275,.5882352941176471,.33725490196078434,.1450980392156863,.3254901960784313,.1411764705882353,.38431372549019616,.2352941176470588,.2823529411764706,.3176470588235294,.30980392156862746,.24313725490196078,.35294117647058826,.2196078431372549,.4,.5843137254901961,.7411764705882353,.30196078431372547,.2823529411764706,.29411764705882354,.4549019607843137,.09019607843137255,.0588235294117647,.0588235294117647,.07450980392156863,.07058823529411765,.06274509803921569,.07058823529411765,.09019607843137255,.06274509803921569,.054901960784313725,.07058823529411765,.06274509803921569,.054901960784313725,.07058823529411765,.07058823529411765,.07058823529411765,.07058823529411765,.06274509803921569,.09803921568627452,.0784313725490196,.07450980392156863,.07058823529411765],[.07450980392156863,.07450980392156863,.08235294117647057,.09411764705882353,.0784313725490196,.06274509803921569,.07058823529411765,.06666666666666667,.08235294117647057,.07058823529411765,.10196078431372549,.09019607843137255,.07058823529411765,.09411764705882353,.12941176470588237,.06274509803921569,.0784313725490196,.050980392156862744,.07058823529411765,.08235294117647057,.10196078431372549,.08235294117647057,.07058823529411765,.0588235294117647,.07450980392156863,.06274509803921569,.054901960784313725,.10980392156862745,.08235294117647057,.07058823529411765,.0784313725490196,.08627450980392157,.0784313725490196,.07450980392156863,.0588235294117647,.19607843137254904,.6,.5490196078431373,.9490196078431371,.9058823529411765,.9215686274509803,.8745098039215686,.9686274509803922,.8980392156862745,.8666666666666667,.6549019607843136,.8,.8274509803921568,.7294117647058823,.6392156862745098,.6431372549019607,.6235294117647059,.6823529411764706,.6078431372549019,.5019607843137255,.5529411764705883,.6901960784313725,.5764705882352941,.7294117647058823,.6588235294117646,.7137254901960784,.27058823529411763,.6,.403921568627451,.2549019607843137,.5568627450980392,.3686274509803922,.37254901960784315,.3411764705882353,.10980392156862745,.29411764705882354,.3176470588235294,.2,.3882352941176471,.2627450980392157,.27450980392156865,.33333333333333326,.27450980392156865,.26666666666666666,.8313725490196079,.7843137254901962,.3607843137254902,.2549019607843137,.2784313725490196,.44313725490196076,.47843137254901963,.10588235294117647,.0392156862745098,.07058823529411765,.07058823529411765,.07058823529411765,.07058823529411765,.06274509803921569,.0784313725490196,.07058823529411765,.07450980392156863,.06274509803921569,.06274509803921569,.07058823529411765,.050980392156862744,.07450980392156863,.07058823529411765,.07058823529411765,.10196078431372549,.07058823529411765,.07058823529411765,.07450980392156863],[.08235294117647057,.07058823529411765,.09411764705882353,.08235294117647057,.06666666666666667,.08627450980392157,.09019607843137255,.054901960784313725,.0588235294117647,.08627450980392157,.06666666666666667,.0784313725490196,.10196078431372549,.1411764705882353,.06274509803921569,.054901960784313725,.050980392156862744,.07058823529411765,.14901960784313725,.08235294117647057,.06666666666666667,.06666666666666667,.07450980392156863,.050980392156862744,.0784313725490196,.09019607843137255,.0784313725490196,.07058823529411765,.0784313725490196,.06666666666666667,.07450980392156863,.07058823529411765,.06666666666666667,.06274509803921569,.1568627450980392,.10980392156862745,.47843137254901963,.9686274509803922,.8588235294117647,.9450980392156861,.9647058823529412,.9607843137254902,.9058823529411765,.9254901960784313,.9411764705882352,.8862745098039215,.7568627450980392,.7294117647058823,.8196078431372549,.7372549019607844,.7607843137254902,.6627450980392156,.6509803921568627,.6784313725490196,.5725490196078431,.3686274509803922,.2980392156862745,.4980392156862745,.5725490196078431,.7058823529411765,.9019607843137255,.08235294117647057,.08235294117647057,.09411764705882353,.10196078431372549,.2549019607843137,.25882352941176473,.38431372549019616,.2196078431372549,.27058823529411763,.1176470588235294,.23921568627450981,.39607843137254906,.12156862745098039,.34901960784313724,.2823529411764706,.3176470588235294,.2901960784313726,.2549019607843137,.8745098039215686,.9372549019607842,.3607843137254902,.23921568627450981,.2549019607843137,.4,.5529411764705883,.12941176470588237,.10980392156862745,.06274509803921569,.08235294117647057,.07058823529411765,.07058823529411765,.07450980392156863,.09411764705882353,.0588235294117647,.12941176470588237,.07450980392156863,.06666666666666667,.07450980392156863,.07450980392156863,.07450980392156863,.07450980392156863,.054901960784313725,.07450980392156863,.07058823529411765,.07058823529411765,.0588235294117647],[.07450980392156863,.07058823529411765,.07450980392156863,.06666666666666667,.06274509803921569,.06274509803921569,.054901960784313725,.07058823529411765,.0784313725490196,.09803921568627452,.07450980392156863,.09411764705882353,.0784313725490196,.06666666666666667,.07450980392156863,.08627450980392157,.07450980392156863,.06666666666666667,.054901960784313725,.08235294117647057,.09803921568627452,.07058823529411765,.054901960784313725,.0588235294117647,.10980392156862745,.0588235294117647,.07450980392156863,.0588235294117647,.06666666666666667,.07058823529411765,.09411764705882353,.06666666666666667,.0588235294117647,.09411764705882353,.06666666666666667,.18823529411764706,.9686274509803922,.9215686274509803,.9450980392156861,.9686274509803922,.9450980392156861,.9254901960784313,.9568627450980393,.9215686274509803,.9294117647058823,.9254901960784313,.8156862745098039,.7529411764705882,.6196078431372549,.6509803921568627,.7058823529411765,.6313725490196078,.5607843137254902,.8549019607843137,.38431372549019616,.3882352941176471,.1803921568627451,.3882352941176471,.4666666666666666,.6078431372549019,.4666666666666666,.33333333333333326,.3294117647058823,.09019607843137255,.34509803921568627,.3411764705882353,.3294117647058823,.2823529411764706,.4392156862745098,.2901960784313726,.21176470588235294,.2235294117647059,.3058823529411765,.37254901960784315,.403921568627451,.33725490196078434,.3411764705882353,.2980392156862745,.28627450980392155,.8549019607843137,.9137254901960784,.33333333333333326,.24313725490196078,.30196078431372547,.5843137254901961,.5137254901960784,.16470588235294115,.07058823529411765,.08235294117647057,.07450980392156863,.0784313725490196,.07058823529411765,.06666666666666667,.09019607843137255,.07058823529411765,.07058823529411765,.07058823529411765,.07058823529411765,.07058823529411765,.07450980392156863,.07450980392156863,.0588235294117647,.09411764705882353,.07450980392156863,.07058823529411765,.08235294117647057,.10196078431372549],[.07058823529411765,.07450980392156863,.07058823529411765,.07058823529411765,.07058823529411765,.06666666666666667,.07450980392156863,.07450980392156863,.0784313725490196,.09803921568627452,.0784313725490196,.08235294117647057,.06274509803921569,.07058823529411765,.06666666666666667,.08235294117647057,.07450980392156863,.06274509803921569,.09019607843137255,.07058823529411765,.12156862745098039,.12156862745098039,.12549019607843137,.06274509803921569,.09019607843137255,.06666666666666667,.06666666666666667,.07058823529411765,.08235294117647057,.0784313725490196,.06274509803921569,.07058823529411765,.06274509803921569,.09803921568627452,.0784313725490196,.5764705882352941,.9568627450980393,.8274509803921568,.9333333333333332,.9725490196078431,.8941176470588236,.9686274509803922,.9254901960784313,.9333333333333332,.9098039215686274,.9176470588235294,.9411764705882352,.9058823529411765,.8274509803921568,.7764705882352942,.6039215686274509,.4117647058823529,.6705882352941175,.8,.7960784313725491,.10588235294117647,.21568627450980393,.45098039215686275,.4,.33725490196078434,.45098039215686275,.2980392156862745,.3764705882352941,.19215686274509808,.20392156862745098,.3803921568627451,.5098039215686274,.3764705882352941,.3803921568627451,.4,.3764705882352941,.23137254901960783,.15294117647058825,.19215686274509808,.32156862745098036,.34509803921568627,.3058823529411765,.0784313725490196,.1843137254901961,.8627450980392157,.6196078431372549,.34509803921568627,.27450980392156865,.24313725490196078,.5333333333333333,.3882352941176471,.10980392156862745,.0588235294117647,.09803921568627452,.07058823529411765,.08627450980392157,.07058823529411765,.06274509803921569,.10980392156862745,.07058823529411765,.07450980392156863,.06274509803921569,.07450980392156863,.06666666666666667,.07058823529411765,.07450980392156863,.0784313725490196,.09019607843137255,.07058823529411765,.07058823529411765,.07058823529411765,.08235294117647057],[.07058823529411765,.0784313725490196,.07058823529411765,.07058823529411765,.06666666666666667,.0784313725490196,.06666666666666667,.07058823529411765,.09019607843137255,.07058823529411765,.06274509803921569,.06666666666666667,.1176470588235294,.06274509803921569,.07450980392156863,.06274509803921569,.07058823529411765,.07058823529411765,.06666666666666667,.06666666666666667,.0784313725490196,.050980392156862744,.07450980392156863,.08627450980392157,.11372549019607843,.07058823529411765,.06274509803921569,.06274509803921569,.09019607843137255,.07058823529411765,.07058823529411765,.0784313725490196,.09803921568627452,.08235294117647057,.13333333333333333,.9411764705882352,.9411764705882352,.7568627450980392,.7882352941176471,.9176470588235294,.9725490196078431,.9490196078431371,.8980392156862745,.9058823529411765,.9058823529411765,.9176470588235294,.8862745098039215,.9294117647058823,.8588235294117647,.8431372549019608,.6980392156862745,.3882352941176471,.4,.5176470588235295,.807843137254902,.4549019607843137,.24705882352941178,.2823529411764706,.27058823529411763,.3058823529411765,.27058823529411763,.4705882352941176,.2901960784313726,.2549019607843137,.34901960784313724,.2627450980392157,.26666666666666666,.35294117647058826,.3921568627450981,.4,.13725490196078433,.3686274509803922,.30196078431372547,.1803921568627451,.1803921568627451,.3058823529411765,.22745098039215686,.13725490196078433,.17647058823529413,.8235294117647058,.7882352941176471,.35294117647058826,.30980392156862746,.25882352941176473,.4666666666666666,.45098039215686275,.25882352941176473,.2627450980392157,.054901960784313725,.0588235294117647,.07058823529411765,.08627450980392157,.06666666666666667,.08235294117647057,.07450980392156863,.06274509803921569,.07450980392156863,.07058823529411765,.07450980392156863,.07058823529411765,.07450980392156863,.09411764705882353,.11372549019607843,.06666666666666667,.07450980392156863,.07058823529411765,.09803921568627452],[.07450980392156863,.09411764705882353,.07058823529411765,.07058823529411765,.08627450980392157,.06274509803921569,.06666666666666667,.07058823529411765,.06274509803921569,.06274509803921569,.08235294117647057,.054901960784313725,.0784313725490196,.06274509803921569,.06666666666666667,.06666666666666667,.06274509803921569,.0784313725490196,.06666666666666667,.0784313725490196,.06666666666666667,.10196078431372549,.08627450980392157,.08627450980392157,.09803921568627452,.09411764705882353,.07450980392156863,.08627450980392157,.12549019607843137,.08235294117647057,.07450980392156863,.08235294117647057,.09411764705882353,.054901960784313725,.5686274509803921,.8745098039215686,.8313725490196079,.9450980392156861,.8784313725490196,.9411764705882352,.7647058823529411,.8745098039215686,.9137254901960784,.9176470588235294,.9019607843137255,.8627450980392157,.9333333333333332,.9333333333333332,.9372549019607842,.8313725490196079,.8941176470588236,.8235294117647058,.5882352941176471,.3176470588235294,.4196078431372549,.3294117647058823,.25882352941176473,.09411764705882353,.2196078431372549,.2784313725490196,.28627450980392155,.2352941176470588,.40784313725490196,.2196078431372549,.2196078431372549,.10196078431372549,.27450980392156865,.38431372549019616,.3882352941176471,.403921568627451,.2549019607843137,.24313725490196078,.16470588235294115,.24313725490196078,.15294117647058825,.09803921568627452,.3411764705882353,.27058823529411763,.0784313725490196,.9411764705882352,.7803921568627452,.3686274509803922,.33725490196078434,.2352941176470588,.3607843137254902,.49019607843137253,.23137254901960783,.10196078431372549,.06274509803921569,.07450980392156863,.10980392156862745,.07058823529411765,.07058823529411765,.0588235294117647,.06666666666666667,.07058823529411765,.0588235294117647,.07450980392156863,.07058823529411765,.08235294117647057,.07058823529411765,.11372549019607843,.07058823529411765,.07450980392156863,.06666666666666667,.07058823529411765,.07058823529411765],[.06666666666666667,.07058823529411765,.07058823529411765,.07058823529411765,.07450980392156863,.07058823529411765,.06274509803921569,.0784313725490196,.08235294117647057,.08627450980392157,.08235294117647057,.08235294117647057,.0588235294117647,.06274509803921569,.06274509803921569,.07450980392156863,.06666666666666667,.0784313725490196,.10196078431372549,.07450980392156863,.07450980392156863,.07058823529411765,.06274509803921569,.07450980392156863,.07450980392156863,.06274509803921569,.10588235294117647,.11372549019607843,.08627450980392157,.07058823529411765,.0784313725490196,.09019607843137255,.08627450980392157,.09803921568627452,.7333333333333333,.8901960784313725,.8901960784313725,.9450980392156861,.9647058823529412,.9686274509803922,.9803921568627451,.9725490196078431,.9450980392156861,.9372549019607842,.9176470588235294,.9490196078431371,.8705882352941177,.9058823529411765,.9294117647058823,.9411764705882352,.8823529411764706,.8862745098039215,.807843137254902,.7215686274509804,.34509803921568627,.25098039215686274,.28627450980392155,.21176470588235294,.25098039215686274,.3411764705882353,.16862745098039217,.18823529411764706,.10980392156862745,.2352941176470588,.3607843137254902,.13725490196078433,.10588235294117647,.34901960784313724,.25882352941176473,.3294117647058823,.32156862745098036,.2901960784313726,.2627450980392157,.44313725490196076,.3411764705882353,.0784313725490196,.22745098039215686,.16470588235294115,.07058823529411765,.5450980392156862,.7921568627450981,.3686274509803922,.27058823529411763,.2196078431372549,.2901960784313726,.4980392156862745,.25098039215686274,.10588235294117647,.09411764705882353,.0588235294117647,.07450980392156863,.07058823529411765,.07450980392156863,.06666666666666667,.06666666666666667,.07058823529411765,.0784313725490196,.06666666666666667,.07058823529411765,.06274509803921569,.07450980392156863,.0588235294117647,.06274509803921569,.10588235294117647,.07058823529411765,.07058823529411765,.06666666666666667],[.07450980392156863,.0784313725490196,.06666666666666667,.07450980392156863,.07058823529411765,.07058823529411765,.09411764705882353,.07058823529411765,.07450980392156863,.0784313725490196,.09019607843137255,.047058823529411764,.050980392156862744,.12941176470588237,.06666666666666667,.06666666666666667,.08235294117647057,.07450980392156863,.08235294117647057,.08627450980392157,.06274509803921569,.06666666666666667,.06666666666666667,.10588235294117647,.07058823529411765,.07450980392156863,.07450980392156863,.09019607843137255,.06274509803921569,.08627450980392157,.07450980392156863,.08235294117647057,.0784313725490196,.10980392156862745,.6862745098039216,.8352941176470589,.8274509803921568,.7686274509803923,.9294117647058823,.8980392156862745,.9333333333333332,.9294117647058823,.8627450980392157,.8862745098039215,.8980392156862745,.8627450980392157,.7647058823529411,.8941176470588236,.8196078431372549,.8901960784313725,.8980392156862745,.8274509803921568,.8196078431372549,.7372549019607844,.611764705882353,.3294117647058823,.19607843137254904,.08627450980392157,.47450980392156855,.1450980392156863,.11372549019607843,.12156862745098039,.10196078431372549,.12549019607843137,.20392156862745098,.20784313725490197,.16862745098039217,.13725490196078433,.2196078431372549,.10588235294117647,.29411764705882354,.3686274509803922,.22745098039215686,.33725490196078434,.42745098039215684,.33725490196078434,.34509803921568627,.26666666666666666,.16470588235294115,.5215686274509804,.7215686274509804,.34509803921568627,.3176470588235294,.22745098039215686,.2549019607843137,.5019607843137255,.34901960784313724,.17254901960784313,.0784313725490196,.07450980392156863,.0784313725490196,.07058823529411765,.06666666666666667,.07450980392156863,.043137254901960784,.0784313725490196,.11372549019607843,.07450980392156863,.08627450980392157,.07058823529411765,.07058823529411765,.06666666666666667,.054901960784313725,.07058823529411765,.07058823529411765,.07058823529411765,.07058823529411765],[.07450980392156863,.07450980392156863,.0588235294117647,.07058823529411765,.07450980392156863,.07058823529411765,.08235294117647057,.07058823529411765,.07450980392156863,.06666666666666667,.0588235294117647,.0784313725490196,.054901960784313725,.054901960784313725,.1176470588235294,.07058823529411765,.07058823529411765,.054901960784313725,.0784313725490196,.07058823529411765,.0784313725490196,.08627450980392157,.07058823529411765,.0588235294117647,.07450980392156863,.050980392156862744,.06666666666666667,.08235294117647057,.08235294117647057,.06666666666666667,.07450980392156863,.0784313725490196,.10980392156862745,.09803921568627452,.2901960784313726,.7333333333333333,.7882352941176471,.7960784313725491,.6392156862745098,.9215686274509803,.9568627450980393,.9137254901960784,.8196078431372549,.8117647058823529,.7568627450980392,.8235294117647058,.7450980392156863,.7960784313725491,.7294117647058823,.8392156862745098,.8235294117647058,.8392156862745098,.8235294117647058,.7764705882352942,.6078431372549019,.5215686274509804,.3568627450980392,.35294117647058826,.27450980392156865,.24313725490196078,.06666666666666667,.09411764705882353,.11372549019607843,.10196078431372549,.19607843137254904,.13333333333333333,.0784313725490196,.2549019607843137,.10980392156862745,.24313725490196078,.13333333333333333,.29411764705882354,.3294117647058823,.38431372549019616,.3607843137254902,.3254901960784313,.29411764705882354,.3254901960784313,.10196078431372549,.21568627450980393,.7882352941176471,.4117647058823529,.34901960784313724,.26666666666666666,.2549019607843137,.6274509803921569,.3058823529411765,.09411764705882353,.0784313725490196,.06666666666666667,.06666666666666667,.07450980392156863,.06666666666666667,.07450980392156863,.07450980392156863,.07450980392156863,.07058823529411765,.07450980392156863,.07058823529411765,.07450980392156863,.07058823529411765,.09019607843137255,.0784313725490196,.13725490196078433,.07450980392156863,.07058823529411765,.06274509803921569],[.07058823529411765,.07058823529411765,.10196078431372549,.07058823529411765,.08235294117647057,.06274509803921569,.09019607843137255,.07058823529411765,.07058823529411765,.06666666666666667,.06666666666666667,.09411764705882353,.08235294117647057,.06666666666666667,.06274509803921569,.054901960784313725,.07058823529411765,.07450980392156863,.054901960784313725,.054901960784313725,.054901960784313725,.07058823529411765,.07450980392156863,.06666666666666667,.07058823529411765,.08627450980392157,.13333333333333333,.08235294117647057,.07450980392156863,.07450980392156863,.06274509803921569,.054901960784313725,.10588235294117647,.11372549019607843,.24313725490196078,.3764705882352941,.49411764705882355,.5882352941176471,.6823529411764706,.9098039215686274,.9137254901960784,.9176470588235294,.803921568627451,.7058823529411765,.7215686274509804,.7372549019607844,.7450980392156863,.9058823529411765,.7960784313725491,.7647058823529411,.7607843137254902,.8823529411764706,.8235294117647058,.7490196078431373,.6980392156862745,.5490196078431373,.3411764705882353,.24313725490196078,.34509803921568627,.1843137254901961,.27058823529411763,.3058823529411765,.10980392156862745,.25098039215686274,.11372549019607843,.27058823529411763,.21176470588235294,.08235294117647057,.23137254901960783,.1176470588235294,.3176470588235294,.24705882352941178,.35294117647058826,.3568627450980392,.34901960784313724,.2627450980392157,.37254901960784315,.10196078431372549,.13333333333333333,.27058823529411763,.8666666666666667,.47450980392156855,.3568627450980392,.23921568627450981,.2549019607843137,.7098039215686275,.5176470588235295,.14901960784313725,.0784313725490196,.10196078431372549,.07450980392156863,.07450980392156863,.0784313725490196,.0784313725490196,.07450980392156863,.07058823529411765,.050980392156862744,.10588235294117647,.06274509803921569,.06666666666666667,.0784313725490196,.06274509803921569,.07450980392156863,.07058823529411765,.06666666666666667,.06666666666666667,.09411764705882353],[.0784313725490196,.0784313725490196,.07450980392156863,.06666666666666667,.06666666666666667,.06666666666666667,.0784313725490196,.07058823529411765,.06274509803921569,.06666666666666667,.07450980392156863,.06666666666666667,.06666666666666667,.07058823529411765,.1411764705882353,.08627450980392157,.07450980392156863,.07058823529411765,.07058823529411765,.07450980392156863,.07450980392156863,.10588235294117647,.06666666666666667,.07450980392156863,.07450980392156863,.08627450980392157,.07450980392156863,.07058823529411765,.08627450980392157,.07450980392156863,.08235294117647057,.0784313725490196,.10196078431372549,.1411764705882353,.38431372549019616,.9372549019607842,.7960784313725491,.26666666666666666,.13333333333333333,.9019607843137255,.9647058823529412,.8705882352941177,.7490196078431373,.6274509803921569,.7647058823529411,.5803921568627451,.6823529411764706,.8274509803921568,.8627450980392157,.8117647058823529,.7882352941176471,.8313725490196079,.8901960784313725,.7686274509803923,.5529411764705883,.42745098039215684,.3686274509803922,.26666666666666666,.1803921568627451,.30196078431372547,.2784313725490196,.3176470588235294,.30980392156862746,.20784313725490197,.2784313725490196,.08627450980392157,.18823529411764706,.0784313725490196,.10588235294117647,.24313725490196078,.15294117647058825,.1843137254901961,.2196078431372549,.3764705882352941,.24313725490196078,.18823529411764706,.26666666666666666,.08627450980392157,.054901960784313725,.14901960784313725,.9254901960784313,.4117647058823529,.40784313725490196,.25098039215686274,.27450980392156865,.5607843137254902,.6196078431372549,.21568627450980393,.20392156862745098,.06274509803921569,.07450980392156863,.0784313725490196,.10196078431372549,.0784313725490196,.12941176470588237,.07450980392156863,.07450980392156863,.08235294117647057,.08627450980392157,.06274509803921569,.07450980392156863,.07058823529411765,.07450980392156863,.07450980392156863,.07450980392156863,.0784313725490196,.07058823529411765],[.06666666666666667,.07450980392156863,.0588235294117647,.07450980392156863,.10588235294117647,.06666666666666667,.06666666666666667,.08235294117647057,.054901960784313725,.06274509803921569,.050980392156862744,.07450980392156863,.07058823529411765,.07450980392156863,.07058823529411765,.10588235294117647,.06274509803921569,.054901960784313725,.0784313725490196,.07450980392156863,.07450980392156863,.09019607843137255,.06666666666666667,.07450980392156863,.06666666666666667,.08627450980392157,.07450980392156863,.06666666666666667,.08627450980392157,.10980392156862745,.06666666666666667,.0588235294117647,.13333333333333333,.11372549019607843,.09019607843137255,.8901960784313725,.6784313725490196,.2549019607843137,.34901960784313724,.8549019607843137,.9490196078431371,.8588235294117647,.6705882352941175,.6313725490196078,.6901960784313725,.7137254901960784,.8509803921568627,.7568627450980392,.7490196078431373,.47843137254901963,.5137254901960784,.5725490196078431,.7568627450980392,.7411764705882353,.6,.3686274509803922,.37254901960784315,.30980392156862746,.25098039215686274,.1450980392156863,.07450980392156863,.2784313725490196,.2901960784313726,.29411764705882354,.2196078431372549,.07450980392156863,.3254901960784313,.050980392156862744,.13333333333333333,.12156862745098039,.1803921568627451,.11372549019607843,.3568627450980392,.33333333333333326,.3294117647058823,.2627450980392157,.23137254901960783,.09411764705882353,.11372549019607843,.1176470588235294,.8745098039215686,.43529411764705883,.5254901960784314,.2980392156862745,.27450980392156865,.48627450980392156,.6274509803921569,.1803921568627451,.09019607843137255,.050980392156862744,.23921568627450981,.0784313725490196,.07058823529411765,.07058823529411765,.08627450980392157,.07058823529411765,.0784313725490196,.07058823529411765,.07058823529411765,.07058823529411765,.07450980392156863,.06274509803921569,.07450980392156863,.07058823529411765,.07058823529411765,.07450980392156863,.08627450980392157],[.07450980392156863,.07058823529411765,.07058823529411765,.08235294117647057,.06274509803921569,.0588235294117647,.0784313725490196,.08235294117647057,.06666666666666667,.10196078431372549,.08235294117647057,.06666666666666667,.08627450980392157,.07450980392156863,.06666666666666667,.08627450980392157,.07450980392156863,.0784313725490196,.06274509803921569,.07450980392156863,.07058823529411765,.07058823529411765,.0588235294117647,.07058823529411765,.08627450980392157,.07450980392156863,.07058823529411765,.07058823529411765,.10196078431372549,.07450980392156863,.08235294117647057,.09803921568627452,.08627450980392157,.08627450980392157,.49411764705882355,.8470588235294118,.8862745098039215,.9019607843137255,.7176470588235294,.8862745098039215,.9333333333333332,.7686274509803923,.6039215686274509,.6,.8,.7647058823529411,.9176470588235294,.9725490196078431,.9529411764705881,.12941176470588237,.2352941176470588,.3803921568627451,.4666666666666666,.6313725490196078,.5490196078431373,.3686274509803922,.4117647058823529,.39607843137254906,.3607843137254902,.2823529411764706,.24313725490196078,.2627450980392157,.2549019607843137,.33725490196078434,.2549019607843137,.27058823529411763,.12941176470588237,.2549019607843137,.3254901960784313,.09019607843137255,.08235294117647057,.28627450980392155,.2627450980392157,.28627450980392155,.34509803921568627,.2627450980392157,.24705882352941178,.07450980392156863,.07450980392156863,.14901960784313725,.8431372549019608,.5019607843137255,.6470588235294117,.25098039215686274,.28627450980392155,.5882352941176471,.6745098039215687,.24705882352941178,.11372549019607843,.08627450980392157,.07058823529411765,.07058823529411765,.08235294117647057,.07450980392156863,.10196078431372549,.07058823529411765,.07450980392156863,.07450980392156863,.07450980392156863,.07450980392156863,.07058823529411765,.07450980392156863,.07450980392156863,.07058823529411765,.06274509803921569,.09019607843137255,.07450980392156863],[.0784313725490196,.08235294117647057,.07058823529411765,.06274509803921569,.07450980392156863,.07058823529411765,.07058823529411765,.06666666666666667,.0588235294117647,.0784313725490196,.08235294117647057,.06666666666666667,.06666666666666667,.0588235294117647,.07450980392156863,.06666666666666667,.07450980392156863,.06274509803921569,.07058823529411765,.07450980392156863,.07450980392156863,.08235294117647057,.06274509803921569,.050980392156862744,.07450980392156863,.09803921568627452,.06274509803921569,.07058823529411765,.07450980392156863,.06274509803921569,.09803921568627452,.0588235294117647,.06666666666666667,.10196078431372549,.9490196078431371,.8941176470588236,.807843137254902,.8196078431372549,.7019607843137254,.9019607843137255,.9254901960784313,.6784313725490196,.6235294117647059,.5843137254901961,.7568627450980392,.6980392156862745,.996078431372549,.9764705882352941,.6078431372549019,.29411764705882354,.14901960784313725,.1568627450980392,.3568627450980392,.47843137254901963,.4,.4470588235294118,.4196078431372549,.37254901960784315,.3764705882352941,.33725490196078434,.29411764705882354,.19215686274509808,.27450980392156865,.32156862745098036,.3058823529411765,.1568627450980392,.12941176470588237,.12549019607843137,.2823529411764706,.21568627450980393,.10980392156862745,.17647058823529413,.23137254901960783,.1411764705882353,.33333333333333326,.20784313725490197,.12941176470588237,.10588235294117647,.0784313725490196,.09019607843137255,.8313725490196079,.592156862745098,.7529411764705882,.2549019607843137,.24313725490196078,.592156862745098,.5686274509803921,.29411764705882354,.2235294117647059,.08627450980392157,.25882352941176473,.0588235294117647,.06666666666666667,.07058823529411765,.13725490196078433,.0784313725490196,.07450980392156863,.07058823529411765,.07058823529411765,.07058823529411765,.07450980392156863,.054901960784313725,.07058823529411765,.0784313725490196,.07450980392156863,.06274509803921569,.06274509803921569],[.07450980392156863,.07058823529411765,.0588235294117647,.07450980392156863,.06666666666666667,.07450980392156863,.07450980392156863,.0588235294117647,.06274509803921569,.0784313725490196,.07450980392156863,.07058823529411765,.043137254901960784,.0588235294117647,.06274509803921569,.07450980392156863,.07058823529411765,.0784313725490196,.07058823529411765,.07450980392156863,.07058823529411765,.07058823529411765,.07450980392156863,.06274509803921569,.0784313725490196,.054901960784313725,.07450980392156863,.0588235294117647,.09411764705882353,.1176470588235294,.07058823529411765,.09803921568627452,.11372549019607843,.06666666666666667,.9254901960784313,.9058823529411765,.9058823529411765,.8431372549019608,.9529411764705881,.9725490196078431,.8784313725490196,.6784313725490196,.6470588235294117,.611764705882353,.7490196078431373,.8862745098039215,.8196078431372549,.9019607843137255,.8823529411764706,.24313725490196078,.2901960784313726,.3058823529411765,.42745098039215684,.5019607843137255,.3882352941176471,.41568627450980394,.4823529411764706,.3686274509803922,.403921568627451,.3254901960784313,.3137254901960784,.24313725490196078,.14901960784313725,.27450980392156865,.32156862745098036,.10196078431372549,.2549019607843137,.13333333333333333,.18823529411764706,.09803921568627452,.2196078431372549,.13333333333333333,.24705882352941178,.1803921568627451,.23921568627450981,.13725490196078433,.09803921568627452,.07058823529411765,.06274509803921569,.07450980392156863,.8156862745098039,.6313725490196078,.7921568627450981,.44313725490196076,.24313725490196078,.5058823529411764,.36470588235294116,.5411764705882353,.16078431372549018,.09411764705882353,.1450980392156863,.12156862745098039,.07058823529411765,.0784313725490196,.07058823529411765,.07058823529411765,.07450980392156863,.07058823529411765,.07058823529411765,.07450980392156863,.08235294117647057,.07058823529411765,.07058823529411765,.07450980392156863,.07450980392156863,.08235294117647057,.07058823529411765],[.07450980392156863,.07058823529411765,.07058823529411765,.06666666666666667,.08235294117647057,.07058823529411765,.09019607843137255,.07058823529411765,.0784313725490196,.0784313725490196,.07058823529411765,.0784313725490196,.07058823529411765,.07450980392156863,.07450980392156863,.0588235294117647,.07058823529411765,.08235294117647057,.0784313725490196,.0784313725490196,.0784313725490196,.0588235294117647,.07058823529411765,.06274509803921569,.06666666666666667,.09019607843137255,.06666666666666667,.07058823529411765,.10980392156862745,.09411764705882353,.09803921568627452,.0784313725490196,.08627450980392157,.09019607843137255,.9176470588235294,.8588235294117647,.9411764705882352,.9686274509803922,.9529411764705881,.984313725490196,.8431372549019608,.7764705882352942,.6352941176470588,.6039215686274509,.8509803921568627,.8980392156862745,.9372549019607842,.7725490196078433,.8117647058823529,.5372549019607843,.48627450980392156,.2901960784313726,.4980392156862745,.7019607843137254,.7843137254901962,.6784313725490196,.615686274509804,.5411764705882353,.4980392156862745,.3686274509803922,.3176470588235294,.30980392156862746,.23137254901960783,.21568627450980393,.33333333333333326,.2823529411764706,.24313725490196078,.1450980392156863,.07450980392156863,.23137254901960783,.33333333333333326,.18823529411764706,.3058823529411765,.13725490196078433,.16078431372549018,.14901960784313725,.0784313725490196,.08235294117647057,.09411764705882353,.047058823529411764,.803921568627451,.8274509803921568,.9529411764705881,.8313725490196079,.22745098039215686,.27450980392156865,.596078431372549,.45098039215686275,.17254901960784313,.050980392156862744,.14901960784313725,.08627450980392157,.06274509803921569,.06274509803921569,.07058823529411765,.07058823529411765,.07058823529411765,.07058823529411765,.08627450980392157,.08235294117647057,.07450980392156863,.07058823529411765,.07450980392156863,.07450980392156863,.07058823529411765,.07058823529411765,.07058823529411765],[.07058823529411765,.07058823529411765,.06274509803921569,.07450980392156863,.07058823529411765,.07058823529411765,.06666666666666667,.07058823529411765,.054901960784313725,.07450980392156863,.06274509803921569,.06666666666666667,.08627450980392157,.06666666666666667,.08627450980392157,.0588235294117647,.08235294117647057,.07450980392156863,.0784313725490196,.08627450980392157,.0784313725490196,.08235294117647057,.06274509803921569,.06274509803921569,.06274509803921569,.07058823529411765,.0784313725490196,.07450980392156863,.07450980392156863,.07058823529411765,.07058823529411765,.08235294117647057,.12941176470588237,.06666666666666667,.9294117647058823,.9294117647058823,.8352941176470589,.8705882352941177,.9529411764705881,.9647058823529412,.8549019607843137,.7411764705882353,.6470588235294117,.5803921568627451,.9058823529411765,.9333333333333332,.8901960784313725,.8901960784313725,.8352941176470589,.7450980392156863,.6196078431372549,.6588235294117646,.6705882352941175,.6431372549019607,.7764705882352942,.7843137254901962,.6470588235294117,.4705882352941176,.3882352941176471,.43137254901960786,.34509803921568627,.3254901960784313,.30196078431372547,.24705882352941178,.24705882352941178,.3058823529411765,.12156862745098039,.20784313725490197,.08627450980392157,.10588235294117647,.24313725490196078,.25098039215686274,.30196078431372547,.19607843137254904,.13333333333333333,.13333333333333333,.08235294117647057,.06274509803921569,.07058823529411765,.09803921568627452,.6705882352941175,.8352941176470589,.7568627450980392,.8470588235294118,.27450980392156865,.2235294117647059,.7411764705882353,.46274509803921565,.2627450980392157,.26666666666666666,.16470588235294115,.06274509803921569,.06666666666666667,.07058823529411765,.07058823529411765,.07450980392156863,.07450980392156863,.07058823529411765,.07058823529411765,.07450980392156863,.07450980392156863,.07450980392156863,.07058823529411765,.07450980392156863,.07450980392156863,.07058823529411765,.07058823529411765],[.07058823529411765,.07450980392156863,.07058823529411765,.06666666666666667,.07450980392156863,.07450980392156863,.07058823529411765,.06666666666666667,.08235294117647057,.07058823529411765,.07058823529411765,.06274509803921569,.09411764705882353,.07450980392156863,.0588235294117647,.06666666666666667,.07058823529411765,.08627450980392157,.050980392156862744,.07058823529411765,.07058823529411765,.06666666666666667,.0784313725490196,.07058823529411765,.07058823529411765,.050980392156862744,.10196078431372549,.06666666666666667,.10196078431372549,.06666666666666667,.09411764705882353,.0784313725490196,.08235294117647057,.06666666666666667,.9411764705882352,.7803921568627452,.9529411764705881,.9568627450980393,.8431372549019608,.9215686274509803,.7568627450980392,.5647058823529412,.6431372549019607,.6078431372549019,.8392156862745098,.8627450980392157,.8784313725490196,.9450980392156861,.8862745098039215,.8313725490196079,.8156862745098039,.8196078431372549,.7294117647058823,.8,.8156862745098039,.8117647058823529,.6078431372549019,.4823529411764706,.33725490196078434,.34901960784313724,.34901960784313724,.3568627450980392,.2980392156862745,.29411764705882354,.2549019607843137,.30196078431372547,.3411764705882353,.22745098039215686,.33725490196078434,.12941176470588237,.17254901960784313,.17254901960784313,.16470588235294115,.20784313725490197,.20784313725490197,.3176470588235294,.17647058823529413,.08235294117647057,.0784313725490196,.09411764705882353,.6627450980392156,.8705882352941177,.7019607843137254,.9137254901960784,.3254901960784313,.23137254901960783,.6705882352941175,.47450980392156855,.09411764705882353,.3137254901960784,.1568627450980392,.0784313725490196,.0588235294117647,.07058823529411765,.07058823529411765,.07058823529411765,.07450980392156863,.07058823529411765,.07058823529411765,.0784313725490196,.07058823529411765,.054901960784313725,.07450980392156863,.07450980392156863,.0784313725490196,.0784313725490196,.07058823529411765],[.07058823529411765,.07058823529411765,.07058823529411765,.07058823529411765,.07450980392156863,.07450980392156863,.07058823529411765,.050980392156862744,.07058823529411765,.06274509803921569,.06666666666666667,.07450980392156863,.07058823529411765,.07058823529411765,.07450980392156863,.06274509803921569,.0784313725490196,.07450980392156863,.07450980392156863,.07058823529411765,.0784313725490196,.07058823529411765,.07450980392156863,.06274509803921569,.07058823529411765,.07450980392156863,.054901960784313725,.06666666666666667,.07058823529411765,.06666666666666667,.06274509803921569,.07058823529411765,.08627450980392157,.08627450980392157,.9333333333333332,.9137254901960784,.8470588235294118,.9411764705882352,.9450980392156861,.7568627450980392,.6941176470588235,.611764705882353,.5882352941176471,.615686274509804,.7529411764705882,.8941176470588236,.9490196078431371,.9372549019607842,.8980392156862745,.9647058823529412,.9176470588235294,.8745098039215686,.8862745098039215,.7843137254901962,.7921568627450981,.6823529411764706,.5607843137254902,.47450980392156855,.33333333333333326,.34901960784313724,.33725490196078434,.3568627450980392,.33725490196078434,.3294117647058823,.23921568627450981,.26666666666666666,.17254901960784313,.27058823529411763,.30980392156862746,.28627450980392155,.1843137254901961,.12941176470588237,.11372549019607843,.16862745098039217,.12941176470588237,.09803921568627452,.09019607843137255,.0784313725490196,.0784313725490196,.09019607843137255,.4235294117647059,.8313725490196079,.5372549019607843,.8862745098039215,.2823529411764706,.25098039215686274,.6235294117647059,.3411764705882353,.24705882352941178,.4,.35294117647058826,.12156862745098039,.08235294117647057,.07058823529411765,.06666666666666667,.08235294117647057,.07058823529411765,.06666666666666667,.07450980392156863,.07058823529411765,.07450980392156863,.07450980392156863,.07450980392156863,.07058823529411765,.07058823529411765,.07058823529411765,.07058823529411765],[.07058823529411765,.06666666666666667,.07058823529411765,.07450980392156863,.0784313725490196,.07450980392156863,.07058823529411765,.0784313725490196,.07058823529411765,.06274509803921569,.08235294117647057,.07058823529411765,.07450980392156863,.08235294117647057,.07058823529411765,.08235294117647057,.07058823529411765,.09411764705882353,.08627450980392157,.06666666666666667,.06274509803921569,.07450980392156863,.07058823529411765,.06666666666666667,.07058823529411765,.047058823529411764,.07058823529411765,.050980392156862744,.07058823529411765,.050980392156862744,.10588235294117647,.07450980392156863,.07058823529411765,.0588235294117647,.9137254901960784,.9372549019607842,.9411764705882352,.9215686274509803,.9294117647058823,.7215686274509804,.6235294117647059,.5450980392156862,.5137254901960784,.5450980392156862,.7215686274509804,.807843137254902,.8784313725490196,.9490196078431371,.9490196078431371,.9372549019607842,.9725490196078431,.9568627450980393,.8745098039215686,.8549019607843137,.7137254901960784,.6627450980392156,.5568627450980392,.38431372549019616,.39607843137254906,.34509803921568627,.33725490196078434,.3176470588235294,.3058823529411765,.3568627450980392,.26666666666666666,.24313725490196078,.25882352941176473,.21568627450980393,.16470588235294115,.20784313725490197,.34509803921568627,.1843137254901961,.09803921568627452,.1176470588235294,.08627450980392157,.12549019607843137,.07058823529411765,.07058823529411765,.09019607843137255,.1176470588235294,.29411764705882354,.8,.5176470588235295,.8470588235294118,.29411764705882354,.22745098039215686,.6509803921568627,.24313725490196078,.19215686274509808,.34901960784313724,.33725490196078434,.07058823529411765,.07450980392156863,.06666666666666667,.06666666666666667,.06666666666666667,.07450980392156863,.08627450980392157,.07450980392156863,.07450980392156863,.07450980392156863,.07450980392156863,.07450980392156863,.07058823529411765,.07058823529411765,.0784313725490196,.10980392156862745],[.07450980392156863,.07058823529411765,.06666666666666667,.06274509803921569,.07058823529411765,.07058823529411765,.07058823529411765,.07450980392156863,.06666666666666667,.0588235294117647,.06274509803921569,.07450980392156863,.06666666666666667,.06274509803921569,.07450980392156863,.09019607843137255,.08627450980392157,.07058823529411765,.06666666666666667,.07058823529411765,.0588235294117647,.06274509803921569,.054901960784313725,.08627450980392157,.06666666666666667,.06666666666666667,.07058823529411765,.08627450980392157,.07450980392156863,.07058823529411765,.06666666666666667,.10980392156862745,.09019607843137255,.13725490196078433,.9137254901960784,.8431372549019608,.9215686274509803,.9098039215686274,.7843137254901962,.6627450980392156,.615686274509804,.5215686274509804,.5058823529411764,.5333333333333333,.8705882352941177,.8745098039215686,.9058823529411765,.8823529411764706,.9019607843137255,.9450980392156861,.9254901960784313,.8901960784313725,.7960784313725491,.8117647058823529,.7411764705882353,.6392156862745098,.45098039215686275,.33333333333333326,.3568627450980392,.32156862745098036,.3764705882352941,.37254901960784315,.37254901960784315,.3568627450980392,.27058823529411763,.25098039215686274,.25882352941176473,.22745098039215686,.12941176470588237,.2352941176470588,.2627450980392157,.19215686274509808,.16862745098039217,.25098039215686274,.07450980392156863,.09019607843137255,.0588235294117647,.1176470588235294,.06274509803921569,.0588235294117647,.20784313725490197,.7725490196078433,.6431372549019607,.9215686274509803,.33333333333333326,.30196078431372547,.5764705882352941,.2784313725490196,.23921568627450981,.15294117647058825,.2823529411764706,.12941176470588237,.07058823529411765,.07058823529411765,.06666666666666667,.07058823529411765,.07058823529411765,.07450980392156863,.07058823529411765,.07450980392156863,.07450980392156863,.07058823529411765,.07058823529411765,.12549019607843137,.07058823529411765,.11372549019607843,.07450980392156863],[.07058823529411765,.0588235294117647,.07058823529411765,.07450980392156863,.07058823529411765,.047058823529411764,.07450980392156863,.08627450980392157,.07058823529411765,.06666666666666667,.0588235294117647,.06666666666666667,.0588235294117647,.07058823529411765,.09019607843137255,.07058823529411765,.0784313725490196,.07450980392156863,.07450980392156863,.06274509803921569,.050980392156862744,.054901960784313725,.07450980392156863,.06274509803921569,.07058823529411765,.06274509803921569,.12156862745098039,.06666666666666667,.07058823529411765,.07450980392156863,.09411764705882353,.0588235294117647,.09019607843137255,.10980392156862745,.807843137254902,.9490196078431371,.9098039215686274,.9333333333333332,.7843137254901962,.6823529411764706,.5137254901960784,.5529411764705883,.5450980392156862,.4549019607843137,.592156862745098,.9411764705882352,.9254901960784313,.7921568627450981,.8431372549019608,.8862745098039215,.9019607843137255,.807843137254902,.7450980392156863,.5803921568627451,.6352941176470588,.5882352941176471,.4117647058823529,.33725490196078434,.34509803921568627,.40784313725490196,.39607843137254906,.33725490196078434,.3921568627450981,.3254901960784313,.2901960784313726,.3254901960784313,.19215686274509808,.1803921568627451,.26666666666666666,.33333333333333326,.3294117647058823,.18823529411764706,.12941176470588237,.0784313725490196,.07058823529411765,.07058823529411765,.06666666666666667,.10196078431372549,.10588235294117647,.09803921568627452,.20392156862745098,.7568627450980392,.5882352941176471,.9568627450980393,.3294117647058823,.30196078431372547,.7176470588235294,.6313725490196078,.2352941176470588,.13725490196078433,.2196078431372549,.1450980392156863,.06666666666666667,.07058823529411765,.06666666666666667,.07058823529411765,.07058823529411765,.06666666666666667,.12156862745098039,.06666666666666667,.07058823529411765,.08235294117647057,.07058823529411765,.07450980392156863,.06666666666666667,.07450980392156863,.09803921568627452],[.07058823529411765,.07058823529411765,.050980392156862744,.06274509803921569,.0588235294117647,.09803921568627452,.10196078431372549,.07450980392156863,.0588235294117647,.07450980392156863,.07058823529411765,.07058823529411765,.06666666666666667,.0588235294117647,.06666666666666667,.06274509803921569,.07450980392156863,.07450980392156863,.0784313725490196,.06274509803921569,.07450980392156863,.06666666666666667,.09411764705882353,.06666666666666667,.06666666666666667,.06274509803921569,.0588235294117647,.07450980392156863,.07450980392156863,.07058823529411765,.09019607843137255,.09019607843137255,.06666666666666667,.07058823529411765,.40784313725490196,.9568627450980393,.9568627450980393,.8627450980392157,.5372549019607843,.5725490196078431,.5450980392156862,.48627450980392156,.5215686274509804,.43529411764705883,.47450980392156855,.8823529411764706,.9411764705882352,.8549019607843137,.8745098039215686,.7803921568627452,.8235294117647058,.8235294117647058,.7176470588235294,.6509803921568627,.6313725490196078,.4196078431372549,.3803921568627451,.32156862745098036,.35294117647058826,.39607843137254906,.3882352941176471,.35294117647058826,.29411764705882354,.3764705882352941,.26666666666666666,.3058823529411765,.24705882352941178,.34509803921568627,.30196078431372547,.23921568627450981,.20784313725490197,.06666666666666667,.15294117647058825,.08235294117647057,.07058823529411765,.07450980392156863,.07058823529411765,.09411764705882353,.07450980392156863,.07450980392156863,.12549019607843137,.8901960784313725,.6941176470588235,.8862745098039215,.3411764705882353,.29411764705882354,.6549019607843136,.8980392156862745,.2784313725490196,.10980392156862745,.3294117647058823,.3411764705882353,.09803921568627452,.0784313725490196,.06666666666666667,.07058823529411765,.07450980392156863,.07450980392156863,.07058823529411765,.07058823529411765,.0784313725490196,.0784313725490196,.07450980392156863,.07450980392156863,.07058823529411765,.07058823529411765,.0588235294117647],[.07450980392156863,.07058823529411765,.07450980392156863,.08235294117647057,.06274509803921569,.07058823529411765,.09019607843137255,.07058823529411765,.11372549019607843,.06666666666666667,.06666666666666667,.06666666666666667,.06666666666666667,.07450980392156863,.0784313725490196,.0784313725490196,.07058823529411765,.06274509803921569,.07450980392156863,.07058823529411765,.10980392156862745,.0588235294117647,.07058823529411765,.0588235294117647,.08235294117647057,.07058823529411765,.06666666666666667,.07058823529411765,.07450980392156863,.07450980392156863,.06666666666666667,.06666666666666667,.06666666666666667,.08235294117647057,.19215686274509808,.9098039215686274,.9411764705882352,.9254901960784313,.7607843137254902,.3294117647058823,.3411764705882353,.40784313725490196,.403921568627451,.4705882352941176,.3058823529411765,.8784313725490196,.9529411764705881,.9215686274509803,.8549019607843137,.8274509803921568,.7960784313725491,.8156862745098039,.6666666666666665,.6431372549019607,.596078431372549,.48627450980392156,.3411764705882353,.34509803921568627,.3568627450980392,.3411764705882353,.3764705882352941,.3568627450980392,.3803921568627451,.34901960784313724,.32156862745098036,.2980392156862745,.30196078431372547,.3294117647058823,.30980392156862746,.2352941176470588,.16470588235294115,.06666666666666667,.08235294117647057,.07058823529411765,.07450980392156863,.07058823529411765,.09019607843137255,.06666666666666667,.06666666666666667,.10196078431372549,.11372549019607843,.8627450980392157,.7019607843137254,.9333333333333332,.3254901960784313,.33333333333333326,.6509803921568627,.9450980392156861,.33333333333333326,.14901960784313725,.2784313725490196,.5529411764705883,.09019607843137255,.0784313725490196,.07450980392156863,.07058823529411765,.07450980392156863,.07450980392156863,.07450980392156863,.07058823529411765,.07450980392156863,.07058823529411765,.07450980392156863,.06666666666666667,.07058823529411765,.07058823529411765,.08235294117647057],[.0784313725490196,.07058823529411765,.07058823529411765,.07450980392156863,.07058823529411765,.07058823529411765,.07058823529411765,.07058823529411765,.07058823529411765,.07058823529411765,.06666666666666667,.07058823529411765,.06666666666666667,.06274509803921569,.09019607843137255,.07058823529411765,.07058823529411765,.07058823529411765,.050980392156862744,.0588235294117647,.06666666666666667,.07450980392156863,.07058823529411765,.06666666666666667,.07450980392156863,.12941176470588237,.08235294117647057,.07450980392156863,.06274509803921569,.0784313725490196,.06666666666666667,.07058823529411765,.07450980392156863,.09803921568627452,.09019607843137255,.9254901960784313,.9333333333333332,.9098039215686274,.9764705882352941,.8509803921568627,.40784313725490196,.3764705882352941,.43137254901960786,.5333333333333333,.5764705882352941,.8705882352941177,.8980392156862745,.8392156862745098,.8627450980392157,.8823529411764706,.7803921568627452,.8941176470588236,.6823529411764706,.6745098039215687,.5450980392156862,.42745098039215684,.3568627450980392,.37254901960784315,.403921568627451,.43137254901960786,.4,.3411764705882353,.39607843137254906,.37254901960784315,.3058823529411765,.3254901960784313,.3254901960784313,.3764705882352941,.2549019607843137,.25098039215686274,.08235294117647057,.07058823529411765,.0784313725490196,.07058823529411765,.06274509803921569,.07450980392156863,.07450980392156863,.0784313725490196,.08235294117647057,.10980392156862745,.043137254901960784,.9411764705882352,.7529411764705882,.8784313725490196,.37254901960784315,.3568627450980392,.6901960784313725,.9725490196078431,.44313725490196076,.22745098039215686,.1803921568627451,.5450980392156862,.09803921568627452,.08627450980392157,.0588235294117647,.08627450980392157,.07450980392156863,.07450980392156863,.07058823529411765,.07058823529411765,.07058823529411765,.07058823529411765,.06274509803921569,.0784313725490196,.07058823529411765,.0784313725490196,.07058823529411765],[.06274509803921569,.06274509803921569,.0588235294117647,.07450980392156863,.06666666666666667,.07058823529411765,.07058823529411765,.06666666666666667,.07058823529411765,.06666666666666667,.06666666666666667,.07058823529411765,.054901960784313725,.06274509803921569,.10196078431372549,.0588235294117647,.06666666666666667,.07450980392156863,.06666666666666667,.054901960784313725,.07058823529411765,.07450980392156863,.07058823529411765,.07058823529411765,.09019607843137255,.0784313725490196,.07058823529411765,.07058823529411765,.06274509803921569,.0588235294117647,.054901960784313725,.08235294117647057,.11372549019607843,.08235294117647057,.09803921568627452,.8745098039215686,.9215686274509803,.9372549019607842,.9411764705882352,.8823529411764706,.6470588235294117,.6784313725490196,.6627450980392156,.7372549019607844,.803921568627451,.8509803921568627,.9411764705882352,.8274509803921568,.8705882352941177,.8274509803921568,.7450980392156863,.6313725490196078,.6588235294117646,.6352941176470588,.4980392156862745,.403921568627451,.40784313725490196,.3764705882352941,.403921568627451,.43137254901960786,.4,.3176470588235294,.36470588235294116,.29411764705882354,.3764705882352941,.38431372549019616,.32156862745098036,.30980392156862746,.19215686274509808,.06666666666666667,.0784313725490196,.07058823529411765,.09411764705882353,.07450980392156863,.06666666666666667,.09019607843137255,.08235294117647057,.09411764705882353,.06666666666666667,.09803921568627452,.08627450980392157,.9568627450980393,.9725490196078431,.8745098039215686,.43529411764705883,.4,.8509803921568627,.9686274509803922,.4980392156862745,.24313725490196078,.20784313725490197,.47843137254901963,.16470588235294115,.0784313725490196,.0588235294117647,.07450980392156863,.07450980392156863,.07450980392156863,.06666666666666667,.07058823529411765,.050980392156862744,.08235294117647057,.07058823529411765,.07058823529411765,.07450980392156863,.07058823529411765,.07058823529411765],[.07058823529411765,.07450980392156863,.07058823529411765,.07058823529411765,.07450980392156863,.07058823529411765,.07058823529411765,.07058823529411765,.07058823529411765,.06666666666666667,.06274509803921569,.0588235294117647,.06666666666666667,.07058823529411765,.06666666666666667,.0588235294117647,.07450980392156863,.06666666666666667,.0588235294117647,.0784313725490196,.06274509803921569,.07450980392156863,.08235294117647057,.050980392156862744,.07450980392156863,.06274509803921569,.07058823529411765,.07450980392156863,.07058823529411765,.07058823529411765,.0784313725490196,.07058823529411765,.07450980392156863,.09019607843137255,.12156862745098039,.596078431372549,.9529411764705881,.984313725490196,.8745098039215686,.9411764705882352,.5803921568627451,.6588235294117646,.6941176470588235,.6705882352941175,.803921568627451,.7803921568627452,.8313725490196079,.7803921568627452,.807843137254902,.8156862745098039,.6901960784313725,.6392156862745098,.6745098039215687,.5568627450980392,.49019607843137253,.4470588235294118,.38431372549019616,.34901960784313724,.38431372549019616,.36470588235294116,.36470588235294116,.3803921568627451,.33725490196078434,.3176470588235294,.27450980392156865,.1411764705882353,.25882352941176473,.12941176470588237,.0784313725490196,.06666666666666667,.07058823529411765,.07450980392156863,.07058823529411765,.07450980392156863,.0784313725490196,.08627450980392157,.0784313725490196,.07450980392156863,.06666666666666667,.07450980392156863,.20784313725490197,.9411764705882352,.8705882352941177,.9058823529411765,.4666666666666666,.35294117647058826,.34509803921568627,.9176470588235294,.9647058823529412,.24313725490196078,.20784313725490197,.30980392156862746,.42745098039215684,.07058823529411765,.06274509803921569,.07058823529411765,.07450980392156863,.07058823529411765,.07058823529411765,.07058823529411765,.07450980392156863,.0588235294117647,.07450980392156863,.0588235294117647,.07058823529411765,.07058823529411765,.07058823529411765],[.07058823529411765,.07058823529411765,.0588235294117647,.07058823529411765,.06274509803921569,.07058823529411765,.07450980392156863,.0784313725490196,.07058823529411765,.07450980392156863,.07058823529411765,.0784313725490196,.07058823529411765,.06666666666666667,.06274509803921569,.07058823529411765,.08235294117647057,.06274509803921569,.050980392156862744,.08235294117647057,.0588235294117647,.07450980392156863,.08235294117647057,.07450980392156863,.07450980392156863,.07450980392156863,.07450980392156863,.06666666666666667,.07058823529411765,.08235294117647057,.054901960784313725,.12549019607843137,.07058823529411765,.10196078431372549,.08627450980392157,.07058823529411765,.9019607843137255,.7411764705882353,.6549019607843136,.6588235294117646,.6274509803921569,.6392156862745098,.6705882352941175,.6941176470588235,.7254901960784313,.7764705882352942,.7607843137254902,.8392156862745098,.8196078431372549,.6588235294117646,.6627450980392156,.5254901960784314,.5725490196078431,.5176470588235295,.4705882352941176,.46274509803921565,.4666666666666666,.4549019607843137,.44313725490196076,.4,.4705882352941176,.403921568627451,.3764705882352941,.3411764705882353,.2823529411764706,.22745098039215686,.2823529411764706,.10196078431372549,.07450980392156863,.06666666666666667,.07450980392156863,.08235294117647057,.06274509803921569,.07058823529411765,.07058823529411765,.0588235294117647,.06666666666666667,.07058823529411765,.09019607843137255,.14901960784313725,.1176470588235294,.9294117647058823,.7882352941176471,.9450980392156861,.4666666666666666,.3607843137254902,.37254901960784315,.9568627450980393,.9450980392156861,.2627450980392157,.2549019607843137,.3137254901960784,.4235294117647059,.15294117647058825,.2235294117647059,.09019607843137255,.07058823529411765,.08235294117647057,.07450980392156863,.07058823529411765,.07450980392156863,.1450980392156863,.06274509803921569,.07450980392156863,.07058823529411765,.07450980392156863,.07058823529411765],[.07450980392156863,.07058823529411765,.07058823529411765,.07058823529411765,.054901960784313725,.07058823529411765,.08627450980392157,.0784313725490196,.07058823529411765,.06666666666666667,.07058823529411765,.06666666666666667,.07058823529411765,.06666666666666667,.07058823529411765,.06666666666666667,.0784313725490196,.06666666666666667,.06274509803921569,.1176470588235294,.0588235294117647,.0588235294117647,.0784313725490196,.0588235294117647,.054901960784313725,.07450980392156863,.07450980392156863,.07058823529411765,.06274509803921569,.08235294117647057,.06274509803921569,.07450980392156863,.07450980392156863,.09803921568627452,.07058823529411765,.0784313725490196,.9019607843137255,.9411764705882352,.6078431372549019,.4980392156862745,.6235294117647059,.5764705882352941,.596078431372549,.5843137254901961,.6549019607843136,.6627450980392156,.7764705882352942,.8352941176470589,.7647058823529411,.6705882352941175,.6,.6392156862745098,.5372549019607843,.5058823529411764,.4470588235294118,.4588235294117647,.5098039215686274,.47843137254901963,.43529411764705883,.4980392156862745,.40784313725490196,.39607843137254906,.3411764705882353,.29411764705882354,.27058823529411763,.27450980392156865,.18823529411764706,.2352941176470588,.10196078431372549,.08235294117647057,.06666666666666667,.0784313725490196,.07058823529411765,.07058823529411765,.07058823529411765,.13725490196078433,.0784313725490196,.0784313725490196,.06666666666666667,.07058823529411765,.1411764705882353,.9019607843137255,.9254901960784313,.8705882352941177,.4549019607843137,.3686274509803922,.3176470588235294,.8,.9215686274509803,.27058823529411763,.16078431372549018,.25098039215686274,.45098039215686275,.592156862745098,.3764705882352941,.0588235294117647,.07058823529411765,.07450980392156863,.0784313725490196,.07058823529411765,.07450980392156863,.07058823529411765,.06274509803921569,.06666666666666667,.07058823529411765,.07450980392156863,.0588235294117647],[.07058823529411765,.0588235294117647,.07058823529411765,.07450980392156863,.07450980392156863,.07058823529411765,.08235294117647057,.07058823529411765,.07450980392156863,.0588235294117647,.0588235294117647,.07058823529411765,.06666666666666667,.06666666666666667,.07058823529411765,.07058823529411765,.07450980392156863,.06274509803921569,.08627450980392157,.09019607843137255,.07450980392156863,.07058823529411765,.07058823529411765,.0784313725490196,.07450980392156863,.08235294117647057,.06666666666666667,.0784313725490196,.09803921568627452,.07450980392156863,.06274509803921569,.08627450980392157,.07450980392156863,.06666666666666667,.07450980392156863,.08235294117647057,.3254901960784313,.8901960784313725,.7098039215686275,.7058823529411765,.6666666666666665,.7882352941176471,.47450980392156855,.5529411764705883,.5019607843137255,.6196078431372549,.7372549019607844,.7294117647058823,.6549019607843136,.7411764705882353,.6235294117647059,.5686274509803921,.49411764705882355,.47843137254901963,.44313725490196076,.48627450980392156,.5254901960784314,.5294117647058824,.48627450980392156,.48627450980392156,.4705882352941176,.41568627450980394,.36470588235294116,.3058823529411765,.2784313725490196,.3176470588235294,.2901960784313726,.23137254901960783,.11372549019607843,.07450980392156863,.0784313725490196,.06274509803921569,.0784313725490196,.12941176470588237,.07450980392156863,.08235294117647057,.08235294117647057,.0784313725490196,.07058823529411765,.09411764705882353,.1568627450980392,.9529411764705881,.9490196078431371,.9411764705882352,.4823529411764706,.37254901960784315,.33333333333333326,.8392156862745098,.9176470588235294,.43137254901960786,.1843137254901961,.3176470588235294,.5529411764705883,.2784313725490196,.06666666666666667,.0588235294117647,.08235294117647057,.08235294117647057,.07058823529411765,.07058823529411765,.07450980392156863,.07058823529411765,.07450980392156863,.06666666666666667,.07058823529411765,.07058823529411765,.0784313725490196],[.06666666666666667,.0784313725490196,.07450980392156863,.07450980392156863,.07450980392156863,.07058823529411765,.0784313725490196,.07058823529411765,.07450980392156863,.07058823529411765,.08235294117647057,.07058823529411765,.06274509803921569,.07058823529411765,.07450980392156863,.1176470588235294,.07450980392156863,.06274509803921569,.07058823529411765,.06666666666666667,.07450980392156863,.06666666666666667,.07058823529411765,.0588235294117647,.07058823529411765,.06274509803921569,.06274509803921569,.07450980392156863,.08235294117647057,.06666666666666667,.07450980392156863,.0588235294117647,.09411764705882353,.08235294117647057,.09019607843137255,.12156862745098039,.09411764705882353,.8196078431372549,.8901960784313725,.9529411764705881,.8705882352941177,.8117647058823529,.6901960784313725,.6745098039215687,.615686274509804,.6509803921568627,.7686274509803923,.7960784313725491,.6784313725490196,.6274509803921569,.5647058823529412,.5254901960784314,.48627450980392156,.5058823529411764,.5098039215686274,.5019607843137255,.5058823529411764,.5137254901960784,.5215686274509804,.5294117647058824,.4823529411764706,.4,.3568627450980392,.37254901960784315,.3254901960784313,.9019607843137255,.3764705882352941,.2980392156862745,.1803921568627451,.08235294117647057,.07058823529411765,.14901960784313725,.07450980392156863,.07058823529411765,.06666666666666667,.07450980392156863,.0784313725490196,.054901960784313725,.054901960784313725,.10980392156862745,.0784313725490196,.9450980392156861,.9647058823529412,.9215686274509803,.5254901960784314,.5529411764705883,.3803921568627451,.7882352941176471,.9294117647058823,.7450980392156863,.2549019607843137,.25882352941176473,.4117647058823529,.3607843137254902,.08627450980392157,.0784313725490196,.06666666666666667,.07450980392156863,.07058823529411765,.07058823529411765,.07058823529411765,.06274509803921569,.054901960784313725,.07450980392156863,.054901960784313725,.07058823529411765,.06666666666666667],[.09019607843137255,.0588235294117647,.07058823529411765,.06666666666666667,.07058823529411765,.07450980392156863,.09803921568627452,.09411764705882353,.06274509803921569,.07058823529411765,.07058823529411765,.06666666666666667,.06274509803921569,.07450980392156863,.09019607843137255,.07450980392156863,.07450980392156863,.06274509803921569,.0784313725490196,.0784313725490196,.0588235294117647,.06666666666666667,.0588235294117647,.06274509803921569,.07058823529411765,.07058823529411765,.09019607843137255,.06666666666666667,.06666666666666667,.0588235294117647,.06666666666666667,.07058823529411765,.0784313725490196,.09019607843137255,.0784313725490196,.08235294117647057,.08235294117647057,.7882352941176471,.9098039215686274,.8509803921568627,.8549019607843137,.6509803921568627,.5803921568627451,.6274509803921569,.6039215686274509,.7019607843137254,.7686274509803923,.7686274509803923,.7568627450980392,.6745098039215687,.596078431372549,.5647058823529412,.5294117647058824,.5176470588235295,.5137254901960784,.47450980392156855,.4823529411764706,.5450980392156862,.5137254901960784,.5294117647058824,.4549019607843137,.4235294117647059,.30980392156862746,.30980392156862746,.34509803921568627,.9294117647058823,.5372549019607843,.24705882352941178,.17647058823529413,.13333333333333333,.1176470588235294,.06666666666666667,.07450980392156863,.07450980392156863,.06274509803921569,.07450980392156863,.06666666666666667,.0784313725490196,.09019607843137255,.09411764705882353,.13333333333333333,.9490196078431371,.9372549019607842,.9764705882352941,.5058823529411764,.5725490196078431,.3882352941176471,.8745098039215686,.803921568627451,.9686274509803922,.23921568627450981,.28627450980392155,.4117647058823529,.5607843137254902,.09019607843137255,.054901960784313725,.06666666666666667,.07058823529411765,.07450980392156863,.06274509803921569,.07450980392156863,.0784313725490196,.06274509803921569,.08235294117647057,.07450980392156863,.07058823529411765,.07450980392156863],[.07058823529411765,.0784313725490196,.07058823529411765,.054901960784313725,.07058823529411765,.08235294117647057,.0588235294117647,.07058823529411765,.07058823529411765,.07058823529411765,.07058823529411765,.06666666666666667,.0588235294117647,.08627450980392157,.07058823529411765,.07058823529411765,.10196078431372549,.07450980392156863,.043137254901960784,.08235294117647057,.07058823529411765,.06666666666666667,.06274509803921569,.08627450980392157,.08627450980392157,.06274509803921569,.07058823529411765,.06666666666666667,.07058823529411765,.08627450980392157,.0588235294117647,.06666666666666667,.08627450980392157,.06666666666666667,.050980392156862744,.07450980392156863,.09019607843137255,.19215686274509808,.9686274509803922,.8196078431372549,.6941176470588235,.6274509803921569,.6078431372549019,.5764705882352941,.6078431372549019,.611764705882353,.6470588235294117,.6549019607843136,.7019607843137254,.5686274509803921,.5529411764705883,.5686274509803921,.5725490196078431,.5137254901960784,.5333333333333333,.5215686274509804,.5254901960784314,.596078431372549,.5137254901960784,.5333333333333333,.4980392156862745,.34901960784313724,.2901960784313726,.3411764705882353,.403921568627451,.5764705882352941,.42745098039215684,.16470588235294115,.14901960784313725,.0588235294117647,.06666666666666667,.06666666666666667,.23137254901960783,.07058823529411765,.08627450980392157,.06666666666666667,.16078431372549018,.12156862745098039,.12549019607843137,.10980392156862745,.09411764705882353,.9411764705882352,.9607843137254902,.9450980392156861,.611764705882353,.8352941176470589,.403921568627451,.7254901960784313,.9058823529411765,.9686274509803922,.27058823529411763,.3176470588235294,.3294117647058823,.5411764705882353,.14901960784313725,.0784313725490196,.09019607843137255,.07058823529411765,.07450980392156863,.07450980392156863,.07058823529411765,.050980392156862744,.07058823529411765,.06274509803921569,.07058823529411765,.07058823529411765,.07058823529411765],[.07450980392156863,.07450980392156863,.06274509803921569,.07450980392156863,.07450980392156863,.054901960784313725,.08627450980392157,.07450980392156863,.06666666666666667,.07058823529411765,.06666666666666667,.07058823529411765,.07058823529411765,.07058823529411765,.07058823529411765,.07058823529411765,.06274509803921569,.06274509803921569,.06666666666666667,.07450980392156863,.0784313725490196,.06666666666666667,.0784313725490196,.09019607843137255,.06666666666666667,.06666666666666667,.09803921568627452,.09803921568627452,.07450980392156863,.07450980392156863,.0784313725490196,.054901960784313725,.07450980392156863,.07450980392156863,.08235294117647057,.08235294117647057,.11372549019607843,.08627450980392157,.9254901960784313,.9333333333333332,.8588235294117647,.8901960784313725,.6196078431372549,.5529411764705883,.592156862745098,.6313725490196078,.6588235294117646,.6509803921568627,.6941176470588235,.5803921568627451,.5725490196078431,.5725490196078431,.47843137254901963,.596078431372549,.5490196078431373,.6,.615686274509804,.5215686274509804,.5686274509803921,.49411764705882355,.3294117647058823,.37254901960784315,.3568627450980392,.34509803921568627,.3607843137254902,.30980392156862746,.4823529411764706,.24313725490196078,.4549019607843137,.09803921568627452,.07450980392156863,.09803921568627452,.09019607843137255,.0588235294117647,.06666666666666667,.09411764705882353,.054901960784313725,.1450980392156863,.16078431372549018,.0588235294117647,.0784313725490196,.9411764705882352,.9294117647058823,.8352941176470589,.6549019607843136,.8784313725490196,.39607843137254906,.8666666666666667,.9137254901960784,.9215686274509803,.24705882352941178,.27058823529411763,.16470588235294115,.5882352941176471,.5098039215686274,.11372549019607843,.10196078431372549,.08627450980392157,.07450980392156863,.08235294117647057,.06666666666666667,.12156862745098039,.07058823529411765,.07450980392156863,.07450980392156863,.06274509803921569,.07450980392156863],[.0784313725490196,.07450980392156863,.07450980392156863,.08235294117647057,.0784313725490196,.054901960784313725,.0784313725490196,.06666666666666667,.06666666666666667,.08627450980392157,.06666666666666667,.06666666666666667,.050980392156862744,.07058823529411765,.06274509803921569,.06666666666666667,.0588235294117647,.07450980392156863,.0784313725490196,.07058823529411765,.06274509803921569,.06274509803921569,.07450980392156863,.0784313725490196,.047058823529411764,.07450980392156863,.06274509803921569,.0588235294117647,.0588235294117647,.08235294117647057,.0784313725490196,.0784313725490196,.07058823529411765,.054901960784313725,.07058823529411765,.08627450980392157,.0588235294117647,.09803921568627452,.9333333333333332,.9490196078431371,.9411764705882352,.9137254901960784,.7803921568627452,.7450980392156863,.6705882352941175,.5647058823529412,.6,.6235294117647059,.5882352941176471,.6078431372549019,.6039215686274509,.5882352941176471,.5803921568627451,.611764705882353,.5686274509803921,.5607843137254902,.5254901960784314,.5607843137254902,.403921568627451,.41568627450980394,.37254901960784315,.34509803921568627,.3803921568627451,.3764705882352941,.34509803921568627,.3764705882352941,.5411764705882353,.3686274509803922,.2627450980392157,.16470588235294115,.2,.36470588235294116,.5372549019607843,.3607843137254902,.5333333333333333,.596078431372549,.4980392156862745,.3568627450980392,.33725490196078434,.3176470588235294,.1176470588235294,.807843137254902,.9529411764705881,.6313725490196078,.7294117647058823,.9254901960784313,.39607843137254906,.5450980392156862,.8980392156862745,.8784313725490196,.3058823529411765,.20392156862745098,.3803921568627451,.49411764705882355,.6352941176470588,.16862745098039217,.10980392156862745,.0588235294117647,.06666666666666667,.07058823529411765,.07450980392156863,.07058823529411765,.07058823529411765,.07450980392156863,.06666666666666667,.07450980392156863,.07058823529411765],[.07450980392156863,.06274509803921569,.07450980392156863,.06274509803921569,.06274509803921569,.07450980392156863,.06666666666666667,.07450980392156863,.07058823529411765,.06666666666666667,.07058823529411765,.07450980392156863,.07450980392156863,.07058823529411765,.0784313725490196,.06274509803921569,.07058823529411765,.07058823529411765,.07058823529411765,.06666666666666667,.08235294117647057,.0784313725490196,.06666666666666667,.0588235294117647,.07058823529411765,.07058823529411765,.06666666666666667,.0588235294117647,.09019607843137255,.054901960784313725,.07450980392156863,.07058823529411765,.08627450980392157,.06666666666666667,.0588235294117647,.08235294117647057,.08235294117647057,.0784313725490196,.1803921568627451,.9294117647058823,.9686274509803922,.8666666666666667,.7764705882352942,.7490196078431373,.6784313725490196,.6196078431372549,.5725490196078431,.5725490196078431,.5764705882352941,.5490196078431373,.611764705882353,.5803921568627451,.5058823529411764,.6274509803921569,.5254901960784314,.5607843137254902,.4235294117647059,.44313725490196076,.3882352941176471,.41568627450980394,.33725490196078434,.3686274509803922,.38431372549019616,.34901960784313724,.3411764705882353,.34509803921568627,.2196078431372549,.2901960784313726,.49019607843137253,.6,.5725490196078431,.6,.5686274509803921,.6941176470588235,.6745098039215687,.5882352941176471,.5254901960784314,.4666666666666666,.34901960784313724,.3058823529411765,.27450980392156865,.8784313725490196,.8784313725490196,.6549019607843136,.7019607843137254,.9019607843137255,.7803921568627452,.403921568627451,.8823529411764706,.9372549019607842,.36470588235294116,.12156862745098039,.2823529411764706,.43529411764705883,.5607843137254902,.12156862745098039,.12549019607843137,.08235294117647057,.10196078431372549,.07058823529411765,.0784313725490196,.06666666666666667,.06666666666666667,.0784313725490196,.07058823529411765,.07058823529411765,.07058823529411765],[.07058823529411765,.07450980392156863,.050980392156862744,.07058823529411765,.08235294117647057,.06666666666666667,.07450980392156863,.08235294117647057,.0784313725490196,.07450980392156863,.07058823529411765,.08627450980392157,.07058823529411765,.09019607843137255,.07450980392156863,.07450980392156863,.09019607843137255,.0784313725490196,.07058823529411765,.07058823529411765,.050980392156862744,.07450980392156863,.06666666666666667,.07450980392156863,.06666666666666667,.07058823529411765,.07058823529411765,.07450980392156863,.07450980392156863,.0784313725490196,.06666666666666667,.0588235294117647,.09019607843137255,.08627450980392157,.07450980392156863,.09411764705882353,.10588235294117647,.10196078431372549,.07450980392156863,.3294117647058823,.8784313725490196,.8745098039215686,.7960784313725491,.7176470588235294,.5882352941176471,.5686274509803921,.5803921568627451,.5215686274509804,.5607843137254902,.5882352941176471,.5333333333333333,.5215686274509804,.5843137254901961,.5294117647058824,.49411764705882355,.4196078431372549,.45098039215686275,.4235294117647059,.4,.39607843137254906,.42745098039215684,.34509803921568627,.36470588235294116,.3803921568627451,.3294117647058823,.4235294117647059,.5803921568627451,.7764705882352942,.7568627450980392,.8352941176470589,.8274509803921568,.7803921568627452,.6352941176470588,.6039215686274509,.6509803921568627,.6666666666666665,.5450980392156862,.45098039215686275,.3764705882352941,.34509803921568627,.25098039215686274,.5686274509803921,.8862745098039215,.6196078431372549,.596078431372549,.9215686274509803,.9647058823529412,.41568627450980394,.8941176470588236,.9254901960784313,.3921568627450981,.3137254901960784,.25882352941176473,.2901960784313726,.6196078431372549,.2901960784313726,.0784313725490196,.09411764705882353,.07450980392156863,.07450980392156863,.07058823529411765,.06666666666666667,.07058823529411765,.0588235294117647,.07058823529411765,.07058823529411765,.06666666666666667],[.07450980392156863,.07450980392156863,.07450980392156863,.07058823529411765,.054901960784313725,.054901960784313725,.0784313725490196,.07058823529411765,.07450980392156863,.07450980392156863,.07058823529411765,.07450980392156863,.07450980392156863,.07450980392156863,.07450980392156863,.0588235294117647,.07058823529411765,.07058823529411765,.08627450980392157,.06666666666666667,.07058823529411765,.07058823529411765,.06666666666666667,.06274509803921569,.07058823529411765,.07058823529411765,.07450980392156863,.07058823529411765,.06666666666666667,.06274509803921569,.07058823529411765,.07450980392156863,.06666666666666667,.08235294117647057,.06274509803921569,.07058823529411765,.09411764705882353,.09019607843137255,.0784313725490196,.0588235294117647,.06666666666666667,.44313725490196076,.6666666666666665,.6470588235294117,.5529411764705883,.4980392156862745,.5411764705882353,.5254901960784314,.37254901960784315,.3568627450980392,.4196078431372549,.4980392156862745,.39607843137254906,.4196078431372549,.41568627450980394,.5333333333333333,.4823529411764706,.4705882352941176,.45098039215686275,.45098039215686275,.43137254901960786,.5019607843137255,.5176470588235295,.7411764705882353,.9450980392156861,.9137254901960784,.9450980392156861,.9058823529411765,.8941176470588236,.8980392156862745,.8392156862745098,.6509803921568627,.6862745098039216,.6745098039215687,.42745098039215684,.28627450980392155,.1411764705882353,.25098039215686274,.27450980392156865,.2823529411764706,.1843137254901961,.5333333333333333,.7333333333333333,.6392156862745098,.7411764705882353,.8156862745098039,.9490196078431371,.4549019607843137,.8784313725490196,.9490196078431371,.7254901960784313,.14901960784313725,.22745098039215686,.3803921568627451,.5137254901960784,.4196078431372549,.0784313725490196,.08235294117647057,.07450980392156863,.07450980392156863,.07450980392156863,.054901960784313725,.07058823529411765,.0588235294117647,.07058823529411765,.07450980392156863,.09019607843137255],[.07058823529411765,.06274509803921569,.07450980392156863,.06666666666666667,.043137254901960784,.07450980392156863,.08235294117647057,.07450980392156863,.07450980392156863,.07450980392156863,.06666666666666667,.1450980392156863,.07058823529411765,.06274509803921569,.07058823529411765,.08627450980392157,.07450980392156863,.0784313725490196,.07058823529411765,.07058823529411765,.07058823529411765,.07450980392156863,.06666666666666667,.07450980392156863,.07058823529411765,.07450980392156863,.0392156862745098,.0588235294117647,.07058823529411765,.07058823529411765,.07058823529411765,.1176470588235294,.07450980392156863,.07450980392156863,.07058823529411765,.09411764705882353,.08627450980392157,.08627450980392157,.054901960784313725,.06274509803921569,.08235294117647057,.06274509803921569,.047058823529411764,.17647058823529413,.2235294117647059,.2549019607843137,.17254901960784313,.06274509803921569,.08235294117647057,.08235294117647057,.3176470588235294,.7137254901960784,.6352941176470588,.6196078431372549,.5607843137254902,.5607843137254902,.5137254901960784,.5490196078431373,.35294117647058826,.9333333333333332,.9764705882352941,.9647058823529412,.8980392156862745,.9490196078431371,.9568627450980393,.984313725490196,.9411764705882352,.8862745098039215,.7725490196078433,.7450980392156863,.49019607843137253,.24705882352941178,.24313725490196078,.28627450980392155,.27058823529411763,.2352941176470588,.25882352941176473,.24313725490196078,.25882352941176473,.2627450980392157,.23137254901960783,.41568627450980394,.6470588235294117,.6509803921568627,.8980392156862745,.7137254901960784,.9058823529411765,.42745098039215684,.7647058823529411,.8823529411764706,.9372549019607842,.2627450980392157,.21568627450980393,.39607843137254906,.44313725490196076,.5647058823529412,.10588235294117647,.07058823529411765,.0784313725490196,.07058823529411765,.07450980392156863,.09411764705882353,.07058823529411765,.07058823529411765,.0588235294117647,.08235294117647057,.07058823529411765],[.07058823529411765,.07058823529411765,.07450980392156863,.07450980392156863,.07058823529411765,.07058823529411765,.08235294117647057,.07058823529411765,.07058823529411765,.07058823529411765,.06666666666666667,.07450980392156863,.06274509803921569,.07450980392156863,.07450980392156863,.06666666666666667,.0588235294117647,.07058823529411765,.07058823529411765,.06666666666666667,.06666666666666667,.06666666666666667,.07058823529411765,.07058823529411765,.07058823529411765,.07058823529411765,.06666666666666667,.07450980392156863,.08627450980392157,.06666666666666667,.07058823529411765,.07450980392156863,.07450980392156863,.06666666666666667,.08235294117647057,.07058823529411765,.08235294117647057,.06666666666666667,.09411764705882353,.07450980392156863,.07450980392156863,.06666666666666667,.06274509803921569,.07450980392156863,.10196078431372549,.07450980392156863,.06274509803921569,.06274509803921569,.09019607843137255,.07058823529411765,.10980392156862745,.8156862745098039,.807843137254902,.7764705882352942,.6196078431372549,.5803921568627451,.5215686274509804,.9372549019607842,.9764705882352941,.996078431372549,.9450980392156861,.9333333333333332,.9686274509803922,.9725490196078431,.9882352941176471,.9764705882352941,.8901960784313725,.7058823529411765,.34901960784313724,.25098039215686274,.23137254901960783,.20392156862745098,.20392156862745098,.1843137254901961,.22745098039215686,.2352941176470588,.19215686274509808,.2235294117647059,.22745098039215686,.27450980392156865,.2549019607843137,.21568627450980393,.6431372549019607,.7176470588235294,.9294117647058823,.6313725490196078,.7843137254901962,.4470588235294118,.6666666666666665,.8705882352941177,.9372549019607842,.3411764705882353,.19215686274509808,.33333333333333326,.32156862745098036,.5176470588235295,.1803921568627451,.06666666666666667,.08627450980392157,.07450980392156863,.07450980392156863,.07450980392156863,.07450980392156863,.07450980392156863,.06666666666666667,.06666666666666667,.07450980392156863],[.07450980392156863,.07058823529411765,.11372549019607843,.0784313725490196,.07450980392156863,.0784313725490196,.0784313725490196,.07450980392156863,.07058823529411765,.07058823529411765,.08235294117647057,.06666666666666667,.07450980392156863,.050980392156862744,.08235294117647057,.09411764705882353,.06666666666666667,.06666666666666667,.08235294117647057,.07058823529411765,.07058823529411765,.06666666666666667,.07058823529411765,.12549019607843137,.09803921568627452,.07058823529411765,.07058823529411765,.08235294117647057,.07058823529411765,.07058823529411765,.07058823529411765,.06666666666666667,.08235294117647057,.06274509803921569,.06666666666666667,.06666666666666667,.06666666666666667,.07450980392156863,.047058823529411764,.054901960784313725,.054901960784313725,.07450980392156863,.06666666666666667,.07450980392156863,.06666666666666667,.054901960784313725,.07450980392156863,.07058823529411765,.0588235294117647,.0784313725490196,.06274509803921569,.45098039215686275,.7372549019607844,.9019607843137255,.7764705882352942,.9019607843137255,.9411764705882352,.9490196078431371,.9725490196078431,.9333333333333332,.9882352941176471,.9529411764705881,.9607843137254902,.803921568627451,.592156862745098,.32156862745098036,.3137254901960784,.24313725490196078,.25882352941176473,.24705882352941178,.14901960784313725,.11372549019607843,.1843137254901961,.24313725490196078,.24313725490196078,.22745098039215686,.2235294117647059,.19215686274509808,.2235294117647059,.25882352941176473,.1568627450980392,.16862745098039217,.7019607843137254,.6588235294117646,.9098039215686274,.7254901960784313,.8745098039215686,.5137254901960784,.3764705882352941,.8666666666666667,.9764705882352941,.2901960784313726,.1568627450980392,.34509803921568627,.3058823529411765,.5215686274509804,.2901960784313726,.07058823529411765,.10196078431372549,.07450980392156863,.06666666666666667,.08627450980392157,.06666666666666667,.07450980392156863,.07058823529411765,.08235294117647057,.07058823529411765],[.07058823529411765,.07058823529411765,.06666666666666667,.07450980392156863,.07450980392156863,.09803921568627452,.08627450980392157,.07058823529411765,.07058823529411765,.07450980392156863,.07450980392156863,.07058823529411765,.07058823529411765,.06666666666666667,.06666666666666667,.08627450980392157,.08235294117647057,.08235294117647057,.07058823529411765,.07058823529411765,.06666666666666667,.07450980392156863,.07058823529411765,.06274509803921569,.054901960784313725,.043137254901960784,.06666666666666667,.07450980392156863,.07450980392156863,.06666666666666667,.07058823529411765,.047058823529411764,.07058823529411765,.07058823529411765,.07450980392156863,.07450980392156863,.0784313725490196,.06666666666666667,.047058823529411764,.07058823529411765,.07058823529411765,.07058823529411765,.08235294117647057,.09019607843137255,.07058823529411765,.08627450980392157,.06666666666666667,.07450980392156863,.06274509803921569,.07450980392156863,.07450980392156863,.07058823529411765,.6666666666666665,.7490196078431373,.8627450980392157,.9372549019607842,.9529411764705881,.8980392156862745,.9725490196078431,.9607843137254902,.9607843137254902,.5176470588235295,.5725490196078431,.4549019607843137,.27450980392156865,.27450980392156865,.25882352941176473,.2627450980392157,.21568627450980393,.21568627450980393,.16862745098039217,.22745098039215686,.1843137254901961,.25882352941176473,.21568627450980393,.2,.19607843137254904,.2196078431372549,.14901960784313725,.15294117647058825,.27450980392156865,.1568627450980392,.7568627450980392,.6509803921568627,.9254901960784313,.8980392156862745,.6745098039215687,.596078431372549,.37254901960784315,.7803921568627452,.9137254901960784,.3411764705882353,.12549019607843137,.2196078431372549,.5294117647058824,.4705882352941176,.4823529411764706,.07450980392156863,.0784313725490196,.07058823529411765,.07058823529411765,.0784313725490196,.0784313725490196,.07058823529411765,.07058823529411765,.06666666666666667,.07450980392156863],[.07058823529411765,.06274509803921569,.07450980392156863,.07450980392156863,.06666666666666667,.07450980392156863,.06666666666666667,.07450980392156863,.06274509803921569,.07058823529411765,.06274509803921569,.07450980392156863,.07450980392156863,.07450980392156863,.06666666666666667,.07450980392156863,.0784313725490196,.07450980392156863,.07058823529411765,.07450980392156863,.0784313725490196,.07450980392156863,.07058823529411765,.06274509803921569,.07058823529411765,.054901960784313725,.06666666666666667,.07450980392156863,.07058823529411765,.07450980392156863,.07058823529411765,.06666666666666667,.07058823529411765,.08627450980392157,.07058823529411765,.07450980392156863,.06666666666666667,.0588235294117647,.07058823529411765,.08235294117647057,.06274509803921569,.06274509803921569,.07450980392156863,.06274509803921569,.07058823529411765,.08235294117647057,.07058823529411765,.06274509803921569,.07450980392156863,.07450980392156863,.07450980392156863,.12549019607843137,.8941176470588236,.807843137254902,.984313725490196,.9333333333333332,.9098039215686274,.984313725490196,.9647058823529412,.9254901960784313,.6431372549019607,.611764705882353,.5098039215686274,.34509803921568627,.34901960784313724,.2352941176470588,.29411764705882354,.28627450980392155,.2235294117647059,.14901960784313725,.1843137254901961,.18823529411764706,.2196078431372549,.23137254901960783,.1843137254901961,.22745098039215686,.11372549019607843,.19215686274509808,.19607843137254904,.13725490196078433,.17254901960784313,.10980392156862745,.7568627450980392,.7803921568627452,.7882352941176471,.9294117647058823,.6784313725490196,.7725490196078433,.43137254901960786,.6980392156862745,.8745098039215686,.4392156862745098,.19607843137254904,.27058823529411763,.6392156862745098,.39607843137254906,.4235294117647059,.12549019607843137,.08627450980392157,.07450980392156863,.09803921568627452,.07058823529411765,.07058823529411765,.07058823529411765,.07058823529411765,.07058823529411765,.0784313725490196],[.07450980392156863,.07450980392156863,.10196078431372549,.07450980392156863,.06274509803921569,.07058823529411765,.07450980392156863,.11372549019607843,.06666666666666667,.0588235294117647,.09411764705882353,.07058823529411765,.07450980392156863,.0784313725490196,.07058823529411765,.07450980392156863,.07450980392156863,.07450980392156863,.07450980392156863,.07450980392156863,.07058823529411765,.07450980392156863,.06274509803921569,.06666666666666667,.07450980392156863,.0588235294117647,.07450980392156863,.06666666666666667,.07058823529411765,.06666666666666667,.08235294117647057,.07058823529411765,.06274509803921569,.06666666666666667,.08235294117647057,.07058823529411765,.12941176470588237,.07450980392156863,.0588235294117647,.06666666666666667,.07058823529411765,.08235294117647057,.09019607843137255,.0784313725490196,.09803921568627452,.0588235294117647,.07058823529411765,.07058823529411765,.07058823529411765,.054901960784313725,.09019607843137255,.9098039215686274,.7921568627450981,.9411764705882352,.9490196078431371,.8901960784313725,.9137254901960784,.9294117647058823,.7098039215686275,.6352941176470588,.6235294117647059,.5725490196078431,.5176470588235295,.41568627450980394,.3764705882352941,.3176470588235294,.27058823529411763,.1803921568627451,.21176470588235294,.13333333333333333,.21176470588235294,.25882352941176473,.24313725490196078,.20784313725490197,.16470588235294115,.12156862745098039,.13333333333333333,.2,.21568627450980393,.18823529411764706,.1176470588235294,.13333333333333333,.7882352941176471,.9490196078431371,.7372549019607844,.7411764705882353,.6549019607843136,.9372549019607842,.4666666666666666,.6470588235294117,.7450980392156863,.7215686274509804,.2549019607843137,.27058823529411763,.5882352941176471,.4117647058823529,.5607843137254902,.12156862745098039,.0784313725490196,.054901960784313725,.0784313725490196,.06666666666666667,.0784313725490196,.07058823529411765,.07058823529411765,.07058823529411765,.07058823529411765],[.07058823529411765,.06666666666666667,.07058823529411765,.12156862745098039,.07450980392156863,.07058823529411765,.07058823529411765,.07450980392156863,.06274509803921569,.07450980392156863,.06666666666666667,.06666666666666667,.07058823529411765,.0784313725490196,.07058823529411765,.07058823529411765,.0784313725490196,.0588235294117647,.07450980392156863,.07450980392156863,.07450980392156863,.07450980392156863,.07058823529411765,.06666666666666667,.07450980392156863,.06274509803921569,.0784313725490196,.06274509803921569,.07450980392156863,.07058823529411765,.06666666666666667,.06666666666666667,.06666666666666667,.07058823529411765,.0784313725490196,.07450980392156863,.06274509803921569,.07450980392156863,.07058823529411765,.0588235294117647,.08235294117647057,.07058823529411765,.07058823529411765,.06274509803921569,.06274509803921569,.06666666666666667,.09019607843137255,.06274509803921569,.06666666666666667,.06666666666666667,.19215686274509808,.9490196078431371,.9490196078431371,.9137254901960784,.9764705882352941,.8627450980392157,.6509803921568627,.7450980392156863,.7607843137254902,.7254901960784313,.6705882352941175,.596078431372549,.45098039215686275,.33333333333333326,.32156862745098036,.23921568627450981,.2823529411764706,.2549019607843137,.23137254901960783,.1843137254901961,.2196078431372549,.2352941176470588,.2196078431372549,.20392156862745098,.2,.2,.12156862745098039,.2,.17254901960784313,.16078431372549018,.21176470588235294,.10588235294117647,.7137254901960784,.9372549019607842,.7333333333333333,.8980392156862745,.6705882352941175,.9490196078431371,.4470588235294118,.5529411764705883,.592156862745098,.8705882352941177,.2,.1450980392156863,.5686274509803921,.42745098039215684,.6235294117647059,.3137254901960784,.07450980392156863,.07058823529411765,.08235294117647057,.06666666666666667,.07450980392156863,.12156862745098039,.07450980392156863,.07450980392156863,.07450980392156863],[.07058823529411765,.07058823529411765,.07058823529411765,.06666666666666667,.07058823529411765,.07058823529411765,.07058823529411765,.07058823529411765,.07058823529411765,.06666666666666667,.07058823529411765,.07058823529411765,.050980392156862744,.0784313725490196,.07058823529411765,.07058823529411765,.07058823529411765,.0588235294117647,.07058823529411765,.07450980392156863,.07450980392156863,.07450980392156863,.07450980392156863,.07450980392156863,.07058823529411765,.07058823529411765,.09803921568627452,.07058823529411765,.06666666666666667,.07450980392156863,.07058823529411765,.07058823529411765,.07450980392156863,.07058823529411765,.07058823529411765,.06666666666666667,.07450980392156863,.06274509803921569,.07058823529411765,.07058823529411765,.07058823529411765,.054901960784313725,.06274509803921569,.06666666666666667,.06666666666666667,.07058823529411765,.0588235294117647,.06274509803921569,.06666666666666667,.0588235294117647,.9647058823529412,.9686274509803922,.9764705882352941,.9372549019607842,.8431372549019608,.6352941176470588,.7254901960784313,.7843137254901962,.7647058823529411,.8,.7372549019607844,.5294117647058824,.5176470588235295,.3803921568627451,.32156862745098036,.3058823529411765,.29411764705882354,.23921568627450981,.1568627450980392,.16470588235294115,.23137254901960783,.1803921568627451,.16470588235294115,.1176470588235294,.21568627450980393,.16078431372549018,.1843137254901961,.2352941176470588,.23137254901960783,.17254901960784313,.11372549019607843,.1843137254901961,.7568627450980392,.9215686274509803,.8941176470588236,.8862745098039215,.7490196078431373,.8784313725490196,.7843137254901962,.403921568627451,.592156862745098,.8235294117647058,.21568627450980393,.15294117647058825,.47843137254901963,.4588235294117647,.5686274509803921,.3882352941176471,.18823529411764706,.07450980392156863,.0784313725490196,.07058823529411765,.09803921568627452,.07450980392156863,.07450980392156863,.10980392156862745,.07450980392156863],[.06666666666666667,.07058823529411765,.0588235294117647,.07058823529411765,.054901960784313725,.050980392156862744,.09019607843137255,.07058823529411765,.06666666666666667,.07450980392156863,.07058823529411765,.06666666666666667,.07450980392156863,.06666666666666667,.07450980392156863,.07058823529411765,.07058823529411765,.07058823529411765,.0588235294117647,.07058823529411765,.07058823529411765,.07450980392156863,.07058823529411765,.07058823529411765,.06666666666666667,.0588235294117647,.06274509803921569,.07058823529411765,.06666666666666667,.07058823529411765,.054901960784313725,.07058823529411765,.054901960784313725,.07058823529411765,.06274509803921569,.07058823529411765,.07450980392156863,.07450980392156863,.06666666666666667,.06274509803921569,.0784313725490196,.07450980392156863,.07450980392156863,.0588235294117647,.07058823529411765,.06274509803921569,.06666666666666667,.050980392156862744,.14901960784313725,.9411764705882352,.9294117647058823,.9411764705882352,.9686274509803922,.6705882352941175,.8274509803921568,.7921568627450981,.8941176470588236,.8470588235294118,.7764705882352942,.8,.7294117647058823,.5647058823529412,.5254901960784314,.30196078431372547,.3058823529411765,.3176470588235294,.21568627450980393,.16862745098039217,.12156862745098039,.2,.21568627450980393,.16470588235294115,.17254901960784313,.2,.16862745098039217,.16470588235294115,.24705882352941178,.16078431372549018,.2352941176470588,.1568627450980392,.14901960784313725,.10980392156862745,.4,.9568627450980393,.8862745098039215,.8901960784313725,.7529411764705882,.8980392156862745,.8235294117647058,.4,.5176470588235295,.7921568627450981,.3686274509803922,.17647058823529413,.49019607843137253,.35294117647058826,.48627450980392156,.6901960784313725,.4196078431372549,.15294117647058825,.06666666666666667,.10980392156862745,.06666666666666667,.07450980392156863,.07450980392156863,.07058823529411765,.07058823529411765],[.07058823529411765,.07058823529411765,.07058823529411765,.07058823529411765,.07058823529411765,.06666666666666667,.06666666666666667,.06666666666666667,.06666666666666667,.06666666666666667,.06666666666666667,.0784313725490196,.06666666666666667,.06666666666666667,.06666666666666667,.06666666666666667,.06274509803921569,.06666666666666667,.07058823529411765,.07058823529411765,.07058823529411765,.07450980392156863,.06666666666666667,.07058823529411765,.06666666666666667,.047058823529411764,.06666666666666667,.08627450980392157,.06274509803921569,.06666666666666667,.050980392156862744,.0784313725490196,.07058823529411765,.07058823529411765,.07058823529411765,.0784313725490196,.0784313725490196,.07058823529411765,.07450980392156863,.1411764705882353,.07450980392156863,.07058823529411765,.07058823529411765,.0784313725490196,.07450980392156863,.07058823529411765,.06274509803921569,.08627450980392157,.25098039215686274,.9450980392156861,.9647058823529412,.8862745098039215,.6352941176470588,.7176470588235294,.8509803921568627,.8666666666666667,.9058823529411765,.7921568627450981,.8941176470588236,.7686274509803923,.6313725490196078,.5647058823529412,.39607843137254906,.3058823529411765,.30196078431372547,.2784313725490196,.22745098039215686,.32156862745098036,.10980392156862745,.1568627450980392,.16470588235294115,.2235294117647059,.20784313725490197,.13333333333333333,.0784313725490196,.16862745098039217,.1843137254901961,.2549019607843137,.19607843137254904,.12941176470588237,.19215686274509808,.1176470588235294,.34509803921568627,.8509803921568627,.7803921568627452,.9372549019607842,.6901960784313725,.7019607843137254,.9490196078431371,.41568627450980394,.5686274509803921,.2,.2784313725490196,.19215686274509808,.3568627450980392,.4588235294117647,.46274509803921565,.9607843137254902,.3882352941176471,.25098039215686274,.07450980392156863,.0588235294117647,.07058823529411765,.07450980392156863,.0784313725490196,.07058823529411765,.07058823529411765],[.07058823529411765,.07058823529411765,.07058823529411765,.07058823529411765,.07058823529411765,.07058823529411765,.06666666666666667,.07058823529411765,.07058823529411765,.06666666666666667,.07058823529411765,.07058823529411765,.06274509803921569,.07058823529411765,.06666666666666667,.054901960784313725,.07058823529411765,.07058823529411765,.06274509803921569,.07058823529411765,.06666666666666667,.07058823529411765,.07058823529411765,.07058823529411765,.07450980392156863,.06274509803921569,.06666666666666667,.06274509803921569,.07058823529411765,.08235294117647057,.08235294117647057,.06666666666666667,.07058823529411765,.07058823529411765,.0588235294117647,.0588235294117647,.08627450980392157,.07450980392156863,.07058823529411765,.08235294117647057,.07450980392156863,.07450980392156863,.10588235294117647,.06666666666666667,.07058823529411765,.07450980392156863,.054901960784313725,.07450980392156863,.8627450980392157,.9137254901960784,.9764705882352941,.5372549019607843,.7568627450980392,.7450980392156863,.8509803921568627,.8980392156862745,.8862745098039215,.8156862745098039,.7019607843137254,.592156862745098,.6078431372549019,.4392156862745098,.38431372549019616,.3411764705882353,.2901960784313726,.26666666666666666,.2980392156862745,.17647058823529413,.14901960784313725,.2,.16078431372549018,.09803921568627452,.1450980392156863,.14901960784313725,.11372549019607843,.21176470588235294,.16862745098039217,.1803921568627451,.1568627450980392,.16470588235294115,.1803921568627451,.1450980392156863,.0784313725490196,.803921568627451,.9098039215686274,.9333333333333332,.8588235294117647,.6313725490196078,.7607843137254902,.49019607843137253,.4196078431372549,.4823529411764706,.3294117647058823,.3137254901960784,.42745098039215684,.3137254901960784,.5490196078431373,.8901960784313725,.592156862745098,.30980392156862746,.09803921568627452,.06666666666666667,.07450980392156863,.07450980392156863,.07450980392156863,.07450980392156863,.07058823529411765],[.07058823529411765,.07058823529411765,.07058823529411765,.06666666666666667,.07058823529411765,.06666666666666667,.07058823529411765,.06666666666666667,.06666666666666667,.07450980392156863,.06666666666666667,.07058823529411765,.06274509803921569,.06666666666666667,.07058823529411765,.07058823529411765,.07058823529411765,.07058823529411765,.06666666666666667,.07058823529411765,.06666666666666667,.050980392156862744,.07058823529411765,.07058823529411765,.07058823529411765,.07058823529411765,.07058823529411765,.07058823529411765,.07450980392156863,.07450980392156863,.07450980392156863,.07450980392156863,.06274509803921569,.06666666666666667,.06666666666666667,.07058823529411765,.07058823529411765,.1176470588235294,.0588235294117647,.07058823529411765,.06274509803921569,.07450980392156863,.07450980392156863,.07058823529411765,.07450980392156863,.0588235294117647,.07058823529411765,.06274509803921569,.9058823529411765,.9803921568627451,.5725490196078431,.6470588235294117,.6627450980392156,.8352941176470589,.7882352941176471,.8823529411764706,.7176470588235294,.8,.8627450980392157,.7529411764705882,.5411764705882353,.403921568627451,.4235294117647059,.4196078431372549,.3137254901960784,.27450980392156865,.3254901960784313,.12549019607843137,.16470588235294115,.14901960784313725,.19215686274509808,.1843137254901961,.12549019607843137,.16078431372549018,.12549019607843137,.17647058823529413,.21568627450980393,.19607843137254904,.20784313725490197,.22745098039215686,.22745098039215686,.15294117647058825,.10588235294117647,.9215686274509803,.8588235294117647,.9568627450980393,.7529411764705882,.8235294117647058,.9215686274509803,.4666666666666666,.5176470588235295,.7294117647058823,.4,.23137254901960783,.35294117647058826,.6470588235294117,.7215686274509804,.9019607843137255,.6392156862745098,.30196078431372547,.10980392156862745,.06666666666666667,.06666666666666667,.07450980392156863,.06666666666666667,.07058823529411765,.07058823529411765],[.07450980392156863,.07058823529411765,.07058823529411765,.06666666666666667,.07058823529411765,.06666666666666667,.08235294117647057,.07058823529411765,.06666666666666667,.11372549019607843,.10588235294117647,.07450980392156863,.07058823529411765,.08235294117647057,.07058823529411765,.07058823529411765,.09019607843137255,.08235294117647057,.06666666666666667,.07058823529411765,.06666666666666667,.07058823529411765,.06666666666666667,.07058823529411765,.0784313725490196,.07058823529411765,.07450980392156863,.07058823529411765,.08235294117647057,.12156862745098039,.07058823529411765,.07058823529411765,.0588235294117647,.06666666666666667,.0784313725490196,.07058823529411765,.07450980392156863,.054901960784313725,.07058823529411765,.07450980392156863,.0784313725490196,.06666666666666667,.07058823529411765,.07058823529411765,.07450980392156863,.08235294117647057,.06666666666666667,.047058823529411764,.7960784313725491,.6235294117647059,.6823529411764706,.5294117647058824,.6313725490196078,.7490196078431373,.7568627450980392,.7843137254901962,.8235294117647058,.8235294117647058,.8470588235294118,.6392156862745098,.5725490196078431,.45098039215686275,.4196078431372549,.3882352941176471,.34901960784313724,.19607843137254904,.12156862745098039,.13725490196078433,.17647058823529413,.12941176470588237,.16470588235294115,.13725490196078433,.15294117647058825,.16078431372549018,.1450980392156863,.20392156862745098,.24705882352941178,.20392156862745098,.2196078431372549,.23137254901960783,.12941176470588237,.16078431372549018,.1843137254901961,.9411764705882352,.8941176470588236,.8509803921568627,.9215686274509803,.8117647058823529,.7607843137254902,.47450980392156855,.49019607843137253,.6588235294117646,.4823529411764706,.3921568627450981,.2901960784313726,.8313725490196079,.7725490196078433,.7764705882352942,.7333333333333333,.29411764705882354,.3686274509803922,.07058823529411765,.06666666666666667,.07058823529411765,.07058823529411765,.06666666666666667,.07058823529411765],[.06666666666666667,.07450980392156863,.09411764705882353,.07058823529411765,.06666666666666667,.06666666666666667,.06666666666666667,.10588235294117647,.06666666666666667,.06666666666666667,.06666666666666667,.0588235294117647,.08627450980392157,.07058823529411765,.06274509803921569,.07450980392156863,.06666666666666667,.06666666666666667,.07058823529411765,.10980392156862745,.07450980392156863,.11372549019607843,.07058823529411765,.07450980392156863,.07058823529411765,.06666666666666667,.07450980392156863,.06666666666666667,.06274509803921569,.0588235294117647,.0588235294117647,.06666666666666667,.06274509803921569,.07450980392156863,.0588235294117647,.07058823529411765,.06666666666666667,.07058823529411765,.0588235294117647,.08235294117647057,.09803921568627452,.06274509803921569,.07450980392156863,.06666666666666667,.07450980392156863,.06666666666666667,.06666666666666667,.027450980392156862,.7960784313725491,.7215686274509804,.5803921568627451,.6392156862745098,.7215686274509804,.7372549019607844,.7725490196078433,.8588235294117647,.8352941176470589,.8117647058823529,.7568627450980392,.7333333333333333,.615686274509804,.5725490196078431,.4392156862745098,.3137254901960784,.27058823529411763,.2,.1568627450980392,.14901960784313725,.1843137254901961,.10588235294117647,.1843137254901961,.16078431372549018,.17647058823529413,.09411764705882353,.17254901960784313,.1176470588235294,.23921568627450981,.1450980392156863,.16470588235294115,.16862745098039217,.17254901960784313,.09803921568627452,.13333333333333333,.9098039215686274,.8549019607843137,.9607843137254902,.8705882352941177,.7529411764705882,.8156862745098039,.46274509803921565,.46274509803921565,.7294117647058823,.4588235294117647,.34901960784313724,.41568627450980394,.7254901960784313,.8274509803921568,.8470588235294118,.6705882352941175,.5490196078431373,.24313725490196078,.06666666666666667,.08235294117647057,.07450980392156863,.07450980392156863,.07058823529411765,.07450980392156863],[.07058823529411765,.06666666666666667,.06666666666666667,.06666666666666667,.06666666666666667,.06666666666666667,.07058823529411765,.06666666666666667,.06666666666666667,.06666666666666667,.06274509803921569,.08627450980392157,.06274509803921569,.06274509803921569,.07058823529411765,.06666666666666667,.07058823529411765,.08627450980392157,.09411764705882353,.07058823529411765,.07450980392156863,.06274509803921569,.06666666666666667,.07058823529411765,.07058823529411765,.09019607843137255,.06666666666666667,.06274509803921569,.07450980392156863,.0784313725490196,.07450980392156863,.07450980392156863,.07450980392156863,.06274509803921569,.07450980392156863,.06274509803921569,.06666666666666667,.0588235294117647,.054901960784313725,.06666666666666667,.07058823529411765,.07058823529411765,.07058823529411765,.07058823529411765,.07058823529411765,.07058823529411765,.0784313725490196,.6470588235294117,.48627450980392156,.6941176470588235,.6509803921568627,.6784313725490196,.7450980392156863,.8666666666666667,.8352941176470589,.8274509803921568,.8509803921568627,.8392156862745098,.7568627450980392,.6941176470588235,.7215686274509804,.6784313725490196,.5411764705882353,.3176470588235294,.2823529411764706,.23921568627450981,.16470588235294115,.2196078431372549,.21568627450980393,.1803921568627451,.14901960784313725,.1176470588235294,.19215686274509808,.10196078431372549,.23921568627450981,.17254901960784313,.19607843137254904,.2,.17647058823529413,.1176470588235294,.14901960784313725,.12549019607843137,.09803921568627452,.7882352941176471,.8941176470588236,.8627450980392157,.8313725490196079,.8509803921568627,.8117647058823529,.5490196078431373,.44313725490196076,.7764705882352942,.5215686274509804,.4,.3882352941176471,.7529411764705882,.8509803921568627,.8823529411764706,.7921568627450981,.5058823529411764,.35294117647058826,.043137254901960784,.0588235294117647,.07450980392156863,.07058823529411765,.07058823529411765,.07058823529411765],[.07058823529411765,.07058823529411765,.06274509803921569,.07450980392156863,.06666666666666667,.0588235294117647,.07058823529411765,.06274509803921569,.06666666666666667,.06666666666666667,.06666666666666667,.07058823529411765,.06666666666666667,.06666666666666667,.0784313725490196,.06666666666666667,.06666666666666667,.06666666666666667,.08235294117647057,.07450980392156863,.07058823529411765,.07058823529411765,.07058823529411765,.07058823529411765,.08235294117647057,.08627450980392157,.08235294117647057,.07058823529411765,.06666666666666667,.0784313725490196,.0784313725490196,.06274509803921569,.0784313725490196,.07058823529411765,.09803921568627452,.06274509803921569,.07058823529411765,.07058823529411765,.06666666666666667,.06274509803921569,.07058823529411765,.07058823529411765,.07058823529411765,.07058823529411765,.07058823529411765,.09019607843137255,.0588235294117647,.5882352941176471,.6862745098039216,.8313725490196079,.7647058823529411,.6941176470588235,.9058823529411765,.9333333333333332,.8392156862745098,.8705882352941177,.7882352941176471,.7098039215686275,.6549019607843136,.5803921568627451,.5607843137254902,.5490196078431373,.7098039215686275,.26666666666666666,.30196078431372547,.1568627450980392,.4196078431372549,.17647058823529413,.21568627450980393,.17647058823529413,.17647058823529413,.23921568627450981,.19607843137254904,.09803921568627452,.1843137254901961,.10588235294117647,.20392156862745098,.12941176470588237,.12941176470588237,.13333333333333333,.13333333333333333,.09019607843137255,.1176470588235294,.8509803921568627,.8823529411764706,.8901960784313725,.5686274509803921,.7843137254901962,.7882352941176471,.5058823529411764,.3607843137254902,.7254901960784313,.6,.5098039215686274,.2627450980392157,.7254901960784313,.8980392156862745,.7607843137254902,.8470588235294118,.6196078431372549,.35294117647058826,.07450980392156863,.06666666666666667,.07058823529411765,.07058823529411765,.07058823529411765,.07058823529411765],[.06666666666666667,.08235294117647057,.06666666666666667,.06666666666666667,.06666666666666667,.06274509803921569,.0588235294117647,.07058823529411765,.06274509803921569,.06666666666666667,.06274509803921569,.06666666666666667,.06666666666666667,.0588235294117647,.0784313725490196,.07058823529411765,.06666666666666667,.07450980392156863,.06274509803921569,.07450980392156863,.07058823529411765,.06666666666666667,.06666666666666667,.07058823529411765,.06274509803921569,.06666666666666667,.0784313725490196,.0784313725490196,.07450980392156863,.054901960784313725,.06666666666666667,.0784313725490196,.07058823529411765,.07058823529411765,.06666666666666667,.06666666666666667,.0784313725490196,.0784313725490196,.07058823529411765,.07450980392156863,.07450980392156863,.054901960784313725,.06274509803921569,.07450980392156863,.07450980392156863,.08235294117647057,.6509803921568627,.6039215686274509,.6901960784313725,.7647058823529411,.7137254901960784,.8274509803921568,.8235294117647058,.9333333333333332,.6627450980392156,.6352941176470588,.6941176470588235,.6666666666666665,.6901960784313725,.7960784313725491,.7215686274509804,.6745098039215687,.5450980392156862,.5843137254901961,.20392156862745098,.16470588235294115,.1803921568627451,.1843137254901961,.2196078431372549,.14901960784313725,.16470588235294115,.17254901960784313,.1568627450980392,.1450980392156863,.21176470588235294,.1803921568627451,.2196078431372549,.15294117647058825,.17647058823529413,.16862745098039217,.13725490196078433,.10980392156862745,.10588235294117647,.596078431372549,.7450980392156863,.6823529411764706,.7176470588235294,.7058823529411765,.8,.6823529411764706,.4549019607843137,.6745098039215687,.6313725490196078,.5568627450980392,.23921568627450981,.5764705882352941,.8941176470588236,.7686274509803923,.807843137254902,.5490196078431373,.47843137254901963,.09019607843137255,.10588235294117647,.06666666666666667,.06666666666666667,.07058823529411765,.07450980392156863],[.06666666666666667,.06666666666666667,.07058823529411765,.06666666666666667,.06274509803921569,.06666666666666667,.06666666666666667,.054901960784313725,.06666666666666667,.06666666666666667,.06274509803921569,.06666666666666667,.07450980392156863,.12549019607843137,.06274509803921569,.06666666666666667,.07058823529411765,.07450980392156863,.06274509803921569,.0784313725490196,.06666666666666667,.07058823529411765,.0784313725490196,.07058823529411765,.0588235294117647,.06666666666666667,.07450980392156863,.08235294117647057,.050980392156862744,.06666666666666667,.06274509803921569,.1450980392156863,.12156862745098039,.06666666666666667,.06666666666666667,.07058823529411765,.07450980392156863,.06274509803921569,.07058823529411765,.07058823529411765,.06666666666666667,.0784313725490196,.08235294117647057,.07058823529411765,.07450980392156863,.07450980392156863,.5254901960784314,.7607843137254902,.5568627450980392,.8,.8117647058823529,.6392156862745098,.9764705882352941,.5686274509803921,.6392156862745098,.6039215686274509,.6,.7254901960784313,.7725490196078433,.6627450980392156,.7294117647058823,.7372549019607844,.6784313725490196,.6588235294117646,.3882352941176471,.2235294117647059,.2235294117647059,.25098039215686274,.21176470588235294,.1803921568627451,.13333333333333333,.16078431372549018,.17647058823529413,.14901960784313725,.20392156862745098,.16470588235294115,.16078431372549018,.19215686274509808,.13725490196078433,.12156862745098039,.1176470588235294,.10588235294117647,.12941176470588237,.5803921568627451,.5568627450980392,.7294117647058823,.7411764705882353,.8745098039215686,.8901960784313725,.6313725490196078,.43137254901960786,.6549019607843136,.7529411764705882,.6431372549019607,.20784313725490197,.5137254901960784,.7372549019607844,.6784313725490196,.8901960784313725,.5450980392156862,.3176470588235294,.08235294117647057,.07058823529411765,.06666666666666667,.12156862745098039,.07450980392156863,.07450980392156863],[.07058823529411765,.07058823529411765,.06666666666666667,.07450980392156863,.07058823529411765,.047058823529411764,.07058823529411765,.07058823529411765,.06666666666666667,.06666666666666667,.06666666666666667,.06666666666666667,.06666666666666667,.07058823529411765,.07058823529411765,.0588235294117647,.07058823529411765,.06666666666666667,.07058823529411765,.07058823529411765,.07058823529411765,.07450980392156863,.08235294117647057,.06274509803921569,.07058823529411765,.07058823529411765,.07058823529411765,.054901960784313725,.06666666666666667,.06666666666666667,.06666666666666667,.07450980392156863,.09411764705882353,.0588235294117647,.07058823529411765,.07058823529411765,.0784313725490196,.06666666666666667,.07450980392156863,.06274509803921569,.07058823529411765,.0588235294117647,.06666666666666667,.07450980392156863,.0588235294117647,.47450980392156855,.5843137254901961,.5490196078431373,.803921568627451,.7921568627450981,.6,.6274509803921569,.41568627450980394,.6274509803921569,.6235294117647059,.6313725490196078,.6941176470588235,.6666666666666665,.7803921568627452,.8588235294117647,.8352941176470589,.7764705882352942,.615686274509804,.8274509803921568,.5411764705882353,.30980392156862746,.30980392156862746,.2196078431372549,.30196078431372547,.24705882352941178,.23921568627450981,.23921568627450981,.1411764705882353,.12549019607843137,.09411764705882353,.1450980392156863,.16862745098039217,.1411764705882353,.17647058823529413,.11372549019607843,.1176470588235294,.11372549019607843,.17647058823529413,.615686274509804,.7019607843137254,.6078431372549019,.6666666666666665,.8470588235294118,.7882352941176471,.5882352941176471,.45098039215686275,.5098039215686274,.6901960784313725,.5764705882352941,.33725490196078434,.40784313725490196,.807843137254902,.803921568627451,.8862745098039215,.4235294117647059,.34901960784313724,.10196078431372549,.07450980392156863,.0784313725490196,.10196078431372549,.07450980392156863,.07450980392156863],[.06666666666666667,.07058823529411765,.06666666666666667,.0784313725490196,.06666666666666667,.06666666666666667,.06666666666666667,.06666666666666667,.06274509803921569,.07450980392156863,.054901960784313725,.07058823529411765,.06666666666666667,.06274509803921569,.07450980392156863,.07058823529411765,.07058823529411765,.06666666666666667,.07058823529411765,.06666666666666667,.07058823529411765,.07058823529411765,.07058823529411765,.06274509803921569,.07058823529411765,.08235294117647057,.06274509803921569,.07058823529411765,.07058823529411765,.07058823529411765,.06666666666666667,.09019607843137255,.07450980392156863,.06666666666666667,.08627450980392157,.06274509803921569,.06274509803921569,.07450980392156863,.10980392156862745,.07058823529411765,.07058823529411765,.0784313725490196,.07450980392156863,.07058823529411765,.0588235294117647,.3764705882352941,.5254901960784314,.6274509803921569,.7098039215686275,.5607843137254902,.5803921568627451,.4588235294117647,.5647058823529412,.47843137254901963,.6235294117647059,.7254901960784313,.8666666666666667,.7176470588235294,.803921568627451,.8392156862745098,.7882352941176471,.8274509803921568,.8470588235294118,.7568627450980392,.5372549019607843,.2196078431372549,.2784313725490196,.22745098039215686,.3137254901960784,.34509803921568627,.3411764705882353,.2196078431372549,.19607843137254904,.14901960784313725,.16470588235294115,.20784313725490197,.21176470588235294,.19215686274509808,.18823529411764706,.10588235294117647,.13333333333333333,.1176470588235294,.19215686274509808,.5333333333333333,.7450980392156863,.7215686274509804,.6274509803921569,.8,.8313725490196079,.6392156862745098,.4705882352941176,.47450980392156855,.6941176470588235,.5137254901960784,.3921568627450981,.615686274509804,.7803921568627452,.9176470588235294,.5803921568627451,.403921568627451,.0784313725490196,.09803921568627452,.07450980392156863,.08627450980392157,.07058823529411765,.07058823529411765,.0784313725490196],[.06666666666666667,.06666666666666667,.06666666666666667,.06666666666666667,.06666666666666667,.07058823529411765,.08627450980392157,.06666666666666667,.06666666666666667,.06666666666666667,.06666666666666667,.06666666666666667,.06666666666666667,.06666666666666667,.06666666666666667,.06666666666666667,.07058823529411765,.07058823529411765,.06666666666666667,.0784313725490196,.08235294117647057,.10196078431372549,.06666666666666667,.06666666666666667,.07058823529411765,.0588235294117647,.06666666666666667,.0784313725490196,.08235294117647057,.07058823529411765,.06274509803921569,.08627450980392157,.06274509803921569,.0588235294117647,.07058823529411765,.054901960784313725,.07450980392156863,.06274509803921569,.07058823529411765,.07058823529411765,.07058823529411765,.07450980392156863,.07058823529411765,.06666666666666667,.5372549019607843,.4235294117647059,.4235294117647059,.6274509803921569,.5372549019607843,.5294117647058824,.4235294117647059,.5411764705882353,.48627450980392156,.6352941176470588,.6784313725490196,.8,.8666666666666667,.9058823529411765,.8313725490196079,.8705882352941177,.8941176470588236,.8,.7725490196078433,.7215686274509804,.5529411764705883,.2196078431372549,.2549019607843137,.2352941176470588,.3058823529411765,.3568627450980392,.2196078431372549,.3137254901960784,.27058823529411763,.1803921568627451,.18823529411764706,.22745098039215686,.1411764705882353,.20392156862745098,.1568627450980392,.10588235294117647,.1176470588235294,.10980392156862745,.10196078431372549,.5843137254901961,.7137254901960784,.6078431372549019,.6431372549019607,.6666666666666665,.7843137254901962,.7568627450980392,.3294117647058823,.3568627450980392,.10196078431372549,.11372549019607843,.13333333333333333,.27058823529411763,.1803921568627451,.12549019607843137,.10980392156862745,.12941176470588237,.07450980392156863,.0784313725490196,.07450980392156863,.06274509803921569,.0784313725490196,.08235294117647057,.07450980392156863],[.06666666666666667,.0784313725490196,.07058823529411765,.06666666666666667,.06666666666666667,.06666666666666667,.06666666666666667,.06666666666666667,.06274509803921569,.06666666666666667,.09019607843137255,.0784313725490196,.06666666666666667,.06274509803921569,.0588235294117647,.10588235294117647,.0588235294117647,.07058823529411765,.06274509803921569,.08235294117647057,.06666666666666667,.07450980392156863,.07058823529411765,.07058823529411765,.07450980392156863,.06666666666666667,.06666666666666667,.0588235294117647,.054901960784313725,.06666666666666667,.07058823529411765,.07058823529411765,.09803921568627452,.0784313725490196,.07058823529411765,.06274509803921569,.054901960784313725,.0588235294117647,.0784313725490196,.07058823529411765,.06274509803921569,.07450980392156863,.07450980392156863,.06666666666666667,.5764705882352941,.48627450980392156,.45098039215686275,.6274509803921569,.6235294117647059,.5333333333333333,.5294117647058824,.5764705882352941,.6941176470588235,.6745098039215687,.6823529411764706,.7607843137254902,.7568627450980392,.5411764705882353,.6980392156862745,.6901960784313725,.7215686274509804,.7294117647058823,.7607843137254902,.7294117647058823,.592156862745098,.2901960784313726,.3568627450980392,.26666666666666666,.30980392156862746,.3411764705882353,.33725490196078434,.34901960784313724,.3058823529411765,.14901960784313725,.29411764705882354,.23137254901960783,.21176470588235294,.1568627450980392,.14901960784313725,.12549019607843137,.1176470588235294,.11372549019607843,.09411764705882353,.615686274509804,.7137254901960784,.6509803921568627,.615686274509804,.6431372549019607,.7215686274509804,.7372549019607844,.3254901960784313,.2196078431372549,.1176470588235294,.08235294117647057,.0588235294117647,.07058823529411765,.07450980392156863,.08235294117647057,.09019607843137255,.09019607843137255,.06666666666666667,.07058823529411765,.0784313725490196,.07058823529411765,.06666666666666667,.07058823529411765,.07058823529411765],[.07058823529411765,.07058823529411765,.06666666666666667,.06666666666666667,.06666666666666667,.06666666666666667,.06666666666666667,.06666666666666667,.06274509803921569,.06666666666666667,.06274509803921569,.1568627450980392,.06666666666666667,.06274509803921569,.06666666666666667,.0784313725490196,.07058823529411765,.06666666666666667,.07058823529411765,.07058823529411765,.07058823529411765,.07450980392156863,.06666666666666667,.06666666666666667,.0588235294117647,.08235294117647057,.06666666666666667,.09019607843137255,.06666666666666667,.0588235294117647,.07058823529411765,.0784313725490196,.06666666666666667,.06666666666666667,.07058823529411765,.06666666666666667,.0588235294117647,.06666666666666667,.07450980392156863,.08627450980392157,.050980392156862744,.06666666666666667,.08235294117647057,.09019607843137255,.5058823529411764,.5843137254901961,.5215686274509804,.6627450980392156,.5843137254901961,.6431372549019607,.6078431372549019,.6666666666666665,.7098039215686275,.6705882352941175,.7176470588235294,.6823529411764706,.7725490196078433,.8352941176470589,.6901960784313725,.6470588235294117,.6784313725490196,.7019607843137254,.7254901960784313,.6862745098039216,.6470588235294117,.2784313725490196,.3137254901960784,.2196078431372549,.3607843137254902,.3176470588235294,.32156862745098036,.32156862745098036,.26666666666666666,.33725490196078434,.30196078431372547,.34901960784313724,.21176470588235294,.2196078431372549,.13333333333333333,.10980392156862745,.09803921568627452,.1176470588235294,.10980392156862745,.6509803921568627,.4823529411764706,.6039215686274509,.5764705882352941,.4823529411764706,.5372549019607843,.6862745098039216,.2823529411764706,.2,.23137254901960783,.08235294117647057,.0588235294117647,.06666666666666667,.0784313725490196,.0784313725490196,.0784313725490196,.06274509803921569,.06666666666666667,.08235294117647057,.07058823529411765,.08627450980392157,.08235294117647057,.0784313725490196,.07058823529411765],[.07058823529411765,.06666666666666667,.06666666666666667,.06666666666666667,.06666666666666667,.06666666666666667,.06666666666666667,.0588235294117647,.07058823529411765,.06666666666666667,.07058823529411765,.08627450980392157,.054901960784313725,.06666666666666667,.0784313725490196,.06666666666666667,.09019607843137255,.07058823529411765,.07058823529411765,.07058823529411765,.07450980392156863,.06666666666666667,.06274509803921569,.06666666666666667,.06666666666666667,.06666666666666667,.06666666666666667,.07450980392156863,.06666666666666667,.07058823529411765,.06274509803921569,.07058823529411765,.0784313725490196,.07058823529411765,.0588235294117647,.07058823529411765,.07058823529411765,.06666666666666667,.06274509803921569,.07058823529411765,.07058823529411765,.10196078431372549,.07058823529411765,.4117647058823529,.4980392156862745,.7137254901960784,.5843137254901961,.44313725490196076,.6470588235294117,.5294117647058824,.7137254901960784,.6274509803921569,.6549019607843136,.807843137254902,.7647058823529411,.7019607843137254,.5882352941176471,.7176470588235294,.6352941176470588,.7333333333333333,.6862745098039216,.7098039215686275,.6823529411764706,.6862745098039216,.5529411764705883,.4705882352941176,.3568627450980392,.32156862745098036,.24705882352941178,.34509803921568627,.33725490196078434,.3058823529411765,.2980392156862745,.23921568627450981,.2549019607843137,.3176470588235294,.16078431372549018,.32156862745098036,.12549019607843137,.1176470588235294,.16078431372549018,.12156862745098039,.08235294117647057,.6823529411764706,.5803921568627451,.611764705882353,.615686274509804,.596078431372549,.6352941176470588,.7019607843137254,.2784313725490196,.20784313725490197,.1176470588235294,.08235294117647057,.0784313725490196,.0588235294117647,.08627450980392157,.07058823529411765,.17647058823529413,.0784313725490196,.07058823529411765,.07450980392156863,.08235294117647057,.06666666666666667,.06274509803921569,.06274509803921569,.07450980392156863],[.07058823529411765,.07058823529411765,.06666666666666667,.06274509803921569,.06666666666666667,.06666666666666667,.07058823529411765,.06666666666666667,.06666666666666667,.06666666666666667,.06666666666666667,.07058823529411765,.07058823529411765,.06666666666666667,.06274509803921569,.06666666666666667,.06274509803921569,.07058823529411765,.07058823529411765,.07058823529411765,.07058823529411765,.06666666666666667,.07450980392156863,.06666666666666667,.06666666666666667,.0588235294117647,.08235294117647057,.08627450980392157,.07058823529411765,.06666666666666667,.07058823529411765,.08235294117647057,.09411764705882353,.06274509803921569,.07058823529411765,.07058823529411765,.07058823529411765,.07450980392156863,.07058823529411765,.07450980392156863,.0784313725490196,.08235294117647057,.06666666666666667,.43137254901960786,.5294117647058824,.5725490196078431,.6862745098039216,.6470588235294117,.5843137254901961,.6941176470588235,.6666666666666665,.7333333333333333,.7215686274509804,.7529411764705882,.7372549019607844,.8,.6745098039215687,.6,.6666666666666665,.6392156862745098,.6470588235294117,.6509803921568627,.6078431372549019,.7294117647058823,.6549019607843136,.6431372549019607,.4470588235294118,.34509803921568627,.23921568627450981,.24313725490196078,.2901960784313726,.2549019607843137,.3176470588235294,.13333333333333333,.25098039215686274,.2,.1803921568627451,.33333333333333326,.15294117647058825,.2,.15294117647058825,.12549019607843137,.10980392156862745,.5568627450980392,.5843137254901961,.5254901960784314,.6549019607843136,.8509803921568627,.6745098039215687,.6901960784313725,.1450980392156863,.20784313725490197,.0588235294117647,.08627450980392157,.0588235294117647,.11372549019607843,.08235294117647057,.06274509803921569,.06274509803921569,.07058823529411765,.07450980392156863,.06666666666666667,.07058823529411765,.08627450980392157,.07058823529411765,.07450980392156863,.07450980392156863],[.07450980392156863,.06666666666666667,.06666666666666667,.07058823529411765,.06666666666666667,.06666666666666667,.06666666666666667,.07058823529411765,.06666666666666667,.06666666666666667,.06666666666666667,.07058823529411765,.06666666666666667,.06666666666666667,.07058823529411765,.06666666666666667,.06666666666666667,.06666666666666667,.07058823529411765,.07058823529411765,.07058823529411765,.08627450980392157,.06666666666666667,.06666666666666667,.06666666666666667,.06666666666666667,.06274509803921569,.06666666666666667,.06666666666666667,.07058823529411765,.06666666666666667,.0588235294117647,.07058823529411765,.06666666666666667,.07058823529411765,.07058823529411765,.06666666666666667,.06666666666666667,.054901960784313725,.047058823529411764,.06274509803921569,.0784313725490196,.054901960784313725,.4588235294117647,.5333333333333333,.596078431372549,.5254901960784314,.5490196078431373,.7333333333333333,.6392156862745098,.8588235294117647,.7960784313725491,.7058823529411765,.7607843137254902,.7568627450980392,.6862745098039216,.596078431372549,.48627450980392156,.5764705882352941,.5803921568627451,.6941176470588235,.6901960784313725,.6039215686274509,.6549019607843136,.6509803921568627,.615686274509804,.4588235294117647,.33725490196078434,.32156862745098036,.27058823529411763,.14901960784313725,.2980392156862745,.30196078431372547,.25098039215686274,.3137254901960784,.25882352941176473,.2627450980392157,.26666666666666666,.2901960784313726,.25882352941176473,.22745098039215686,.1411764705882353,.11372549019607843,.5019607843137255,.45098039215686275,.49411764705882355,.6274509803921569,.3764705882352941,.4196078431372549,.4549019607843137,.2901960784313726,.07058823529411765,.0784313725490196,.07450980392156863,.09019607843137255,.06274509803921569,.0784313725490196,.08627450980392157,.12549019607843137,.06666666666666667,.08627450980392157,.07450980392156863,.0784313725490196,.08235294117647057,.07058823529411765,.07450980392156863,.07058823529411765],[.07450980392156863,.06274509803921569,.07058823529411765,.06666666666666667,.07058823529411765,.07058823529411765,.07058823529411765,.06274509803921569,.07058823529411765,.06666666666666667,.06274509803921569,.06274509803921569,.06666666666666667,.06666666666666667,.06666666666666667,.06666666666666667,.06666666666666667,.06274509803921569,.07450980392156863,.07058823529411765,.06666666666666667,.06666666666666667,.06666666666666667,.06274509803921569,.06666666666666667,.06666666666666667,.07450980392156863,.07058823529411765,.06666666666666667,.06666666666666667,.06666666666666667,.06666666666666667,.06666666666666667,.0588235294117647,.06274509803921569,.054901960784313725,.07058823529411765,.06666666666666667,.06666666666666667,.06666666666666667,.07450980392156863,.07450980392156863,.06274509803921569,.30196078431372547,.5098039215686274,.5372549019607843,.6392156862745098,.592156862745098,.6745098039215687,.7921568627450981,.7725490196078433,.6705882352941175,.8666666666666667,.8392156862745098,.7372549019607844,.596078431372549,.5137254901960784,.5333333333333333,.5450980392156862,.5137254901960784,.6196078431372549,.5882352941176471,.6509803921568627,.5607843137254902,.611764705882353,.596078431372549,.5019607843137255,.35294117647058826,.32156862745098036,.2980392156862745,.24313725490196078,.23921568627450981,.2549019607843137,.12941176470588237,.27450980392156865,.22745098039215686,.24705882352941178,.2627450980392157,.39607843137254906,.2,.29411764705882354,.27450980392156865,.08235294117647057,.0784313725490196,.054901960784313725,.09019607843137255,.06666666666666667,.06274509803921569,.07450980392156863,.0784313725490196,.07450980392156863,.09019607843137255,.0588235294117647,.07058823529411765,.0784313725490196,.06274509803921569,.06274509803921569,.07450980392156863,.09411764705882353,.07450980392156863,.054901960784313725,.06666666666666667,.0588235294117647,.07450980392156863,.07058823529411765,.07058823529411765,.07058823529411765],[.07058823529411765,.07058823529411765,.07450980392156863,.06274509803921569,.06666666666666667,.07058823529411765,.07058823529411765,.0588235294117647,.06666666666666667,.07058823529411765,.07058823529411765,.07450980392156863,.06274509803921569,.07058823529411765,.06666666666666667,.06666666666666667,.07058823529411765,.06666666666666667,.06666666666666667,.06666666666666667,.07058823529411765,.06666666666666667,.07450980392156863,.06666666666666667,.06666666666666667,.06666666666666667,.0588235294117647,.06274509803921569,.06666666666666667,.06666666666666667,.07058823529411765,.07058823529411765,.06666666666666667,.07058823529411765,.07058823529411765,.0784313725490196,.054901960784313725,.07058823529411765,.0784313725490196,.07450980392156863,.10588235294117647,.07450980392156863,.054901960784313725,.5176470588235295,.5490196078431373,.7372549019607844,.6196078431372549,.7215686274509804,.8196078431372549,.7568627450980392,.8627450980392157,.7803921568627452,.8274509803921568,.7568627450980392,.6941176470588235,.6235294117647059,.5686274509803921,.5490196078431373,.5372549019607843,.5686274509803921,.5019607843137255,.5450980392156862,.4549019607843137,.5411764705882353,.5882352941176471,.6196078431372549,.47843137254901963,.4392156862745098,.35294117647058826,.3254901960784313,.21176470588235294,.13725490196078433,.2196078431372549,.26666666666666666,.2352941176470588,.2235294117647059,.26666666666666666,.28627450980392155,.29411764705882354,.24313725490196078,.30980392156862746,.26666666666666666,.23921568627450981,.08235294117647057,.06274509803921569,.06274509803921569,.07450980392156863,.0784313725490196,.06274509803921569,.0784313725490196,.08235294117647057,.07450980392156863,.11372549019607843,.12549019607843137,.06274509803921569,.08235294117647057,.0588235294117647,.07450980392156863,.08235294117647057,.0784313725490196,.06666666666666667,.07450980392156863,.09411764705882353,.0784313725490196,.07058823529411765,.07058823529411765,.07450980392156863],[.07058823529411765,.07058823529411765,.06666666666666667,.07058823529411765,.07450980392156863,.0784313725490196,.06666666666666667,.07058823529411765,.06666666666666667,.06274509803921569,.06666666666666667,.06666666666666667,.07058823529411765,.07058823529411765,.06666666666666667,.06666666666666667,.06274509803921569,.06666666666666667,.06666666666666667,.06666666666666667,.07058823529411765,.06666666666666667,.06666666666666667,.06666666666666667,.06666666666666667,.06666666666666667,.07058823529411765,.06666666666666667,.07058823529411765,.06666666666666667,.06666666666666667,.06666666666666667,.06666666666666667,.07058823529411765,.07450980392156863,.07058823529411765,.07058823529411765,.06274509803921569,.07058823529411765,.07058823529411765,.047058823529411764,.06666666666666667,.0588235294117647,.5725490196078431,.6745098039215687,.5098039215686274,.6705882352941175,.7921568627450981,.8745098039215686,.8901960784313725,.8627450980392157,.8470588235294118,.8549019607843137,.7725490196078433,.6980392156862745,.5607843137254902,.5098039215686274,.4666666666666666,.5137254901960784,.49019607843137253,.6313725490196078,.6313725490196078,.6235294117647059,.43137254901960786,.4823529411764706,.5725490196078431,.5607843137254902,.5176470588235295,.3686274509803922,.36470588235294116,.26666666666666666,.2627450980392157,.2549019607843137,.16862745098039217,.16078431372549018,.20392156862745098,.21176470588235294,.18823529411764706,.3176470588235294,.1568627450980392,.32156862745098036,.33725490196078434,.2352941176470588,.12549019607843137,.10980392156862745,.0784313725490196,.06666666666666667,.0784313725490196,.0784313725490196,.07058823529411765,.09411764705882353,.0784313725490196,.0784313725490196,.06666666666666667,.07450980392156863,.07450980392156863,.0784313725490196,.06666666666666667,.0784313725490196,.07450980392156863,.07058823529411765,.06274509803921569,.07450980392156863,.07058823529411765,.06666666666666667,.07450980392156863,.07058823529411765],[.0784313725490196,.07058823529411765,.06274509803921569,.06666666666666667,.06666666666666667,.07058823529411765,.06666666666666667,.06666666666666667,.07058823529411765,.054901960784313725,.06666666666666667,.08235294117647057,.07058823529411765,.06274509803921569,.07058823529411765,.10196078431372549,.06666666666666667,.07450980392156863,.06274509803921569,.07450980392156863,.07058823529411765,.06666666666666667,.0588235294117647,.050980392156862744,.07058823529411765,.06666666666666667,.0784313725490196,.07058823529411765,.0588235294117647,.054901960784313725,.07450980392156863,.06666666666666667,.06666666666666667,.054901960784313725,.06666666666666667,.07058823529411765,.054901960784313725,.06274509803921569,.06666666666666667,.10196078431372549,.07058823529411765,.054901960784313725,.49411764705882355,.6980392156862745,.6705882352941175,.611764705882353,.6666666666666665,.8431372549019608,.8941176470588236,.9215686274509803,.7843137254901962,.8588235294117647,.8156862745098039,.8470588235294118,.6549019607843136,.5333333333333333,.5098039215686274,.43137254901960786,.4666666666666666,.5215686274509804,.5019607843137255,.5058823529411764,.5450980392156862,.5215686274509804,.5490196078431373,.5843137254901961,.6,.592156862745098,.4196078431372549,.32156862745098036,.19607843137254904,.25882352941176473,.25882352941176473,.12156862745098039,.2196078431372549,.23921568627450981,.1568627450980392,.12941176470588237,.2784313725490196,.23921568627450981,.17647058823529413,.29411764705882354,.1411764705882353,.2549019607843137,.11372549019607843,.09411764705882353,.07450980392156863,.0784313725490196,.0784313725490196,.0588235294117647,.06666666666666667,.07058823529411765,.0784313725490196,.07058823529411765,.06274509803921569,.1176470588235294,.08235294117647057,.08235294117647057,.07450980392156863,.06666666666666667,.07450980392156863,.0784313725490196,.0784313725490196,.07450980392156863,.07058823529411765,.07058823529411765,.07058823529411765],[.06666666666666667,.06666666666666667,.06666666666666667,.06666666666666667,.0588235294117647,.06666666666666667,.07450980392156863,.06666666666666667,.06274509803921569,.08627450980392157,.06274509803921569,.07450980392156863,.06666666666666667,.06274509803921569,.06666666666666667,.06666666666666667,.06666666666666667,.06666666666666667,.06666666666666667,.054901960784313725,.07058823529411765,.06274509803921569,.06274509803921569,.06274509803921569,.06274509803921569,.07058823529411765,.06666666666666667,.06666666666666667,.10196078431372549,.07058823529411765,.06666666666666667,.06666666666666667,.06666666666666667,.050980392156862744,.06666666666666667,.09411764705882353,.07058823529411765,.06274509803921569,.06666666666666667,.08235294117647057,.10196078431372549,.1843137254901961,.7137254901960784,.7058823529411765,.5254901960784314,.611764705882353,.45098039215686275,.8196078431372549,.8156862745098039,.7843137254901962,.8941176470588236,.8588235294117647,.8431372549019608,.7254901960784313,.5450980392156862,.5215686274509804,.4705882352941176,.5098039215686274,.5607843137254902,.4549019607843137,.4196078431372549,.5764705882352941,.47843137254901963,.4392156862745098,.5450980392156862,.4980392156862745,.5647058823529412,.5764705882352941,.5254901960784314,.26666666666666666,.2235294117647059,.15294117647058825,.2235294117647059,.23137254901960783,.29411764705882354,.25098039215686274,.2352941176470588,.24705882352941178,.19215686274509808,.24313725490196078,.25098039215686274,.2352941176470588,.2,.2784313725490196,.25882352941176473,.10980392156862745,.08235294117647057,.10980392156862745,.0784313725490196,.06274509803921569,.06274509803921569,.07450980392156863,.09803921568627452,.08235294117647057,.09019607843137255,.06666666666666667,.08235294117647057,.07058823529411765,.07450980392156863,.07058823529411765,.0588235294117647,.07450980392156863,.0588235294117647,.07058823529411765,.06666666666666667,.07058823529411765,.07450980392156863],[.07058823529411765,.06666666666666667,.06666666666666667,.09803921568627452,.06666666666666667,.06274509803921569,.09019607843137255,.07450980392156863,.06666666666666667,.06666666666666667,.06666666666666667,.07450980392156863,.06666666666666667,.06666666666666667,.06666666666666667,.06666666666666667,.07058823529411765,.07058823529411765,.054901960784313725,.07058823529411765,.06666666666666667,.06666666666666667,.06666666666666667,.0784313725490196,.06666666666666667,.06274509803921569,.06274509803921569,.07058823529411765,.0588235294117647,.06274509803921569,.06666666666666667,.06666666666666667,.050980392156862744,.07058823529411765,.0784313725490196,.06666666666666667,.06666666666666667,.07058823529411765,.07450980392156863,.07058823529411765,.09803921568627452,.6274509803921569,.7529411764705882,.6588235294117646,.611764705882353,.6666666666666665,.6784313725490196,.8156862745098039,.9058823529411765,.9058823529411765,.9058823529411765,.8470588235294118,.7803921568627452,.6901960784313725,.6941176470588235,.5607843137254902,.4823529411764706,.42745098039215684,.4666666666666666,.5725490196078431,.4823529411764706,.43137254901960786,.5137254901960784,.4705882352941176,.4470588235294118,.48627450980392156,.47450980392156855,.5372549019607843,.3764705882352941,.29411764705882354,.16470588235294115,.2784313725490196,.13725490196078433,.2901960784313726,.18823529411764706,.21568627450980393,.22745098039215686,.20392156862745098,.1568627450980392,.34509803921568627,.25882352941176473,.1843137254901961,.2235294117647059,.2196078431372549,.27058823529411763,.20392156862745098,.13333333333333333,.08627450980392157,.07058823529411765,.07058823529411765,.08235294117647057,.050980392156862744,.08627450980392157,.0784313725490196,.06274509803921569,.054901960784313725,.0784313725490196,.0784313725490196,.07058823529411765,.07058823529411765,.12156862745098039,.07450980392156863,.07058823529411765,.07058823529411765,.07058823529411765,.07450980392156863,.07058823529411765],[.06666666666666667,.06666666666666667,.07450980392156863,.07058823529411765,.06666666666666667,.08235294117647057,.07058823529411765,.06666666666666667,.06666666666666667,.06666666666666667,.0588235294117647,.06666666666666667,.06274509803921569,.09019607843137255,.07058823529411765,.07058823529411765,.06274509803921569,.06274509803921569,.06666666666666667,.06666666666666667,.0588235294117647,.0588235294117647,.06666666666666667,.06274509803921569,.06666666666666667,.06666666666666667,.06274509803921569,.07450980392156863,.07058823529411765,.06666666666666667,.06666666666666667,.07450980392156863,.0588235294117647,.06274509803921569,.054901960784313725,.0784313725490196,.06666666666666667,.050980392156862744,.07058823529411765,.07058823529411765,.2352941176470588,.7176470588235294,.7058823529411765,.6078431372549019,.5803921568627451,.6,.8784313725490196,.7803921568627452,.807843137254902,.8352941176470589,.6705882352941175,.6862745098039216,.7333333333333333,.6941176470588235,.46274509803921565,.5098039215686274,.47450980392156855,.4392156862745098,.4588235294117647,.46274509803921565,.4117647058823529,.44313725490196076,.45098039215686275,.4666666666666666,.4117647058823529,.42745098039215684,.5137254901960784,.4196078431372549,.3764705882352941,.3176470588235294,.13725490196078433,.2352941176470588,.16078431372549018,.27450980392156865,.19215686274509808,.27058823529411763,.27058823529411763,.28627450980392155,.08627450980392157,.30980392156862746,.3137254901960784,.19607843137254904,.25098039215686274,.3137254901960784,.22745098039215686,.1803921568627451,.1803921568627451,.06274509803921569,.0588235294117647,.06274509803921569,.07450980392156863,.08627450980392157,.08627450980392157,.07058823529411765,.07450980392156863,.07058823529411765,.07450980392156863,.07058823529411765,.07450980392156863,.07058823529411765,.054901960784313725,.07058823529411765,.07450980392156863,.07058823529411765,.07058823529411765,.07058823529411765,.07058823529411765],[.07058823529411765,.06666666666666667,.06666666666666667,.07058823529411765,.06666666666666667,.06274509803921569,.06666666666666667,.06274509803921569,.07058823529411765,.06666666666666667,.06274509803921569,.10980392156862745,.06666666666666667,.06666666666666667,.07058823529411765,.06666666666666667,.07058823529411765,.06666666666666667,.06666666666666667,.06666666666666667,.06666666666666667,.06666666666666667,.06274509803921569,.06666666666666667,.06666666666666667,.06666666666666667,.07058823529411765,.06666666666666667,.06666666666666667,.07450980392156863,.06274509803921569,.07058823529411765,.06666666666666667,.06666666666666667,.0588235294117647,.06666666666666667,.0588235294117647,.09411764705882353,.07058823529411765,.0588235294117647,.6235294117647059,.7294117647058823,.5882352941176471,.6588235294117646,.6039215686274509,.6627450980392156,.8117647058823529,.5803921568627451,.4980392156862745,.5411764705882353,.6549019607843136,.6862745098039216,.596078431372549,.6,.49411764705882355,.4588235294117647,.45098039215686275,.4823529411764706,.40784313725490196,.43137254901960786,.4549019607843137,.39607843137254906,.47843137254901963,.48627450980392156,.4823529411764706,.6705882352941175,.5294117647058824,.4588235294117647,.3294117647058823,.2549019607843137,.1450980392156863,.2,.14901960784313725,.24705882352941178,.2549019607843137,.27058823529411763,.25882352941176473,.27450980392156865,.1176470588235294,.2627450980392157,.3568627450980392,.2549019607843137,.1568627450980392,.2549019607843137,.2549019607843137,.26666666666666666,.26666666666666666,.16470588235294115,.07058823529411765,.0784313725490196,.07450980392156863,.06274509803921569,.0784313725490196,.07450980392156863,.07058823529411765,.07058823529411765,.0588235294117647,.08235294117647057,.07450980392156863,.07058823529411765,.07058823529411765,.07058823529411765,.07058823529411765,.07058823529411765,.07058823529411765,.07058823529411765,.07058823529411765],[.07058823529411765,.11372549019607843,.07450980392156863,.06666666666666667,.06666666666666667,.07058823529411765,.06274509803921569,.0588235294117647,.07450980392156863,.06666666666666667,.07058823529411765,.07058823529411765,.07058823529411765,.054901960784313725,.06274509803921569,.06274509803921569,.0588235294117647,.07058823529411765,.06666666666666667,.10196078431372549,.06666666666666667,.06666666666666667,.06666666666666667,.06666666666666667,.06666666666666667,.06666666666666667,.07058823529411765,.08235294117647057,.06666666666666667,.06666666666666667,.06666666666666667,.06274509803921569,.06274509803921569,.06666666666666667,.06666666666666667,.06666666666666667,.11372549019607843,.06274509803921569,.047058823529411764,.07058823529411765,.7098039215686275,.6509803921568627,.6,.6666666666666665,.6039215686274509,.7803921568627452,.7058823529411765,.4549019607843137,.5137254901960784,.45098039215686275,.5176470588235295,.611764705882353,.5843137254901961,.6039215686274509,.4666666666666666,.4588235294117647,.47843137254901963,.4235294117647059,.43137254901960786,.4196078431372549,.44313725490196076,.38431372549019616,.4392156862745098,.4,.48627450980392156,.5372549019607843,.5490196078431373,.4705882352941176,.3921568627450981,.2,.1450980392156863,.20392156862745098,.1411764705882353,.23921568627450981,.30196078431372547,.24313725490196078,.25882352941176473,.2627450980392157,.1411764705882353,.2823529411764706,.3058823529411765,.25098039215686274,.12549019607843137,.27450980392156865,.23137254901960783,.2901960784313726,.1450980392156863,.08627450980392157,.06666666666666667,.07058823529411765,.0784313725490196,.050980392156862744,.06666666666666667,.06666666666666667,.0784313725490196,.06666666666666667,.07058823529411765,.06666666666666667,.07450980392156863,.050980392156862744,.06666666666666667,.07058823529411765,.07058823529411765,.07058823529411765,.07058823529411765,.06666666666666667,.07058823529411765],[.06666666666666667,.06274509803921569,.06274509803921569,.06666666666666667,.07058823529411765,.06666666666666667,.06666666666666667,.06666666666666667,.0784313725490196,.06666666666666667,.050980392156862744,.08235294117647057,.07058823529411765,.06666666666666667,.06274509803921569,.06666666666666667,.054901960784313725,.06274509803921569,.07450980392156863,.054901960784313725,.06666666666666667,.07058823529411765,.09803921568627452,.06666666666666667,.07058823529411765,.06666666666666667,.06666666666666667,.06274509803921569,.07058823529411765,.06666666666666667,.06666666666666667,.07450980392156863,.07450980392156863,.06274509803921569,.06666666666666667,.06666666666666667,.0588235294117647,.06666666666666667,.07450980392156863,.6,.7490196078431373,.5372549019607843,.6039215686274509,.5607843137254902,.6274509803921569,.7803921568627452,.6274509803921569,.43529411764705883,.4666666666666666,.49019607843137253,.5019607843137255,.5529411764705883,.615686274509804,.5411764705882353,.48627450980392156,.4549019607843137,.49411764705882355,.3607843137254902,.4470588235294118,.41568627450980394,.5058823529411764,.4117647058823529,.3686274509803922,.5725490196078431,.4980392156862745,.6,.592156862745098,.5372549019607843,.4,.23137254901960783,.21568627450980393,.19215686274509808,.14901960784313725,.20784313725490197,.2980392156862745,.2549019607843137,.27058823529411763,.22745098039215686,.10980392156862745,.27450980392156865,.25098039215686274,.25882352941176473,.12941176470588237,.25882352941176473,.24313725490196078,.2196078431372549,.25098039215686274,.16862745098039217,.09019607843137255,.07058823529411765,.06666666666666667,.07450980392156863,.08235294117647057,.07058823529411765,.07058823529411765,.07058823529411765,.07450980392156863,.07450980392156863,.07450980392156863,.06666666666666667,.07450980392156863,.06274509803921569,.07058823529411765,.07058823529411765,.07058823529411765,.07058823529411765,.07058823529411765],[.07450980392156863,.06666666666666667,.06666666666666667,.07058823529411765,.06666666666666667,.06666666666666667,.06666666666666667,.06274509803921569,.07058823529411765,.06274509803921569,.06666666666666667,.07058823529411765,.06666666666666667,.08235294117647057,.06666666666666667,.07058823529411765,.06666666666666667,.07058823529411765,.06666666666666667,.07450980392156863,.06666666666666667,.07450980392156863,.0588235294117647,.047058823529411764,.054901960784313725,.06666666666666667,.07450980392156863,.06666666666666667,.06274509803921569,.06666666666666667,.054901960784313725,.16470588235294115,.0588235294117647,.054901960784313725,.06666666666666667,.07058823529411765,.0784313725490196,.06666666666666667,.11372549019607843,.6980392156862745,.7333333333333333,.6313725490196078,.6392156862745098,.592156862745098,.7686274509803923,.6823529411764706,.6235294117647059,.3058823529411765,.4470588235294118,.403921568627451,.4823529411764706,.5607843137254902,.6431372549019607,.6666666666666665,.4549019607843137,.45098039215686275,.47843137254901963,.39607843137254906,.4470588235294118,.4470588235294118,.403921568627451,.3176470588235294,.4588235294117647,.5019607843137255,.5686274509803921,.6039215686274509,.5450980392156862,.5215686274509804,.44313725490196076,.27058823529411763,.2,.2,.2,.3137254901960784,.3137254901960784,.30196078431372547,.23137254901960783,.27058823529411763,.12549019607843137,.34901960784313724,.3607843137254902,.2980392156862745,.1843137254901961,.19607843137254904,.17254901960784313,.2627450980392157,.2627450980392157,.21568627450980393,.13333333333333333,.054901960784313725,.09411764705882353,.0784313725490196,.06666666666666667,.07058823529411765,.10588235294117647,.06666666666666667,.07058823529411765,.07450980392156863,.06666666666666667,.07058823529411765,.07058823529411765,.07058823529411765,.07058823529411765,.07450980392156863,.07058823529411765,.07058823529411765,.07058823529411765],[.10588235294117647,.07058823529411765,.06666666666666667,.06666666666666667,.09411764705882353,.06666666666666667,.06666666666666667,.06666666666666667,.06666666666666667,.06666666666666667,.054901960784313725,.06274509803921569,.054901960784313725,.08235294117647057,.06666666666666667,.06666666666666667,.0784313725490196,.09019607843137255,.06666666666666667,.07450980392156863,.07450980392156863,.07058823529411765,.10588235294117647,.07058823529411765,.06274509803921569,.06666666666666667,.07450980392156863,.07058823529411765,.06666666666666667,.0588235294117647,.06274509803921569,.054901960784313725,.06666666666666667,.06274509803921569,.12156862745098039,.06274509803921569,.10196078431372549,.07450980392156863,.7176470588235294,.6980392156862745,.6274509803921569,.5372549019607843,.5372549019607843,.8235294117647058,.9450980392156861,.8705882352941177,.4980392156862745,.4588235294117647,.4823529411764706,.44313725490196076,.5294117647058824,.49019607843137253,.6352941176470588,.611764705882353,.5490196078431373,.5137254901960784,.43529411764705883,.3921568627450981,.2980392156862745,.4666666666666666,.40784313725490196,.4392156862745098,.3411764705882353,.6196078431372549,.5333333333333333,.5686274509803921,.5686274509803921,.5215686274509804,.4196078431372549,.3058823529411765,.21176470588235294,.21176470588235294,.2,.13725490196078433,.2823529411764706,.21568627450980393,.2549019607843137,.16078431372549018,.1450980392156863,.34901960784313724,.3137254901960784,.35294117647058826,.23137254901960783,.18823529411764706,.13725490196078433,.3568627450980392,.2823529411764706,.22745098039215686,.19607843137254904,.0784313725490196,.07058823529411765,.050980392156862744,.06274509803921569,.07450980392156863,.08235294117647057,.06274509803921569,.07450980392156863,.07450980392156863,.07058823529411765,.06666666666666667,.0784313725490196,.07058823529411765,.07058823529411765,.07058823529411765,.07058823529411765,.07058823529411765,.07058823529411765],[.07058823529411765,.07450980392156863,.06666666666666667,.06666666666666667,.07058823529411765,.06274509803921569,.08235294117647057,.07058823529411765,.06274509803921569,.07058823529411765,.06666666666666667,.0784313725490196,.0588235294117647,.07450980392156863,.09803921568627452,.06274509803921569,.07450980392156863,.050980392156862744,.06274509803921569,.047058823529411764,.06274509803921569,.07450980392156863,.06666666666666667,.06666666666666667,.06666666666666667,.06666666666666667,.07058823529411765,.06666666666666667,.07058823529411765,.07450980392156863,.06274509803921569,.07058823529411765,.08235294117647057,.054901960784313725,.07058823529411765,.06274509803921569,.08235294117647057,.22745098039215686,.7176470588235294,.6627450980392156,.6,.5803921568627451,.6980392156862745,.8196078431372549,.8666666666666667,.8745098039215686,.592156862745098,.3137254901960784,.3254901960784313,.4549019607843137,.47843137254901963,.5450980392156862,.6862745098039216,.6392156862745098,.615686274509804,.5411764705882353,.46274509803921565,.4705882352941176,.47450980392156855,.47450980392156855,.4196078431372549,.3607843137254902,.4117647058823529,.6235294117647059,.7058823529411765,.6352941176470588,.5333333333333333,.5568627450980392,.25882352941176473,.3176470588235294,.23921568627450981,.17647058823529413,.10588235294117647,.1843137254901961,.29411764705882354,.19607843137254904,.24705882352941178,.22745098039215686,.16862745098039217,.35294117647058826,.4117647058823529,.34509803921568627,.30196078431372547,.19215686274509808,.25098039215686274,.17647058823529413,.1568627450980392,.23137254901960783,.17647058823529413,.08235294117647057,.0784313725490196,.0784313725490196,.06666666666666667,.0784313725490196,.07450980392156863,.07450980392156863,.08627450980392157,.0784313725490196,.07058823529411765,.06274509803921569,.06666666666666667,.07058823529411765,.07058823529411765,.07058823529411765,.07058823529411765,.07058823529411765,.07058823529411765],[.07450980392156863,.07058823529411765,.07058823529411765,.06666666666666667,.06666666666666667,.06666666666666667,.06666666666666667,.06666666666666667,.07450980392156863,.06666666666666667,.06666666666666667,.07058823529411765,.09019607843137255,.06666666666666667,.08627450980392157,.06666666666666667,.06666666666666667,.06666666666666667,.09019607843137255,.06666666666666667,.07450980392156863,.0588235294117647,.050980392156862744,.06274509803921569,.054901960784313725,.10196078431372549,.07058823529411765,.0588235294117647,.06666666666666667,.07058823529411765,.06666666666666667,.06666666666666667,.0588235294117647,.06666666666666667,.0784313725490196,.07058823529411765,.14901960784313725,.5725490196078431,.7176470588235294,.5529411764705883,.5568627450980392,.6078431372549019,.7450980392156863,.8666666666666667,.8352941176470589,.8274509803921568,.5294117647058824,.3764705882352941,.3607843137254902,.43529411764705883,.4588235294117647,.5882352941176471,.596078431372549,.592156862745098,.5803921568627451,.5411764705882353,.4470588235294118,.42745098039215684,.39607843137254906,.4235294117647059,.39607843137254906,.3882352941176471,.47843137254901963,.5568627450980392,.6705882352941175,.6431372549019607,.5725490196078431,.5647058823529412,.33725490196078434,.27058823529411763,.28627450980392155,.2235294117647059,.19607843137254904,.20392156862745098,.17254901960784313,.20784313725490197,.24705882352941178,.2352941176470588,.2823529411764706,.3764705882352941,.33333333333333326,.34901960784313724,.3254901960784313,.25098039215686274,.20392156862745098,.19607843137254904,.2901960784313726,.24705882352941178,.21176470588235294,.09411764705882353,.08235294117647057,.10196078431372549,.06666666666666667,.07450980392156863,.07450980392156863,.0784313725490196,.09019607843137255,.06666666666666667,.07058823529411765,.07058823529411765,.0784313725490196,.0784313725490196,.07058823529411765,.07058823529411765,.07058823529411765,.07058823529411765,.07450980392156863],[.07058823529411765,.06274509803921569,.050980392156862744,.06274509803921569,.06666666666666667,.06274509803921569,.07058823529411765,.06274509803921569,.07450980392156863,.06666666666666667,.06666666666666667,.06666666666666667,.06666666666666667,.06666666666666667,.07058823529411765,.07058823529411765,.06666666666666667,.06666666666666667,.06666666666666667,.07058823529411765,.06666666666666667,.07058823529411765,.06666666666666667,.06666666666666667,.06666666666666667,.06274509803921569,.06666666666666667,.054901960784313725,.06666666666666667,.06666666666666667,.06666666666666667,.0784313725490196,.07058823529411765,.07058823529411765,.07058823529411765,.06666666666666667,.18823529411764706,.6392156862745098,.6784313725490196,.6235294117647059,.6274509803921569,.6666666666666665,.8117647058823529,.8705882352941177,.8431372549019608,.6627450980392156,.5647058823529412,.4,.40784313725490196,.3803921568627451,.4980392156862745,.5647058823529412,.5764705882352941,.5450980392156862,.6,.5490196078431373,.4392156862745098,.39607843137254906,.43137254901960786,.4,.3686274509803922,.4,.4588235294117647,.5882352941176471,.615686274509804,.5450980392156862,.6274509803921569,.5098039215686274,.43529411764705883,.28627450980392155,.2823529411764706,.19215686274509808,.1843137254901961,.1176470588235294,.17254901960784313,.2784313725490196,.18823529411764706,.2352941176470588,.2235294117647059,.3607843137254902,.33333333333333326,.3176470588235294,.3568627450980392,.22745098039215686,.20784313725490197,.16862745098039217,.21568627450980393,.2823529411764706,.22745098039215686,.12941176470588237,.07450980392156863,.07058823529411765,.07058823529411765,.07450980392156863,.07450980392156863,.08235294117647057,.08235294117647057,.06666666666666667,.07450980392156863,.07058823529411765,.07058823529411765,.07058823529411765,.07058823529411765,.07058823529411765,.07058823529411765,.07450980392156863,.10980392156862745],[.07058823529411765,.06666666666666667,.06666666666666667,.06666666666666667,.06666666666666667,.06666666666666667,.06666666666666667,.06666666666666667,.06666666666666667,.054901960784313725,.06274509803921569,.06274509803921569,.054901960784313725,.054901960784313725,.06666666666666667,.07058823529411765,.06666666666666667,.06666666666666667,.06666666666666667,.06666666666666667,.054901960784313725,.07058823529411765,.06274509803921569,.0784313725490196,.06274509803921569,.047058823529411764,.0588235294117647,.054901960784313725,.06666666666666667,.06666666666666667,.0588235294117647,.13725490196078433,.06666666666666667,.08627450980392157,.06274509803921569,.054901960784313725,.49019607843137253,.6470588235294117,.6392156862745098,.5607843137254902,.5882352941176471,.7843137254901962,.9019607843137255,.8235294117647058,.8823529411764706,.6745098039215687,.5215686274509804,.4549019607843137,.33725490196078434,.34509803921568627,.5137254901960784,.5607843137254902,.6392156862745098,.596078431372549,.5882352941176471,.48627450980392156,.45098039215686275,.3607843137254902,.4235294117647059,.3607843137254902,.25882352941176473,.44313725490196076,.4196078431372549,.5490196078431373,.5803921568627451,.5764705882352941,.6078431372549019,.4705882352941176,.43137254901960786,.2627450980392157,.2980392156862745,.17647058823529413,.16862745098039217,.2627450980392157,.2352941176470588,.16862745098039217,.16862745098039217,.18823529411764706,.2980392156862745,.3254901960784313,.3411764705882353,.3803921568627451,.33333333333333326,.2235294117647059,.19607843137254904,.2352941176470588,.27058823529411763,.1568627450980392,.2,.12156862745098039,.10588235294117647,.07058823529411765,.07058823529411765,.09803921568627452,.07058823529411765,.08235294117647057,.07058823529411765,.0784313725490196,.07450980392156863,.07058823529411765,.07450980392156863,.07058823529411765,.07058823529411765,.09803921568627452,.07058823529411765,.07058823529411765,.07058823529411765],[.06274509803921569,.07450980392156863,.06666666666666667,.07058823529411765,.06666666666666667,.06666666666666667,.0784313725490196,.07058823529411765,.0588235294117647,.06274509803921569,.06274509803921569,.054901960784313725,.06274509803921569,.07058823529411765,.0588235294117647,.07058823529411765,.0784313725490196,.06666666666666667,.09803921568627452,.07058823529411765,.07450980392156863,.07058823529411765,.07450980392156863,.0784313725490196,.06274509803921569,.06274509803921569,.06274509803921569,.0784313725490196,.0588235294117647,.07058823529411765,.06666666666666667,.07450980392156863,.09411764705882353,.1176470588235294,.07058823529411765,.28627450980392155,.6431372549019607,.5882352941176471,.6,.6470588235294117,.5490196078431373,.7411764705882353,.9333333333333332,.7921568627450981,.7843137254901962,.592156862745098,.5176470588235295,.3921568627450981,.3411764705882353,.33725490196078434,.4980392156862745,.5725490196078431,.5490196078431373,.6274509803921569,.5254901960784314,.5176470588235295,.4117647058823529,.403921568627451,.40784313725490196,.4392156862745098,.4,.2823529411764706,.4392156862745098,.592156862745098,.6313725490196078,.5372549019607843,.6,.48627450980392156,.3764705882352941,.23137254901960783,.2627450980392157,.2352941176470588,.1411764705882353,.1568627450980392,.1450980392156863,.19607843137254904,.13725490196078433,.17254901960784313,.25882352941176473,.2823529411764706,.25882352941176473,.2549019607843137,.20392156862745098,.30980392156862746,.2352941176470588,.2196078431372549,.29411764705882354,.17647058823529413,.13725490196078433,.10588235294117647,.10196078431372549,.08235294117647057,.08235294117647057,.08235294117647057,.07450980392156863,.07058823529411765,.06274509803921569,.09019607843137255,.07058823529411765,.06666666666666667,.07058823529411765,.0588235294117647,.07058823529411765,.07058823529411765,.07058823529411765,.07058823529411765,.07450980392156863],[.07058823529411765,.0784313725490196,.07058823529411765,.07450980392156863,.06666666666666667,.06666666666666667,.06274509803921569,.08235294117647057,.06274509803921569,.06666666666666667,.06666666666666667,.0588235294117647,.06274509803921569,.06274509803921569,.054901960784313725,.07450980392156863,.054901960784313725,.054901960784313725,.1176470588235294,.050980392156862744,.054901960784313725,.0588235294117647,.06666666666666667,.07058823529411765,.06666666666666667,.054901960784313725,.07058823529411765,.06666666666666667,.06666666666666667,.06666666666666667,.06666666666666667,.054901960784313725,.07058823529411765,.07058823529411765,.06274509803921569,.5803921568627451,.6235294117647059,.5450980392156862,.6235294117647059,.6627450980392156,.7215686274509804,.8352941176470589,.8901960784313725,.7568627450980392,.5686274509803921,.615686274509804,.44313725490196076,.4666666666666666,.3254901960784313,.35294117647058826,.43137254901960786,.5882352941176471,.5843137254901961,.6274509803921569,.5843137254901961,.4235294117647059,.39607843137254906,.4549019607843137,.3254901960784313,.3686274509803922,.3803921568627451,.3921568627450981,.4,.5803921568627451,.5686274509803921,.5176470588235295,.5058823529411764,.3882352941176471,.35294117647058826,.3254901960784313,.19215686274509808,.20784313725490197,.16862745098039217,.1411764705882353,.08627450980392157,.20784313725490197,.22745098039215686,.2196078431372549,.12941176470588237,.23137254901960783,.22745098039215686,.24313725490196078,.13333333333333333,.1411764705882353,.1843137254901961,.22745098039215686,.1411764705882353,.2352941176470588,.12156862745098039,.12156862745098039,.07058823529411765,.07450980392156863,.08235294117647057,.1411764705882353,.0588235294117647,.0588235294117647,.07450980392156863,.07058823529411765,.08235294117647057,.07058823529411765,.07058823529411765,.08235294117647057,.07058823529411765,.07058823529411765,.07058823529411765,.07058823529411765,.07058823529411765],[.08235294117647057,.07058823529411765,.07058823529411765,.0784313725490196,.07058823529411765,.06666666666666667,.06666666666666667,.06666666666666667,.06274509803921569,.06274509803921569,.06666666666666667,.047058823529411764,.06666666666666667,.06274509803921569,.06274509803921569,.06666666666666667,.06666666666666667,.06274509803921569,.06666666666666667,.06666666666666667,.06666666666666667,.0588235294117647,.06666666666666667,.06274509803921569,.054901960784313725,.06666666666666667,.06274509803921569,.06274509803921569,.06274509803921569,.06666666666666667,.07058823529411765,.0588235294117647,.07058823529411765,.06666666666666667,.10196078431372549,.6235294117647059,.5490196078431373,.5803921568627451,.5803921568627451,.6980392156862745,.803921568627451,.8156862745098039,.7960784313725491,.5568627450980392,.6352941176470588,.5647058823529412,.611764705882353,.47843137254901963,.34509803921568627,.3411764705882353,.38431372549019616,.5411764705882353,.5764705882352941,.6039215686274509,.5686274509803921,.3882352941176471,.4196078431372549,.41568627450980394,.37254901960784315,.38431372549019616,.45098039215686275,.36470588235294116,.5254901960784314,.6392156862745098,.615686274509804,.5882352941176471,.5294117647058824,.5254901960784314,.44313725490196076,.32156862745098036,.2980392156862745,.26666666666666666,.17647058823529413,.18823529411764706,.17254901960784313,.14901960784313725,.1843137254901961,.19607843137254904,.1568627450980392,.2196078431372549,.13333333333333333,.15294117647058825,.21568627450980393,.21176470588235294,.23137254901960783,.2235294117647059,.19607843137254904,.2784313725490196,.2235294117647059,.12941176470588237,.10196078431372549,.07058823529411765,.07058823529411765,.07058823529411765,.07058823529411765,.07450980392156863,.07450980392156863,.0784313725490196,.07058823529411765,.07450980392156863,.07058823529411765,.07058823529411765,.07058823529411765,.07450980392156863,.06666666666666667,.07450980392156863,.07058823529411765],[.07058823529411765,.0588235294117647,.0588235294117647,.0588235294117647,.06666666666666667,.0588235294117647,.10980392156862745,.06274509803921569,.0588235294117647,.0784313725490196,.07450980392156863,.07450980392156863,.0588235294117647,.06666666666666667,.06666666666666667,.06666666666666667,.06666666666666667,.06666666666666667,.06666666666666667,.06666666666666667,.06666666666666667,.06666666666666667,.06666666666666667,.06274509803921569,.054901960784313725,.06666666666666667,.06274509803921569,.06666666666666667,.06666666666666667,.06666666666666667,.06666666666666667,.07058823529411765,.0784313725490196,.07450980392156863,.39607843137254906,.615686274509804,.6235294117647059,.5843137254901961,.6627450980392156,.7647058823529411,.6784313725490196,.8,.7686274509803923,.6509803921568627,.6196078431372549,.6039215686274509,.5607843137254902,.4666666666666666,.33333333333333326,.30196078431372547,.32156862745098036,.5058823529411764,.5529411764705883,.596078431372549,.5764705882352941,.4666666666666666,.4392156862745098,.4,.4117647058823529,.35294117647058826,.33725490196078434,.4470588235294118,.43529411764705883,.5450980392156862,.5647058823529412,.6392156862745098,.5372549019607843,.46274509803921565,.3882352941176471,.33333333333333326,.28627450980392155,.21568627450980393,.13725490196078433,.15294117647058825,.1411764705882353,.20392156862745098,.19215686274509808,.2235294117647059,.1803921568627451,.22745098039215686,.1450980392156863,.16470588235294115,.1411764705882353,.16078431372549018,.17254901960784313,.23137254901960783,.19607843137254904,.1450980392156863,.25098039215686274,.09019607843137255,.13333333333333333,.07450980392156863,.07450980392156863,.07058823529411765,.07450980392156863,.07058823529411765,.07058823529411765,.06666666666666667,.0784313725490196,.06666666666666667,.07058823529411765,.07058823529411765,.06666666666666667,.07058823529411765,.0784313725490196,.09019607843137255,.07058823529411765],[.08627450980392157,.06666666666666667,.11372549019607843,.06666666666666667,.07450980392156863,.06666666666666667,.06666666666666667,.09019607843137255,.09019607843137255,.07450980392156863,.0588235294117647,.06666666666666667,.06666666666666667,.06666666666666667,.06274509803921569,.06666666666666667,.06666666666666667,.06666666666666667,.06274509803921569,.06274509803921569,.06666666666666667,.06666666666666667,.06666666666666667,.06666666666666667,.0784313725490196,.06666666666666667,.07058823529411765,.06666666666666667,.07058823529411765,.07058823529411765,.06666666666666667,.06666666666666667,.07058823529411765,.08627450980392157,.6274509803921569,.592156862745098,.6274509803921569,.5882352941176471,.6980392156862745,.7372549019607844,.8156862745098039,.7137254901960784,.8352941176470589,.5725490196078431,.615686274509804,.6196078431372549,.5450980392156862,.43137254901960786,.403921568627451,.3176470588235294,.3058823529411765,.4117647058823529,.5490196078431373,.5725490196078431,.5764705882352941,.4117647058823529,.4117647058823529,.43137254901960786,.41568627450980394,.41568627450980394,.3137254901960784,.4117647058823529,.41568627450980394,.4705882352941176,.49411764705882355,.5764705882352941,.615686274509804,.4588235294117647,.3568627450980392,.29411764705882354,.2901960784313726,.1176470588235294,.15294117647058825,.1411764705882353,.1411764705882353,.16470588235294115,.17647058823529413,.22745098039215686,.2549019607843137,.2196078431372549,.2549019607843137,.25098039215686274,.21176470588235294,.12941176470588237,.1568627450980392,.16470588235294115,.27450980392156865,.3058823529411765,.27450980392156865,.10980392156862745,.20392156862745098,.06666666666666667,.06274509803921569,.07450980392156863,.06666666666666667,.09803921568627452,.06666666666666667,.07450980392156863,.08627450980392157,.07450980392156863,.07058823529411765,.06666666666666667,.07450980392156863,.07058823529411765,.08235294117647057,.0784313725490196,.06666666666666667],[.07058823529411765,.07058823529411765,.07058823529411765,.06666666666666667,.09411764705882353,.09803921568627452,.06274509803921569,.07058823529411765,.06274509803921569,.06666666666666667,.06666666666666667,.06666666666666667,.06666666666666667,.07058823529411765,.050980392156862744,.08627450980392157,.07058823529411765,.06666666666666667,.06274509803921569,.07058823529411765,.06666666666666667,.07058823529411765,.06666666666666667,.06666666666666667,.06666666666666667,.06666666666666667,.06666666666666667,.06666666666666667,.06666666666666667,.07450980392156863,.0784313725490196,.07058823529411765,.09019607843137255,.12941176470588237,.49019607843137253,.5803921568627451,.596078431372549,.6078431372549019,.7764705882352942,.8,.7529411764705882,.7529411764705882,.6862745098039216,.6627450980392156,.6862745098039216,.5411764705882353,.5411764705882353,.4392156862745098,.38431372549019616,.32156862745098036,.2980392156862745,.34901960784313724,.48627450980392156,.6078431372549019,.5450980392156862,.4980392156862745,.4235294117647059,.40784313725490196,.4235294117647059,.3294117647058823,.3411764705882353,.37254901960784315,.4117647058823529,.5568627450980392,.43529411764705883,.4470588235294118,.3921568627450981,.27058823529411763,.2823529411764706,.3294117647058823,.2823529411764706,.1803921568627451,.12941176470588237,.12156862745098039,.1568627450980392,.14901960784313725,.18823529411764706,.25098039215686274,.26666666666666666,.17647058823529413,.1568627450980392,.15294117647058825,.17647058823529413,.16078431372549018,.13333333333333333,.21176470588235294,.16470588235294115,.2627450980392157,.17647058823529413,.13725490196078433,.2549019607843137,.07450980392156863,.0588235294117647,.0784313725490196,.07058823529411765,.06666666666666667,.07450980392156863,.07450980392156863,.08627450980392157,.07058823529411765,.07058823529411765,.08235294117647057,.07450980392156863,.0588235294117647,.06666666666666667,.08627450980392157,.07450980392156863],[.14901960784313725,.07058823529411765,.06274509803921569,.07058823529411765,.07058823529411765,.09411764705882353,.06274509803921569,.08235294117647057,.10980392156862745,.06666666666666667,.08235294117647057,.07058823529411765,.06274509803921569,.0588235294117647,.06666666666666667,.10196078431372549,.047058823529411764,.06666666666666667,.09019607843137255,.06666666666666667,.0784313725490196,.07058823529411765,.06666666666666667,.06666666666666667,.06666666666666667,.06666666666666667,.06666666666666667,.06666666666666667,.06666666666666667,.08235294117647057,.06274509803921569,.06666666666666667,.08235294117647057,.5490196078431373,.5450980392156862,.596078431372549,.592156862745098,.6862745098039216,.7686274509803923,.7372549019607844,.7725490196078433,.7490196078431373,.592156862745098,.5843137254901961,.6196078431372549,.5529411764705883,.5647058823529412,.3921568627450981,.39607843137254906,.2901960784313726,.27058823529411763,.3294117647058823,.5529411764705883,.5529411764705883,.592156862745098,.4980392156862745,.40784313725490196,.4549019607843137,.40784313725490196,.38431372549019616,.3568627450980392,.3294117647058823,.403921568627451,.5058823529411764,.5137254901960784,.5137254901960784,.4196078431372549,.35294117647058826,.27450980392156865,.2823529411764706,.17254901960784313,.16078431372549018,.14901960784313725,.20784313725490197,.21568627450980393,.1450980392156863,.1568627450980392,.16470588235294115,.13725490196078433,.21176470588235294,.1450980392156863,.1411764705882353,.10196078431372549,.16078431372549018,.1843137254901961,.14901960784313725,.2,.22745098039215686,.15294117647058825,.16470588235294115,.12549019607843137,.08235294117647057,.07058823529411765,.07058823529411765,.07450980392156863,.06274509803921569,.07450980392156863,.0784313725490196,.06274509803921569,.0784313725490196,.08627450980392157,.07058823529411765,.050980392156862744,.07058823529411765,.0784313725490196,.07450980392156863,.07450980392156863],[.047058823529411764,.0784313725490196,.1411764705882353,.0784313725490196,.10588235294117647,.0588235294117647,.0784313725490196,.07450980392156863,.07058823529411765,.06666666666666667,.10980392156862745,.06666666666666667,.0588235294117647,.10588235294117647,.07058823529411765,.050980392156862744,.07450980392156863,.08235294117647057,.06274509803921569,.07450980392156863,.07058823529411765,.07450980392156863,.06666666666666667,.06666666666666667,.06274509803921569,.06666666666666667,.06666666666666667,.0588235294117647,.06666666666666667,.06274509803921569,.0588235294117647,.0784313725490196,.2,.5372549019607843,.5725490196078431,.5019607843137255,.5333333333333333,.6588235294117646,.6980392156862745,.7215686274509804,.7058823529411765,.6745098039215687,.5333333333333333,.5254901960784314,.5058823529411764,.47450980392156855,.3921568627450981,.4117647058823529,.3686274509803922,.3058823529411765,.2901960784313726,.3254901960784313,.42745098039215684,.4588235294117647,.4705882352941176,.46274509803921565,.47843137254901963,.3921568627450981,.4235294117647059,.3294117647058823,.3411764705882353,.3803921568627451,.5529411764705883,.5725490196078431,.5058823529411764,.4588235294117647,.4588235294117647,.35294117647058826,.2627450980392157,.27058823529411763,.20392156862745098,.12156862745098039,.1176470588235294,.1450980392156863,.1450980392156863,.12156862745098039,.12941176470588237,.16470588235294115,.15294117647058825,.10588235294117647,.12156862745098039,.1176470588235294,.12156862745098039,.12549019607843137,.10980392156862745,.11372549019607843,.24705882352941178,.2235294117647059,.20392156862745098,.1568627450980392,.12941176470588237,.07450980392156863,.07450980392156863,.07450980392156863,.0784313725490196,.0588235294117647,.08235294117647057,.06274509803921569,.10588235294117647,.06666666666666667,.054901960784313725,.07058823529411765,.0588235294117647,.08627450980392157,.07058823529411765,.10980392156862745,.09411764705882353]];var Qs=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},e(t,r)};return function(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();const $s=function(e){function t(){var t=e.call(this)||this;return t._originX=0,t.direction=Tt.createFromNumber(1,0,0),t.setContent(Ks),t}return Qs(t,e),t.prototype.setContent=function(e,t){void 0===t&&(t=.02),this._content=e,this._cellNumY=e.length,this._cellNumX=e[0].length,this._step=t,this._width=Math.floor(this._step*this._cellNumX),this._height=Math.floor(this._step*this._cellNumY)},t.prototype.translateBase64ToArrayBuffer=function(e){e=e.substring(e.indexOf(",")+1);for(var t=window.atob(e),r=t.length,n=new Uint8Array(r),o=0;o<r;o++)n[o]=t.charCodeAt(o);return n.buffer},t.prototype.startDirection=function(e,t){t.set(this.direction.normalize().transformDirection(e))},t.prototype.startPosition=function(e,t){var r=mt(0,this._height),n=Tt.createFromNumber(0,r,0);t.set(n.applyMatrix4(e)),this._originX=t.x},t.prototype.processInstance=function(e,t){if(e.position.x-this._originX>this._width)e.age=e.lifeTime;else{e.age=0;var r=Math.floor((e.position.x-this._originX)/this._step),n=Math.floor(e.position.y/this._step),o=.97*this._content[this._cellNumY-1-n][r];e.position.x+=.03*(1-.97*o)+.007*Math.random(),e.color.w=.3*o}},t.prototype.lerpNumberArrayToVector=function(e,t,r,n,o){void 0===o&&(o=4);for(var i=new Array(o),a=0;a<o;a++)i[a]=t[a]+(r[a]-t[a])*n;e.setValue.apply(e,i)},t}(Xs);var Js=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},e(t,r)};return function(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();const eu=function(e){function t(){var t=e.call(this)||this;return t.radius=3,t.radiusRange=0,t.arc=360,t.randomizeDirection=0,t}return Js(t,e),t.prototype.startDirection=function(e,t,r){var n=Tt.createFromNumber(e.getValue(3,0),e.getValue(3,1),e.getValue(3,2)),o=r.sub(n).normalize(),i=mt(0,this.randomizeDirection),a=mt(0,this.randomizeDirection),s=mt(0,this.randomizeDirection),u=Tt.createFromNumber(i,a,s);t.set(o.add(u).normalize().transformDirection(e))},t.prototype.startPosition=function(e,t){var r=this.radius-mt(0,this.radius*this.radiusRange),n=mt(0,1),o=mt(0,this.arc/360*2*Math.PI),i=Math.acos(2*n-1),a=r*Math.cos(o)*Math.sin(i),s=r*Math.cos(i),u=r*Math.sin(o)*Math.sin(i),c=Tt.createFromNumber(a,s,u);t.set(c.applyMatrix4(e))},t}(Xs);var tu=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},e(t,r)};return function(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();const ru=function(e){function t(){var t=e.call(this)||this;return t.radius=3,t.angle=60,t.radiusRange=0,t.heightRange=1,t.arc=360,t.randomizeDirection=0,t}return tu(t,e),Object.defineProperty(t.prototype,"radius",{get:function(){return this._radius},set:function(e){this._radius!=e&&(this._radius=e,this.updateHeight())},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"angle",{get:function(){return this._angle},set:function(e){this._angle!=e&&(this._angle=e,this.updateHeight())},enumerable:!1,configurable:!0}),t.prototype.updateHeight=function(){0!=this.angle?this._height=this._radius/Math.tan(this.angle/2*Math.PI/180):this._height=1},t.prototype.startDirection=function(e,t,r){var n=Tt.createFromNumber(e.getValue(3,0),e.getValue(3,1),e.getValue(3,2)),o=r.sub(n).normalize(),i=mt(0,this.randomizeDirection),a=mt(0,this.randomizeDirection),s=mt(0,this.randomizeDirection),u=Tt.createFromNumber(i,a,s);t.set(o.add(u).normalize().transformDirection(e))},t.prototype.startPosition=function(e,t){var r=mt(0,this.arc/360*Math.PI*2),n=this._height*this.heightRange,o=n*Math.tan(this.angle/2*Math.PI/180),i=o-mt(0,o*this.radiusRange)*Math.pow(Math.random(),.5),a=n*Math.pow(Math.random(),1/3),s=a*i/n,u=s*Math.sin(r),c=s*Math.cos(r),l=Tt.createFromNumber(u,a,c);t.set(l.applyMatrix4(e))},t}(Xs);var nu=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},e(t,r)};return function(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();const ou=function(e){function t(){var t=e.call(this)||this;return t.radius=1,t.radiusRange=0,t.arc=360,t.direction=Tt.createFromNumber(0,1,0),t.direction2=Tt.createFromNumber(0,1,0),t.angle=0,t}return nu(t,e),t.prototype.startDirection=function(e,t,r){var n=Tt.createFromNumber(e.getValue(3,0),e.getValue(3,1),e.getValue(3,2)),o=r.sub(n).normalize(),i=mt(this.direction.x,this.direction2.x),a=mt(this.direction.y,this.direction2.y),s=mt(this.direction.z,this.direction2.z),u=Tt.createFromNumber(i,a,s),c=o.cross(u).normalize();u=this.osgRotate(u,c,this.angle/180*Math.PI),t.set(u.normalize().transformDirection(e))},t.prototype.startPosition=function(e,t){var r=this.radius-mt(0,this.radius*this.radiusRange),n=(mt(0,1),mt(0,this.arc/360*2*Math.PI)),o=r*Math.cos(n),i=r*Math.sin(n),a=Tt.createFromNumber(o,0,i);t.set(a.applyMatrix4(e))},t.prototype.osgRotate=function(e,t,r){return e.scale(Math.cos(r)).add(e.cross(t).scale(Math.sin(r))).add(t.scale(e.dot(t)).scale(1-Math.cos(r)))},t}(Xs);var iu;!function(e){e[e.ATTACH=0]="ATTACH",e[e.END=1]="END"}(iu||(iu={}));var au,su=function(){function e(e){this.particleSystem=e,this.state=iu.END}return e.prototype.clone=function(){var t=this.particleSystem.clone();t.initParticle(t.data);var r=new e(t);return r.state=this.state,r},e}(),uu=function(){function e(e,t,r){this.gradient=e,this.color=t,this.color2=r}return e.prototype.getColor=function(e){if(!this.color2)return e.x=this.color.x,e.y=this.color.y,e.z=this.color.z,void(e.w=this.color.w);var t=Math.random();e.x=this.color.x+(this.color2.x-this.color.x)*t,e.y=this.color.y+(this.color2.y-this.color.y)*t,e.z=this.color.z+(this.color2.z-this.color.z)*t,e.w=this.color.w+(this.color2.w-this.color.w)*t},e}(),cu=function(e,t){this.gradient=e,this.color=t},lu=function(){function e(e,t,r){this.gradient=e,this.factor=t,this.factor2=r}return e.prototype.getFactor=function(){return this.factor2&&this.factor2!=this.factor?this.factor+(this.factor2-this.factor)*Math.random():this.factor},e}(),fu=function(){function e(){}return e.GetCurrentGradient=function(e,t,r){if(t[0].graident>e)r(t[0],t[0],1);else{for(var n=t.length-1,o=0;o<n;o++){var i=t[o],a=t[o+1];if(e>=i.gradient&&e<=a.gradient)return void r(i,a,(e-i.gradient)/(a.gradient-i.gradient))}r(t[n],t[n],1)}},e}(),pu=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},e(t,r)};return function(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),hu={neverCull:{type:"boolean",defaultValue:!1},renderMode:{type:"string",defaultValue:"default"},uniforms:{type:"map"},states:{type:"map"},texture:{type:"texture"},capacity:{type:"number"},emitRate:{type:"number"},angle:{type:"number-array"},delay:{type:"number"},gravity:{type:"number"},emitterPosition:{type:"number-array"},size:{type:"number-array"},scaleX:{type:"number-array"},scaleY:{type:"number-array"},speed:{type:"number-array"},lifeTime:{type:"number-array"},startColor:{type:"number-array"},startColor2:{type:"number-array"},endColor:{type:"number-array"},angularSpeed:{type:"number-array"},emitterType:{type:"string"},emitterProps:{type:"map"},stopDuration:{type:"number"},callbackParameter:{type:"map"},prewarmCycles:{type:"number"},speedDampen:{type:"number",defaultValue:0},atlas:{type:"atlas"},atlasSpeed:{type:"number",defaultValue:1},atlasRandom:{type:"boolean"},atlasLoop:{type:"boolean",defaultValue:!0},atlasFrames:{type:"array"},mesh:{type:"geometry"},sizeChange:{type:"map"},colorChange:{type:"map"},speedChange:{type:"map"},burstCount:{type:"number"},burstTime:{type:"number"},burstCycle:{type:"number"},burstInterval:{type:"number"}};!function(e){e[e.BILLBOARDMODE_DEFAULT=0]="BILLBOARDMODE_DEFAULT",e[e.BILLBOARDMODE_Y=1]="BILLBOARDMODE_Y",e[e.BILLBOARDMODE_STRETCHED=2]="BILLBOARDMODE_STRETCHED"}(au||(au={}));var du=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.schema=hu,t._instances=new Array,t._stockInstances=new Array,t._capacity=1,t._delay=0,t._updateSpeed=.01,t._stopDuration=0,t._emitRate=10,t._gravity=0,t._preWarmCycles=0,t._preWarmStepOffset=5,t._particleEmitter=null,t._burstCount=0,t._burstTime=0,t._burstCycle=-1,t._burstInterval=1,t._burstCountTime=0,t._burstCountCycle=0,t._burstCountInterval=0,t._minLifeTime=1,t._maxLifeTime=1,t._minScaleX=1,t._maxScaleX=1,t._minScaleY=1,t._maxScaleY=1,t._minSize=.3,t._maxSize=.3,t._minSpeed=1,t._maxSpeed=1,t._particleLengthScale=1,t._startColor=[1,1,1,1],t._startColor2=null,t._endColor=null,t._useSpriteSheet=!1,t._startSpriteCellIndex=0,t._endSpriteCellIndex=0,t._useRandomSpriteCellIndex=!1,t._useSpriteCellLoop=!0,t._spriteChangeSpeed=1,t._textureData=null,t._atlasObj=null,t._renderMesh=null,t._indexSize=0,t._vertexSize=0,t._useBillboard=!0,t._useRenderMesh=!1,t._billboardMode=au.BILLBOARDMODE_DEFAULT,t._useRampGradients=!1,t._vertexLayoutDirty=!1,t._startAngle=0,t._startAngle2=0,t._minAngularSpeed=0,t._maxAngularSpeed=0,t._subEmitters=null,t._emitterPosition=Tt.createFromNumber(0,0,0),t}return pu(t,e),Object.defineProperty(t.prototype,"material",{get:function(){return this._material},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_visible",{set:function(e){var t;null===(t=this._cull)||void 0===t||t.setActive(e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"useBillboard",{get:function(){return this._useBillboard},set:function(e){this.useBillboard!=e&&(this._useBillboard=e,this._vertexLayoutDirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"useRampGradients",{get:function(){return this._useRampGradients},set:function(e){this._useRampGradients!=e&&(this._useRampGradients=e,this._vertexLayoutDirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"billboardMode",{get:function(){return this._billboardMode},set:function(e){this._billboardMode!=e&&(this._billboardMode=e,this._vertexLayoutDirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"useSpriteSheet",{get:function(){return this._useSpriteSheet},set:function(e){this._useSpriteSheet!=e&&(this._useSpriteSheet=e,this._vertexLayoutDirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"useRandomSpriteCellIndex",{get:function(){return this._useRandomSpriteCellIndex},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"useSpriteCellLoop",{get:function(){return this._useSpriteCellLoop},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"spriteChangeSpeed",{get:function(){return this._spriteChangeSpeed},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"emitterPosition",{get:function(){return this._emitterPosition},set:function(e){this._emitterPosition=e},enumerable:!1,configurable:!0}),t.prototype._parseAttribute=function(){this.ParticleAttributes=[],this.ParticleAttributes.push({name:"a_position",format:2,offset:0,usage:1},{name:"a_texCoord",format:1,offset:12,usage:4},{name:"a_offset",format:2,offset:20,usage:0},{name:"a_color",format:3,offset:32,usage:7},{name:"a_angle",format:0,offset:48,usage:0});var e=52;this._useBillboard&&this._billboardMode==au.BILLBOARDMODE_STRETCHED&&(this.ParticleAttributes.push({name:"a_direction",format:2,offset:e,usage:0}),e+=12,this.ParticleAttributes.push({name:"a_lengthScale",format:0,offset:e,usage:0}),e+=4),this._useRampGradients&&(this.ParticleAttributes.push({name:"a_rampPos",format:3,offset:e,usage:0}),e+=16),this.useSpriteSheet&&(this.ParticleAttributes.push({name:"a_cellPosition",format:3,offset:e,usage:0}),e+=16),this.particleStride=e,this.byteStride=4,this.particleVertexSize=this.particleStride/this.byteStride},t.prototype.clone=function(){var e=new gu,t={};for(var r in this._data)t[r]=this._data[r];return e.data=t,e.particleEl=this.particleEl,e.particleScene=this.particleScene,e},t.prototype.createSubEmitter=function(e){var t=new gu;for(var r in t.data={},t.particleEl=this.particleEl,t.particleScene=this.particleScene,e)t.data[r]=e[r];return new su(t)},t.prototype.createPointEmitter=function(e,t){var r=new Zs;return r.direction=e,r.direction2=t,this._particleEmitter=r,this._particleEmitterType="PointShape",r},t.prototype.createBoxEmitter=function(e,t,r,n){var o=new qs;return o.direction=e,o.direction2=t,o.minEmitBox=r,o.maxEmitBox=n,this._particleEmitter=o,this._particleEmitterType="BoxShape",o},t.prototype.createSphereEmitter=function(e,t,r,n){var o=new eu;return o.radius=e,o.radiusRange=t,o.arc=r,o.randomizeDirection=n,this._particleEmitter=o,this._particleEmitterType="SphereShape",o},t.prototype._parseProperties=function(e){var t,r=this,n=!1;for(var o in e){var i=e[o];switch(o){case"capacity":this._capacity=i;break;case"renderMode":switch(i){case"off":this.useBillboard=!1;break;case"default":this.useBillboard=!0,this.billboardMode=au.BILLBOARDMODE_DEFAULT;break;case"y":this.useBillboard=!0,this.billboardMode=au.BILLBOARDMODE_Y;break;case"stretched":this.useBillboard=!0,this.billboardMode=au.BILLBOARDMODE_STRETCHED;break;case"mesh":this.useBillboard=!1,this._useRenderMesh=!0}break;case"mesh":if(null==i)break;this._renderMesh=i,this._vertexCount=this._renderMesh._getRawVertexBuffer().byteLength/this._renderMesh.vertexLayout.stride;break;case"delay":this._delay=i;break;case"burstCount":this._burstCount=i;break;case"burstTime":this._burstTime=i;break;case"burstCycle":this._burstCycle=i;break;case"burstInterval":this._burstInterval=i;break;case"stopDuration":this._stopDuration=i;break;case"updateSpeed":this._updateSpeed=i;break;case"emitRate":this._emitRate=i;break;case"gravity":this._gravity=i;break;case"prewarmCycles":this._preWarmCycles=i;break;case"particleLengthScale":this._particleLengthScale=i;break;case"speedDampen":this._speedDampenFactor=i;break;case"texture":if(null==i)break;this._textureData=i;break;case"atlas":if(null==i)break;this._useSpriteSheet=!0,this._startSpriteCellIndex=0;var a=0;this._spriteFrameInfo=new Array,this._spriteNameToCellIndex=new Map;var s=i;for(var o in this._atlasObj=s,this._atlasTexture=s.texture,s.frames)this._spriteNameToCellIndex.set(o,a),this._spriteFrameInfo.push(s.getUVST(o)),a++;this._endSpriteCellIndex=a;break;case"atlasFrames":n=!0,t=i;break;case"atlasLoop":this._useSpriteCellLoop=i;break;case"atlasSpeed":this._spriteChangeSpeed=i;break;case"atlasRandom":this._useRandomSpriteCellIndex=i;break;case"angle":this._startAngle=this._startAngle2=i[0],i[1]&&(this._startAngle2=i[1]);break;case"lifeTime":this._minLifeTime=this._maxLifeTime=i[0],i[1]&&(this._maxLifeTime=i[1]);break;case"scaleX":this._minScaleX=this._maxScaleX=i[0],i[1]&&(this._maxScaleX=i[1]);break;case"scaleY":this._minScaleY=this._maxScaleY=i[0],i[1]&&(this._maxScaleY=i[1]);break;case"size":this._minSize=this._maxSize=i[0],i[1]&&(this._maxSize=i[1]);break;case"speed":this._minSpeed=this._maxSpeed=i[0],i[1]&&(this._maxSpeed=i[1]);break;case"angularSpeed":this._minAngularSpeed=this._maxAngularSpeed=i[0],i[1]&&(this._maxAngularSpeed=i[1]);break;case"emitterType":this._particleEmitterType=i;break;case"emitterProps":this._particleEmitterProperties=i;break;case"emitterPosition":this._emitterPosition.x=i[0],this._emitterPosition.y=i[1],this._emitterPosition.z=i[2];break;case"startColor":for(var u=0;u<4;u++)this._startColor[u]=i[u];break;case"sizeChange":i.forEach((function(e){var t=e[0],n=e[1];r.addSizeGradient(parseFloat(t),parseFloat(n))}));break;case"speedChange":i.forEach((function(e){var t=e[0],n=e[1];r.addSpeedScaleGradient(parseFloat(t),parseFloat(n))}));break;case"colorChange":i.forEach((function(e){var t=e[0],n=e[1].split(" ");r.addColorGradient(parseFloat(t),_r.createFromNumber(parseFloat(n[0]),parseFloat(n[1]),parseFloat(n[2]),parseFloat(n[3])))}));break;case"startColor2":for(this._startColor2=this._startColor2||[0,0,0,0],u=0;u<4;u++)this._startColor2[u]=i[u];break;case"endColor":for(this._endColor=this._endColor||[0,0,0,0],u=0;u<4;u++)this._endColor[u]=i[u]}}if(n)if(this._atlasObj){for(var c in a=0,this._startSpriteCellIndex=0,this._spriteFrameInfo=new Array,this._spriteNameToCellIndex=new Map,this._atlasObj.frames)t.forEach((function(e,t){c==e&&(r._spriteNameToCellIndex.set(c,a),r._spriteFrameInfo.push(r._atlasObj.getUVST(c)),a++)}));this._endSpriteCellIndex=a}else Ee.log("未取得图集信息")},t.prototype._chooseEmitterProcess=function(){if(null==this._particleEmitter){if(this._particleEmitterType)switch(this._particleEmitterType){case"BoxShape":this._particleEmitter=new qs;break;case"PointShape":this._particleEmitter=new Zs;break;case"DrawShape":this._particleEmitter=new $s;break;case"SphereShape":this._particleEmitter=new eu;break;case"ConeShape":this._particleEmitter=new ru;break;case"CircleShape":this._particleEmitter=new ou}else this._particleEmitter=new Zs;this._particleEmitter.setProperty(this._particleEmitterProperties)}},t.prototype._createVertexBuffers=function(){if(this._useRenderMesh){var e=this._renderMesh.getVertexLayout().stride,t=this._renderMesh._getRawVertexBuffer().byteLength/e;this._vertexSize=this._capacity*t}else this._vertexSize=4*this._capacity;this._vertexData=new Float32Array(this.particleVertexSize*this._vertexSize),this._vertexBuffer=new(he(this.particleScene).VertexBuffer)(this._vertexData,this._getVertexLayout(this.ParticleAttributes,this.particleStride))},t.prototype._createIndexBuffer=function(){if(this._useRenderMesh){var e=this._renderMesh._getRawIndiceBuffer();this._indexBuffer=new(he(this.particleScene).IndexBuffer)(e,!1),this._eachIndexSize=e.byteLength/2,this._indexSize=this._capacity*this._eachIndexSize;for(var t=new Uint16Array(this._indexSize),r=0;r<this._capacity;r++)for(var n=r*this._eachIndexSize,o=0;o<this._eachIndexSize;o++)t[n+o]=e[o]+r*this._vertexCount;this._indexBuffer=new(he(this.particleScene).IndexBuffer)(t,!1)}else{for(this._indexSize=6*this._capacity,t=new Uint16Array(this._indexSize),r=0;r<this._capacity;r++)t[6*r]=4*r,t[6*r+1]=4*r+1,t[6*r+2]=4*r+2,t[6*r+3]=4*r,t[6*r+4]=4*r+2,t[6*r+5]=4*r+3;this._indexBuffer=new(he(this.particleScene).IndexBuffer)(t,!1)}},t.prototype._appendParticleVertices=function(e,t){if(void 0===t&&(t=null),this._useRenderMesh)for(var r=this._renderMesh._getRawVertexBuffer(),n=this._renderMesh.vertexLayout,o=n.stride,i=0;i<this._vertexCount;i++){var a=n.getConfigByName("a_texCoord"),s=o/4,u=i*s+n.getConfigByName("a_position").offset/4,c=i*s+a.offset/4;this._appendParticleVertex(e++,t,r[u+0],r[u+1],r[u+2],r[c+0],r[c+1])}else this._appendParticleVertex(e++,t,-1,-1,0,0,1),this._appendParticleVertex(e++,t,1,-1,0,1,1),this._appendParticleVertex(e++,t,1,1,0,1,0),this._appendParticleVertex(e++,t,-1,1,0,0,0)},t.prototype._appendParticleVertex=function(e,t,r,n,o,i,a){var s=e*this.particleVertexSize;if(this._vertexData[s++]=t.position.x,this._vertexData[s++]=t.position.y,this._vertexData[s++]=t.position.z,this._vertexData[s++]=i,this._vertexData[s++]=a,this._vertexData[s++]=r*t.size*t.scale.x,this._vertexData[s++]=n*t.size*t.scale.y,this._vertexData[s++]=o*t.size,this._vertexData[s++]=t.color.x,this._vertexData[s++]=t.color.y,this._vertexData[s++]=t.color.z,this._vertexData[s++]=t.color.w,this._vertexData[s++]=t.angle*Math.PI/180,this._useBillboard&&this._billboardMode==au.BILLBOARDMODE_STRETCHED&&(this._vertexData[s++]=t.direction.x,this._vertexData[s++]=t.direction.y,this._vertexData[s++]=t.direction.z,this._vertexData[s++]=this._particleLengthScale),this._useRampGradients&&(this._vertexData[s++]=t.rampPos.x,this._vertexData[s++]=t.rampPos.y,this._vertexData[s++]=0,this._vertexData[s++]=1),this.useSpriteSheet){var u=~~t.cellIndex;this._vertexData[s++]=this._spriteFrameInfo[u].z,this._vertexData[s++]=this._spriteFrameInfo[u].w,this._vertexData[s++]=this._spriteFrameInfo[u].x,this._vertexData[s++]=this._spriteFrameInfo[u].y}},t.prototype._rebuildMesh=function(e){var t=this.particleEl.getComponent(Di);this._trs=t,this._cull||(this._cull=new(he(this.particleScene).CullingComponent)(t.node),this._cull.bindEntity(t.node)),this._mesh=new(he(this.particleScene).MeshRendererComponent)(t.node,{meshCount:this._renderMesh?this._renderMesh.getSubMeshCount():1,renderType:this._getMeshType(),uniformBlock:new(he(this.particleScene).UniformBlock)(this._getUniformDesc()),culling:e?void 0:this._cull,macros:{}})},t.prototype._getUniformDesc=function(){return this.particleScene.assets.getAsset("uniform-desc","mesh-static")},t.prototype._getMeshType=function(){return ue.EMeshRenderType.Static3D},t.prototype._getVertexLayout=function(e,t){var r=this.particleScene._requestTmpObj("builtin-particle-vertex-layouts");return r["particle"+this._systemId]&&!this._vertexLayoutDirty||(r["particle"+this._systemId]=this.particleScene.createVertexLayout({attributes:e,stride:t})),r["particle"+this._systemId]},t.prototype._setMeshData=function(e,t,r){if(t||r?this._sourceMaterial===e&&this._sourceMaterial!==this._material||(this._material=e.clone()):this._material=e,this._textureData&&this._material.setTexture("u_baseColorMap",this._textureData),this._atlasTexture&&this._material.setTexture("u_baseColorMap",this._atlasTexture),this._useRampGradients&&this._rampGradientsTexture&&this._material.setTexture("u_rampColorMap",this._rampGradientsTexture),this.useSpriteSheet?this._material.setMacro("WX_SPRITESHEET",!0):this._material.setMacro("WX_SPRITESHEET",!1),this._useRenderMesh?this._material.setMacro("WX_RENDERMESH",!0):this._material.setMacro("WX_RENDERMESH",!1),this._useBillboard)switch(this._material.setMacros({WX_BILLBOARD:!0}),this._billboardMode){case au.BILLBOARDMODE_Y:this._material.setMacros({WX_BILLBOARDMODE_Y:!0});break;case au.BILLBOARDMODE_STRETCHED:this._material.setMacros({WX_BILLBOARDMODE_STRETCHED:!0});break;case au.BILLBOARDMODE_DEFAULT:this._material.setMacros({WX_BILLBOARDMODE_DEFAULT:!0})}else this._material.setMacro("WX_BILLBOARD",!1),this._material.setMacro("WX_BILLBOARDMODE_Y",!1),this._material.setMacro("WX_BILLBOARDMODE_STRETCHED",!1),this._material.setMacro("WX_BILLBOARDMODE_DEFAULT",!1);t&&this._material._parseUniforms(t),r&&this._material._parseRenderStates(r),this._sourceMaterial=e,this._useRenderMesh?(this._mesh.setVertexBuffer(0,this._vertexBuffer),this._mesh.setIndexBuffer(0,this._indexBuffer),this._mesh.setStartIndex(0,0),this._mesh.setNumIndices(0,this._instances.length*this._eachIndexSize),this._mesh.setMaterial(0,this._material.kanataMaterial)):(this._mesh.setVertexBuffer(0,this._vertexBuffer),this._mesh.setIndexBuffer(0,this._indexBuffer),this._mesh.setStartIndex(0,0),this._mesh.setNumIndices(0,6*this._instances.length),this._mesh.setMaterial(0,this._material.kanataMaterial))},t.prototype.addColorGradient=function(e,t,r){this._colorGradients||(this._colorGradients=[]);var n=new uu(e,t,r);this._colorGradients.push(n),this._colorGradients.sort((function(e,t){return e.gradient<t.gradient?-1:e.gradient>t.gradient?1:0}))},t.prototype.addSpeedScaleGradient=function(e,t,r){this._speedScaleGradients||(this._speedScaleGradients=[]),this.addFactorGradient(this._speedScaleGradients,e,t,r)},t.prototype.addLimitSpeedGradient=function(e,t,r){this._limitSpeedGradients||(this._limitSpeedGradients=[]),this.addFactorGradient(this._limitSpeedGradients,e,t,r)},t.prototype.addDragGradient=function(e,t,r){this._dragGradients||(this._dragGradients=[]),this.addFactorGradient(this._dragGradients,e,t,r)},t.prototype.addAlphaGradient=function(e,t,r){this._alphaGradients||(this._alphaGradients=[]),this.addFactorGradient(this._alphaGradients,e,t,r)},t.prototype.addSizeGradient=function(e,t,r){this._sizeGradients||(this._sizeGradients=[]),this.addFactorGradient(this._sizeGradients,e,t,r)},t.prototype.addColorRemapGradient=function(e,t,r){this._colorRemapGradients||(this._colorRemapGradients=[]),this.addFactorGradient(this._colorRemapGradients,e,t,r)},t.prototype.addFactorGradient=function(e,t,r,n){var o=new lu(t,r,n);e.push(o),e.sort((function(e,t){return e.gradient<t.gradient?-1:e.gradient>t.gradient?1:0}))},t.prototype.addRampGradient=function(e,t){this._rampGradients||(this._rampGradients=[]);var r=new cu(e,t);this._rampGradients.push(r),this._rampGradients.sort((function(e,t){return e.gradient<t.gradient?-1:e.gradient>t.gradient?1:0})),this.createRampGradientTexture()},t.prototype.createRampGradientTexture=function(){for(var e,t=this,r=new Uint8Array(1024),n=function(n){var o=n/256;fu.GetCurrentGradient(o,t._rampGradients,(function(t,o,i){e=t.color.lerp(o.color,i),r[4*n]=255*e.x,r[4*n+1]=255*e.y,r[4*n+2]=255*e.z,r[4*n+3]=255}))},o=0;o<256;o++)n(o);this._rampGradientsTexture=this.particleScene.createTexture({width:256,height:1,source:[r],pixelFormat:ue.ETextureFormat.RGBA8})},t.prototype.lerpNumberArrayToVector=function(e,t,r,n,o){void 0===o&&(o=4);for(var i=new Array(o),a=0;a<o;a++)i[a]=t[a]+(r[a]-t[a])*n;e.setValue.apply(e,i)},t.count=0,t}(oo);const _u=du,yu=function(){function e(t){this.cellIndex=0,this.particleSystem=t,this.position=Tt.createFromNumber(0,0,0),this.direction=Tt.createFromNumber(0,0,0),this.speed=0,this.color=_r.createFromNumber(0,0,0,0),this.colorStep=_r.createFromNumber(0,0,0,0),this.rampPos=_r.createFromNumber(0,0,0,1),this.currentSize=0,this.currentSize2=0,this.currentColor=_r.createFromNumber(0,0,0,0),this.currentColor2=_r.createFromNumber(0,0,0,1),this.currentAlpha=0,this.currentAlpha2=0,this.startSpriteCellIndex=0,this.endSpriteCellIndex=0,this.lifeTime=1,this.age=0,this.drag=0,this.size=1,this.startSize=1,this.sizeGradientFactor=1,this.scale=cr.createFromNumber(0,0),this.angle=0,this.angularSpeed=0,this.id=e.count++}return e.prototype.reset=function(){this.age=0,this.id=e.count++,this.randomCellOffset=void 0,this.cellIndex=this.startSpriteCellIndex},e.prototype.copyTo=function(e){e.position.set(this.position),e.direction.set(this.direction),e.color.set(this.color),e.colorStep.set(this.colorStep),e.rampPos.set(this.rampPos),e.speed=this.speed,e.lifeTime=this.lifeTime,e.size=this.size,e.scale.set(this.scale),e.angle=this.angle,e.angularSpeed=this.angularSpeed,e.particleSystem=this.particleSystem,e.id=this.id,e.age=this.age,e.subEmitterMuster=this.subEmitterMuster,this.currentColorGradient&&(e.currentColorGradient=this.currentColorGradient,e.currentColor=this.currentColor.clone(),e.currentColor2=this.currentColor2.clone()),this.currentSizeGradient&&(e.currentSizeGradient=this.currentSizeGradient,e.currentSize=this.currentSize,e.currentSize2=this.currentSize2),this.currentAlphaGradient&&(e.currentAlphaGradient=this.currentAlphaGradient,e.currentAlpha=this.currentAlpha,e.currentAlpha2=this.currentAlpha2),this.currentSpeedScaleGradient&&(e.currentSpeedScaleGradient=this.currentSpeedScaleGradient,e.currentSpeedScale=this.currentSpeedScale,e.currentSpeedScale2=this.currentSpeedScale2),this.currentLimitSpeedGradient&&(e.currentLimitSpeedGradient=this.currentLimitSpeedGradient,e.currentLimitSpeed=this.currentLimitSpeed,e.currentLimitSpeed2=this.currentLimitSpeed2),this.currentDragGradient&&(e.currentDragGradient=this.currentDragGradient,e.currentDrag=this.currentDrag,e.currentDrag2=this.currentDrag2),this.particleSystem.useSpriteCellLoop&&(e.randomCellOffset=this.randomCellOffset,e.startSpriteCellIndex=this.startSpriteCellIndex,e.endSpriteCellIndex=this.endSpriteCellIndex)},e.prototype.updateCellIndex=function(){var e,t=this.age,r=this.particleSystem.spriteChangeSpeed;this.particleSystem.useRandomSpriteCellIndex&&(null==this.randomCellOffset&&(this.randomCellOffset=Math.random()*this.lifeTime),0==r?(r=1,t=this.randomCellOffset):t+=this.randomCellOffset);var n=this.endSpriteCellIndex-this.startSpriteCellIndex;e=this.particleSystem.useSpriteCellLoop?this.clamp(t*r%this.lifeTime/this.lifeTime):this.clamp(t*r/this.lifeTime),this.cellIndex=this.startSpriteCellIndex+e*n|0},e.prototype.clamp=function(e,t,r){return void 0===t&&(t=0),void 0===r&&(r=1),e<t?t:e>r?r:e},e.count=0,e}();var vu=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},e(t,r)};return function(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),mu=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.priority=300,t.subEmitters=null,t._start=!1,t._stop=!1,t._alive=!1,t._actualFrame=0,t._excessInstance=0,t._tempEndColor=_r.createFromNumber(0,0,0,0),t._tempDiffColor=_r.createFromNumber(0,0,0,0),t._tempAccColorStep=_r.createFromNumber(0,0,0,0),t}return vu(t,e),Object.defineProperty(t.prototype,"material",{get:function(){return this._material},set:function(e){this._mesh},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"id",{get:function(){return this._mesh.id},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"data",{get:function(){return this._data},set:function(e){this._data=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"particleEmitter",{get:function(){return this._particleEmitter},enumerable:!1,configurable:!0}),t.prototype.start=function(e){var t=this;if(void 0===e&&(e=0),console.log("start!!"),e)setTimeout((function(){t.start(0)}),e);else if(this._start=!0,this._stop=!1,this._preWarmCycles)for(var r=0;r<this._preWarmCycles;r++)this._updateRenderData(0,!0)},t.prototype.stop=function(){this._stop||(this.el.event.trigger("stop"),this._stop=!0,this.stopSubEmitters())},t.prototype.onAdd=function(e,t){this._mesh||(this.particleEl=this.el,this.particleScene=this.el.scene,this._data=t,this.initParticle(this._data),this._prepareSubEmitterArray(),this.start(this._delay))},t.prototype.createMaterial=function(){var e=null;return(e=new Ir(this.particleScene)).initByEffect(this.particleScene.assets.getAsset("effect","particle")),e},t.prototype.initParticle=function(e){this._systemId=t.count++,this._parseProperties(e),this._parseAttribute(),this._createVertexBuffers(),this._createIndexBuffer(),this._chooseEmitterProcess(),this._rebuildMesh(e.neverCull),this._setMeshData(this.createMaterial(),e.uniforms,e.states)},t.prototype.resetParticle=function(){this._stockInstances.length=0,this._instances.length=0,this._updateRenderData(0),this._setMeshData(this._material)},t.prototype._prepareSubEmitterArray=function(){var e=this;this._subEmitters=[],this.subEmitters&&this.subEmitters.forEach((function(r){r instanceof t?e._subEmitters.push([new su(r)]):r instanceof su?e._subEmitters.push([r]):r instanceof Array&&e._subEmitters.push(r)})),this._subEmitters&&0!=this._subEmitters.length&&(this._activeSubEmitterSystem=new Array)},t.prototype.stopSubEmitters=function(){this._activeSubEmitterSystem&&(this._activeSubEmitterSystem.forEach((function(e){e.stop()})),this._activeSubEmitterSystem=new Array)},t.prototype.removeFromRoot=function(){if(this._rootEmitterSystem){var e=this._rootEmitterSystem._activeSubEmitterSystem.indexOf(this);-1!==e&&this._rootEmitterSystem._activeSubEmitterSystem.splice(e,1),this._rootEmitterSystem=null}},t.prototype.onTick=function(e,t){var r,n,o;this._trs&&(null===(r=this._cull)||void 0===r||r.setActive(this._trs.visible),null===(n=this._cull)||void 0===n||n.setLayer(this._trs.layer)),this._updateSpeed=e/1e3,this._vertexLayoutDirty?this.onUpdate(t,null):(this._updateRenderData(e),this._setMeshData(this._material,t.uniforms)),null===(o=this._material)||void 0===o||o._checkTextures(e)},t.prototype.onUpdate=function(e,t){this._mesh&&(this._vertexLayoutDirty?(this.resetParticle(),this._parseAttribute(),this._createVertexBuffers(),this._setMeshData(this._material,e.uniforms),this._vertexLayoutDirty=!1):(this.resetParticle(),this.initParticle(e)))},t.prototype.onRemove=function(e,t){var r;null===(r=this._cull)||void 0===r||r.setActive(!1)},t.prototype.onRelease=function(e){this._mesh.destroy(),this._cull.destroy(),this._mesh=void 0,this._cull=void 0},t.prototype._updateRenderData=function(e,t){if(void 0===t&&(t=!1),this._start){var r,n=this._emitRate,o=this._updateSpeed*(t?this._preWarmStepOffset:1);if(r=n*o>>0,this._excessInstance+=n*o-r,this._excessInstance>1&&(r+=this._excessInstance>>0,this._excessInstance-=this._excessInstance>>0),this._burstCount>0){var i=!1,a=!1;this._burstCountTime<this._burstTime?this._burstCountTime+=this._updateSpeed:a=!0,a&&(this._burstInterval<.01?this._burstInterval>=0&&(r+=this._burstCount,this._burstInterval=-1):(this._burstCountInterval+=this._updateSpeed,this._burstCountInterval>this._burstInterval&&(i=!0,this._burstCountInterval=0))),i&&-1!=this._burstCycle&&(this._burstCountCycle>=this._burstCycle>>0?i=!1:this._burstCountCycle++),i&&(r+=this._burstCount>>0)}if(this._alive=!1,this._stop?r=0:(this._actualFrame+=o,this._stopDuration&&this._actualFrame>=this._stopDuration&&this.stop()),this.update(r),this._stop&&(this._alive||(this._start=!1,this.resetParticle(),this.removeFromRoot())),!t){for(var s=0,u=0;u<this._instances.length;u++){var c=this._instances[u];this._appendParticleVertices(s,c),this._useRenderMesh?s+=this._vertexCount:s+=4,c.subEmitterMuster&&c.subEmitterMuster.length>0&&c.subEmitterMuster.forEach((function(t){t.particleSystem.onTick(e,t.particleSystem.data)}))}this._activeSubEmitterSystem&&this._activeSubEmitterSystem.length>0&&this._activeSubEmitterSystem.forEach((function(t){t.onTick(e,t.data)})),this._vertexBuffer&&(this._useRenderMesh?this._vertexBuffer.update(this._vertexData.subarray(0,this._instances.length*this._vertexCount*this.particleStride),0):this._vertexBuffer.update(this._vertexData.subarray(0,this._instances.length*this.particleStride),0))}}},t.prototype.createParticle=function(){var e;if(0!==this._stockInstances.length?(e=this._stockInstances.pop()).reset():e=new yu(this),this._subEmitters&&this._subEmitters.length>0){var t=this._subEmitters[Math.floor(Math.random()*this._subEmitters.length)];e.subEmitterMuster=[],t.forEach((function(t){if(t.state==iu.ATTACH){var r=t.clone();e.subEmitterMuster.push(r),r.particleSystem.start()}}))}return e},t.prototype.particleSubEmitter=function(e){var t=this;if(this._subEmitters&&0!=this._subEmitters.length){var r=Math.floor(Math.random()*this._subEmitters.length);this._subEmitters[r].forEach((function(r){if(r.state==iu.END){var n=r.clone();n.particleSystem._rootEmitterSystem=t,n.particleSystem.emitterPosition=e.position.clone(),t._activeSubEmitterSystem.push(n.particleSystem),n.particleSystem.start()}}))}},t.prototype.recycleParticle=function(e){var t=this._instances.pop();t!==e&&t.copyTo(e),this._stockInstances.push(t)},t.prototype.update=function(e){var t=this;if(this._alive=this._instances.length>0,this._alive||!this._stop){var r,n=this._emitterPosition;this._emitterWorldMatrix=Sr.IDENTITY.translate(n.x,n.y,n.z),this._emitterWorldMatrix.inverse(this._emitterInverseWorldMatrix);for(var o=function(e){if(t._instances.length===t._capacity)return"break";r=t.createParticle(),t._instances.push(r),t.initInstanceProperty(r)},i=0;i<e&&"break"!==o();i++);this.updateInstanceProperty(this._instances)}},t.prototype.initInstanceProperty=function(e){var t,r;if(e.lifeTime=mt(this._minLifeTime,this._maxLifeTime),this._useRampGradients&&(e.rampPos=_r.createFromNumber(0,1,0,1)),this._particleEmitter.startPosition(this._emitterWorldMatrix,e.position),e.angularSpeed=mt(this._minAngularSpeed,this._maxAngularSpeed),e.angle=mt(this._startAngle,this._startAngle2),e.speed=mt(this._minSpeed,this._maxSpeed),this._particleEmitter.startDirection(this._emitterWorldMatrix,e.direction,e.position),this._colorGradients&&this._colorGradients.length>0)e.currentColorGradient=this._colorGradients[0],e.currentColorGradient.getColor(e.currentColor),e.color=e.currentColor.clone(),this._colorGradients.length>1?this._colorGradients[1].getColor(e.currentColor2):e.currentColor2=e.currentColor.clone();else{var n,o,i=Math.random();n=null!==(t=this._startColor2)&&void 0!==t?t:this._startColor,o=null!==(r=this._endColor)&&void 0!==r?r:this._startColor,this.lerpNumberArrayToVector(e.color,this._startColor,n,i),this.lerpNumberArrayToVector(this._tempEndColor,o,o,i),this._tempEndColor.sub(e.color,this._tempDiffColor),this._tempDiffColor.scale(1/e.lifeTime,e.colorStep)}this._alphaGradients&&this._alphaGradients.length>0&&(e.currentAlphaGradient=this._alphaGradients[0],e.currentAlpha=e.currentAlphaGradient.getFactor(),e.color.w=e.currentAlpha,this._alphaGradients.length>1?e.currentAlpha2=this._alphaGradients[1].getFactor():e.currentAlpha2=e.currentAlpha),this._speedScaleGradients&&this._speedScaleGradients.length>0&&(e.currentSpeedScaleGradient=this._speedScaleGradients[0],e.currentSpeedScale=e.currentSpeedScaleGradient.getFactor(),this._speedScaleGradients.length>1?e.currentSpeedScale2=this._speedScaleGradients[1].getFactor():e.currentSpeedScale2=e.currentSpeedScale),this._limitSpeedGradients&&this._limitSpeedGradients.length>0&&(e.currentLimitSpeedGradient=this._limitSpeedGradients[0],e.currentLimitSpeed=e.currentLimitSpeedGradient.getFactor(),this._limitSpeedGradients.length>1?e.currentLimitSpeed2=this._limitSpeedGradients[1].getFactor():e.currentLimitSpeed2=e.currentLimitSpeed),this._dragGradients&&this._dragGradients.length>0&&(e.currentDragGradient=this._dragGradients[0],e.currentDrag=e.currentDragGradient.getFactor(),this._dragGradients.length>1?e.currentDrag2=this._dragGradients[1].getFactor():e.currentDrag2=e.currentDrag),e.scale.setValue(mt(this._minScaleX,this._maxScaleX),mt(this._minScaleY,this._maxScaleY)),this._sizeGradients&&this._sizeGradients.length>0?(e.currentSizeGradient=this._sizeGradients[0],e.currentSize=e.currentSizeGradient.getFactor(),e.sizeGradientFactor=e.currentSize,e.startSize=mt(this._minSize,this._maxSize),e.size=e.startSize*e.sizeGradientFactor,this._sizeGradients.length>1?e.currentSize2=this._sizeGradients[1].getFactor():e.currentSize2=e.currentSize):e.size=mt(this._minSize,this._maxSize),this.useSpriteSheet&&(e.startSpriteCellIndex=this._startSpriteCellIndex,e.endSpriteCellIndex=this._endSpriteCellIndex)},t.prototype.updateInstanceProperty=function(e){for(var t,r=this,n=function(n){var o=e[n],i=r._updateSpeed,a=o.age;if(o.age+=r._updateSpeed,o.age>o.lifeTime){var s=o.age-a;i=(o.lifeTime-a)*i/s,o.age=o.lifeTime}r.processInstance(o),r._particleEmitter.processInstance&&r._particleEmitter.processInstance(o,r._updateSpeed),o.subEmitterMuster&&o.subEmitterMuster.forEach((function(e){e.particleSystem.emitterPosition=o.position.clone()})),r.useSpriteSheet&&o.updateCellIndex(),o.age>=o.lifeTime&&(r.particleSubEmitter(o),o.subEmitterMuster&&(o.subEmitterMuster.forEach((function(e){e.particleSystem.stop()})),o.subEmitterMuster=null),r.recycleParticle(o),n--),t=n},o=0;o<e.length;o++)n(o),o=t},t.prototype.processInstance=function(e){var t=this,r=e.age/e.lifeTime,n=this._updateSpeed;this._useRampGradients&&this._colorRemapGradients&&this._colorRemapGradients.length>0&&fu.GetCurrentGradient(r,this._colorRemapGradients,(function(t,r,n){var o=t.factor+(r.factor-t.factor)*n,i=t.factor2+(r.factor2-t.factor2)*n;e.rampPos.x=o,e.rampPos.y=i-o})),this._colorGradients&&this._colorGradients.length>0?fu.GetCurrentGradient(r,this._colorGradients,(function(t,r,n){e.currentColorGradient!=t&&(e.currentColor=e.currentColor2.clone(),r.getColor(e.currentColor2),e.currentColorGradient=t),e.color.x=e.currentColor.x+(e.currentColor2.x-e.currentColor.x)*n,e.color.y=e.currentColor.y+(e.currentColor2.y-e.currentColor.y)*n,e.color.z=e.currentColor.z+(e.currentColor2.z-e.currentColor.z)*n,e.color.w=e.currentColor.w+(e.currentColor2.w-e.currentColor.w)*n})):(e.colorStep.scale(n,this._tempAccColorStep),e.color.add(this._tempAccColorStep,e.color),e.color.w<0&&(e.color.w=0),e.color.w>1&&(e.color.w=1)),this._alphaGradients&&this._alphaGradients.length>0&&fu.GetCurrentGradient(r,this._alphaGradients,(function(t,r,n){e.currentAlphaGradient!=t&&(e.currentAlpha=e.currentAlpha2,e.currentAlpha2=r.getFactor(),e.currentAlphaGradient=t),e.color.w=e.currentAlpha+(e.currentAlpha2-e.currentAlpha)*n}));var o=e.speed;this._speedScaleGradients&&this._speedScaleGradients.length>0&&fu.GetCurrentGradient(r,this._speedScaleGradients,(function(t,r,n){e.currentSpeedScaleGradient!=t&&(e.currentSpeedScale=e.currentSpeedScale2,e.currentSpeedScale=r.getFactor(),e.currentSpeedScaleGradient=t);var i=e.currentSpeedScale+(e.currentSpeedScale2-e.currentSpeedScale)*n;o*=i})),this._limitSpeedGradients&&this._limitSpeedGradients.length>0&&fu.GetCurrentGradient(r,this._limitSpeedGradients,(function(r,n,i){e.currentLimitSpeedGradient!=r&&(e.currentLimitSpeed=e.currentSpeedScale2,e.currentLimitSpeed=n.getFactor(),e.currentLimitSpeedGradient=r);var a=e.currentLimitSpeed+(e.currentLimitSpeed2-e.currentLimitSpeed)*i;Math.abs(e.speed)>a&&(o*=1-t._speedDampenFactor)})),this._dragGradients&&this._dragGradients.length>0&&fu.GetCurrentGradient(r,this._dragGradients,(function(t,r,n){e.currentDragGradient!=t&&(e.currentDrag=e.currentSpeedScale2,e.currentDrag=r.getFactor(),e.currentDragGradient=t),e.drag=e.currentDrag+(e.currentDrag2-e.currentDrag)*n}));var i=e.direction.scale(o*(1-e.drag));e.angle+=e.angularSpeed*n;var a=Tt.createFromNumber(0,-1*this._gravity,0),s=i.add(a).scale(n);e.position.add(s,e.position),this._sizeGradients&&this._sizeGradients.length>0&&fu.GetCurrentGradient(r,this._sizeGradients,(function(t,r,n){e.currentSizeGradient!=t&&(e.currentSize=e.currentSize2,e.currentSize2=r.getFactor(),e.currentSizeGradient=t),e.sizeGradientFactor=e.currentSize+(e.currentSize2-e.currentSize)*n,e.size=e.startSize*e.sizeGradientFactor}))},t.EVENTS=["stop"],t}(_u);const gu=mu;function bu(e){return function(t){return void 0===t&&(t={}),function(r,n,o){var i="__"+n;o.get=function(){return t.fromPhysics?this[i]&&this[i].fromPhysics?this[i].fromPhysics(this[e][n]):void 0===this[i]?(Object.defineProperty(this,i,{value:t.fromPhysics(this[e][n]),enumerable:!1,writable:!0}),this[i]):t.fromPhysics(this[e][n]):this[e][n]},o.set=function(t){this[e]&&(this[e][n]=t.toPhysics?t.toPhysics():t)},o.enumerable=!0}}}function wu(e){for(var t=parseInt(e,16).toString(2).padStart(32,"0"),r=[],n=0;n<t.length;n+=8){var o=t.slice(n,n+8).split("").reverse().map((function(e){return parseInt(e,10)}));r=r.concat(o)}return r}var xu=new WeakMap;xu._get=xu.get,xu.get=function(e){var t=this._get(e);return t||(t=new Eu(e)),t};var Eu=function(){function e(e){this._native=e}return Object.defineProperty(e.prototype,"separation",{get:function(){return this._native.separation},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"normal",{get:function(){return this._normal||(this._normal=At.fromPhysics(this._native.normal)),this._normal},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"point",{get:function(){return this._point||(this._point=At.fromPhysics(this._native.point)),this._point},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"thisShape",{get:function(){return this._native.this_collider.userData},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"otherShape",{get:function(){return this._native.other_collider.userData},enumerable:!1,configurable:!0}),e}(),Su=new WeakMap;Su._get=Su.get,Su.get=function(e){var t=this._get(e);return t||(t=new Tu(e)),t};var Tu=function(){function e(e){this._native=e,this._impulse=At.fromPhysics(e.impulse),this._relativeVelocity=At.fromPhysics(e.relative_velocity),this._shape=e.collider.userData,this._contacts=e.contacts.map((function(e){return xu.get(e)})),Su.set(e,this)}return Object.defineProperty(e.prototype,"impulse",{get:function(){return this._impulse},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"relativeVelocity",{get:function(){return this._relativeVelocity},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"shape",{get:function(){return this._shape},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"contacts",{get:function(){return this._contacts},enumerable:!1,configurable:!0}),e}();!function(){function e(){this._handlers=new Map,this._subs=new Set}e.prototype._addSubDelegate=function(e){this._subs.add(e),e._shared=this},e.prototype._removeSubDelegate=function(e){this._subs.delete(e),e._shared=void 0},e.prototype.add=function(e,t){void 0===t&&(t=null),this._handlers.has(e)||(this._handlers.set(e,t),this._subs.forEach((function(e){e._check()})))},e.prototype.remove=function(e){this._handlers.delete(e),0===this._handlers.size&&this._subs.forEach((function(e){e._check()}))},e.prototype.invoke=function(e){this._handlers.forEach((function(t,r){try{r.call(t,e)}catch(e){console.error(e)}}))},e.prototype._hasHandler=function(){return this._handlers.size>0},e.prototype.dispose=function(){this._handlers.clear(),this._subs.clear()}}();var Ou,Au,Cu,Mu,Pu=function(){function e(e,t,r,n){this.hasNativeHandler=!1,this.isPhysicsDelegate=!0,this._handlers=new Map,this.nativeCollider=e,this.nativeMethod=t,this._el=r,this.xmlEvent=n}return Object.defineProperty(e.prototype,"nativeCollider",{get:function(){return this._nativeCollider},set:function(e){e!==this._nativeCollider&&(this.clearNativeHandler(),this._nativeCollider=e,this._check())},enumerable:!1,configurable:!0}),e.prototype._check=function(){var e,t=this;this.nativeCollider&&(this._handlers.size||(null===(e=this._shared)||void 0===e?void 0:e._hasHandler())?this.hasNativeHandler||(this.nativeCollider[this.nativeMethod]=function(e){t.invoke(e)},this.hasNativeHandler=!0):this.hasNativeHandler&&(this.nativeCollider[this.nativeMethod]=null,this.hasNativeHandler=!1))},e.prototype.clearNativeHandler=function(){this.nativeCollider&&(this.nativeCollider[this.nativeMethod]=null)},e.prototype._nativeCompToEngine=function(e){return"OnControllerColliderHit"==this.nativeMethod?controllerColliderHitsMap.get(e):Su.get(e)},e.prototype.add=function(e,t){if(void 0===t&&(t=null),!this._handlers.has(e))return this._handlers.set(e,t),this._check(),e},e.prototype.remove=function(e){this._handlers.delete(e),this._check()},e.prototype.invoke=function(e){var t=this._nativeCompToEngine(e);this._handlers.forEach((function(e,r){try{r.call(e,t)}catch(e){console.error(e)}})),this._shared&&this._shared.invoke(t)},e.prototype.clear=function(){this._handlers.clear()},e.prototype.dispose=function(){this.nativeCollider=void 0,this._handlers.clear(),this._shared=void 0},Object.defineProperty(e.prototype,"el",{set:function(e){e!==this._el&&(this._el=e,this.xmlInvoker&&(this.removeXMLInvoker(),this.addXMLInvoker()))},enumerable:!1,configurable:!0}),e.prototype.addXMLInvoker=function(){var e=this;if(!this.xmlInvoker){var t=this.add((function(t){e._el.event.trigger(e.xmlEvent,t)}));t&&(this.xmlInvoker=t)}},e.prototype.removeXMLInvoker=function(){this.xmlInvoker&&(this.remove(this.xmlInvoker),this.xmlInvoker=void 0)},e}();!function(e){e[e.None=0]="None",e[e.FreezePositionX=1]="FreezePositionX",e[e.FreezePositionY=2]="FreezePositionY",e[e.FreezePositionZ=4]="FreezePositionZ",e[e.FreezeRotationX=8]="FreezeRotationX",e[e.FreezeRotationY=16]="FreezeRotationY",e[e.FreezeRotationZ=32]="FreezeRotationZ",e[e.FreezePosition=7]="FreezePosition",e[e.FreezeRotation=56]="FreezeRotation",e[e.FreezeAll=63]="FreezeAll"}(Ou||(Ou={})),function(e){e[e.Discrete=0]="Discrete",e[e.Continuous=1]="Continuous",e[e.ContinuousDynamic=2]="ContinuousDynamic",e[e.ContinuousSpeculative=3]="ContinuousSpeculative"}(Au||(Au={})),function(e){e[e.Force=0]="Force",e[e.Impulse=1]="Impulse",e[e.VelocityChange=2]="VelocityChange",e[e.Acceleration=4]="Acceleration"}(Cu||(Cu={})),function(e){e[e.Average=0]="Average",e[e.Mininum=1]="Mininum",e[e.Multiply=2]="Multiply",e[e.Maximum=3]="Maximum"}(Mu||(Mu={}));var Ru,Du=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},e(t,r)};return function(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Nu=function(e,t,r,n){var o,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,r,a):o(t,r))||a);return i>3&&a&&Object.defineProperty(t,r,a),a},Iu=bu("_nativeMaterial");!function(e){e[e.None=0]="None",e[e.Overlap=1]="Overlap",e[e.Collide=2]="Collide"}(Ru||(Ru={}));var Lu={disabled:{type:"boolean"},collide:{type:"boolean"},bounciness:{type:"number"},staticFriction:{type:"number"},dynamicFriction:{type:"number"}};const Fu=function(e){function t(){var t=e.call(this)||this;return t.schema=Lu,t._disabled=!1,t._collide=!1,t}return Du(t,e),Object.defineProperty(t.prototype,"dynamicFriction",{get:function(){},set:function(){},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"staticFriction",{get:function(){},set:function(){},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"bounciness",{get:function(){},set:function(){},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"frictionCombine",{get:function(){},set:function(e){},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"bounceCombine",{get:function(){},set:function(e){},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"material",{get:function(){return this._material},enumerable:!1,configurable:!0}),t.prototype.onAdd=function(e,t){this._material||this.initMaterial(),this.applyData(t)},t.prototype.onUpdate=function(e,t){this.applyData(e)},t.prototype.initMaterial=function(){this._material=new(he(this.scene).Phys3D.Material)(this.scene.physics.nativeSystem),this._material.bounciness=0,this._material.staticFriction=.6,this._material.dynamicFriction=.6,this.bounceCombine=Mu.Average},t.prototype.applyData=function(e){this._disabled=!!e.disabled,this._collide=!!e.collide,void 0!==e.bounciness&&(this._material.bounciness=e.bounciness),void 0!==e.staticFriction&&(this._material.staticFriction=e.staticFriction),void 0!==e.dynamicFriction&&(this._material.dynamicFriction=e.dynamicFriction)},t.prototype.getInteractType=function(){return this._disabled?Ru.None:this._collide?Ru.Collide:Ru.Overlap},Nu([Iu()],t.prototype,"dynamicFriction",null),Nu([Iu()],t.prototype,"staticFriction",null),Nu([Iu()],t.prototype,"bounciness",null),Nu([Iu()],t.prototype,"frictionCombine",null),Nu([Iu()],t.prototype,"bounceCombine",null),t}(oo);var ku,Uu=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},e(t,r)};return function(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Bu=function(){return Bu=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Bu.apply(this,arguments)},ju=new Map,Vu=[["onCollisionEnter","collide-begin"],["onCollisionExit","collide-end"],["onCollisionStay","collide-persist"],["onTriggerEnter","overlap-begin"],["onTriggerExit","overlap-end"],["onTriggerStay","overlap-persist"]];!function(e){e[e.None=0]="None",e[e.Cube=1]="Cube",e[e.CharacterController=2]="CharacterController",e[e.Capsule=3]="Capsule",e[e.Mesh=4]="Mesh",e[e.Sphere=5]="Sphere"}(ku||(ku={}));var zu,Gu={center:{type:"number-array"},autoFit:{type:"boolean"},disabled:{type:"boolean"}};!function(e){e[e.None=0]="None",e[e.Basic=1]="Basic",e[e.GLTFAbstract=2]="GLTFAbstract"}(zu||(zu={}));var Wu=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.priority=400,t.implType=zu.None,t._type=ku.None,t.gltfVersion=0,t._disabledInData=!1,t}return Uu(t,e),Object.defineProperty(t.prototype,"type",{get:function(){return this._type},enumerable:!1,configurable:!0}),t.prototype.onAdd=function(e,t){var r;this._onCollisionEnterDelegate||this.initDelegates(this.el),this._disabledInData=!!t.disabled,null===(r=this.impl)||void 0===r||r.onElementAdd(e),this.scene.physics.addShape(this)},t.prototype.onUpdate=function(e,t){var r;this._disabledInData=!!e.disabled,null===(r=this.impl)||void 0===r||r.update(e,t)},t.prototype.onTick=function(e,t){var r,n,o,i;if(!this.el.getComponent(Di).visible||this._disabledInData)null===(r=this.impl)||void 0===r||r.disable();else{var a=this.decideImplType(t);a!==this.implType&&(null===(n=this.impl)||void 0===n||n.cleanUp(),this.impl=void 0,this.createImpl(a,t),this._version++),null===(o=this.impl)||void 0===o||o.enable(),null===(i=this.impl)||void 0===i||i.onTick(e,t)}this.resetListeners()},t.prototype.createImpl=function(e,t){var r=this;Vu.forEach((function(e){var t=e[0];e[1],r.shadowRoot?r["_"+t+"Delegate"].el=r.shadowRoot.el:r["_"+t+"Delegate"].el=r.el}));var n=this.getImplClass(e);n&&(this.impl=new n,this.implType=e,this.shadowRoot&&(this.impl._isShadow=!0,this.impl._root=this.shadowRoot,this.impl._positionInGLTF=this.shadowTransform[0],this.impl._quatInGLTF=this.shadowTransform[1],this.impl._scaleInGLTF=this.shadowTransform[2]),this.impl.create(this.el,this,t))},t.prototype.decideImplType=function(e){if(this.shadowRoot)return zu.Basic;var t=this.el.getComponent("gltf");return t&&t.version>this.gltfVersion&&(e.autoFit||this.type===ku.Mesh)?zu.GLTFAbstract:t&&!t._inited?zu.None:!e.autoFit&&this._type!==ku.Mesh||this.el.getComponent("mesh")||t?zu.Basic:zu.None},t.prototype.onRemove=function(e,t){this.scene.physics.removeShape(this)},t.prototype.onRelease=function(e){var t,r=this;this.shadowRoot=void 0,this.shadowTransform=void 0,this.implType=zu.None,null===(t=this.impl)||void 0===t||t.cleanUp(),this.impl=void 0,Vu.forEach((function(e){var t=e[0];e[1],r["_"+t+"Delegate"].dispose(),r["_"+t+"Delegate"]=void 0}))},t.prototype.setAsShadow=function(e,t){this.shadowTransform=t,this.shadowRoot=e},t.prototype.getGLTFRootShape=function(){if(this.shadowRoot)return this.shadowRoot.shapeComp},t.prototype.getBasicImpl=function(){if(this.implType===zu.GLTFAbstract&&Ee.error("[Shape] shape impl is abstract type."),this.implType===zu.Basic)return this.impl},t.prototype.getShadowShapes=function(){return this.implType===zu.GLTFAbstract?this.impl.shadowShapes:[]},t.prototype.initDelegates=function(e){var t=this;Vu.forEach((function(r){var n=r[0],o=r[1];t["_"+n+"Delegate"]=new Pu(void 0,n,e,o)}))},t.prototype.resetListeners=function(){var e=this;Vu.forEach((function(t){var r=t[0],n=t[1];e["_"+r+"Delegate"]&&((e.shadowRoot?e.shadowRoot.el:e.el).event.has(n)?e["_"+r+"Delegate"].addXMLInvoker():e["_"+r+"Delegate"].removeXMLInvoker())}))},t.EVENTS=["touch-shape","untouch-shape","drag-shape"],t}(oo);const Xu=Wu;var Hu,qu=function(){function e(){this._nativeStaticRigidbody=null,this._isShadow=!1,this._interactType=Ru.None,this._layer=0}return e.prototype.create=function(e,t,r){this.el=e,this.shapeComp=t},e.prototype.afterCreateNativeComp=function(){this.nativeComp&&(this.nativeComp.userData=this,this.nativeComp.interactType=Ru.None,this.nativeComp.layer=0,ju.set(this.nativeComp,this.shapeComp)),this._isShadow&&(this.nativeComp.attachedRigidbody=this._root._nativeStaticRigidbody)},e.prototype.destroyNativeComp=function(){this.nativeComp&&(this.nativeComp.enabled=!1,this.nativeComp.dettachRigidbody(),this.nativeComp.userData=null,ju.delete(this.nativeComp))},e.prototype.onElementAdd=function(e){},e.prototype.update=function(e,t){var r;if((e.autoFit||this.shapeComp.type==ku.Mesh)&&(e=Bu({},e),this.autoFit(e)),this.nativeComp){this.applyData(e);var n=Tt.createFromArray(null!==(r=e.center)&&void 0!==r?r:[0,0,0]);this._isShadow&&(n=this._positionInGLTF.add(this._quatInGLTF.transformVector3(n)),this.nativeComp.quaternion=this._quatInGLTF.toPhysics(),this.nativeComp.localScale=this._scaleInGLTF.toPhysics()),this.nativeComp.center=n.toPhysics()}},e.prototype.onElementRemove=function(e){},e.prototype.onRelease=function(e){},e.prototype.onTick=function(e,t){var r=this;Vu.forEach((function(e){var t=e[0];e[1],r.shapeComp["_"+t+"Delegate"].nativeCollider=r.nativeComp})),this.checkInteract(),this.checkRigidbody(),this.checkLayer()},e.prototype.cleanUp=function(){this.destroyNativeComp(),this._nativeStaticRigidbody&&(this._nativeStaticRigidbody.Detach(),this._nativeStaticRigidbody.Remove(),this._nativeStaticRigidbody=void 0),this._root=void 0,this.el=void 0,this.shapeComp=void 0},Object.defineProperty(e.prototype,"entity",{get:function(){return this._isShadow?this._root.el.getComponent(Di).node:this.el.getComponent(Di).node},enumerable:!1,configurable:!0}),e.prototype.createStaticRigidbody=function(){this._nativeStaticRigidbody||(this._nativeStaticRigidbody=new(he(this.el.scene).Phys3D.StaticRigidbody)(this.el.scene.physics.nativeSystem),this.el.scene.physics.bindRigidbodyWithEntity(this._nativeStaticRigidbody,this.entity))},e.prototype.checkRigidbody=function(){var e;(e=this._isShadow?this._root.el.getComponent("rigidbody"):this.el.getComponent("rigidbody"))||this._nativeStaticRigidbody||this._isShadow||(this.createStaticRigidbody(),this.nativeComp.attachedRigidbody=this._nativeStaticRigidbody),!e&&this.rigidbodyComp&&(this._isShadow?this.nativeComp.attachedRigidbody=this._root._nativeStaticRigidbody:this.nativeComp.attachedRigidbody=this._nativeStaticRigidbody,this.rigidbodyComp=void 0),e&&this.rigidbodyComp!==e&&(this.nativeComp.attachedRigidbody=e.nativeComp,this.rigidbodyComp=e,this._isShadow&&(e.resetCenterOfMass(),e.resetInertiaTensor()))},e.prototype.checkInteract=function(){var e=this.el.getComponent("shape-interact");this._isShadow&&(e=this._root.el.getComponent("shape-interact"));var t=e?e.getInteractType():Ru.None;t!==this._interactType&&(this.nativeComp.interactType=t,this._interactType=t),t===Ru.Collide&&(this.nativeComp.sharedMaterial=e.material)},e.prototype.checkLayer=function(){var e;(e=this._isShadow?this._root.el.getComponent(Di):this.el.getComponent(Di)).layer!==this._layer&&(this.nativeComp.layer=e.layer,this._layer=e.layer)},e.prototype.enable=function(){this.nativeComp&&(this.nativeComp.enabled=!0)},e.prototype.disable=function(){this.nativeComp&&(this.nativeComp.enabled=!1)},e}(),Yu=function(){function e(){this.shadowShapes=[]}return e.prototype.onElementAdd=function(e){},e.prototype.update=function(e,t){for(var r=0,n=this.shadowShapes;r<n.length;r++)n[r].onUpdate(e,t)},e.prototype.onElementRemove=function(e){},e.prototype.onTick=function(e,t){},e.prototype.create=function(e,t,r){var n=this;this.el=e,this.shapeComp=t,this.gltf=e.getComponent("gltf"),this.gltf?(this.createStaticRigidbody(),this.gltf._meshesWithTransform.forEach((function(e){var t=e[0],o=e[1],i=n.createShadowShape(t.el,r);i.setAsShadow(n,o),n.shadowShapes.push(i)}))):Ee.error("[Shape] no gltf component found!")},e.prototype.cleanUp=function(){for(var e=0,t=this.shadowShapes;e<t.length;e++){var r=t[e];r.el&&r.el.removeComponent(this.getShapeClass())}this.shadowShapes=[],this.el=void 0,this.shapeComp=void 0},e.prototype.createStaticRigidbody=function(){this._nativeStaticRigidbody||(this._nativeStaticRigidbody=new(he(this.el.scene).Phys3D.StaticRigidbody)(this.el.scene.physics.nativeSystem),this.el.scene.physics.bindRigidbodyWithEntity(this._nativeStaticRigidbody,this.el.getComponent(Di).node))},e.prototype.enable=function(){},e.prototype.disable=function(){},e}(),Zu=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},e(t,r)};return function(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Ku=function(){return Ku=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Ku.apply(this,arguments)},Qu=function(e,t,r,n){var o,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,r,a):o(t,r))||a);return i>3&&a&&Object.defineProperty(t,r,a),a},$u=bu("nativeComp"),Ju=Ku(Ku({},Gu),{radius:{type:"number"},height:{type:"number"},direction:{type:"number"}});!function(e){e[e["X-Axis"]=0]="X-Axis",e[e["Y-Axis"]=1]="Y-Axis",e[e["Z-Axis"]=2]="Z-Axis"}(Hu||(Hu={}));var ec=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.schema=Ju,t._type=ku.Capsule,t}return Zu(t,e),t.prototype.getImplClass=function(e){switch(e){case zu.Basic:return rc;case zu.GLTFAbstract:return nc;default:return null}},t.EVENTS=["touch-shape","untouch-shape","drag-shape"],t}(Xu);const tc=ec;var rc=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Zu(t,e),Object.defineProperty(t.prototype,"center",{get:function(){},set:function(e){},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"radius",{get:function(){},set:function(e){},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){},set:function(e){},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"direction",{get:function(){},set:function(e){},enumerable:!1,configurable:!0}),t.prototype.create=function(t,r,n){e.prototype.create.call(this,t,r,n),this.nativeComp=new(he(this.el.scene).Phys3D.CapsuleCollider)(this.el.scene.physics.nativeSystem,Tt.ZERO.toPhysics(),0,0),this.afterCreateNativeComp(),this.update(n,null)},t.prototype.autoFit=function(e){var t=this.el.getComponent("mesh");if(t){for(var r=t.geometry.boundBox,n=r.size.toArray(),o=0,i=0,a=0,s=0;s<3;s++)n[s]>i&&(o=s,a=i,i=n[s]);e.direction=o,e.radius=.5*a,e.height=i,e.center=r.center.toArray()}},t.prototype.applyData=function(e){var t,r,n;this.nativeComp.radius=null!==(t=e.radius)&&void 0!==t?t:.5,this.nativeComp.height=null!==(r=e.radius)&&void 0!==r?r:2,this.nativeComp.direction=null!==(n=e.direction)&&void 0!==n?n:Hu["Y-Axis"]},t.defaultHeight=2,Qu([$u(Tt)],t.prototype,"center",null),Qu([$u()],t.prototype,"radius",null),Qu([$u()],t.prototype,"height",null),Qu([$u()],t.prototype,"direction",null),t}(qu),nc=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Zu(t,e),t.prototype.getShapeClass=function(){return ec},t.prototype.create=function(t,r,n){e.prototype.create.call(this,t,r,n)},t.prototype.update=function(t,r){e.prototype.update.call(this,t,r)},t.prototype.createShadowShape=function(e,t){return e.addComponent(ec,t)},t}(Yu),oc=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},e(t,r)};return function(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),ic=function(){return ic=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},ic.apply(this,arguments)},ac=(bu("_nativeCollider"),ic(ic({},Gu),{convex:{type:"boolean"}})),sc=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.schema=ac,t._type=ku.Mesh,t}return oc(t,e),t.prototype.getImplClass=function(e){switch(e){case zu.Basic:return cc;case zu.GLTFAbstract:return lc;default:return null}},t.EVENTS=["touch-shape","untouch-shape","drag-shape"],t}(Xu);const uc=sc;var cc=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.convex=!1,t}return oc(t,e),t.prototype.create=function(t,r,n){if(e.prototype.create.call(this,t,r,n),!this.physMesh){var o=this.el.getComponent("mesh");if(!o)return;if(!this.createPhysMesh(o))return void Ee.error("[MeshShape] phys mesh create failed.")}this.convex=!(!this.checkConvex()&&!n.convex),this.createCollider(),this.update(n,null)},t.prototype.createPhysMesh=function(e){return this.physMesh=new(he(this.el.scene).Phys3D.PhysMesh)(this.el.scene.physics.nativeSystem),this._initPhysMesh(e.geometry,this.physMesh)},t.prototype.createCollider=function(){this.destroyNativeComp(),this.physMesh&&(this.nativeComp=new(he(this.el.scene).Phys3D.MeshCollider)(this.el.scene.physics.nativeSystem,this.convex,0,this.physMesh)),this.afterCreateNativeComp()},t.prototype.onTick=function(t,r){this.nativeComp&&e.prototype.onTick.call(this,t,r)},t.prototype.checkConvex=function(){return!!(this._isShadow?this._root.el.getComponent("shape-interact"):this.el.getComponent("shape-interact"))},t.prototype.autoFit=function(e){e.convex||(e.convex=this.checkConvex(),e.convex&&Ee.warn("[MeshShape] Attribute:convex is set to false while `shape-interact` exists! MeshShape convex default to true."))},t.prototype.applyData=function(e){var t=!!e.convex;t!==this.convex&&(this.convex=t,this.createCollider())},t.prototype._initPhysMesh=function(e,t){var r=e._getRawVertexBuffer(),n=e._getRawIndiceBuffer();if(!r||!n)return!1;var o=e.vertexLayout.stride/4,i=e.vertexLayout.getConfigByUsage(1).offset/4,a=r.length/o;if(a>65535)return Ee.warn("[MeshShape] mesh vertices count exceeded limit 65535! Pleases use CubeShape+autoFit instead."),!1;for(var s=new Float32Array(3*a),u=0;u<a;u++)for(var c=0;c<3;c++)s[3*u+c]=r[c+u*o+i];var l=n.length/3;return t.SetVertices(s,a),t.SetTriangles(n,l,!0),!0},t}(qu),lc=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return oc(t,e),t.prototype.getShapeClass=function(){return sc},t.prototype.create=function(t,r,n){e.prototype.create.call(this,t,r,n)},t.prototype.update=function(t,r){e.prototype.update.call(this,t,r)},t.prototype.createShadowShape=function(e,t){return e.addComponent(sc,t)},t}(Yu),fc=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},e(t,r)};return function(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),pc=function(){return pc=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},pc.apply(this,arguments)},hc=function(e,t,r,n){var o,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,r,a):o(t,r))||a);return i>3&&a&&Object.defineProperty(t,r,a),a},dc=bu("nativeComp"),_c=pc(pc({},Gu),{radius:{type:"number"}}),yc=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.schema=_c,t._type=ku.Sphere,t}return fc(t,e),t.prototype.getImplClass=function(e){switch(e){case zu.Basic:return mc;case zu.GLTFAbstract:return gc;default:return null}},t.EVENTS=["touch-shape","untouch-shape","drag-shape"],t}(Xu);const vc=yc;var mc=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return fc(t,e),Object.defineProperty(t.prototype,"center",{get:function(){},set:function(e){},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"radius",{get:function(){},set:function(e){},enumerable:!1,configurable:!0}),t.prototype.create=function(t,r,n){e.prototype.create.call(this,t,r,n),this.nativeComp=new(he(this.el.scene).Phys3D.SphereCollider)(this.el.scene.physics.nativeSystem,Tt.ZERO.toPhysics(),0),this.afterCreateNativeComp(),this.update(n,null)},t.prototype.autoFit=function(e){var t=this.el.getComponent("mesh");t&&(e.radius=t.geometry.boundBall.radius,e.center=t.geometry.boundBall.center.toArray())},t.prototype.applyData=function(e){var t;this.nativeComp.radius=null!==(t=e.radius)&&void 0!==t?t:1},hc([dc(Tt)],t.prototype,"center",null),hc([dc()],t.prototype,"radius",null),t}(qu),gc=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return fc(t,e),t.prototype.getShapeClass=function(){return yc},t.prototype.create=function(t,r,n){e.prototype.create.call(this,t,r,n)},t.prototype.update=function(t,r){e.prototype.update.call(this,t,r)},t.prototype.createShadowShape=function(e,t){return e.addComponent(yc,t)},t}(Yu),bc=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},e(t,r)};return function(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),wc=function(){return wc=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},wc.apply(this,arguments)},xc=function(e,t,r,n){var o,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,r,a):o(t,r))||a);return i>3&&a&&Object.defineProperty(t,r,a),a},Ec=bu("nativeComp"),Sc=wc(wc({},Gu),{size:{type:"number-array"}}),Tc=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.schema=Sc,t._type=ku.Cube,t}return bc(t,e),t.prototype.getImplClass=function(e){switch(e){case zu.Basic:return Ac;case zu.GLTFAbstract:return Cc;default:return null}},t.EVENTS=["touch-shape","untouch-shape","drag-shape"],t}(Xu);const Oc=Tc;var Ac=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return bc(t,e),Object.defineProperty(t.prototype,"center",{get:function(){},set:function(e){},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){},set:function(e){},enumerable:!1,configurable:!0}),t.prototype.create=function(t,r,n){e.prototype.create.call(this,t,r,n),this.nativeComp=new(he(this.el.scene).Phys3D.BoxCollider)(this.el.scene.physics.nativeSystem,Tt.ZERO.toPhysics(),Tt.ZERO.toPhysics()),this.afterCreateNativeComp(),this.update(n,null)},t.prototype.autoFit=function(e){var t=this.el.getComponent("mesh");if(t){var r=t.geometry.boundBox;e.size=r.size.toArray(),e.center=r.center.toArray()}},t.prototype.applyData=function(e){var t;this.nativeComp.size=Tt.createFromArray(null!==(t=e.size)&&void 0!==t?t:[1,1,1]).toPhysics()},xc([Ec(Tt)],t.prototype,"center",null),xc([Ec(Tt)],t.prototype,"size",null),t}(qu),Cc=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return bc(t,e),t.prototype.getShapeClass=function(){return Tc},t.prototype.create=function(t,r,n){e.prototype.create.call(this,t,r,n)},t.prototype.update=function(t,r){e.prototype.update.call(this,t,r)},t.prototype.createShadowShape=function(e,t){return e.addComponent(Tc,t)},t}(Yu),Mc=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},e(t,r)};return function(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Pc={assetId:{type:"string"},width:{type:"number"},height:{type:"number"},isHDR:{type:"boolean"}};const Rc=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.schema=Pc,t.isAssetRenderTexture=!0,t}return Mc(t,e),t.prototype.onAdd=function(e,t){t.assetId?(this._rt=new Do(this.scene,t),this.scene.assets.addAsset("render-texture",t.assetId,this._rt)):Ee.error("You must give data 'assetId' for asset-render-texture component !")},t.prototype.onRemove=function(e,t){t.assetId&&(this.scene.assets.releaseAsset("render-texture",t.assetId),this._rt=void 0)},t}(oo);const Dc=function(){function e(e,t){this.subLines=[],this.geometry=null,this.bakedVertices=null,this.segments=[],this._loop=!1,this._version=0,this._lineCount=0,this._transformMatrices=[],this.verticesCount=0,this._transformCount=0,this._currentLine=0,this.scene=e,this._lineCount=t,this._transformView=new Float32Array(16*t);for(var r=0;r<t;r++)this._transformMatrices.push(new Sr(this._transformView,16*r)),this._transformMatrices[r].set(Sr.IDENTITY)}return e.prototype.checkFinalWithWarning=function(){return!this.bakedVertices||(Ee.warn("[Gizmo] cannot set lines properties after baking."),!1)},Object.defineProperty(e.prototype,"loop",{get:function(){return this._loop},set:function(e){this.checkFinalWithWarning&&(this._loop=e)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"version",{get:function(){return this._version},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"transformCount",{get:function(){return this._transformCount},enumerable:!1,configurable:!0}),e.prototype.baked=function(){return!!this.bakedVertices},e.prototype.tryIncCurrentLine=function(){return this._currentLine+1>this._lineCount?(Ee.warn("[Gizmo] line count exceeded."),!1):(this._currentLine+=1,!0)},e.prototype.addPoints=function(e){this.tryIncCurrentLine()&&this.subLines.push(e)},e.prototype.addSubLine=function(e){this.tryIncCurrentLine()&&this.subLines.push(e)},e.prototype.breakLine=function(){this.subLines.push(null)},e.prototype.bake=function(){this.bakedVertices},e.prototype.getBakedVertices=function(){return this.bakedVertices||this.bake(),this.bakedVertices},e.prototype.getGeometry=function(){if(this.geometry)return this.geometry;var e={attributes:[{name:"a_position",format:ue.EVertexFormat.FLOAT3,offset:0,usage:ue.EVertexLayoutUsage.POSITION},{name:"a_gizmoTransformIndex",format:ue.EVertexFormat.SHORT2,offset:12,usage:ue.EVertexLayoutUsage.CUSTOM}],stride:16},t=new(he(this.scene).VertexLayout)(e),r=this.calcVerticesCount(),n=new ArrayBuffer(16*r),o=new qi(n);this.segments=[0];for(var i=0,a=0,s=0;s<this.subLines.length;s++){var u=this.subLines[s],c=void 0;if(null!==u){c=u.buffer?u:new Float32Array(u.getBakedVertices());for(var l=new qi(c.buffer,c.byteOffset),f=0;f<c.length/3;f++)o.write(qi.Type.Float,l.read(qi.Type.Float)),o.write(qi.Type.Float,l.read(qi.Type.Float)),o.write(qi.Type.Float,l.read(qi.Type.Float)),o.write(qi.Type.UInt16,a),o.write(qi.Type.UInt16,0);a+=1,i+=c.length/3}else this.segments.push(16*i),i+=c.length/3}this._transformCount=a;var p=this._loop?r+1:r,h=new Uint16Array(p);for(s=0;s<r;s++)h[s]=s;for(this._loop&&(h[r]=0),this.segments.push(16*p),this.geometry=new Vt(this.scene,t,new Float32Array(n),h,ue.EIndexType.UINT16),s=0;s<this.segments.length-1;s++)this.geometry.addSubMesh((this.segments[s+1]-this.segments[s])/16,this.segments[s]);return this.geometry},e.prototype.calcVerticesCount=function(){if(this.verticesCount>0)return this.verticesCount;for(var e=0,t=0;t<this.subLines.length;t++){var r=this.subLines[t];null===r||(r.buffer?e+=r.length/3:e+=r.getBakedVertices().byteLength/12)}return this.verticesCount=e,e},e.prototype.getTransformUniformBuffer=function(){return this._transformView},e.prototype.getTransformMatrixAt=function(e){return this._transformMatrices[e]},e}();var Nc=null;function Ic(){if(!Nc){for(var e=[],t=0,r=0;r<20;r++)e.push(1*Math.cos(t),1*Math.sin(t),0),t+=Math.PI/19;(Nc=new Float32Array(60)).set(e)}return Nc}var Lc=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},e(t,r)};return function(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Fc=Object.assign({transform:{}},fo),kc=Object.assign({"node-id":["transform","nodeId"],visible:["transform","visible"],layer:["transform","layer"],position:["transform","position"],rotation:["transform","rotation"],scale:["transform","scale"]},po);const Uc=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.defaultComponents=Fc,t.dataMapping=kc,t.isXRNode=!0,t}return Lc(t,e),t.IS=function(e){return!!e.isXRNode},t}(_o);var Bc=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},e(t,r)};return function(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();const jc=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.subElements=[],t.transforms=[],t}return Bc(t,e),t.prototype.onAdd=function(e,t){this.buildMesh(t),this.updateTransform(t),this.setUniforms()},t.prototype.onUpdate=function(e,t){this.updateTransform(e),this.setUniforms()},t.prototype.onTick=function(e,t){},t.prototype.onRemove=function(e,t){this.gizmo=null,this.scene.gizmo.removeGizmo(this)},t.prototype.onRelease=function(e){},t.prototype.buildMesh=function(e){var r;this.gizmo=(r=this.scene).assets.getAsset("gizmo","capsule")||function(e){var t=new Dc(e,2);return t.loop=!0,t.addPoints(Ic()),t.addPoints(Ic()),e.assets.addAsset("gizmo","capsule",t),t}(r);var n=this.gizmo.getGeometry(),o=new Ir(this.scene);o.initByEffect(this.scene.assets.getAsset("effect","gizmo"));for(var i={geometry:n,material:o,neverCull:!0},a=this.scene.gizmo.addGizmo(this),s=0;s<t.pieces;s++){var u=this.scene.createElement(Uc);this.subElements.push(u),a.addChild(u),u.addComponent(gs,i)}this.transformUniformBuffer||this.initTransforms(this.gizmo.transformCount)},t.prototype.updateTransform=function(e){var r,n,o=this.transforms[0],i=this.transforms[1],a=e.radius,s=.5*Math.max(e.height-2*e.radius,0);o.position.setValue(0,s,0),o.scale.setValue(a,a,a),i.rotation.setValue(0,0,0,1),i.position.setValue(0,-s,0),i.scale.setValue(a,a,a),i.rotation.setValue(0,0,1,0),Sr.composeTQS(o.position,o.rotation,o.scale,this.transformUniformMatrices[0]),Sr.composeTQS(i.position,i.rotation,i.scale,this.transformUniformMatrices[1]),e.direction===Hu["X-Axis"]?(r=Sr.createRotationZ(.5*Math.PI),n=[180,0,0]):e.direction===Hu["Y-Axis"]?(r=Sr.IDENTITY,n=[0,180,0]):e.direction===Hu["Z-Axis"]&&(r=Sr.createRotationX(.5*Math.PI),n=[0,0,180]);for(var u=0;u<this.transformUniformMatrices.length;u++)it.multiply(r._raw,r._offset,this.transformUniformBuffer,16*u,this.transformUniformBuffer,16*u);for(u=0;u<t.pieces;u++)this.subElements[u].getComponent(Di).setData({rotation:[n[0]/t.pieces*u,n[1]/t.pieces*u,n[2]/t.pieces*u],position:e.center})},t.prototype.setUniforms=function(){var e=this;this.subElements.forEach((function(t){var r=t.getComponent(gs);r&&r.material._setUniform("u_gizmoTransformMatrices",e.transformUniformBuffer)}))},t.prototype.initTransforms=function(e){this.transformUniformBuffer=new Float32Array(16*e),this.transformUniformMatrices=[];for(var t=0;t<e;t++)this.transforms.push({position:Tt.ZERO.clone(),rotation:wi.DEFAULT.clone(),scale:Tt.ZERO.clone()}),this.transformUniformMatrices.push(new Sr(this.transformUniformBuffer,16*t))},t.pieces=3,t}(oo);var Vc=null;function zc(){if(!Vc){for(var e=[-1,-1,1,-1,-1,-1,-1,1,-1,-1,1,1,-1,-1,1,1,-1,1,1,1,1,-1,1,1,1,1,1,1,1,-1,-1,1,-1],t=0;t<e.length;t++)e[t]*=.5;Vc=new Float32Array(e)}return Vc}var Gc=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},e(t,r)};return function(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();const Wc=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.subElement=null,t}return Gc(t,e),t.prototype.onAdd=function(e,t){this.buildMesh(t),this.updateTransform(t)},t.prototype.onUpdate=function(e,t){this.updateTransform(e)},t.prototype.onTick=function(e,t){},t.prototype.onRemove=function(e,t){this.gizmo=null,this.releaseSubElement()},t.prototype.onRelease=function(e){},t.prototype.releaseSubElement=function(){this.subElement=null,this.scene.gizmo.removeGizmo(this)},t.prototype.buildMesh=function(e){var t;this.gizmo=(t=this.scene).assets.getAsset("gizmo","cube")||function(e){var t=new Dc(e,2);t.loop=!1,t.addPoints(zc()),t.addPoints(zc());var r=t.getTransformMatrixAt(1);return Sr.fromQuaternion(wi.createFromNumber(1,0,0,0),r),e.assets.addAsset("gizmo","cube",t),t}(t);var r=this.gizmo.getGeometry(),n=new Ir(this.scene);n.initByEffect(this.scene.assets.getAsset("effect","gizmo")),n._setUniform("u_gizmoTransformMatrices",this.gizmo.getTransformUniformBuffer());var o={geometry:r,material:n,neverCull:!0};this.releaseSubElement();var i=this.scene.gizmo.addGizmo(this);this.subElement=this.scene.createElement(Uc),i.addChild(this.subElement),this.subElement.addComponent(gs,o)},t.prototype.updateTransform=function(e){if(this.subElement){var t=this.subElement.getComponent(Di);t.scale.setArray(e.size),t.position.setArray(e.center)}},t}(oo);var Xc=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},e(t,r)};return function(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Hc=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._subElements=[],t}return Xc(t,e),t.prototype.onAdd=function(e,t){},t.prototype.onUpdate=function(e,t){},t.prototype.onTick=function(e,t){for(var r=this.findAllShapes(),n=function(e){var t=r[e];if(t.version>0){var n=o._subElements.find((function(e){return e.shape===t}));if(n){var i=n.version;t.version>i&&(o.buildGizmo(n),n.version=t.version)}else{var a={shape:t,gizmoCtor:null,shadowGizmos:[],type:zu.None,version:-1};o.buildGizmo(a),o._subElements.push(a)}}},o=this,i=0;i<r.length;i++)n(i);for(i=this._subElements.length-1;i>=0;i--){var a=this._subElements[i];-1===r.lastIndexOf(a.shape)&&(this.releaseShadowGizmos(a.shadowGizmos),this._subElements.splice(i,1))}},t.prototype.onRemove=function(e,t){},t.prototype.onRelease=function(e){for(var t=0;t<this._subElements.length;t++){var r=this._subElements[t];r.gizmoCtor&&this.el.removeComponent(r.gizmoCtor),this.releaseShadowGizmos(r.shadowGizmos)}},t.prototype.findAllShapes=function(){var e=[],t=this.el.getComponent(tc),r=this.el.getComponent(Oc);return t&&e.push(t),r&&e.push(r),e},t.prototype.getGizmoDesc=function(e){if(e.type===ku.Capsule){var t=(n=e.getBasicImpl()).center,r=n.el.getComponent(Di).worldScale;return[{radius:n.radius,height:n.height,direction:n.direction,center:t.scaleXYZ(1/r.x,1/r.y,1/r.z).toArray()},jc]}var n;if(e.type===ku.Cube)return t=(n=e.getBasicImpl()).center,n._isShadow&&(t=n._quatInGLTF.invert().transformVector3(t.sub(n._positionInGLTF))),r=n.el.getComponent(Di).worldScale,[{size:n.size.toArray(),center:t.scaleXYZ(1/r.x,1/r.y,1/r.z).toArray()},Wc];throw"[ShapeGizmos] unsupported shape."},t.prototype.buildGizmo=function(e){var r=e.shape;if(r.implType===zu.Basic){var n=this.getGizmoDesc(r),o=n[0],i=n[1];if(e.type!==zu.Basic)this.releaseShadowGizmos(e.shadowGizmos),e.shadowGizmos=[],e.gizmoCtor=i,this.el.addComponent(i,o),e.type=r.implType;else{var a=this.el.getComponent(i);if(!a)throw"[ShapeGizmos] no gizmo found at sub element.";a.setData(o)}}else if(r.implType===zu.GLTFAbstract){e.gizmoCtor&&(this.el.removeComponent(e.gizmoCtor),e.gizmoCtor=null),e.type=r.implType,this.releaseShadowGizmos(e.shadowGizmos),e.shadowGizmos=[];for(var s=r.getShadowShapes(),u=0;u<s.length;u++){var c=s[u];e.shadowGizmos.push(c.el.addComponent(t))}}},t.prototype.releaseShadowGizmos=function(e){for(var r=0;r<e.length;r++){var n=e[r];n.el&&n.el.removeComponent(t)}},t}(oo);const qc=Hc,Yc=function(){function e(e,t){if(this._scene=e,!t.type)throw new Error("PostProcess must has options 'type' !");this._type=t.type,this._isHDR=t.isHDR||!1,this._data=t.data||{}}return Object.defineProperty(e.prototype,"type",{get:function(){return this._type},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isHDR",{get:function(){return this._isHDR},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"data",{get:function(){return this._data},enumerable:!1,configurable:!0}),e}();var Zc=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},e(t,r)};return function(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Kc={assetId:{type:"string"},type:{type:"string"},isHDR:{type:"boolean"},data:{type:"dict"}},Qc=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.schema=Kc,t}return Zc(t,e),Object.defineProperty(t.prototype,"assetData",{get:function(){return this._asset.data},enumerable:!1,configurable:!0}),t.prototype.onAdd=function(e,t){var r;if(t.assetId){var n=null===(r=$o(t.type))||void 0===r?void 0:r.schema;n?(this._asset=new Yc(this.scene,this._parseOptionsData(t,n)),this.scene.assets.addAsset("post-process",t.assetId,this._asset)):Ee.error("Type "+t.type+" is invalid in post processing system !")}else Ee.error("You must give data 'assetId' for asset-post-process component !")},t.prototype.onUpdate=function(e,t){var r;if(e.data!==t.data){var n=null===(r=$o(e.type))||void 0===r?void 0:r.schema;Object.assign(this._asset.data,this._parseOptionsData(e,n).data)}},t.prototype.onRemove=function(e,t){t.assetId&&(this.scene.assets.releaseAsset("post-process",t.assetId),this._asset=void 0)},t.prototype._parseOptionsData=function(e,t){var r,n={};for(var o in t){var i=t[o];n[o]=Dr(i.type,null===(r=e.data)||void 0===r?void 0:r[o],i.defaultValue,this.scene)}return{type:e.type,data:n,isHDR:e.isHDR}},t}(oo);const $c=Qc;var Jc=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},e(t,r)};return function(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),el=function(e,t,r,n){var o,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,r,a):o(t,r))||a);return i>3&&a&&Object.defineProperty(t,r,a),a},tl=bu("_nativeComp"),rl={mass:{type:"number"},useGravity:{type:"boolean"},constraintsMask:{type:"number"},disabled:{type:"boolean"},kinematic:{type:"boolean"}},nl=function(e){function t(){var t=e.call(this)||this;return t.schema=rl,t.priority=401,t.disabledInData=!1,t}return Jc(t,e),Object.defineProperty(t.prototype,"mass",{get:function(){},set:function(e){},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"linearDamping",{get:function(){},set:function(e){},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"angularDamping",{get:function(){},set:function(e){},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"useGravity",{get:function(){},set:function(e){},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isKinematic",{get:function(){},set:function(e){},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"detectCollisions",{get:function(){},set:function(e){},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"collisionDetectionMode",{get:function(){},set:function(e){},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"constraints",{get:function(){},set:function(e){},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"rotationConstraints",{get:function(){return[!!(this.constraints&Ou.FreezeRotationX),!!(this.constraints&Ou.FreezeRotationY),!!(this.constraints&Ou.FreezeRotationZ)]},set:function(e){var t=this.constraints;t=(t=(t=t&~Ou.FreezeRotationX|(e[0]?Ou.FreezeRotationX:0))&~Ou.FreezeRotationY|(e[1]?Ou.FreezeRotationY:0))&~Ou.FreezeRotationZ|(e[2]?Ou.FreezeRotationZ:0),this.constraints=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"positionConstraints",{get:function(){return[!!(this.constraints&Ou.FreezePositionX),!!(this.constraints&Ou.FreezePositionY),!!(this.constraints&Ou.FreezePositionZ)]},set:function(e){var t=this.constraints;t=(t=(t=t&~Ou.FreezePositionX|(e[0]?Ou.FreezePositionX:0))&~Ou.FreezePositionY|(e[1]?Ou.FreezePositionY:0))&~Ou.FreezePositionZ|(e[2]?Ou.FreezePositionZ:0),this.constraints=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"position",{get:function(){},set:function(e){},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"rotation",{get:function(){},set:function(e){},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"angularVelocity",{get:function(){},set:function(e){},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"centerOfMass",{get:function(){},set:function(e){},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"freezeRotation",{get:function(){},set:function(e){},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"inertiaTensor",{get:function(){},set:function(e){},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"maxAngularVelocity",{get:function(){},set:function(e){},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"maxDepenetrationVelocity",{get:function(){},set:function(e){},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"sleepThreshold",{get:function(){},set:function(e){},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"solverIterations",{get:function(){},set:function(e){},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"solverVelocityIterations",{get:function(){},set:function(e){},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"velocity",{get:function(){},set:function(e){},enumerable:!1,configurable:!0}),t.prototype.applyData=function(e){var t,r,n,o;this.nativeComp&&(this.disabledInData=!!e.disabled,this.mass=null!==(t=e.mass)&&void 0!==t?t:1,this.useGravity=null===(r=e.useGravity)||void 0===r||r,this.constraints=null!==(n=e.constraintsMask)&&void 0!==n?n:0,this.isKinematic=null!==(o=e.kinematic)&&void 0!==o&&o)},t.prototype.onTick=function(e,t){var r=this.el.getComponent(Di);r.visible&&!this.disabledInData?(this.enable(),r.node.setLocalMatrixDirty(),r._setDirty()):this.disable()},t.prototype.onAdd=function(e,t){this._nativeComp||(this._nativeComp=new(he(this.scene).Phys3D.DynamicRigidbody)(this.scene.physics.nativeSystem),this._nativeComp.userData=this,this.scene.physics.bindRigidbodyWithEntity(this._nativeComp,this.el.getComponent(Di).node)),this.applyData(t),this.enable()},t.prototype.onUpdate=function(e,t){this.applyData(e)},t.prototype.onRemove=function(e,t){this.disable()},t.prototype.onRelease=function(e){this._nativeComp&&(this.scene.physics.unbindRigidbody(this._nativeComp),this.nativeComp.Remove())},t.prototype._onAwake=function(){},t.prototype.enable=function(){this.disabledInData||this._nativeComp&&(this._nativeComp.enabled||(this._nativeComp.enabled=!0,this.isKinematic||this._nativeComp.WakeUp()))},t.prototype.disable=function(){this._nativeComp&&(this._nativeComp.enabled=!1)},Object.defineProperty(t.prototype,"nativeComp",{get:function(){return this._nativeComp},enumerable:!1,configurable:!0}),t.prototype.getWorldCenterOfMass=function(){var e;return Tt.fromPhysics(null===(e=this._nativeComp)||void 0===e?void 0:e.GetWorldCenterOfMass())},t.prototype.addForce=function(e,t){var r;null===(r=this._nativeComp)||void 0===r||r.AddForce(e.toPhysics(),t)},t.prototype.addTorque=function(e,t){var r;null===(r=this._nativeComp)||void 0===r||r.AddTorque(e.toPhysics(),t)},t.prototype.isSleeping=function(){var e;return null===(e=this._nativeComp)||void 0===e?void 0:e.IsSleeping()},t.prototype.sleep=function(){var e;null===(e=this._nativeComp)||void 0===e||e.Sleep()},t.prototype.wakeUp=function(){var e;null===(e=this._nativeComp)||void 0===e||e.WakeUp()},t.prototype.AddExplosionForce=function(e,t,r,n,o){var i;null===(i=this._nativeComp)||void 0===i||i.AddExplosionForce(e,t.toPhysics(),r,n,o)},t.prototype.AddForceAtPosition=function(e,t,r){var n;null===(n=this._nativeComp)||void 0===n||n.AddForceAtPosition(e.toPhysics(),t.toPhysics(),r)},t.prototype.addRelativeForce=function(e,t){var r;null===(r=this._nativeComp)||void 0===r||r.AddRelativeForce(e.toPhysics(),t)},t.prototype.addRelativeTorque=function(e,t){var r;null===(r=this._nativeComp)||void 0===r||r.AddRelativeTorque(e.toPhysics(),t)},t.prototype.closestPointOnBounds=function(e){var t;return Tt.fromPhysics(null===(t=this._nativeComp)||void 0===t?void 0:t.ClosestPointOnBounds(e.toPhysics()))},t.prototype.getPointVelocity=function(e){var t;return Tt.fromPhysics(null===(t=this._nativeComp)||void 0===t?void 0:t.GetPointVelocity(e.toPhysics()))},t.prototype.getRelativePointVelocity=function(e){var t;return Tt.fromPhysics(null===(t=this._nativeComp)||void 0===t?void 0:t.GetRelativePointVelocity(e.toPhysics()))},t.prototype.movePosition=function(e){var t;null===(t=this._nativeComp)||void 0===t||t.MovePosition(e.toPhysics())},t.prototype.moveRotation=function(e){var t;null===(t=this._nativeComp)||void 0===t||t.MoveRotation(e.toPhysics())},t.prototype.resetCenterOfMass=function(){var e;null===(e=this._nativeComp)||void 0===e||e.ResetCenterOfMass()},t.prototype.resetInertiaTensor=function(){var e;null===(e=this._nativeComp)||void 0===e||e.ResetInertiaTensor()},t.prototype.setDensity=function(e){var t;null===(t=this._nativeComp)||void 0===t||t.SetDensity(e)},el([tl()],t.prototype,"mass",null),el([tl()],t.prototype,"linearDamping",null),el([tl()],t.prototype,"angularDamping",null),el([tl()],t.prototype,"useGravity",null),el([tl()],t.prototype,"isKinematic",null),el([tl()],t.prototype,"detectCollisions",null),el([tl()],t.prototype,"collisionDetectionMode",null),el([tl()],t.prototype,"constraints",null),el([tl(Tt)],t.prototype,"position",null),el([tl(wi)],t.prototype,"rotation",null),el([tl(Tt)],t.prototype,"angularVelocity",null),el([tl(Tt)],t.prototype,"centerOfMass",null),el([tl()],t.prototype,"freezeRotation",null),el([tl()],t.prototype,"inertiaTensor",null),el([tl()],t.prototype,"maxAngularVelocity",null),el([tl()],t.prototype,"maxDepenetrationVelocity",null),el([tl()],t.prototype,"sleepThreshold",null),el([tl()],t.prototype,"solverIterations",null),el([tl()],t.prototype,"solverVelocityIterations",null),el([tl(Tt)],t.prototype,"velocity",null),t}(oo);const ol=nl;var il=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},e(t,r)};return function(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),al={gravity:{type:"number-array"},disabled:{type:"boolean"}};const sl=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.schema=al,t.valid=!1,t}return il(t,e),t.prototype.onAdd=function(e,t){this.validateSelf()&&(this.valid=!0,this.scene.physGlobalCount+=1,this.scene.physics.enableSimulation=!0,this.applyData(t))},t.prototype.onUpdate=function(e,t){this.valid&&this.applyData(e)},t.prototype.onRemove=function(e,t){this.valid&&(this.scene.physics.enableSimulation=!1)},t.prototype.onRelease=function(e){this.valid&&(this.scene.physGlobalCount-=1)},t.prototype.validateSelf=function(){return!(!this.scene||(this.el.parent!==this.scene?(Ee.error("<xr-physics> can only be placed right under <xr-scene>!"),1):this.scene.physGlobalCount>0?(Ee.error("There can only be one <xr-physics> in this scene!"),1):(this.scene.physGlobalCount=0,0)))},t.prototype.applyData=function(e){var t=this.scene.physics;void 0!==e.disabled&&(t.enableSimulation=!e.disabled),void 0!==e.gravity&&(t.gravity=Tt.createFromArray(e.gravity))},t}(oo);var ul=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},e(t,r)};return function(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),cl={layer:{type:"number"},interact:{type:"boolean"},exclude:{type:"number-array"}},ll=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.schema=cl,t.valid=!1,t}return ul(t,e),t.prototype.onAdd=function(e,t){this.validateSelf()&&(this.valid=!0,this.applyData(t))},t.prototype.onUpdate=function(e,t){this.valid&&this.applyData(e)},t.prototype.onRemove=function(e,t){},t.prototype.onRelease=function(e){},t.prototype.validateSelf=function(){return!(!this.scene||"physics"!==this.el.parent.__proto__.constructor.TYPE&&(Ee.error("<xr-interact-between> can only be placed right under <xr-physics>!"),1))},t.prototype.applyData=function(e){var t,r;if("number"==typeof e.layer)for(var n=this.scene.physics,o=null===(t=e.interact)||void 0===t||t,i=null!==(r=e.exclude)&&void 0!==r?r:[],a=0;a<32;a++)n.ignoreLayerCollision(e.layer,a,i.includes(a)?o:!o);else Ee.error("[xr-interact-between] Attribute:layer must be specified as a number!")},t}(oo);const fl=ll;function pl(e,t,r){var n,o;o=r.hit?r.hit.nativeRaycastHit:new e.RaycastHit;var i=r.layerMask||4294967295,a=null!==(n=r.distance)&&void 0!==n?n:Number.MAX_VALUE;return t.Raycast(r.origin.toPhysics(),r.unitDir.toPhysics(),a,o,i)}so("transform",Di),so("asset-material",Os),so("mesh",gs),so("text",Ws),so("particle",gu),so("camera",$a),so("light",Fi),so("asset-render-texture",Rc),so("assets",wo),so("asset-load",Wa),so("gltf",Es),so("env",_s),so("animator",Ia),so("camera-orbit-control",fs),so("ar-tracker",Va),so("asset-post-process",$c),so("physics-global-not-exposed",sl),so("interact-between-not-exposed",fl),so("sphere-shape",vc),so("mesh-shape",uc),so("capsule-shape",tc),so("cube-shape",Oc),so("rigidbody",ol),so("shape-interact",Fu),so("shape-gizmo",qc),so("capsule-gizmo",jc),so("cube-gizmo",Wc);var hl=function(e,t,r,n){var o,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,r,a):o(t,r))||a);return i>3&&a&&Object.defineProperty(t,r,a),a},dl=bu("_nativeComp");const _l=function(){function e(e,t){this.scene=e,this._nativeComp=t||new(he(e).Phys3D.RaycastHit)}return Object.defineProperty(e.prototype,"nativeRaycastHit",{get:function(){return this._nativeComp},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"shape",{get:function(){return ju.get(this._nativeComp.collider)||null},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"distance",{get:function(){},set:function(e){},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"normal",{get:function(){},set:function(e){},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"point",{get:function(){},set:function(e){},enumerable:!1,configurable:!0}),hl([dl()],e.prototype,"distance",null),hl([dl(Tt)],e.prototype,"normal",null),hl([dl(Tt)],e.prototype,"point",null),e}();var yl=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},e(t,r)};return function(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),vl=bu("nativeSystem"),ml=function(e){function t(){var t=e.call(this)||this;return t.enableSimulation=!1,t.shapes=new Set,t.rigidbodies=new Set,t.maxPhysicsDeltaTime=.1,t.fixedDeltaTime=.02,t._timeRemainder=0,t.shapeHolder=[],t._collisionMatrix=new Uint32Array(32).fill(-1),t._collisionMatrixDirty=!1,t._touching=null,t._lastX=0,t._lastY=0,t._lastCamera=null,t}return yl(t,e),t.prototype.addShape=function(e){this.shapes.add(e)},t.prototype.removeShape=function(e){this.shapes.delete(e)},t.prototype.syncTransformFromShapes=function(){this.shapes.forEach((function(e){if(e.implType===zu.Basic){var t=e.el.getComponent(Di);if(!e.getBasicImpl().nativeComp)return;var r=e.getBasicImpl().nativeComp.scale,n=t.worldScale.toPhysics();(Math.abs(r.x-n.x)/r.x>1e-4||Math.abs(r.y-n.y)/r.y>1e-4||Math.abs(r.z-n.z)/r.z>1e-4)&&(e.getBasicImpl().nativeComp.scale=n,e.getBasicImpl().rigidbodyComp&&e.getBasicImpl().rigidbodyComp.resetCenterOfMass())}}))},t.prototype.syncTransformToRigidbodies=function(){},t.prototype.onAdd=function(){var e,t;Tt.Phys3D=he(this.scene).Phys3D,wi.Phys3D=he(this.scene).Phys3D,this.nativeSystem=new(he(this.scene).Phys3D.PhysSystem),this.nativeSystem.createScene(),this.scene.event.add("touchstart",this._handleTouchStart.bind(this)),this.scene.event.add("touchmove",this._handleTouchMove.bind(this)),this.scene.event.add("touchend",this._handleTouchEnd.bind(this)),null===(t=(e=he(this.scene)).setGlobalPhysicSystem)||void 0===t||t.call(e,this.nativeSystem)},t.prototype.onTick=function(e,t){if(e*=.001,this.updateCollisionMatrix(),this.syncTransformFromShapes(),this.enableSimulation){this.shapeHolder=Array.from(ju.values()),e>this.maxPhysicsDeltaTime&&(e=this.maxPhysicsDeltaTime),e+=this._timeRemainder;var r=Math.floor(e/this.fixedDeltaTime);this._timeRemainder=e-this.fixedDeltaTime*r;for(var n=0;n<r;n++)this.nativeSystem.Simulate(this.fixedDeltaTime)}else this.nativeSystem.Simulate(0)},t.prototype.bindRigidbodyWithEntity=function(e,t){var r,n;e.AttachToEntity(t.poll,t.id),null===(n=(r=he(this.scene)).bindRigidBodyToNode)||void 0===n||n.call(r,e,t.id)},t.prototype.unbindRigidbody=function(e){var t,r;e.Detach(),null===(r=(t=he(this.scene)).unbindRigidBody)||void 0===r||r.call(t,e)},t.prototype.raycast=function(e){return pl(he(this.scene).Phys3D,this.nativeSystem,e)},Object.defineProperty(t.prototype,"gravity",{get:function(){},set:function(e){},enumerable:!1,configurable:!0}),t.prototype.setCollisionMatrix=function(e){this._collisionMatrix=function(e){for(var t=function(e){if(void 0===e&&(e=""),256!==e.length)return Ee.log("tranStringToMatrix: invalid string!"),[];for(var t=[],r=0;r<e.length;r+=8){var n=e.slice(r,r+8);t.push(wu(n))}return t}(e),r=new ArrayBuffer(128),n=new Uint32Array(r),o=0;o<t.length;o++)n[o]=parseInt(t[o].join(""),2);return n}(e),this._collisionMatrixDirty=!0},t.prototype.updateCollisionMatrix=function(){this._collisionMatrixDirty&&(this.nativeSystem&&this.nativeSystem.SetCollisionMask&&this.nativeSystem.SetCollisionMask(this._collisionMatrix.buffer),this._collisionMatrixDirty=!1)},t.prototype.ignoreLayerCollision=function(e,t,r){if(void 0===r&&(r=!0),e>t){var n=e;e=t,t=n}t=31-t,this._collisionMatrix[e]&1<<t^(r?0:1)&&(this._collisionMatrix[e]=this._collisionMatrix[e]&~(1<<t)|(r?0:1<<t),this._collisionMatrixDirty=!0)},t.prototype.touchToRay=function(e,t,r){var n;n=Tt.createFromNumber(e/this.scene.frameWidth*2-1,2*(1-t/this.scene.frameHeight)-1,0);var o=Tt.createFromNumber(0,0,0);r.convertClipPositionToWorld(n,o);var i=r.el.getComponent(Di).worldPosition,a=o.sub(i).normalize();return{dir:[a.x,a.y,a.z],origin:[i.x,i.y,i.z]}},t.prototype._handleTouchStart=function(e){var t=e.touches;if(1===t.length)for(var r=this.scene.render.cameras,n=Tt.createFromNumber(0,0,1),o=Tt.createFromNumber(0,0,0),i=new _l(this.scene),a={origin:o,unitDir:n,hit:i},s=0;s<t.length;s++)for(var u=t[s],c=this.extractFromTouch(u),l=c[0],f=c[1],p=c[2],h=0,d=r;h<d.length;h++){var _=d[h],y=this.touchToRay(l,f,_),v=y.dir,m=y.origin;if(n.x=v[0],n.y=v[1],n.z=v[2],o.x=m[0],o.y=m[1],o.z=m[2],this.raycast(a)){var g=i.shape.getGLTFRootShape(),b=null!=g?g:i.shape,w=b.el,x={camera:_,target:w,shape:b,x:l/this.scene.frameWidth*this.scene.width,y:f/this.scene.frameHeight*this.scene.height,dir:v,origin:m,force:p};this._touching=b,this._lastX=x.x,this._lastY=x.y,this._lastCamera=_,w.event.trigger("touch-shape",x,!0,!0,!0)}}},t.prototype._handleTouchMove=function(e){if(this._touching&&1===e.changedTouches.length){if(!this._touching.el)return void this._handleTouchEnd(e);var t=e.changedTouches[0],r=this.extractFromTouch(t),n=r[0],o=r[1],i=r[2],a=this.touchToRay(n,o,this._lastCamera),s=a.dir,u=a.origin,c={camera:this._lastCamera,target:this._touching.el,shape:this._touching,x:n/this.scene.frameWidth*this.scene.width,y:o/this.scene.frameHeight*this.scene.height,deltaX:n/this.scene.frameWidth*this.scene.width-this._lastX,deltaY:o/this.scene.frameHeight*this.scene.height-this._lastY,dir:s,origin:u,force:i};this._lastX+=c.deltaX,this._lastY+=c.deltaY,this._touching.el.event.trigger("drag-shape",c,!0,!0,!0)}},t.prototype._handleTouchEnd=function(e){var t;if(this._touching&&1===e.changedTouches.length){var r=e.changedTouches[0],n=this.extractFromTouch(r),o=n[0],i=n[1],a=n[2],s=this.touchToRay(o,i,this._lastCamera),u=s.dir,c=s.origin,l={camera:this._lastCamera,target:this._touching.el,shape:this._touching,x:o/this.scene.frameWidth*this.scene.width,y:i/this.scene.frameHeight*this.scene.height,dir:u,origin:c,force:a};null===(t=this._touching.el)||void 0===t||t.event.trigger("untouch-shape",l,!0,!0,!0),this._touching=null,this._lastCamera=null}},t.prototype.extractFromTouch=function(e){var t,r,n,o,i;return[null!==(r=null!==(t=e.pageX)&&void 0!==t?t:e.x)&&void 0!==r?r:0,null!==(o=null!==(n=e.pageY)&&void 0!==n?n:e.y)&&void 0!==o?o:0,null!==(i=e.force)&&void 0!==i?i:0]},function(e,t,r,n){var o,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,r,a):o(t,r))||a);i>3&&a&&Object.defineProperty(t,r,a)}([vl(Tt)],t.prototype,"gravity",null),t}(oo);const gl=ml;var bl=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},e(t,r)};return function(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),wl={modes:{type:"array",defaultValue:["Plane"]},camera:{type:"string",defaultValue:"Back"},depthMask:{type:"boolean",defaultValue:!1},depthNear:{type:"number",defaultValue:.02},depthFar:{type:"number",defaultValue:10},depthDebug:{type:"boolean",defaultValue:!1},planeMode:{type:"number",defaultValue:3},pose3d:{type:"boolean",defaultValue:!1}},xl=new Sr,El=new Tt,Sl=new Tt,Tl=new Tt,Ol=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.schema=wl,t.priority=110,t._supported=!1,t._ready=!1,t._supportModes=[],t._camerasMeshes={},t._trackers={},t._arVersion=1,t._supportV2=!1,t._rawARData={timestamp:0,width:0,height:0,yBuffer:void 0,uvBuffer:void 0,intrinsics:void 0,viewMatrix:void 0},t._forceCameraViewMat={},t._trackerIds=[],t._poss={},t._posCount=0,t._pose3d=!1,t}return bl(t,e),Object.defineProperty(t.prototype,"supported",{get:function(){return this._supported},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"arModes",{get:function(){return this._supportModes.slice()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"arVersion",{get:function(){return this._arVersion},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ready",{get:function(){return this._ready},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"posCount",{get:function(){return this._posCount},enumerable:!1,configurable:!0}),t.prototype.onAdd=function(e,t){var r=this;if(this._supported){var n=t.modes;(null==n?void 0:n.length)||Ee.throw(new Error("ar-system must be given `modes`!"),se.AR),this._pose3d=t.pose3d;var o=fe.isVKSupport("v2")?2:1;if(this._supportV2=2===o,this._supportModes=n.slice(0,1),n.indexOf("Plane")>=0&&n.indexOf("Marker")>=0)if(this._supportV2)this._supportModes=["Plane","Marker"];else{var i=new Error("Current device does not support ar-system with modes 'Plane' and 'Marker' at same time!");Ee.error(i,se.AR),this.el.event.trigger("ar-error",i)}else n.length>1&&Ee.warn("ar-system only supports one mode now, use "+n[0],se.AR);for(var a=0,s=this._supportModes;a<s.length;a++){var u=s[a];"Marker"!==u&&"OSD"!==u&&"Plane"!==u&&"Face"!==u&&"Body"!==u&&"Hand"!==u&&"threeDof"!==u&&Ee.throw(new Error("ar-system does not support mode "+u+"!"),se.AR)}this._tryStart(n,o,t.camera,t.depthMask,t.planeMode,(function(e){if(e){r._supported=!1;var i=new Error("AR system start error("+n.toString()+","+o+","+t.camera+","+t.depthMask+"): from VisionKit, errorcode is "+e);Ee.error(i,se.AR),r.el.event.trigger("ar-error",i)}}))}else Ee.error(new Error("ar-system is only supported in wx-mini-program!"),se.AR)},t.prototype._tryStart=function(e,t,r,n,o,i){var a,s,u=this,c=e[0];this._session=fe.createVKSession({cameraPosition:"Front"===r?1:0,track:2===e.length?{plane:{mode:1===t?1:o},marker:!0,depth:n&&this._supportV2?{mode:1}:void 0}:"OSD"===c?{OSD:!0}:"Marker"===c?{marker:!0}:"Face"===c?{face:{mode:1}}:"Body"===c?{body:{mode:1}}:"Hand"===c?{hand:{mode:1}}:"threeDof"===c?{threeDof:!0}:{plane:{mode:1===t?1:o},depth:n&&this._supportV2?{mode:1}:void 0},version:"Plane"===c?"v"+t:"v1"}),null===(s=(a=this._session).setDepthOccRange)||void 0===s||s.call(a,.1,20),this._session.start((function(e){u._arVersion=t,e&&i(e)}))},t.prototype.onTick=function(e,t){var r,n,o,i;if(this._session)if(this._cameraTexes||0===this._session.state||2===this._session.state){if(this._cameraTexes){if(!this._updateCameraMeshes())return;if("Plane"===this._supportModes[0]){var a=this._trackers[1];if(!a)return;var s=null===(i=null===(o=this._session.hitTest(.5,.5))||void 0===o?void 0:o[0])||void 0===i?void 0:i.transform;s&&(this._hitTestRes=s.slice(),a._switch(!0),xl.setArray(s),this._setMatrix(a.el.getComponent(Di),xl))}}}else{var u=this.scene,c=this._session.getVKFrame(u.width,u.height);if(!c)return;var l=c.getCameraRawTextureData(),f=c.camera;if(this._cameraTexes={y:u.createTexture({width:l.width,height:l.height,source:[l.yAddress],pixelFormat:ue.ETextureFormat.R8}),uv:u.createTexture({width:l.width/2,height:l.height/2,source:[l.uvAddress],pixelFormat:ue.ETextureFormat.RGBA4})},t.depthMask&&!this._supportV2&&Ee.warn("Device dose not support depthMask !"),this._supportV2&&t.depthMask){null===(n=(r=this._session).setDepthOccRange)||void 0===n||n.call(r,t.depthNear,t.depthFar);var p=c.getDepthBuffer();p&&(this._cameraTexes.depth=u.createTexture({width:p.width,height:p.height,source:[new Float32Array(p.DepthAddress)],pixelFormat:ue.ETextureFormat.RGBA32F,magFilter:ue.EFilterMode.LINEAR,minFilter:ue.EFilterMode.LINEAR}))}this._syncTrackers(),this._rawARData.timestamp=c.timestamp,this._rawARData.width=l.width,this._rawARData.height=l.height,this._rawARData.yBuffer=l.yAddress,this._rawARData.uvBuffer=l.uvAddress,this._rawARData.viewMatrix=f.viewMatrix,this._rawARData.intrinsics=f.intrinsics,this._ready=!0,this.el.event.trigger("ar-ready")}},t.prototype.onUpdate=function(e,t){var r,n,o;!(null===(r=this._cameraTexes)||void 0===r?void 0:r.depth)||t.depthFar===e.depthFar&&t.depthNear===e.depthNear||null===(o=(n=this._session).setDepthOccRange)||void 0===o||o.call(n,e.depthNear,e.depthFar)},t.prototype.onRemove=function(e,t){this._session.stop()},t.prototype.onRelease=function(e){this._session.destroy()},t.prototype.placeHere=function(e,t){if(void 0===t&&(t=!0),!this._ready)return!1;if("Plane"!==this._supportModes[0])return Ee.warn("method placeHere only supports mode 'Plane', ignore..."),!1;var r="string"==typeof e?this.scene._getNodeById(e):e.getComponent(Di);return r?!!this._hitTestRes&&(xl.setArray(this._hitTestRes),this._setMatrix(r,xl),t&&(r.visible=!0),!0):(Ee.warn("Node "+e+" is not existed, ignore..."),!1)},t.prototype.resetPlane=function(){this._session.hitTest(.5,.5,!0)},t.prototype.getARRawData=function(){return this._rawARData},t.prototype.forceSetViewMatrix=function(e,t){t?(xl.set(t),this._changeViewMatrix(e,xl),this._forceCameraViewMat[e.id]=!0):delete this._forceCameraViewMat[e.id]},t.prototype._support=function(e){return this._supportModes.indexOf(e)>=0},t.prototype._useCameraMesh=function(e){if(this._camerasMeshes[e.id])return this._camerasMeshes[e.id].mesh;var t=this.scene,r=t.assets,n=t.rootShadow,o=this.scene.createElement(Uc),i=o.addComponent(gs,{geometry:r.getAsset("geometry","ar-camera-plane"+(this._currentData.depthMask?"-80x80":"")),material:this.scene.createMaterial(r.getAsset("effect","ar-camera-yuv"))});return n.addChild(o),o.getComponent(Di).visible=!1,this._camerasMeshes[e.id]={camera:e,mesh:i,inited:!1},i},t.prototype._removeCameraMesh=function(e){var t=this._camerasMeshes[e.id];t&&this.scene.rootShadow.removeChild(t.mesh.el),delete this._camerasMeshes[e.id],delete this._forceCameraViewMat[e.id]},t.prototype._setTrackCamera=function(e,t){var r,n;(!t&&e!==this._trackCamera||t&&e===this._trackCamera)&&(null===(r=this._trackCamera)||void 0===r||r.changeViewMatrix(!1),null===(n=this._trackCamera)||void 0===n||n.changeProjectMatrix(!1),this._trackCamera&&delete this._forceCameraViewMat[this._trackCamera.id],this._trackCamera=void 0),t||(this._trackCamera=e)},t.prototype._addTacker=function(e){var t="OSD"===e.mode?this._session.addOSDMarker(e.filePath):"Marker"===e.mode?this._session.addMarker(e.filePath):this._requestTrackerId();return"number"!=typeof t&&Ee.throw(new Error("Add tracker with src '"+e.filePath+"' failed, return "+t+" from VisionKit !"),se.AR),this._trackers[t]&&Ee.throw(new Error("Tracker with id "+t+" has already been existed!"),se.AR),t>=0&&(this._trackers[t]=e),t},t.prototype._requestTrackerId=function(){var e,t=this._trackerIds.length;return e=t?this._trackerIds[t-1]+1:1,this._trackerIds.push(e),e},t.prototype._removeTracker=function(e){if(this._trackers[e.trackId]){if("Plane"===e.mode||"Face"===e.mode){var t=this._trackerIds.indexOf(e.trackId);this._trackerIds.splice(t,1)}else"OSD"===e.mode?this._session.removeOSDMarker(e.trackId):this._session.removeMarker(e.trackId);delete this._trackers[e.trackId]}},t.prototype._syncTrackers=function(){var e=this,t=this._session,r=this._support("Body")||this._support("Face")||this._support("Hand"),n=r||this._support("Marker")||this._support("OSD");t.on("updateAnchors",(function(t){if(n&&e._trackCamera)return r?(e._pose3d&&e._session.update3DMode({open3d:!0}),void e._processPosTracker(t)):void t.forEach((function(t){var r=e._trackers[t.markerId];if(r){var n=t.size,o=t.origin,i=t.transform,a=r.el.getComponent(Di);if(a)if(r._switch(!0),"OSD"===r.mode){var s=e._convertScreenPointsToTRS(a,o,n);a.scale.setValue(s,s,s)}else"Marker"===r.mode&&(xl.setArray(i),e._setMatrix(a,xl))}}))})),t.on("removeAnchors",(function(t){n&&e._trackCamera&&(r?e._processPosTracker(t):t.forEach((function(t){var r;null===(r=e._trackers[t.markerId])||void 0===r||r._switch(!1)})))}))},t.prototype._processPosTracker=function(e){var t=this,r=e.map((function(e){return e.detectId}));for(var n in this._poss){var o=parseInt(n,10);if(r.indexOf(o)<0){var i=this._trackers[this._poss[o]];i&&(i._switch(!1),delete this._poss[o]),this._posCount-=1}}e.forEach((function(e){var r=void 0!==t._poss[e.detectId],n=t._getPosTracker(e);if(n){var o=n.el.getComponent(Di);if(o){r||(t._poss[e.detectId]=n.trackId,n._switch(!0),t._posCount+=1),Ee.info("update anchors 3d",e.points3d,e.camExtArray);var i=1;if(t._pose3d){if(!e.points3d)return;xl.setArray(e.camExtArray),t._setMatrix(o,xl)}else i=t._convertScreenPointsToTRS(o,e.origin,e.size,e.angle);n._setRawData(e,i)}}}))},t.prototype._getPosTracker=function(e){var t=this._poss[e.detectId];if(void 0===t){var r=Object.values(this._poss);if(!(t=this._trackerIds.filter((function(e){return r.indexOf(e)<0}))[0]))return;this._poss[e.detectId]=t}return this._trackers[t]},t.prototype._convertScreenPointsToTRS=function(e,t,r,n){var o=r.width,i=r.height,a=2*t.x-1,s=1-2*t.y;this._convertScreenPoint(a,s,Sl),this._convertScreenPoint(a+2*o,s-2*i,Tl);var u=e.position.set(Sl);u.add(Tl,u).scale(.5,u);var c=Math.min(Math.abs(Tl.x-Sl.x),Math.abs(Sl.y-Tl.y));return n&&e.quaternion.setFromYawRollPitch(-n.yaw,n.roll,n.pitch),c},t.prototype._convertScreenPoint=function(e,t,r){El.setValue(e,t,.1),this._trackCamera.convertClipPositionToWorld(El,r)},t.prototype._updateCameraMeshes=function(){var e,t,r,n=this._cameraTexes,o=n.y,i=n.uv,a=n.depth;for(var s in this._camerasMeshes){var u=this._camerasMeshes[s],c=u.mesh,l=u.camera,f=u.inited,p=c.material;f||(p.setTexture("u_yTexture",o),p.setTexture("u_uvTexture",i),a&&p.setTexture("u_depthTexture",a),p.setMacro("WX_AR_CAMERA_DEPTH_DEBUG",this.getData("depthDebug")),this._camerasMeshes[s].inited=!0);var h=l.renderTarget||this.scene,d=this._session.getVKFrame(h.width,h.height);if(d){var _=d.getDisplayTransform();xl.setArray([_[0],_[1],_[2],0,_[3],_[4],_[5],0,_[6],_[7],_[8],0,0,0,0,1]),p.setMatrix("u_displayMatrix",xl),e||(e=d.getCameraRawTextureData(),o.update({buffer:e.yAddress}),i.update({buffer:e.uvAddress}),this._rawARData.width=e.width,this._rawARData.height=e.height,this._rawARData.yBuffer=e.yAddress,this._rawARData.uvBuffer=e.uvAddress),a&&!t&&(t=d.getDepthBuffer(),a.update({buffer:t.DepthAddress})),l===this._trackCamera&&(r=d)}}var y=this._trackCamera;if(y){if(r||(h=y.renderTarget||this.scene,r=this._session.getVKFrame(h.width,h.height)),!(null==r?void 0:r.camera))return!1;var v=(l=r.camera).viewMatrix,m=l.getProjectionMatrix(y.near,y.far);this._rawARData.timestamp=r.timestamp,this._rawARData.viewMatrix=v,this._rawARData.intrinsics=l.intrinsics;var g=this._supportModes[0];if("OSD"===g)return!0;if(("Body"===g||"Hand"===g||"Face"===g)&&!this._pose3d)return;this._forceCameraViewMat[y.id]||(xl.setArray(v),this._changeViewMatrix(y,xl)),y.setData({fov:2*Math.atan(1/m[5])*180/Math.PI}),y.changeProjectMatrix(!0,m)}return!0},t.prototype._changeViewMatrix=function(e,t){t.inverse(t);var r=e.el.getComponent(Di);this._setMatrix(r,t,!0)},t.prototype._setMatrix=function(e,t,r){if(void 0===r&&(r=!1),r&&(t._raw[8]*=-1,t._raw[9]*=-1,t._raw[10]*=-1),null==e||e.setLocalMatrix(t),"threeDof"===this._supportModes[0]){var n=null==e?void 0:e.position.toArray();null==e||e.position.setFromArray(n)}},t.EVENTS=["ar-error","ar-ready"],t._ALREADY_USED=!1,t}(oo);const Al=Ol;var Cl=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},e(t,r)};return function(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();const Ml=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.priority=300,t}return Cl(t,e),t.prototype.onTick=function(e,t){this.scene.dfs((function(e){e._beforeTick()}),void 0,!0),this.scene.rootShadow.dfs((function(e){e._beforeTick()})),this.scene.dfs((function(t){t._tick(e)}),void 0,!0),this.scene.rootShadow.dfs((function(t){t._tick(e)})),this.scene.event.trigger("tick",e,!0)},t}(oo);var Pl=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},e(t,r)};return function(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();const Rl=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.priority=350,t}return Pl(t,e),t.prototype.onTick=function(e,t){this._calcVisible(this.scene),this._calcVisible(this.scene.rootShadow)},t.prototype._calcVisible=function(e){e&&e.dfs((function(e,t){var r=e.getComponent(Di);if(!r)return t;var n=!!t.visible&&r.visible,o=e.getComponent(gs)||e.getComponent(gu);o&&(o._visible=n);var i=r._checkDirty(t.dirty);return i&&r._setDirty(),{visible:n,dirty:i}}),{visible:!0,dirty:!1},!0)},t}(oo);var Dl=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},e(t,r)};return function(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();const Nl=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.priority=110,t._videos=new Set,t._handleScenePause=function(){t._videos.forEach((function(e){e.autoPause&&e.pause()}))},t._handleSceneResume=function(){t._videos.forEach((function(e){e.autoPause&&e.resume()}))},t}return Dl(t,e),t.prototype.onAdd=function(e,t){this.scene.event.add("pause",this._handleScenePause),this.scene.event.add("resume",this._handleSceneResume)},t.prototype.onTick=function(e,t){this._videos.forEach((function(t){t._tick(e)}))},t.prototype.onRelease=function(e){this.scene.event.remove("pause",this._handleScenePause),this.scene.event.remove("resume",this._handleSceneResume),this._videos.forEach((function(e){e.release()}))},t.prototype._addVideo=function(e){this._videos.add(e)},t.prototype._removeVideo=function(e){this._videos.delete(e)},t}(oo);var Il=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},e(t,r)};return function(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Ll=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.priority=1/0,t}return Il(t,e),Object.defineProperty(t.prototype,"supported",{get:function(){var e;if(void 0===this._supported){var t=this.captureToDataURL({quality:.1});this._supported=!!(null===(e=t.split(",",2)[1])||void 0===e?void 0:e.length)}return this._supported},enumerable:!1,configurable:!0}),t.prototype.captureToDataURL=function(e){var t,r;void 0===e&&(e={});var n="png"===e.fileType?"image/png":"image/jpeg",o=e.quality||.8;return(null===(r=null===(t=he(this.scene))||void 0===t?void 0:t.GET_MAIN_CANVAS())||void 0===r?void 0:r.toDataURL(n,o))||""},t.prototype.captureToArrayBuffer=function(e){void 0===e&&(e={});var t=this.captureToDataURL(e).split(",",2),r=(t[0],t[1]);try{return he(this.scene).decodeBase64(r)}catch(e){return fe.base64ToArrayBuffer(r)}},t.prototype.captureToLocalPath=function(e,t){var r;void 0===e&&(e={});var n,o=this.captureToDataURL(e).split(",",2),i=o[0],a=o[1];try{n=he(this.scene).decodeBase64(a)}catch(e){n=fe.base64ToArrayBuffer(a)}var s=/png/.test(i),u=fe.env.USER_DATA_PATH+"/xr-frame-share."+(s?"png":"jpg");fe.getFileSystemManager().writeFileSync(u,n,"binary");var c=t(u);"function"==typeof(null===(r=c)||void 0===r?void 0:r.then)?c.then((function(){fe.getFileSystemManager().unlink({filePath:u})})):fe.getFileSystemManager().unlink({filePath:u})},t.prototype.captureToFriends=function(e){void 0===e&&(e={}),this.captureToLocalPath(e,(function(e){return new Promise((function(t){fe.showShareImageMenu({path:e,menus:["shareAppMessage","shareTimeline"],success:function(){t()},fail:function(){Ee.warn("Share to friend failed!"),t()}})}))}))},t}(oo);const Fl=Ll;var kl=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},e(t,r)};return function(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();const Ul=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.priority=100,t.gizmos=new Map,t}return kl(t,e),t.prototype.onTick=function(e,t){this.gizmos.forEach((function(e,t){e.getComponent(Di).position.set(t.el.getComponent(Di).worldPosition),e.getComponent(Di).quaternion.set(t.el.getComponent(Di).worldQuaternion),e.getComponent(Di).scale.set(t.el.getComponent(Di).worldScale)}))},t.prototype.addGizmo=function(e){if(this.gizmos.has(e))return this.gizmos.get(e);var t=this.scene.createElement(Uc);return this.scene.rootShadow.addChild(t),this.gizmos.set(e,t),t},t.prototype.removeGizmo=function(e){var t=this.gizmos.get(e);t&&(this.scene.rootShadow.removeChild(t),t.release(),this.gizmos.delete(e))},t}(oo);so("assets-system",Mo),so("node-system",Rl),so("tick-system",Ml),so("render-system",zi),so("animation-system",Ca),so("video-system",Nl),so("physics-system",gl),so("ar-system",Al),so("share-system",Fl),so("gizmo-system",Ul);var Bl,jl=function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function a(e){try{u(n.next(e))}catch(e){i(e)}}function s(e){try{u(n.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}u((n=n.apply(e,t||[])).next())}))},Vl=function(e,t){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}};!function(e){e[e.Idle=0]="Idle",e[e.WaitPlay=1]="WaitPlay",e[e.Playing=2]="Playing",e[e.Paused=3]="Paused",e[e.Released=4]="Released"}(Bl||(Bl={}));var zl=function(){function e(e,t,r,n){var o=this;this.onEnd=n,this._handleEnd=function(){o._options.loop?o.seek(0):o.stop()},this._scene=e,this._options=t,this._state=Bl.Idle;var i=this._options.placeHolder;i&&(this._texture=this._scene.createTexture({source:[i],width:i.width,height:i.height,wrapU:ue.EWrapMode.CLAMP_TO_EDGE,wrapV:ue.EWrapMode.CLAMP_TO_EDGE,minFilter:ue.EFilterMode.LINEAR,magFilter:ue.EFilterMode.LINEAR,pixelFormat:ue.ETextureFormat.RGBA8})),this._init(r)}return Object.defineProperty(e.prototype,"texture",{get:function(){return this._texture},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"width",{get:function(){return this._width},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this._height},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"autoPause",{get:function(){return!(!1===this._options.autoPause)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"state",{get:function(){return this._state},enumerable:!1,configurable:!0}),e.prototype._init=function(e){return jl(this,void 0,void 0,(function(){var t,r,n,o;return Vl(this,(function(i){switch(i.label){case 0:this._video=document.createElement("video"),this._video.src=this._options.src,this._video.crossOrigin="*",this._video.volume=this._options.abortAudio?0:1,i.label=1;case 1:return i.trys.push([1,3,,4]),[4,this._getSize()];case 2:return t=i.sent(),r=t.width,n=t.height,this._width=r,this._height=n,[3,4];case 3:return o=i.sent(),e(this,o),[2];case 4:if(this._video.onended=this._handleEnd,this._texture){if(this._texture.width!==this._width||this._texture.height!==this._height)return e(this,new Error("Video has placeHolder but the size of video("+this._width+"x"+this._height+") is different from placeHolder("+this._texture.width+"x"+this._texture.height+") !")),[2]}else this._texture=this._scene.createTexture({width:this._width,height:this._height,wrapU:ue.EWrapMode.CLAMP_TO_EDGE,wrapV:ue.EWrapMode.CLAMP_TO_EDGE,minFilter:ue.EFilterMode.LINEAR,magFilter:ue.EFilterMode.LINEAR,pixelFormat:ue.ETextureFormat.RGBA8});return this._options.autoPlay?[4,this.play()]:[3,6];case 5:i.sent(),i.label=6;case 6:return this._scene.video._addVideo(this),e(this),[2]}}))}))},e.prototype._tick=function(e){if(this._state===Bl.Playing){var t=this._getFrame();t&&this._texture.update({buffer:t})}},e.prototype._getFrame=function(){return this._video},e.prototype._getSize=function(){return jl(this,void 0,Promise,(function(){var e=this;return Vl(this,(function(t){return this._options.src,[2,new Promise((function(t){e._video.oncanplaythrough=function(){e._video.oncanplaythrough=void 0,t({width:e._video.videoWidth,height:e._video.videoHeight})}}))]}))}))},e.prototype.play=function(){return jl(this,void 0,Promise,(function(){return Vl(this,(function(e){return this._state===Bl.Playing||(this._video.play(),this._state=Bl.Playing),[2]}))}))},e.prototype.seek=function(e){return jl(this,void 0,void 0,(function(){return Vl(this,(function(t){switch(t.label){case 0:return this._state!==Bl.Idle?[3,2]:[4,this.play()];case 1:t.sent(),t.label=2;case 2:return this._video.currentTime=e,this._video.play(),[2]}}))}))},e.prototype.pause=function(){return jl(this,void 0,void 0,(function(){return Vl(this,(function(e){return this._state!==Bl.Playing||(this._video.pause(),this._state=Bl.Paused),[2]}))}))},e.prototype.resume=function(){return jl(this,void 0,void 0,(function(){return Vl(this,(function(e){return this._state!==Bl.Paused||(this._video.play(),this._state=Bl.Playing),[2]}))}))},e.prototype.stop=function(){this._video.pause(),this._video.currentTime=0,this._state=Bl.Idle,this.onEnd&&this.onEnd()},e.prototype.release=function(){this.stop(),this._state=Bl.Released,this._scene.video._removeVideo(this)},e}();const Gl=zl;var Wl=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},e(t,r)};return function(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Xl=function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function a(e){try{u(n.next(e))}catch(e){i(e)}}function s(e){try{u(n.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}u((n=n.apply(e,t||[])).next())}))},Hl=function(e,t){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},ql={"assets-system":{},"node-system":{},"tick-system":{},"animation-system":{},"video-system":{},"render-system":{},"physics-system":{},"share-system":{},"gizmo-system":{}},Yl={},Zl=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.defaultComponents=ql,t.isScene=!0,t._nodes={},t._elements={},t._preTs=0,t._timestamp=0,t._ready=!1,t._paused=!1,t.__tmpObjs={},t._loop=function(e,r){if(void 0===r&&(r=!1),t._ready&&!t._paused){r&&(t._preTs=e-16);var n=e-t._preTs;t._preTs=e,t._timestamp+=n;var o=he(t).renderEnv.getErrors();(null==o?void 0:o.length)&&Ee.error("Render errors\n"+o.join("\n"));try{t._beforeTick(),t._tick(n)}catch(e){Ee.debugError(e)}he(t).update(n),t._rafId=t._raf(t._loop)}},t._pause=function(){t._ready&&(t._cancelRaf(t._rafId),t._paused=!0,t.event.trigger("pause",void 0,!0),he(t).renderEnv.endFrame())},t._resume=function(){t._ready&&(t.event.trigger("resume",void 0,!0),t._paused=!1,t._raf(t._loop))},t}return Wl(t,e),Object.defineProperty(t.prototype,"ready",{get:function(){return this._ready},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"scene",{get:function(){return this},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"rootShadow",{get:function(){return this._rootShadow},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"assets",{get:function(){return this.getComponent(Mo)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"render",{get:function(){return this.getComponent(zi)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"animation",{get:function(){return this.getComponent(Ca)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"video",{get:function(){return this.getComponent(Nl)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"physics",{get:function(){return this.getComponent(gl)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ar",{get:function(){return this.getComponent(Al)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"gizmo",{get:function(){return this.getComponent(Ul)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"share",{get:function(){return this.getComponent(Fl)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"width",{get:function(){return this._width},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this._height},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"frameWidth",{get:function(){return this._frameWidth},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"frameHeight",{get:function(){return this._frameHeight},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"timestamp",{get:function(){return this._timestamp},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"renderPass",{get:function(){return he(this).RenderPass.SCREEN_RENDER_PASS},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"rootNode",{get:function(){return this._rootNode},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"backendVersion",{get:function(){return he(this).renderEnv.version},enumerable:!1,configurable:!0}),t.prototype.versionBefore=function(e,t){return!1},Object.defineProperty(t.prototype,"backendCommit",{get:function(){return he(this).renderEnv.commitVersion},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"backendUsePuppetSokol",{get:function(){return he(this).renderEnv.usePuppetSokol},enumerable:!1,configurable:!0}),t.prototype._setCanvas=function(e,t){this._canvas=e,this._xrCtxId=t},t.prototype._initScene=function(){var e=this,t=this._canvas;delete this._canvas;var r=ue.CREATE_INSTANCE(t,{alpha:this.render.getData("alpha")},"Game",!1,"",!0);if(r.renderEnv.useExtendedMemory=!0,function(e,t){pe[e._elId]=t}(this,r),r.Downloader.REAL_DOWNLOADER={load:function(e){wa(e.src,e.encoding).then((function(t){e.onLoad(t)})).catch((function(t){e.onError(t)}))}},this._width?this._resize(this._width,this._height):this._resize(t.width,t.height),void 0===fe.env){var n=function(){var e=t.getBoundingClientRect();return{width:e.width,height:e.height,renderWidth:t.width,renderHeight:t.height}};window.addEventListener("resize",(function(){return e._processEvent("resize",n())})),this._processEvent("resize",n())}this._rootNode=new r.Entity3D,this._rootNode.float32View.set([0,0,0,1],this._rootNode.localQuaternionOffset),this._rootNode.float32View.set([1,1,1],this._rootNode.localScaleOffset),this._rootNode.setLocalMatrixDirty(),this._rootNode.setAsRoot(),t.requestAnimationFrame?(this._raf=t.requestAnimationFrame.bind(t),this._cancelRaf=t.cancelAnimationFrame.bind(t)):(this._raf=__webpack_require__.g.requestAnimationFrame.bind(__webpack_require__.g),this._cancelRaf=__webpack_require__.g.cancelAnimationFrame.bind(__webpack_require__.g)),me(this._xrCtxId,t.id),this._rafId=this._raf((function(r){return Xl(e,void 0,void 0,(function(){var e=this;return Hl(this,(function(n){switch(n.label){case 0:return void 0===fe.setStorage?[3,2]:[4,ca.initCache()];case 1:n.sent(),n.label=2;case 2:fe.env||(["touchstart","touchmove","touchend","touchcancel"].forEach((function(r){t.addEventListener(r,(function(t){return e._processEvent(r,t)}))})),t.addEventListener("mousedown",(function(t){return e._processEvent("touchstart",{touches:[t]})})),t.addEventListener("mouseup",(function(t){return e._processEvent("touchend",{touches:[t]})})),t.addEventListener("mouseout",(function(t){return e._processEvent("touchend",{touches:[t]})})),t.addEventListener("mouseleave",(function(t){return e._processEvent("touchend",{touches:[t]})})),t.addEventListener("mousemove",(function(t){return e._processEvent("touchmove",{touches:[t]})})),t.addEventListener("wheel",(function(t){return e._processEvent("wheel",t)}))),this._preTs=r;try{this.assets._registerLoadersAndLoadBuiltinAssets(),this._rootShadow=this.createElement(vf),this._rootShadow._parent=this,this._ready=!0,this._rootShadow.dfs((function(t){t._scene=e,t._added()})),this.dfs((function(t){t._scene=e,t._added()}))}catch(e){Ee.throw(e,se.Init)}return Ee.info("scene ready"),this.event.trigger("ready",this,!0,!0),this._loop(r),[2]}}))}))}))},t.prototype._release=function(){var t,r;this._ready=!1,null===(t=this._cancelRaf)||void 0===t||t.call(this,this._rafId),null===(r=this._rootShadow)||void 0===r||r._release(),e.prototype._release.call(this);var n=he(this),o=n.GET_MAIN_CANVAS();this._nodes=void 0,this._elements=void 0,this._raf=void 0,this._cancelRaf=void 0,this._rootNode=void 0,this._rootShadow=void 0,this.__tmpObjs=void 0,n.destroy(),o.width=1,o.height=1,delete pe[this._elId],Ee.info("scene destroy"),"undefined"!=typeof NativeGlobal&&setTimeout((function(){var e,t,r,n;null===(e=NativeGlobal.gc)||void 0===e||e.call(NativeGlobal),null===(t=NativeGlobal.gc)||void 0===t||t.call(NativeGlobal),null===(r=NativeGlobal.gc)||void 0===r||r.call(NativeGlobal),null===(n=NativeGlobal.gc)||void 0===n||n.call(NativeGlobal)}),1e3)},t.prototype._processEvent=function(e,t){if("resize"===e){if(this._width===t.renderWidth&&this._height===t.renderHeight&&this._frameWidth===t.width&&this._frameHeight===t.height)return;return this._frameWidth=t.width,this._frameHeight=t.height,void this._resize(t.renderWidth,t.renderHeight)}this._ready&&this.event.trigger(e,t,!1,!1)},t.prototype._resize=function(e,t){this._width=e,this._height=t;var r=he(this);if(r){var n=r.GET_MAIN_CANVAS();n.width=r.renderEnv.canvasWidth=e,n.height=r.renderEnv.canvasHeight=t}ge(se.Default,this.width+"|"+this.height+"|"+this.frameWidth+"|"+this.frameHeight)},t.prototype.createElement=function(e,t){var r=new e(e.TYPE,(function(){}));if(r._associateValue(null),t)for(var n in t)r._setAttribute(n,t[n]);return r},t.prototype._addNodeById=function(e,t){this._nodes[e]=t},t.prototype._removeNodeById=function(e){delete this._nodes[e]},t.prototype._getNodeById=function(e){return this._nodes[e]},t.prototype._addElById=function(e,t){this._elements[e]=t},t.prototype._removeElById=function(e){delete this._elements[e]},t.prototype.getElementById=function(e){return this._elements[e]},t.prototype.getNodeById=function(e){return this._nodes[e]},t.prototype._requestTmpObj=function(e){return this.__tmpObjs[e]||(this.__tmpObjs[e]={}),this.__tmpObjs[e]},t.prototype.createImage=function(e){void 0===e&&(e=!0);var t=new(he(this).Image);return t.autoRelease=e,t},t.prototype.createTexture=function(e){return new(he(this).Texture)(e)},t.prototype.createEffect=function(e){return new Oa(this,e)},t.prototype.createUniformBlockDesc=function(e){return new(he(this).UniformDescriptor)(e)},t.prototype.createUniformBlock=function(e){return new(he(this).UniformBlock)(e)},t.prototype.createMaterial=function(e,t){var r=new Ir(this);return r.initByEffect(e,t),r},t.prototype.createVertexLayout=function(e){return new(he(this).VertexLayout)(e)},t.prototype.createGeometry=function(e,t,r,n){return new Vt(this,e,t,r,n)},t.prototype.createRenderTexture=function(e){return new Do(this,e)},t.prototype.createVideoTexture=function(e){return Xl(this,void 0,Promise,(function(){var t=this;return Hl(this,(function(r){return[2,new Promise((function(r,n){var o=new Gl(t,e,(function(t,o){if(o&&Ee.error(o),!e.placeHolder)return o?n(o):void r(t)}));e.placeHolder&&r(o)}))]}))}))},t.prototype.createPostProcess=function(e){return new Yc(this,e)},t}(_o);const Kl=Zl;var Ql=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},e(t,r)};return function(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),$l=Object.assign({camera:{}},Fc),Jl=Object.assign({target:["camera","target"],"render-target":["camera","renderTarget"],"is-perspective":["camera","isPerspective"],"cull-mask":["camera","cullMask"],depth:["camera","depth"],fov:["camera","fov"],near:["camera","near"],far:["camera","far"],"orth-size":["camera","orthSize"],background:["camera","background"],"is-ar-camera":["camera","isARCamera"],"is-clear-depth":["camera","isClearDepth"],"is-clear-stencil":["camera","isClearStencil"],"is-clear-color":["camera","isClearColor"],"clear-depth":["camera","clearDepth"],"clear-stencil":["camera","clearStencil"],"clear-color":["camera","clearColor"],"post-process":["camera","postProcess"],"allow-features":["camera","allowFeatures"]},kc);const ef=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.defaultComponents=$l,t.dataMapping=Jl,t}return Ql(t,e),t}(_o);var tf=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},e(t,r)};return function(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),rf=Object.assign({mesh:{}},Fc),nf=Object.assign({"never-cull":["mesh","neverCull"],"cast-shadow":["mesh","castShadow"],"receive-shadow":["mesh","receiveShadow"],geometry:["mesh","geometry"],material:["mesh","material"],uniforms:["mesh","uniforms"],states:["mesh","states"],"env-data":["mesh","envData"]},kc);const of=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.defaultComponents=rf,t.dataMapping=nf,t}return tf(t,e),t}(_o);var af=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},e(t,r)};return function(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),sf=Object.assign({text:{}},Fc),uf=Object.assign({value:["text","value"],size:["text","size"],color:["text","color"],anchor:["text","anchor"],width:["text","width"],height:["text","height"],lineHeight:["text","lineHeight"],padding:["text","padding"],horzAlign:["text","horzAlign"],vertAlign:["text","vertAlign"],"never-cull":["text","neverCull"],material:["text","material"],uniforms:["text","uniforms"],states:["text","states"]},kc);const cf=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.defaultComponents=sf,t.dataMapping=uf,t}return af(t,e),t}(_o);var lf=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},e(t,r)};return function(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),ff=Object.assign({light:{}},Fc),pf=Object.assign({type:["light","type"],"cast-shadow":["light","castShadow"],"shadow-distance":["light","shadowDistance"],"shadow-strength":["light","shadowStrength"],"shadow-bias":["light","shadowBias"],color:["light","color"],intensity:["light","intensity"],range:["light","range"],"inner-cone-angle":["light","innerConeAngle"],"outer-cone-angle":["light","outerConeAngle"]},kc);const hf=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.defaultComponents=ff,t.dataMapping=pf,t}return lf(t,e),t}(_o);var df=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},e(t,r)};return function(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),_f=Object.assign({},Fc),yf=Object.assign({},kc);const vf=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.defaultComponents=_f,t.dataMapping=yf,t._isXRShadow=!0,t}return df(t,e),t.prototype._appendChild=function(t,r){return void 0===r&&(r=!1),r?e.prototype._appendChild.call(this,t):this._showError()},t.prototype._removeChild=function(t,r,n){return void 0===n&&(n=!1),n?e.prototype._removeChild.call(this,t):this._showError()},t.prototype._insertBefore=function(e,t,r){this._showError()},t.prototype._replaceChild=function(e,t,r){this._showError()},t.prototype._spliceBefore=function(e,t,r){this._showError()},t.prototype._spliceAppend=function(e){this._showError()},t.prototype._spliceRemove=function(e,t){this._showError()},t.prototype._showError=function(){Ee.throw(new Error("xr-shadow element does not support children in wxml!"))},t.prototype._release=function(){this.dfs((function(e){return e._release()}),void 0,!0,(function(e){return!!e._isXRShadow})),e.prototype._release.call(this)},t}(_o);var mf=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},e(t,r)};return function(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),gf=Object.assign({gltf:{}},Fc),bf=Object.assign({model:["gltf","model"],"cast-shadow":["gltf","castShadow"],"receive-shadow":["gltf","receiveShadow"],"never-cull":["gltf","neverCull"],states:["gltf","states"]},kc);const wf=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.defaultComponents=gf,t.dataMapping=bf,t}return mf(t,e),t}(vf);var xf=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},e(t,r)};return function(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Ef=Object.assign({},fo),Sf=Object.assign({"asset-id":["asset-material","assetId"],effect:["asset-material","effect"],marcos:["asset-material","marcos"],uniforms:["asset-material","uniforms"],states:["asset-material","states"],"render-queue":["asset-material","renderQueue"],"env-data":["asset-material","envData"]},po);const Tf=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.defaultComponents=Ef,t.dataMapping=Sf,t}return xf(t,e),t}(_o);var Of=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},e(t,r)};return function(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Af=Object.assign({},fo),Cf=Object.assign({"asset-id":["asset-render-texture","assetId"],width:["asset-render-texture","width"],height:["asset-render-texture","height"],"is-hdr":["asset-render-texture","isHDR"]},po);const Mf=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.defaultComponents=Af,t.dataMapping=Cf,t}return Of(t,e),t}(_o);var Pf=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},e(t,r)};return function(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Rf=Object.assign({type:["asset-load","type"],"asset-id":["asset-load","assetId"],src:["asset-load","src"],defer:["asset-load","defer"],options:["asset-load","options"]},po);const Df=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.dataMapping=Rf,t.neverTick=!0,t}return Pf(t,e),t}(_o);var Nf=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},e(t,r)};return function(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),If=Object.assign({assets:{}},fo);const Lf=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.defaultComponents=If,t.neverTick=!0,t}return Nf(t,e),t}(_o);var Ff=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},e(t,r)};return function(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),kf=Object.assign({env:{}},fo),Uf=Object.assign({"env-data":["env","envData"],"sky-map":["env","skyMap"],"is-sky2d":["env","isSky2D"],rotation:["env","rotation"],"diffuse-exp":["env","diffuseExp"],"specular-exp":["env","specularExp"]},po);const Bf=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.defaultComponents=kf,t.dataMapping=Uf,t.neverTick=!0,t}return Ff(t,e),t}(_o);var jf=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},e(t,r)};return function(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Vf=Object.assign({"ar-tracker":{}},Fc),zf=Object.assign({mode:["ar-tracker","mode"],"hit-id":["ar-tracker","hitId"],image:["ar-tracker","image"],src:["ar-tracker","src"],"auto-sync":["ar-tracker","autoSync"]},kc);const Gf=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.defaultComponents=Vf,t.dataMapping=zf,t}return jf(t,e),t}(_o);var Wf=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},e(t,r)};return function(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Xf=Object.assign({particle:{}},Fc),Hf=Object.assign({"never-cull":["particle","neverCull"],uniforms:["particle","uniforms"],states:["particle","states"],atlas:["particle","atlas"],"atlas-frames":["particle","atlasFrames"],"atlas-loop":["particle","atlasLoop"],"atlas-speed":["particle","atlasSpeed"],"atlas-random":["particle","atlasRandom"],angle:["particle","angle"],"angular-speed":["particle","angularSpeed"],"burst-count":["particle","burstCount"],"burst-time":["particle","burstTime"],"burst-cycle":["particle","burstCycle"],"burst-interval":["particle","burstInterval"],capacity:["particle","capacity"],delay:["particle","delay"],"emit-rate":["particle","emitRate"],"emitter-type":["particle","emitterType"],"emitter-props":["particle","emitterProps"],"emitter-position":["particle","emitterPosition"],"end-color":["particle","endColor"],gravity:["particle","gravity"],"life-time":["particle","lifeTime"],"render-mode":["particle","renderMode"],size:["particle","size"],"stop-duration":["particle","stopDuration"],speed:["particle","speed"],"start-color":["particle","startColor"],"start-color2":["particle","startColor2"],texture:["particle","texture"],"scale-x":["particle","scaleX"],"scale-y":["particle","scaleY"],"prewarm-cycles":["particle","prewarmCycles"],"speed-dampen":["particle","speedDampen"],mesh:["particle","mesh"],"size-change":["particle","sizeChange"],"color-change":["particle","colorChange"],"speed-change":["particle","speedChange"]},kc);const qf=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.defaultComponents=Xf,t.dataMapping=Hf,t}return Wf(t,e),t}(_o);var Yf=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},e(t,r)};return function(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Zf=Object.assign({},fo),Kf=Object.assign({"asset-id":["asset-post-process","assetId"],type:["asset-post-process","type"],"is-hdr":["asset-post-process","isHDR"],data:["asset-post-process","data"]},po);const Qf=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.defaultComponents=Zf,t.dataMapping=Kf,t}return Yf(t,e),t}(_o);var $f=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},e(t,r)};return function(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Jf={"physics-global-not-exposed":{}},ep={disabled:["physics-global-not-exposed","disabled"],gravity:["physics-global-not-exposed","gravity"]};const tp=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.defaultComponents=Jf,t.dataMapping=ep,t}return $f(t,e),t.prototype._appendChild=function(t,r){void 0===r&&(r=!1),"interact-between"===t.__proto__.constructor.TYPE?e.prototype._appendChild.call(this,t,r):Ee.throw(new Error("<xr-physics> can only have physics-related sub tags."))},t}(_o);var rp=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},e(t,r)};return function(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),np={"interact-between-not-exposed":{}},op={layer:["interact-between-not-exposed","layer"],interact:["interact-between-not-exposed","interact"],exclude:["interact-between-not-exposed","exclude"]};const ip=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.defaultComponents=np,t.dataMapping=op,t}return rp(t,e),t}(_o);mo("element",_o),mo("scene",Kl),mo("shadow",vf),mo("assets",Lf),mo("asset-load",Df),mo("asset-material",Tf),mo("asset-render-texture",Mf),mo("node",Uc),mo("camera",ef),mo("mesh",of),mo("text",cf),mo("particle",qf),mo("light",hf),mo("gltf",wf),mo("env",Bf),mo("ar-tracker",Gf),mo("asset-post-process",Qf),mo("physics",tp),mo("interact-between",ip);var ap=function(){function e(e,t){this._scene=e,this.isAtlas=!0,this._AUTO_ID=0,this._area=0,this._needReBuild=!1,this._frames=t.frames,this._meta=t.meta,t.texture?this._texture=t.texture:(this._image=t.image,this._texture=e.createTexture({width:t.meta.size.w,height:t.meta.size.h,source:t.image?[t.image]:void 0}))}return e.CREATE_FROM_GRIDS=function(t,r,n){for(var o=r.width,i=r.height,a=r.rows,s=r.cols,u=r.space,c=~~(o/s)-(u=u||0),l=~~(i/a)-u,f={},p=0;p<a;p+=1)for(var h=0;h<s;h+=1){var d=h*(c+u),_=p*(l+u);f[m=""+p+h]={frame:{x:d,y:_,w:c,h:l},space:u}}var y=t.createTexture({width:o,height:i}),v=new e(t,{texture:y,frames:f,meta:{size:{w:o,h:i}}});if(n)for(p=0;p<a;p+=1)for(h=0;h<s;h+=1){var m=""+p+h,g=v.getFrame(m);n(y,{x:d=g.x,y:_=g.y,w:g.w,h:g.h,row:p,col:h},m)}return v},e.CREATE_FROM_TEXTURE=function(t,r,n){var o=n.cellWidth,i=n.cellHeight,a=r.width,s=r.height,u=n.space||0,c=n.framesPerLine,l=n.frameStart,f=n.frameCount;void 0===l&&(l=0),void 0===f&&(f=1/0);for(var p={},h=l;;){var d=(1===c?0:h%c)*(o+u),_=(1===c?h:~~(h/c))*(i+u);if(h>=f||_+i+u>=s)break;p[h]={frame:{x:d,y:_,w:o,h:i}},h+=1}return new e(t,{texture:r,frames:p,meta:{size:{w:a,h:s}}})},Object.defineProperty(e.prototype,"meta",{get:function(){return this._meta},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"frames",{get:function(){return this._frames},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"texture",{get:function(){return this._texture},enumerable:!1,configurable:!0}),e.prototype.getFrame=function(e){return this._frames[e].frame},e.prototype.getUVMatrix=function(e){var t=this._frames[e];if(!t)throw new Error("Frame "+e+" is not existed!");var r=t.uvMatrix,n=t.frame;return r||(t.uvMatrix=this._buildUVMatrix(n)),t.uvMatrix},e.prototype._buildUVMatrix=function(e){var t=this._meta.size,r=t.w,n=t.h,o=new br;return o.setArray([e.w/r,0,0,0,-e.h/n,0,e.x/r,(e.y+e.h)/n,1]),o},e.prototype.getUVST=function(e){var t=this._frames[e];if(!t)throw new Error("Frame "+e+" is not existed!");var r=t.uvST,n=t.frame;return r||(t.uvST=this._buildUVST(n)),t.uvST},e.prototype._buildUVST=function(e){var t=this._meta.size,r=t.w,n=t.h,o=new _r;return o.setValue(e.w/r,e.h/n,e.x/r,e.y/n),o},e.prototype.updateFrame=function(e,t){if(!this._updatable)throw new Error("Atlas is not updatable !");var r=this.getFrame(e),n=r.x,o=r.y,i=r.w,a=r.h;t(this._texture,{x:n,y:o,w:i,h:a},e)},e}();const sp=ap;var up=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},e(t,r)};return function(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),cp=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.schema={},t}return up(t,e),t.prototype.load=function(e,t){return r=this,n=void 0,i=function(){var r,n,o,i,a,s,u;return function(e,t){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}}(this,(function(c){switch(c.label){case 0:return c.trys.push([0,3,,4]),[4,wa(e.src,"json")];case 1:if(!(r=c.sent().data))throw new Error("Load resource error: "+e.assetId);return t.onLoading(.1),(n=e.src.split("/")).pop(),o=n.join("/"),i=this._getUrl(r.meta.image,o),[4,this._loadImg(i)];case 2:return a=c.sent(),s=new sp(this.scene,{image:a,frames:r.frames,meta:r.meta}),t.onLoaded(s),[3,4];case 3:return u=c.sent(),t.onError(u),[3,4];case 4:return[2]}}))},new((o=void 0)||(o=Promise))((function(e,t){function a(e){try{u(i.next(e))}catch(e){t(e)}}function s(e){try{u(i.throw(e))}catch(e){t(e)}}function u(t){var r;t.done?e(t.value):(r=t.value,r instanceof o?r:new o((function(e){e(r)}))).then(a,s)}u((i=i.apply(r,n||[])).next())}));var r,n,o,i},t.prototype._loadImg=function(e,t){var r=this.scene.createImage();return new Promise((function(n,o){r.onload=function(){n(r)},r.onerror=function(e){o(e)},r.type=t,r.src=e}))},t.prototype._getUrl=function(e,t){return ea(e)||ta(e)||ra(e)?e:t+"/"+e},t.prototype.getBuiltin=function(){return[{assetId:"numbers",src:"https://mmbizwxaminiprogram-1258344707.cos.ap-guangzhou.myqcloud.com/xr-frame/atlas/numbers/index.json",options:{}}]},t}(xo);const lp=cp;var fp=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},e(t,r)};return function(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();function pp(e){return Math.log2(e.width)%1==0&&Math.log2(e.height)%1==0}var hp=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.schema={anisoLevel:{type:"number",defaultValue:1},wrapU:{type:"number",defaultValue:2},wrapV:{type:"number",defaultValue:2},magFilter:{type:"number"},minFilter:{type:"number"},generateMipmaps:{type:"boolean",defaultValue:!1}},t}return fp(t,e),t.prototype.load=function(e,t){var r=this,n=e.options,o=this.scene.createImage();o.onload=function(){var e,i,a=pp(o)?ue.EFilterMode.LINEAR_MIPMAP_LINEAR:ue.EFilterMode.NEAREST,s=r.scene.createTexture({source:[o],width:o.width,height:o.height,magFilter:null!==(e=n.magFilter)&&void 0!==e?e:a,minFilter:null!==(i=n.minFilter)&&void 0!==i?i:a,wrapU:n.wrapU,wrapV:n.wrapV,anisoLevel:n.anisoLevel,generateMipmaps:n.generateMipmaps});t.onLoaded(s)},o.onerror=function(e){t.onError(e)},o.src=e.src},t.prototype.getBuiltin=function(){return[{assetId:"brdf-lut",src:"https://mmbizwxaminiprogram-1258344707.cos.ap-guangzhou.myqcloud.com/xr-frame/brdflut.png",options:{}},{assetId:"uv-debug",src:"https://mmbizwxaminiprogram-1258344707.cos.ap-guangzhou.myqcloud.com/xr-frame/uv-debug.png",options:{}}]},t.prototype.release=function(e,t){t.destroy()},t}(xo);const dp=hp;var _p=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},e(t,r)};return function(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),yp=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.schema={faces:{type:"array"},anisoLevel:{type:"number",defaultValue:1},wrapU:{type:"number",defaultValue:2},wrapV:{type:"number",defaultValue:2},wrapW:{type:"number",defaultValue:2},magFilter:{type:"number"},minFilter:{type:"number"},generateMipmaps:{type:"boolean",defaultValue:!1}},t}return _p(t,e),t.prototype.load=function(e,t){var r=this,n=e.options;if((null==n?void 0:n.faces)&&6===n.faces.length){var o=n.faces.map((function(t){var n=e.src+t,o=r.scene.createImage();return new Promise((function(e,t){o.onload=function(){e(o)},o.onerror=function(e){t(e)},o.src=n}))}));Promise.all(o).then((function(e){var o,i,a=pp(e[0])?ue.EFilterMode.LINEAR_MIPMAP_LINEAR:ue.EFilterMode.NEAREST,s=r.scene.createTexture({type:ue.ETextureType.Cube,slices:6,source:e,width:e[0].width,height:e[0].height,magFilter:null!==(o=n.magFilter)&&void 0!==o?o:a,minFilter:null!==(i=n.minFilter)&&void 0!==i?i:a,wrapU:n.wrapU,wrapV:n.wrapV,wrapW:n.wrapW,anisoLevel:n.anisoLevel,generateMipmaps:n.generateMipmaps});t.onLoaded(s)})).catch((function(e){t.onError(e)}))}else t.onError(new Error("CubeTexture require 6 faces in options !"))},t.prototype.release=function(e,t){t.destroy()},t}(xo);const vp=yp;var mp=function(){function e(e){this._skybox=e.skybox,this._diffuse=e.diffuse,this._specular=e.specular}return Object.defineProperty(e.prototype,"useHalfSkyMap",{get:function(){var e;return!!(null===(e=this._skybox)||void 0===e?void 0:e.half)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"skyboxMap",{get:function(){var e;return null===(e=this._skybox)||void 0===e?void 0:e.map},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"hasDiffuse",{get:function(){return!!this._diffuse},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"diffuseSH",{get:function(){var e;return null===(e=this._diffuse)||void 0===e?void 0:e.coefficients},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"hasSpecular",{get:function(){return!!this._diffuse},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"specularRGBD",{get:function(){var e;return null===(e=this._specular)||void 0===e?void 0:e.rgbd},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"specularMipmaps",{get:function(){var e;return null===(e=this._specular)||void 0===e?void 0:e.mipmaps},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"specularMipmapCount",{get:function(){return this._specular.mipmapCount},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"specularMap",{get:function(){var e;return null===(e=this._specular)||void 0===e?void 0:e.map},enumerable:!1,configurable:!0}),e.prototype.destroy=function(){this._skybox=void 0,this._diffuse=void 0,this._specular=void 0},e}();const gp=mp;var bp=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},e(t,r)};return function(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),wp=new Uint32Array([1920497783,1986946349]),xp=[Math.sqrt(1/(4*Math.PI)),Math.sqrt(3/(4*Math.PI)),Math.sqrt(3/(4*Math.PI)),Math.sqrt(3/(4*Math.PI)),Math.sqrt(15/(4*Math.PI)),Math.sqrt(15/(4*Math.PI)),Math.sqrt(5/(16*Math.PI)),Math.sqrt(15/(4*Math.PI)),Math.sqrt(15/(16*Math.PI))],Ep=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.schema={},t}return bp(t,e),t.prototype.load=function(e,t){return r=this,n=void 0,i=function(){var r,n,o,i,a,s,u,c,l,f,p,h,d,_,y,v,m,g,b,w,x,E,S,T,O,A=this;return function(e,t){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}}(this,(function(C){switch(C.label){case 0:e.options,r=e.src,(n=r.split("/")).pop(),o=n.join("/"),C.label=1;case 1:return C.trys.push([1,3,,4]),[4,wa(e.src,"binary")];case 2:return(s=C.sent().data).byteLength%4!=0?i=JSON.parse(Xi(s,"utf-8")):(u=new qi(s),c=u.read(qi.Type.UInt32),l=u.read(qi.Type.UInt32),c===wp[0]&&l===wp[1]?(f=u.read(qi.Type.UInt32),a=u.read(qi.Type.UInt32)+16,i=JSON.parse(Xi(new Uint8Array(s,16,f),"utf-8"))):i=JSON.parse(Xi(s,"utf-8"))),[3,4];case 3:return p=C.sent(),[2,t.onError(p)];case 4:if(h=i.skybox,d=i.diffuse,_=i.specular,y={},!h)return[3,8];m=void 0,"2D"===h.type?void 0===a?(v=this._getUrl(h.map,o),m=[this._loadImg(v)]):(E=i.skybox.map,v=new Uint8Array(s,a+E.offset,E.length),m=[this._loadImg(v,E.type)]):m=h.map.map((function(e){return A._loadImg(A._getUrl(e,o))})),C.label=5;case 5:return C.trys.push([5,7,,8]),[4,Promise.all(m)];case 6:return g=C.sent(),e.canceled?[2]:(y.skybox={half:h.half,map:this.scene.createTexture({type:"2D"===h.type?ue.ETextureType.D2:ue.ETextureType.Cube,source:g,width:g[0].width,height:g[0].height,magFilter:ue.EFilterMode.LINEAR,minFilter:ue.EFilterMode.LINEAR,wrapU:ue.EWrapMode.CLAMP_TO_EDGE,wrapV:ue.EWrapMode.CLAMP_TO_EDGE,anisoLevel:1})},[3,8]);case 7:return b=C.sent(),t.onError(b),[2];case 8:if(d&&(d.coefficients.forEach((function(e,t){var r=xp[t];e[0]*=r,e[1]*=r,e[2]*=r})),y.diffuse={coefficients:new Float32Array(d.coefficients.flat())}),!_)return[3,13];C.label=9;case 9:return C.trys.push([9,12,,13]),y.specular={type:_.type,rgbd:_.rgbd,mipmaps:_.mipmaps,map:y.skybox.map},y.specular.mipmapCount=_.mipmapCount?_.mipmapCount:8,w=void 0,x=void 0,void 0===a?w=this._getUrl(_.map,o):(E=i.specular.map,w=new Uint8Array(s,a+E.offset,E.length),x=E.type),v===w?[3,11]:[4,this._loadImg(w,x)];case 10:if(S=C.sent(),e.canceled)return[2];y.specular.map=this.scene.createTexture({type:ue.ETextureType.D2,source:[S],width:S.width,height:S.height,magFilter:ue.EFilterMode.LINEAR,minFilter:ue.EFilterMode.LINEAR,wrapU:ue.EWrapMode.CLAMP_TO_EDGE,wrapV:ue.EWrapMode.CLAMP_TO_EDGE,anisoLevel:1}),C.label=11;case 11:return[3,13];case 12:return T=C.sent(),[2,t.onError(T)];case 13:return O=new gp(y),t.onLoaded(O),[2]}}))},new((o=void 0)||(o=Promise))((function(e,t){function a(e){try{u(i.next(e))}catch(e){t(e)}}function s(e){try{u(i.throw(e))}catch(e){t(e)}}function u(t){var r;t.done?e(t.value):(r=t.value,r instanceof o?r:new o((function(e){e(r)}))).then(a,s)}u((i=i.apply(r,n||[])).next())}));var r,n,o,i},t.prototype._loadImg=function(e,t){var r=this.scene.createImage();return new Promise((function(n,o){r.onload=function(){n(r)},r.onerror=function(e){o(e)},r.type=t,r.src=e}))},t.prototype._getUrl=function(e,t){return ea(e)||ta(e)||ra(e)?e:t+"/"+e},t.prototype.getBuiltin=function(){return[{assetId:"xr-frame-team-workspace-day",src:"https://mmbizwxaminiprogram-1258344707.cos.ap-guangzhou.myqcloud.com/xr-frame/env-data/xr-frame-team-workspace-day.bin",options:{}},{assetId:"xr-frame-team-workspace-night",src:"https://mmbizwxaminiprogram-1258344707.cos.ap-guangzhou.myqcloud.com/xr-frame/env-data/xr-frame-team-workspace-night.bin",options:{}},{assetId:"xr-frame-team-workspace-day2",src:"https://mmbizwxaminiprogram-1258344707.cos.ap-guangzhou.myqcloud.com/xr-frame/env-data/xr-frame-team-workspace-day2.bin",options:{}},{assetId:"gz-haixinsha",src:"https://mmbizwxaminiprogram-1258344707.cos.ap-guangzhou.myqcloud.com/xr-frame/env-data/gz-haixinsha.bin",options:{}},{assetId:"luguhu-side",src:"https://mmbizwxaminiprogram-1258344707.cos.ap-guangzhou.myqcloud.com/xr-frame/env-data/luguhu-side.bin",options:{}},{assetId:"luguhu-caohai",src:"https://mmbizwxaminiprogram-1258344707.cos.ap-guangzhou.myqcloud.com/xr-frame/env-data/luguhu-caohai.bin",options:{}}]},t.prototype.release=function(e,t){t.destroy()},t}(xo);const Sp=Ep,Tp=function(){function e(e,t){this._scene=e,this.onInit(t)}return Object.defineProperty(e.prototype,"scene",{get:function(){return this._scene},enumerable:!1,configurable:!0}),e.prototype.onInit=function(e){},e.prototype.onPlay=function(e,t,r){},e.prototype.onUpdate=function(e,t,r){},e.prototype.onPause=function(e){},e.prototype.onResume=function(e){},e.prototype.onStop=function(e){},e}();var Op,Ap=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},e(t,r)};return function(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();!function(e){e[e.None=0]="None",e[e.Morph=1]="Morph"}(Op||(Op={}));var Cp=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Ap(t,e),t.prototype.onInit=function(e){var t;this.animator=new(he(this.scene).AnimatorComponent),this.animator.bindAnimations([e.clip],[e.bindings]),this.frameCount=e.frameCount,this.clipNames=function(e,t){for(var r=0,n=t.length,o=e.length;r<n;r++,o++)e[o]=t[r];return e}([],e.names),this.simulators=null!==(t=e.simulators)&&void 0!==t?t:[]},t.prototype.onPlay=function(e,t,r){return this.animator.setClipParams(0,0,1),he(this.scene).AnimatorComponent.UPDATE_ANIMATORS([this.animator],1),{duration:this.frameCount/60,loop:void 0!==r.loop?r.loop:1/0,delay:r.delay,direction:r.direction}},t.prototype.onUpdate=function(e,t,r){this.animator.setClipParams(0,t*(this.frameCount-1),1),he(this.scene).AnimatorComponent.UPDATE_ANIMATORS([this.animator],1),this.simulateAnimations()},t.prototype.simulateAnimations=function(){for(var e=0;e<this.simulators.length;e++){var t=this.simulators[e];if(t.type===Op.Morph){var r=t.target._children.map((function(e){return e.getComponent(gs)})).filter((function(e){return!!e}));if(0===r.length)continue;for(var n=0;n<t.subElements.length;n++)for(var o=t.subElements[n].getComponent(Di),i=0,a=r;i<a.length;i++)a[i].morphWeights.set(o.position.toArray(),9*n+0)}}},t}(Tp);const Mp=Cp;var Pp=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},e(t,r)};return function(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();const Rp=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._boneNum=0,t._zeroModel=null,t}return Pp(t,e),Object.defineProperty(t.prototype,"skeleton",{get:function(){return this._skeleton},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"boneNum",{get:function(){return this._boneNum},enumerable:!1,configurable:!0}),t.prototype.create=function(e){if(e.boneNum){this._boneNum=e.boneNum,this._skeleton=new(he(this.scene).SkinnedSkeletonComponent)(e.boneNum,this.useDataTexture?ue.ESkinnedSkeletonFlag.UseTextureMatrix:0);var t,r=Array.from(Array(e.boneNum).keys()),n=e.boneNodes.map((function(e){return e.node}));t=e.boneInverseMatrices?e.boneInverseMatrices:this._zeroModel,this._skeleton.setBoneMatrix(t,r,n)}},t.prototype.cleanUp=function(){this._zeroModel=null,this._skeleton=null},t.prototype.onAdd=function(e,t){t.boneNum&&this.create(t)},t.prototype.onUpdate=function(e,t){this.cleanUp(),this.create(e)},t.prototype.onTick=function(e,t){he(this.scene).SkinnedSkeletonComponent.UPDATE_MATS([this._skeleton],1)},Object.defineProperty(t.prototype,"useDataTexture",{get:function(){return!1},enumerable:!1,configurable:!0}),t}(oo);var Dp=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},e(t,r)};return function(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();const Np=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Dp(t,e),t.prototype._getUniformDesc=function(){var t=this.el.getComponent(Rp);return t?function(e,t,r){void 0===r&&(r=!1);var n="mesh-skinned-"+t+(r?"-useDataTexture":""),o=e.assets.getAsset("uniform-desc",n);return o||(o=r?e.createUniformBlockDesc({uniforms:to(to([],ro()),[{name:"u_boneMatrixTexture",type:ue.EUniformType.SAMPLER}])}):e.createUniformBlockDesc({uniforms:to(to([],ro()),[{name:"u_boneOffsetMatrix",type:ue.EUniformType.MAT4,num:t}])})),o}(this.scene,t.boneNum,t.useDataTexture):e.prototype._getUniformDesc.call(this)},t.prototype._getMeshType=function(){return ue.EMeshRenderType.Skinned3D},t.prototype.onTick=function(t,r){e.prototype.onTick.call(this,t,r);var n=this.el.getComponent(Rp);this._mesh.skinSkeleton=n.skeleton},t.prototype._getMarcos=function(t){var r=e.prototype._getMarcos.call(this,t),n=this.el.getComponent(Rp);return n?(r.WX_SKINNED=!0,r.WX_BONE_NUM=n.boneNum,n.useDataTexture?r.WX_USE_BONE_MATRIX_TEXTURE=!0:r.WX_USE_BONE_MATRIX_TEXTURE=!1):(r.WX_SKINNED=!1,r.WX_BONE_NUM=0,r.WX_USE_BONE_MATRIX_TEXTURE=!1),r},t}(gs);var Ip,Lp=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},e(t,r)};return function(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();!function(e){e[e.TRANSLATION=0]="TRANSLATION",e[e.ROTATION=1]="ROTATION",e[e.SCALE=2]="SCALE",e[e.WEIGHTS=3]="WEIGHTS"}(Ip||(Ip={}));const Fp=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.resource=null,t}return Lp(t,e),Object.defineProperty(t.prototype,"nodeName",{get:function(){return"Target"},enumerable:!1,configurable:!0}),t.prototype.build=function(){},t.prototype.preload=function(e){return t=this,r=void 0,o=function(){var t,r;return function(e,t){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}}(this,(function(n){return t=e[0],r="number"==typeof this.raw.node?t[this.raw.node]:null,this.resource={node:r,path:Ip[this.raw.path.toUpperCase()],extras:this.raw.extras},[2,this.resource]}))},new((n=Promise)||(n=Promise))((function(e,i){function a(e){try{u(o.next(e))}catch(e){i(e)}}function s(e){try{u(o.throw(e))}catch(e){i(e)}}function u(t){var r;t.done?e(t.value):(r=t.value,r instanceof n?r:new n((function(e){e(r)}))).then(a,s)}u((o=o.apply(t,r||[])).next())}));var t,r,n,o},t.prototype.getLoadedResource=function(){return this.resource},t}(qe);var kp=function(){return kp=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},kp.apply(this,arguments)},Up=(function(){function e(){this.list=[]}e.prototype.add=function(e){this.list.push(e)},e.prototype.release=function(){for(var e,t=0,r=this.list;t<r.length;t++){var n=r[t];null===(e=n.destroy)||void 0===e||e.call(n)}this.list=[]}}(),function(){function e(e,t){this._scene=e,this.model=t,this.jsonRaw=void 0}return e.createFromBuffer=function(e,t,r){return Q_.createGLTFModel(e,t,{src:"",options:r,type:"unused",assetId:"unused"})},e.prototype.instantiate=function(e,t){if(e.scene!==this._scene)throw"GLTF model instantiate in a different context!";var r=this.model.scene;if(!r)return Ee.warn("Trying to instantiate a GLTFModel without scenes."),[[],new Map,[],[]];for(var n=[],o=new Map,i=0,a=r;i<a.length;i++){var s=a[i],u=this.dfsBuildNodes(e,s,this.model,o);n.push(u)}for(var c=[],l=Sr.IDENTITY,f=0,p=r;f<p.length;f++)s=p[f],this.dfsBuildMesh(s,this.model,o,c,l,t);return[n,o,this.buildAnimation(e,this.model,o),c]},e.prototype.dfsBuildNodes=function(e,t,r,n){var o=this._scene.createElement(Uc);if(o.name=t.data.name,e.addChild(o),n.set(t,o),t.data.transform.quat&&(t.data.transform.rotation=t.data.transform.quat.toEulerAngles().toArray().map((function(e){return 180*e/Math.PI}))),o.getComponent(Di).setData(t.data.transform),t.extensions&&t.extensions.KHR_lights_punctual){var i=t.extensions.KHR_lights_punctual.lightInfo,a=this._scene.createElement(hf);a.name=i.name,a.getComponent(Fi).setData(kp({},i)),o.addChild(a)}for(var s=0,u=t.children;s<u.length;s++){var c=u[s];this.dfsBuildNodes(o,c,r,n)}return o},e.prototype.dfsBuildMesh=function(e,t,r,n,o,i){var a=r.get(e),s=e.data.transform,u=Sr.composeTQS(Tt.createFromArray(s.position),s.quat,Tt.createFromArray(s.scale)),c=o.multiply(u);if(e.data.mesh){var l=e.data.mesh,f=[Tt.createFromNumber(0,0,0),wi.createFromNumber(0,0,0,1),Tt.createFromNumber(1,1,1)],p=new Sr;c.decomposeTransRotMatScale(f[0],p,f[2]),f[1]=wi.createFromMatrix4(p);for(var h=0,d=l.subMeshes;h<d.length;h++){var _=d[h],y={geometry:_.geometry,material:_.material,castShadow:i.castShadow,receiveShadow:i.receiveShadow,neverCull:i.neverCull},v=this._scene.createElement(Uc);if(a.addChild(v),e.data.skin){var m=e.data.skin,g={boneNum:m.joints.length,boneNodes:m.joints.map((function(e){return r.get(t.nodes[e]).getComponent(Di)})),boneInverseMatrices:m.inverseBindMatrices},b=(v.addComponent(Rp,g),v.addComponent(Np,y));n.push([b,f]),b.morphWeights.set(l.weights)}else{var w=v.addComponent(gs,y);n.push([w,f]),w.morphWeights.set(l.weights)}}}for(var x=0,E=e.children;x<E.length;x++){var S=E[x];this.dfsBuildMesh(S,t,r,n,c,i)}},e.prototype.buildAnimation=function(e,t,r){for(var n,o=[],i={},a=[],s=0;s<t.animations.length;s++){var u=this._scene.createElement(Uc);e.addChild(u);for(var c=t.animations[s],l=[],f=0,p=c.channels;f<p.length;f++){var h=p[f],d=r.get(h.target.node);if(h.target.path!==Ip.WEIGHTS)l.push(d.getComponent(Di).node);else{for(var _={type:Op.Morph,target:d,subElements:[]},y=0;y<h.extraMorphNodeCount+1;y++){var v=this._scene.createElement(Uc);d.addChild(v),l.push(v.getComponent(Di).node),_.subElements.push(v)}a.push(_)}}var m=null!==(n=c.name)&&void 0!==n?n:"gltfAnimation";i[m]||(i[m]=0);var g={clip:c.clip,bindings:l,frameCount:c.frameCount,names:[m,m+"#"+i[m]],simulators:a};i[m]++;var b=new Mp(this._scene,g);o.push(b)}return o},e}());const Bp=Up;var jp,Vp=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},e(t,r)};return function(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();!function(e){e[e.STEP=0]="STEP",e[e.LINEAR=1]="LINEAR",e[e.CUBICSPLINE=2]="CUBICSPLINE"}(jp||(jp={}));var zp=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.resource=null,t}return Vp(t,e),Object.defineProperty(t.prototype,"nodeName",{get:function(){return"Sampler"},enumerable:!1,configurable:!0}),t.prototype.build=function(){},t.prototype.preload=function(e){var t,r,n,o,i;return r=this,n=void 0,i=function(){var r,n,o,i,a;return function(e,t){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}}(this,(function(s){return r=e[0],n=r[this.raw.input],o=r[this.raw.output],i=Math.min(n.count,o.count),(a=jp[null!==(t=this.raw.interpolation)&&void 0!==t?t:"LINEAR"])===jp.CUBICSPLINE&&this.assert(o.count>=3*i,"invalid output accessor: not enough elements for cubic spline animation."),this.resource={input:n,output:o,interpolation:a,sampleCount:i,extras:this.raw.extras},[2,this.resource]}))},new((o=Promise)||(o=Promise))((function(e,t){function a(e){try{u(i.next(e))}catch(e){t(e)}}function s(e){try{u(i.throw(e))}catch(e){t(e)}}function u(t){var r;t.done?e(t.value):(r=t.value,r instanceof o?r:new o((function(e){e(r)}))).then(a,s)}u((i=i.apply(r,n||[])).next())}))},t.prototype.getLoadedResource=function(){return this.resource},t}(qe);const Gp=zp;var Wp,Xp,Hp=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},e(t,r)};return function(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();!function(e){e[e.tx=1]="tx",e[e.ty=2]="ty",e[e.tz=3]="tz",e[e.sx=4]="sx",e[e.sy=5]="sy",e[e.sz=6]="sz",e[e.qx=7]="qx",e[e.qy=8]="qy",e[e.qz=9]="qz",e[e.qw=10]="qw",e[e.ex=11]="ex",e[e.ey=12]="ey",e[e.ez=13]="ez"}(Xp||(Xp={}));var qp=Xp,Yp=((Wp={})[Ip.TRANSLATION]=[qp.tx,qp.ty,qp.tz],Wp[Ip.ROTATION]=[qp.qx,qp.qy,qp.qz,qp.qw],Wp[Ip.SCALE]=[qp.sx,qp.sy,qp.sz],Wp[Ip.WEIGHTS]=[qp.tx,qp.ty,qp.tz,qp.qx,qp.qy,qp.qz,qp.sx,qp.sy,qp.sz],Wp),Zp=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.resource=null,t}return Hp(t,e),Object.defineProperty(t.prototype,"nodeName",{get:function(){return"Channel"},enumerable:!1,configurable:!0}),t.prototype.build=function(){this.targetNode=new Fp(this.raw.target,this)},t.prototype.preload=function(e){return t=this,r=void 0,o=function(){var t,r,n,o,i,a,s,u,c;return function(e,t){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}}(this,(function(l){switch(l.label){case 0:return t=e[0],r=e[1],[4,this.targetNode.preload([t])];case 1:return n=l.sent(),o=r[this.raw.sampler],i=Yp[n.path],a=i.length,s=0,n.path===Ip.WEIGHTS&&(u=o.output.count*o.output.elementLength/o.sampleCount,a=u,s=Math.floor(u/9)),c=16*o.sampleCount*a,this.resource={target:n,sampler:o,vectorGroups:a,headerBytesNeeded:12*a,bodyBytesNeeded:c,serializeHeaderOnBuffer:this.serializeHeaderOnBuffer,serializeBodyOnBuffer:this.serializeBodyOnBuffer,extraMorphNodeCount:s,extras:this.raw.extras},[2,this.resource]}}))},new((n=Promise)||(n=Promise))((function(e,i){function a(e){try{u(o.next(e))}catch(e){i(e)}}function s(e){try{u(o.throw(e))}catch(e){i(e)}}function u(t){var r;t.done?e(t.value):(r=t.value,r instanceof n?r:new n((function(e){e(r)}))).then(a,s)}u((o=o.apply(t,r||[])).next())}));var t,r,n,o},t.prototype.getLoadedResource=function(){return this.resource},t.prototype.serializeHeaderOnBuffer=function(e,t){var r=Yp[this.target.path];if(this.target.path!==Ip.WEIGHTS)for(var n=0;n<r.length;n++){var o=r[n],i=this.sampler.sampleCount;e.write(qi.Type.UInt32,t),e.write(qi.Type.UInt32,o),e.write(qi.Type.UInt32,i)}else{var a=0;for(n=0;n<this.vectorGroups;n++)o=r[a],i=this.sampler.sampleCount,e.write(qi.Type.UInt32,t),e.write(qi.Type.UInt32,o),e.write(qi.Type.UInt32,i),(a+=1)>=9&&(a=0,t+=1)}},t.prototype.serializeBodyOnBuffer=function(e){for(var t=this,r=(Yp[this.target.path],0),n=function(n){var i=o.sampler.sampleCount,a=o.sampler.input,s=o.sampler.output,u=o.sampler.interpolation===jp.CUBICSPLINE,c=function(e){return Math.round(60*a.getCompAt(e,0))},l=function(e){return u?s.getCompAt(3*e+1,n):s.getCompAt(e,n)};o.target.path===Ip.WEIGHTS&&(l=function(e){return u?s.view[(3*e+1)*t.vectorGroups+n]:s.view[e*t.vectorGroups+n]});for(var f=c(0),p=l(0),h=1/0,d=0;d<i;d++){var _=f,y=p;f=d+1<i?c(d+1):1/0,p=d+1<i?l(d+1):1/0;var v=1/0,m=1/0;o.sampler.interpolation===jp.LINEAR?o.target.path===Ip.ROTATION?v=m=NaN:(v=(p-y)/(f-_),m=h):u&&(o.target.path!==Ip.WEIGHTS?(v=s.getCompAt(3*d+0,n),m=s.getCompAt(3*d+2,n)):(v=s.view[(3*d+0)*o.vectorGroups+n],m=s.view[(3*d+2)*o.vectorGroups+n])),e.write(qi.Type.UInt32,_),e.write(qi.Type.Float,y),e.write(qi.Type.Float,m),e.write(qi.Type.Float,v),r=Math.max(r,_),h=v}},o=this,i=0;i<this.vectorGroups;i++)n(i);return r},t}(qe);const Kp=Zp;var Qp=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},e(t,r)};return function(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();const $p=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Qp(t,e),t.prototype.ChildCtor=function(e){return new Kp(e,this)},Object.defineProperty(t.prototype,"nodeName",{get:function(){return"Channels"},enumerable:!1,configurable:!0}),t.prototype.getLoadedResource=function(){return this.resources},t}(Ye);var Jp=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},e(t,r)};return function(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();const eh=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Jp(t,e),t.prototype.ChildCtor=function(e){return new Gp(e,this)},Object.defineProperty(t.prototype,"nodeName",{get:function(){return"Samplers"},enumerable:!1,configurable:!0}),t.prototype.getLoadedResource=function(){return this.resources},t}(Ye);var th=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},e(t,r)};return function(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),rh=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.resource=null,t}return th(t,e),Object.defineProperty(t.prototype,"nodeName",{get:function(){return"Animation"},enumerable:!1,configurable:!0}),t.prototype.build=function(){this.samplersNode=new eh(this.raw.samplers,this),this.channelsNode=new $p(this.raw.channels,this),this.samplersNode.build(),this.channelsNode.build()},t.prototype.preload=function(e){return t=this,r=void 0,o=function(){var t,r,n,o,i,a,s,u,c,l,f,p,h,d,_;return function(e,t){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}}(this,(function(y){switch(y.label){case 0:return t=e[0],r=e[1],[4,this.samplersNode.preload([t])];case 1:return n=y.sent(),[4,this.channelsNode.preload([r,n])];case 2:for(o=y.sent(),i=16,d=0;d<o.length;d++)i+=o[d].headerBytesNeeded+o[d].bodyBytesNeeded;for(this.assert(i%4==0),a=new ArrayBuffer(i),s=new qi(a),u=s.reserve(qi.Type.UInt32),s.write(qi.Type.Float,60),c=s.reserve(qi.Type.UInt32),l=s.reserve(qi.Type.UInt32),f=0,p=0,d=0;d<o.length;d++)o[d].serializeHeaderOnBuffer(s,p),f+=o[d].vectorGroups,p+=o[d].extraMorphNodeCount+1;for(u.write(s.pos()),l.write(f),h=0,d=0;d<o.length;d++)h=Math.max(h,o[d].serializeBodyOnBuffer(s));return c.write(h),(_=new(he(this.scene).AnimationClipModel)).setAnimationClip(a),this.resource={clip:_,channels:o,frameCount:h,name:this.raw.name,extras:this.raw.extras},[2,this.resource]}}))},new((n=Promise)||(n=Promise))((function(e,i){function a(e){try{u(o.next(e))}catch(e){i(e)}}function s(e){try{u(o.throw(e))}catch(e){i(e)}}function u(t){var r;t.done?e(t.value):(r=t.value,r instanceof n?r:new n((function(e){e(r)}))).then(a,s)}u((o=o.apply(t,r||[])).next())}));var t,r,n,o},t.prototype.getLoadedResource=function(){return this.resource},t}(qe);const nh=rh;var oh=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},e(t,r)};return function(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();const ih=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return oh(t,e),t.prototype.ChildCtor=function(e){return new nh(e,this)},Object.defineProperty(t.prototype,"nodeName",{get:function(){return"Animations"},enumerable:!1,configurable:!0}),t.prototype.getLoadedResource=function(){return this.resources},t}(Ye);var ah=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},e(t,r)};return function(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();const sh=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return ah(t,e),t.prototype.ChildCtor=function(e){return new Yt(e,this)},Object.defineProperty(t.prototype,"nodeName",{get:function(){return"Accessors"},enumerable:!1,configurable:!0}),t.prototype.getLoadedResource=function(){return this.resources},t}(Ye);var uh=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},e(t,r)};return function(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),ch=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.resource=null,t}return uh(t,e),Object.defineProperty(t.prototype,"nodeName",{get:function(){return"Buffer"},enumerable:!1,configurable:!0}),t.prototype.build=function(){},t.prototype.preload=function(){var e,t,r,n,o;return t=this,r=void 0,o=function(){var t,r,n,o;return function(e,t){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}}(this,(function(i){switch(i.label){case 0:return this.raw.uri?(t=null!==(e=this.findRoot().uri)&&void 0!==e?e:"","/"!==this.raw.uri[0]&&t&&(t+="/"),r=this.raw.uri,this.raw.uri.startsWith("data:")||this.raw.uri.startsWith("http")||(r=t+this.raw.uri),[4,wa(r,"binary")]):[3,2];case 1:return n=i.sent().data,this.resource={buffer:n,extras:this.raw.extras},[2,this.resource];case 2:return o=this.findRoot().defaultBinary,this.assert(null!==o,"using default binary in a non-glb file."),this.resource={buffer:o,extras:this.raw.extras},[2,this.resource]}}))},new((n=Promise)||(n=Promise))((function(e,i){function a(e){try{u(o.next(e))}catch(e){i(e)}}function s(e){try{u(o.throw(e))}catch(e){i(e)}}function u(t){var r;t.done?e(t.value):(r=t.value,r instanceof n?r:new n((function(e){e(r)}))).then(a,s)}u((o=o.apply(t,r||[])).next())}))},t.prototype.getLoadedResource=function(){return this.resource},t}(qe);const lh=ch;var fh=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},e(t,r)};return function(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();const ph=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return fh(t,e),t.prototype.ChildCtor=function(e){return new lh(e,this)},Object.defineProperty(t.prototype,"nodeName",{get:function(){return"Buffers"},enumerable:!1,configurable:!0}),t.prototype.getLoadedResource=function(){return this.resources},t}(Ye);var hh,dh=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},e(t,r)};return function(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();!function(e){e[e.ARRAY_BUFFER=34962]="ARRAY_BUFFER",e[e.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER"}(hh||(hh={}));var _h=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.resource=null,t}return dh(t,e),Object.defineProperty(t.prototype,"nodeName",{get:function(){return"BufferView"},enumerable:!1,configurable:!0}),t.prototype.build=function(){},t.prototype.preload=function(e){var t,r,n,o,i;return r=this,n=void 0,i=function(){var r,n,o;return function(e,t){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}}(this,(function(i){return r=e[0],n=r[this.raw.buffer],o=null!==(t=this.raw.byteOffset)&&void 0!==t?t:0,this.resource={get data(){return null==n?void 0:n.buffer},byteOffset:o,byteStride:this.raw.byteStride,byteLength:this.raw.byteLength,target:this.raw.target,extras:this.raw.extras,getSlicedData:function(){return this._sliced||(this._sliced=this.data.slice(this.byteOffset,this.byteOffset+this.byteLength)),this._sliced},getUint8View:function(){return new Uint8Array(this.data,this.byteOffset,this.byteLength)},_sliced:null},[2,this.resource]}))},new((o=Promise)||(o=Promise))((function(e,t){function a(e){try{u(i.next(e))}catch(e){t(e)}}function s(e){try{u(i.throw(e))}catch(e){t(e)}}function u(t){var r;t.done?e(t.value):(r=t.value,r instanceof o?r:new o((function(e){e(r)}))).then(a,s)}u((i=i.apply(r,n||[])).next())}))},t.prototype.getLoadedResource=function(){return this.resource},t}(qe);const yh=_h;var vh=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},e(t,r)};return function(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();const mh=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return vh(t,e),t.prototype.ChildCtor=function(e){return new yh(e,this)},Object.defineProperty(t.prototype,"nodeName",{get:function(){return"BufferViews"},enumerable:!1,configurable:!0}),t.prototype.getLoadedResource=function(){return this.resources},t}(Ye);var gh=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},e(t,r)};return function(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();const bh=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return gh(t,e),t.prototype.ChildCtor=function(e){return new Wr(e,this)},Object.defineProperty(t.prototype,"nodeName",{get:function(){return"Primitives"},enumerable:!1,configurable:!0}),t.prototype.getLoadedResource=function(){return this.resources},t}(Ye);var wh=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},e(t,r)};return function(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),xh=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.resource=null,t}return wh(t,e),Object.defineProperty(t.prototype,"nodeName",{get:function(){return"Mesh"},enumerable:!1,configurable:!0}),t.prototype.build=function(){this.primitivesNode=new bh(this.raw.primitives,this),this.primitivesNode.build()},t.prototype.preload=function(e){var t,r,n,o,i;return r=this,n=void 0,i=function(){var r,n,o,i;return function(e,t){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}}(this,(function(a){switch(a.label){case 0:for(r=null!==(t=this.raw.weights)&&void 0!==t?t:[],n=new Array(16).fill(0),o=0;o<r.length;o++)n[o]=r[o];return[4,this.primitivesNode.preload(e)];case 1:return i=a.sent(),this.resource={subMeshes:i,weights:n,name:this.raw.name,extras:this.raw.extras},[2,this.resource]}}))},new((o=Promise)||(o=Promise))((function(e,t){function a(e){try{u(i.next(e))}catch(e){t(e)}}function s(e){try{u(i.throw(e))}catch(e){t(e)}}function u(t){var r;t.done?e(t.value):(r=t.value,r instanceof o?r:new o((function(e){e(r)}))).then(a,s)}u((i=i.apply(r,n||[])).next())}))},t.prototype.getLoadedResource=function(){return this.resource},t}(qe);const Eh=xh;var Sh=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},e(t,r)};return function(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();const Th=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Sh(t,e),t.prototype.ChildCtor=function(e){return new Eh(e,this)},Object.defineProperty(t.prototype,"nodeName",{get:function(){return"Meshes"},enumerable:!1,configurable:!0}),t.prototype.getLoadedResource=function(){return this.resources},t}(Ye),Oh=function(){function e(e){e.offset?this.offset=cr.createFromNumber(e.offset[0],e.offset[1]):this.offset=cr.createFromNumber(0,0),e.rotation?this.rotation=e.rotation:this.rotation=0,e.scale?this.scale=cr.createFromNumber(e.scale[0],e.scale[1]):this.scale=cr.createFromNumber(1,1)}return Object.defineProperty(e.prototype,"uvMatrixArray",{get:function(){return this.updateUVMatrixArray(),this._uvMatrixArray},enumerable:!1,configurable:!0}),e.prototype.setUvTransform=function(e,t,r,n,o){var i=Math.cos(o),a=Math.sin(o);this._uvMatrixArray=[r*i,-r*a,0,0,n*a,n*i,0,0,0,0,1,0,e,t,0,1]},e.prototype.updateUVMatrixArray=function(){this.setUvTransform(this.offset.x,this.offset.y,this.scale.x,this.scale.y,this.rotation)},e}();var Ah=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},e(t,r)};return function(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Ch=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.resource=null,t}return Ah(t,e),Object.defineProperty(t.prototype,"nodeName",{get:function(){return"TextureInfo"},enumerable:!1,configurable:!0}),t.prototype.build=function(){},t.prototype.preload=function(){var e,t,r,n,o;return t=this,r=void 0,o=function(){var t;return function(e,t){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}}(this,(function(r){return this.resource={index:this.raw.index,texCoord:null!==(e=this.raw.texCoord)&&void 0!==e?e:0,extras:this.raw.extras},(t=this.raw.extensions&&this.raw.extensions.KHR_texture_transform||void 0)&&(t.offset||t.rotation||t.scale)&&(this.resource.transformInfo=new Oh(t)),[2,this.resource]}))},new((n=Promise)||(n=Promise))((function(e,i){function a(e){try{u(o.next(e))}catch(e){i(e)}}function s(e){try{u(o.throw(e))}catch(e){i(e)}}function u(t){var r;t.done?e(t.value):(r=t.value,r instanceof n?r:new n((function(e){e(r)}))).then(a,s)}u((o=o.apply(t,r||[])).next())}))},t.prototype.getLoadedResource=function(){return this.resource},t}(qe);const Mh=Ch;var Ph=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},e(t,r)};return function(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Rh=function(){return Rh=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Rh.apply(this,arguments)},Dh=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.resource=null,t}return Ph(t,e),Object.defineProperty(t.prototype,"nodeName",{get:function(){return"PBRMetallicRoughness"},enumerable:!1,configurable:!0}),t.prototype.build=function(){void 0!==this.raw.baseColorTexture&&(this.baseColorTextureNode=new Mh(this.raw.baseColorTexture,this),this.baseColorTextureNode.build()),void 0!==this.raw.metallicRoughnessTexture&&(this.metallicRoughnessTexture=new Mh(this.raw.metallicRoughnessTexture,this),this.metallicRoughnessTexture.build())},t.prototype.preload=function(e){var t,r,n,o,i,a,s,u,c;return a=this,s=void 0,c=function(){var a,s,u,c,l,f,p;return function(e,t){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}}(this,(function(h){switch(h.label){case 0:return a=e[0],p={baseColorFactor:null!==(t=this.raw.baseColorFactor)&&void 0!==t?t:[1,1,1,1]},[4,null===(r=this.baseColorTextureNode)||void 0===r?void 0:r.preload()];case 1:return p.baseColorTexture=h.sent(),p.metallicFactor=null!==(n=this.raw.metallicFactor)&&void 0!==n?n:1,p.roughnessFactor=null!==(o=this.raw.roughnessFactor)&&void 0!==o?o:1,[4,null===(i=this.metallicRoughnessTexture)||void 0===i?void 0:i.preload()];case 2:return p.metallicRoughnessTexture=h.sent(),u={u_baseColorFactor:(s=p).baseColorFactor,u_baseColorMap:s.baseColorTexture?a[s.baseColorTexture.index].texture:void 0,u_metallicRoughnessValues:[s.metallicFactor,s.roughnessFactor],u_metallicRoughnessMap:s.metallicRoughnessTexture?a[s.metallicRoughnessTexture.index].texture:void 0},c={},l=Rh(Rh({WX_MANUAL_LINEAR_BASECOLORFACTOR:!0},Lr("baseColorMap",s.baseColorTexture)),Lr("metallicRoughnessMap",s.metallicRoughnessTexture)),f=[],s.baseColorTexture&&s.baseColorTexture.transformInfo&&(f=s.baseColorTexture.transformInfo.uvMatrixArray,l.WX_USE_UVTRANSFORM_BASECOLOR=!0),s.metallicRoughnessTexture&&s.metallicRoughnessTexture.transformInfo&&(f=s.metallicRoughnessTexture.transformInfo.uvMatrixArray,l.WX_USE_UVTRANSFORM_METALROUGHNESS=!0),f.length>0&&(u.u_uvTransform=f,l.WX_USE_UVTRANSFORM=!0),this.resource={uniform:u,renderStates:c,macros:l,extras:this.raw.extras},[2,this.resource]}}))},new((u=Promise)||(u=Promise))((function(e,t){function r(e){try{o(c.next(e))}catch(e){t(e)}}function n(e){try{o(c.throw(e))}catch(e){t(e)}}function o(t){var o;t.done?e(t.value):(o=t.value,o instanceof u?o:new u((function(e){e(o)}))).then(r,n)}o((c=c.apply(a,s||[])).next())}))},t.prototype.getLoadedResource=function(){return this.resource},t}(qe);const Nh=Dh;var Ih=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},e(t,r)};return function(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Lh=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.resource=null,t}return Ih(t,e),Object.defineProperty(t.prototype,"nodeName",{get:function(){return"NormalTextureInfo"},enumerable:!1,configurable:!0}),t.prototype.build=function(){},t.prototype.preload=function(){var e,t,r,n,o,i;return r=this,n=void 0,i=function(){var r;return function(e,t){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}}(this,(function(n){return this.resource={index:this.raw.index,texCoord:null!==(e=this.raw.texCoord)&&void 0!==e?e:0,scale:null!==(t=this.raw.scale)&&void 0!==t?t:1,extras:this.raw.extras},(r=this.raw.extensions&&this.raw.extensions.KHR_texture_transform||void 0)&&(r.offset||r.rotation||r.scale)&&(this.resource.transformInfo=new Oh(r)),[2,this.resource]}))},new((o=Promise)||(o=Promise))((function(e,t){function a(e){try{u(i.next(e))}catch(e){t(e)}}function s(e){try{u(i.throw(e))}catch(e){t(e)}}function u(t){var r;t.done?e(t.value):(r=t.value,r instanceof o?r:new o((function(e){e(r)}))).then(a,s)}u((i=i.apply(r,n||[])).next())}))},t.prototype.getLoadedResource=function(){return this.resource},t}(qe);const Fh=Lh;var kh=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},e(t,r)};return function(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Uh=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.resource=null,t}return kh(t,e),Object.defineProperty(t.prototype,"nodeName",{get:function(){return"OcclusionTextureInfo"},enumerable:!1,configurable:!0}),t.prototype.build=function(){},t.prototype.preload=function(){var e,t,r,n,o,i;return r=this,n=void 0,i=function(){var r;return function(e,t){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}}(this,(function(n){return this.resource={index:this.raw.index,texCoord:null!==(e=this.raw.texCoord)&&void 0!==e?e:0,strength:null!==(t=this.raw.strength)&&void 0!==t?t:1,extras:this.raw.extras},(r=this.raw.extensions&&this.raw.extensions.KHR_texture_transform||void 0)&&(r.offset||r.rotation||r.scale)&&(this.resource.transformInfo=new Oh(r)),[2,this.resource]}))},new((o=Promise)||(o=Promise))((function(e,t){function a(e){try{u(i.next(e))}catch(e){t(e)}}function s(e){try{u(i.throw(e))}catch(e){t(e)}}function u(t){var r;t.done?e(t.value):(r=t.value,r instanceof o?r:new o((function(e){e(r)}))).then(a,s)}u((i=i.apply(r,n||[])).next())}))},t.prototype.getLoadedResource=function(){return this.resource},t}(qe);const Bh=Uh;var jh,Vh=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},e(t,r)};return function(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),zh=function(){return zh=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},zh.apply(this,arguments)},Gh=function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function a(e){try{u(n.next(e))}catch(e){i(e)}}function s(e){try{u(n.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}u((n=n.apply(e,t||[])).next())}))},Wh=function(e,t){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}};!function(e){e[e.OPAQUE=0]="OPAQUE",e[e.MASK=1]="MASK",e[e.BLEND=2]="BLEND"}(jh||(jh={}));var Xh=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.resource=null,t}return Vh(t,e),Object.defineProperty(t.prototype,"nodeName",{get:function(){return"Material"},enumerable:!1,configurable:!0}),t.prototype.build=function(){void 0!==this.raw.pbrMetallicRoughness&&(this.pbrMetallicRoughness=new Nh(this.raw.pbrMetallicRoughness,this),this.pbrMetallicRoughness.build()),void 0!==this.raw.normalTexture&&(this.normalTexture=new Fh(this.raw.normalTexture,this),this.normalTexture.build()),void 0!==this.raw.occlusionTexture&&(this.occlusionTexture=new Bh(this.raw.occlusionTexture,this),this.occlusionTexture.build()),void 0!==this.raw.emissiveTexture&&(this.emissiveTexture=new Mh(this.raw.emissiveTexture,this),this.emissiveTexture.build())},t.prototype.preloadWithoutPBR=function(e){var t,r,n,o,i,a,s,u;return Gh(this,void 0,Promise,(function(){var c,l,f,p,h,d,_,y;return Wh(this,(function(v){switch(v.label){case 0:return c=e[0],y={},[4,null===(t=this.normalTexture)||void 0===t?void 0:t.preload()];case 1:return y.normalTexture=v.sent(),[4,null===(r=this.occlusionTexture)||void 0===r?void 0:r.preload()];case 2:return y.occlusionTexture=v.sent(),[4,null===(n=this.emissiveTexture)||void 0===n?void 0:n.preload()];case 3:return y.emissiveTexture=v.sent(),y.emissiveFactor=null!==(o=this.raw.emissiveFactor)&&void 0!==o?o:[0,0,0],y.alphaMode=null!==(i=jh[this.raw.alphaMode])&&void 0!==i?i:jh.OPAQUE,y.alphaCutoff=null!==(a=this.raw.alphaCutoff)&&void 0!==a?a:.5,y.doubleSided=!!this.raw.doubleSided,f={u_normalMap:(l=y).normalTexture?c[l.normalTexture.index].texture:void 0,u_normalScale:[null===(s=l.normalTexture)||void 0===s?void 0:s.scale],u_occlusionMap:l.occlusionTexture?c[l.occlusionTexture.index].texture:void 0,u_occlusionStrength:[null===(u=l.occlusionTexture)||void 0===u?void 0:u.strength],u_emissiveMap:l.emissiveTexture?c[l.emissiveTexture.index].texture:void 0,u_emissiveFactor:l.emissiveFactor,u_alphaCutoff:[l.alphaCutoff]},p={cullFace:l.doubleSided?ue.ECullMode.NONE:ue.ECullMode.FRONT,blendOn:l.alphaMode===jh.BLEND,renderQueue:l.alphaMode===jh.BLEND?2500:1e3},l.alphaMode===jh.BLEND&&(p.blendSrcRGB=ue.EBlendFactor.SRC_ALPHA,p.blendDstRGB=ue.EBlendFactor.ONE_MINUS_SRC_ALPHA,p.blendSrcAlpha=ue.EBlendFactor.ONE,p.blendDstAlpha=ue.EBlendFactor.ONE_MINUS_SRC_ALPHA,p.depthWrite=!1),h=zh(zh(zh({WX_USE_GLTF:!0},Lr("normalMap",l.normalTexture)),Lr("occlusionMap",l.occlusionTexture)),Lr("emissiveMap",l.emissiveTexture)),d=[],l.normalTexture&&l.normalTexture.transformInfo&&(_=l.normalTexture.transformInfo.uvMatrixArray,f.u_normalMapTransform=_,h.WX_USE_UVTRANSFORM_NORMAL=!0),l.occlusionTexture&&l.occlusionTexture.transformInfo&&(d=l.occlusionTexture.transformInfo.uvMatrixArray,h.WX_USE_UVTRANSFORM_OCCLUSION=!0),l.emissiveTexture&&l.emissiveTexture.transformInfo&&(d=l.emissiveTexture.transformInfo.uvMatrixArray,h.WX_USE_UVTRANSFORM_EMISSIVE=!0),d.length>0&&(f.u_uvTransform=d,h.WX_USE_UVTRANSFORM=!0),l.alphaMode===jh.BLEND&&(h.WX_USE_BLEND=!0),l.alphaMode===jh.MASK&&(h.WX_USE_ALPHA_CUTOFF=!0),l.doubleSided||(h.WX_USE_CULLON=!0),[2,{uniform:f,renderStates:p,macros:h}]}}))}))},t.prototype.preload=function(e){var t,r,n,o,i;return Gh(this,void 0,Promise,(function(){var a,s,u,c,l,f,p,h;return Wh(this,(function(d){switch(d.label){case 0:return h={},[4,null===(t=this.pbrMetallicRoughness)||void 0===t?void 0:t.preload(e)];case 1:return h.pbrMetallicRoughness=d.sent(),[4,this.preloadWithoutPBR(e)];case 2:return h.ownProperties=d.sent(),a=h,s=this.scene.assets.getAsset("effect","standard"),u=zh(zh({},a.ownProperties.uniform),null===(r=a.pbrMetallicRoughness)||void 0===r?void 0:r.uniform),c=zh(zh({},a.ownProperties.renderStates),null===(n=a.pbrMetallicRoughness)||void 0===n?void 0:n.renderStates),l=zh(zh({},null===(o=a.ownProperties)||void 0===o?void 0:o.macros),null===(i=a.pbrMetallicRoughness)||void 0===i?void 0:i.macros),f={uniform:u,renderStates:c,macros:l},[4,this.extensionSlot("BeforeCreateMaterial",f)];case 3:return d.sent(),(p=new Ir(this.scene)).initByEffect(s,u),Fr(p,c),p.setMacros(l),this.resource={material:p,extras:this.raw.extras},[2,this.resource]}}))}))},t.prototype.getLoadedResource=function(){return this.resource},t}(qe);const Hh=Xh;var qh=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},e(t,r)};return function(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();const Yh=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return qh(t,e),t.prototype.ChildCtor=function(e){return new Hh(e,this)},Object.defineProperty(t.prototype,"nodeName",{get:function(){return"Materials"},enumerable:!1,configurable:!0}),t.prototype.getLoadedResource=function(){return this.resources},t}(Ye);var Zh=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},e(t,r)};return function(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Kh=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.resource=null,t}return Zh(t,e),Object.defineProperty(t.prototype,"nodeName",{get:function(){return"Node"},enumerable:!1,configurable:!0}),t.prototype.build=function(){},t.prototype.preload=function(e){var t,r,n,o,i,a;return n=this,o=void 0,a=function(){var n,o,i,a,s,u,c,l;return function(e,t){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}}(this,(function(f){return this.validate(qr.UnsupportedNodeWeights),n=e[0],o=e[1],i={visible:!0,nodeId:"",position:[0,0,0],rotation:[0,0,0],scale:[1,1,1]},this.raw.matrix?(a=new Sr(new Float32Array(this.raw.matrix)),s=new Tt,u=new Sr,c=new Tt,a.decomposeTransRotMatScale(s,u,c),l=wi.createFromMatrix4(u),i.position=[s.x,s.y,s.z],i.quat=l,i.scale=[c.x,c.y,c.z]):(this.raw.translation&&(i.position=this.raw.translation),this.raw.rotation?i.quat=wi.createFromArray(this.raw.rotation).normalize():i.quat=wi.DEFAULT,this.raw.scale&&(i.scale=this.raw.scale)),this.resource={children:null!==(t=this.raw.children)&&void 0!==t?t:[],transform:i,mesh:n[this.raw.mesh],skin:o[this.raw.skin],name:null!==(r=this.raw.name)&&void 0!==r?r:"UnnamedGLTFNode",extras:this.raw.extras},[2,this.resource]}))},new((i=Promise)||(i=Promise))((function(e,t){function r(e){try{u(a.next(e))}catch(e){t(e)}}function s(e){try{u(a.throw(e))}catch(e){t(e)}}function u(t){var n;t.done?e(t.value):(n=t.value,n instanceof i?n:new i((function(e){e(n)}))).then(r,s)}u((a=a.apply(n,o||[])).next())}))},t.prototype.getLoadedResource=function(){return this.resource},t}(qe);const Qh=Kh;var $h=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},e(t,r)};return function(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Jh=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return $h(t,e),t.prototype.ChildCtor=function(e){return new Qh(e,this)},Object.defineProperty(t.prototype,"nodeName",{get:function(){return"Nodes"},enumerable:!1,configurable:!0}),t.prototype.preload=function(e){return t=this,r=void 0,o=function(){var t,r,n,o,i;return function(e,t){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}}(this,(function(a){switch(a.label){case 0:return[4,Promise.all(this.children.map((function(t){return t.preload(e)})))];case 1:for(t=a.sent(),r=[],n=0;n<t.length;n++)r.push({data:t[n],children:[],parent:null,index:n,extensions:this.children[n].raw.extensions});for(n=0;n<t.length;n++)for(o=0;o<t[n].children.length;o++)i=t[n].children[o],r[n].children.push(r[i]),r[i].parent=r[n];return this.res=r,[2,this.res]}}))},new((n=Promise)||(n=Promise))((function(e,i){function a(e){try{u(o.next(e))}catch(e){i(e)}}function s(e){try{u(o.throw(e))}catch(e){i(e)}}function u(t){var r;t.done?e(t.value):(r=t.value,r instanceof n?r:new n((function(e){e(r)}))).then(a,s)}u((o=o.apply(t,r||[])).next())}));var t,r,n,o},t.prototype.getLoadedResource=function(){return this.res},t}(Ye);const ed=Jh;var td=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},e(t,r)};return function(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),rd=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.resource=null,t}return td(t,e),Object.defineProperty(t.prototype,"nodeName",{get:function(){return"Scene"},enumerable:!1,configurable:!0}),t.prototype.build=function(){},t.prototype.preload=function(e){var t,r,n,o,i;return r=this,n=void 0,i=function(){var r,n,o,i;return function(e,t){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}}(this,(function(a){for(r=e[0],n=null!==(t=this.raw.nodes)&&void 0!==t?t:[],o=[],i=0;i<n.length;i++)o.push(r[n[i]]);return this.resource=o,[2,this.resource]}))},new((o=Promise)||(o=Promise))((function(e,t){function a(e){try{u(i.next(e))}catch(e){t(e)}}function s(e){try{u(i.throw(e))}catch(e){t(e)}}function u(t){var r;t.done?e(t.value):(r=t.value,r instanceof o?r:new o((function(e){e(r)}))).then(a,s)}u((i=i.apply(r,n||[])).next())}))},t.prototype.getLoadedResource=function(){return this.resource},t}(qe);const nd=rd;var od=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},e(t,r)};return function(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();const id=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return od(t,e),t.prototype.ChildCtor=function(e){return new nd(e,this)},Object.defineProperty(t.prototype,"nodeName",{get:function(){return"Scenes"},enumerable:!1,configurable:!0}),t.prototype.getLoadedResource=function(){return this.resources},t}(Ye);var ad=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},e(t,r)};return function(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();const sd=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.resource=null,t}return ad(t,e),Object.defineProperty(t.prototype,"nodeName",{get:function(){return"Skin"},enumerable:!1,configurable:!0}),t.prototype.build=function(){},t.prototype.preload=function(e){return t=this,r=void 0,o=function(){var t,r,n,o,i,a,s;return function(e,t){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}}(this,(function(u){if(t=e[0],r=this.raw.joints,(n=new(he(this.scene).SkeletonBoneInverseModel)).boneNum=r.length,void 0!==this.raw.inverseBindMatrices)o=t[this.raw.inverseBindMatrices],this.validate(qr.SkinAccessorNotCompact,o.compact),i=o.view.subarray(0,o.count*o.elementLength),o.componentType!==Gt.FLOAT&&(i=new Float32Array(o.count)).set(o.view),n.setBoneInverseMatrix(i);else{for(a=new Float32Array(16*r.length),s=0;s<r.length;s++)a[16*s]=a[16*s+5]=a[16*s+10]=a[16*s+15]=1;n.setBoneInverseMatrix(a)}return this.resource={inverseBindMatrices:n,skeleton:this.raw.skeleton,joints:r,extras:this.raw.extras},[2,this.resource]}))},new((n=Promise)||(n=Promise))((function(e,i){function a(e){try{u(o.next(e))}catch(e){i(e)}}function s(e){try{u(o.throw(e))}catch(e){i(e)}}function u(t){var r;t.done?e(t.value):(r=t.value,r instanceof n?r:new n((function(e){e(r)}))).then(a,s)}u((o=o.apply(t,r||[])).next())}));var t,r,n,o},t.prototype.getLoadedResource=function(){return this.resource},t}(qe);var ud=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},e(t,r)};return function(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();const cd=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return ud(t,e),t.prototype.ChildCtor=function(e){return new sd(e,this)},Object.defineProperty(t.prototype,"nodeName",{get:function(){return"Skins"},enumerable:!1,configurable:!0}),t.prototype.getLoadedResource=function(){return this.resources},t}(Ye);var ld=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},e(t,r)};return function(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),fd=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.resource=null,t}return ld(t,e),Object.defineProperty(t.prototype,"nodeName",{get:function(){return"Image"},enumerable:!1,configurable:!0}),t.prototype.build=function(){},t.prototype.preload=function(e){var t,r,n,o,i=this;if("number"==typeof this.raw.bufferView){var a,s,u=e[0][this.raw.bufferView],c=this.raw.mimeType,l=new Promise((function(e,t){a=e,s=t}));return(o=new(he(this.scene).Image)).type=c,o.onload=function(){a(i.resource)},o.onerror=function(e){s(e)},o.src=u.getUint8View(),this.resource={kanataImage:o,type:c},l}l=new Promise((function(e,t){r=e,n=t})),(o=new(he(this.scene).Image)).onload=function(){r(i.resource)},o.onerror=function(e){n(e)};var f=null!==(t=this.findRoot().uri)&&void 0!==t?t:"";return"/"!==this.raw.uri[0]&&f&&(f+="/"),this.raw.uri.startsWith("data:")||this.raw.uri.startsWith("http")?o.src=this.raw.uri:o.src=f+this.raw.uri,this.resource={kanataImage:o,extras:this.raw.extras},l},t.prototype.getLoadedResource=function(){return this.resource},t}(qe);const pd=fd;var hd=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},e(t,r)};return function(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();const dd=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return hd(t,e),t.prototype.ChildCtor=function(e){return new pd(e,this)},Object.defineProperty(t.prototype,"nodeName",{get:function(){return"Images"},enumerable:!1,configurable:!0}),t.prototype.getLoadedResource=function(){return this.resources},t}(Ye);var _d,yd,vd=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},e(t,r)};return function(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();function md(e){return e===_d.NEAREST_MIPMAP_NEAREST||e===_d.LINEAR_MIPMAP_NEAREST||e===_d.NEAREST_MIPMAP_LINEAR||e===_d.LINEAR_MIPMAP_LINEAR}!function(e){e[e.NEAREST=9728]="NEAREST",e[e.LINEAR=9729]="LINEAR",e[e.NEAREST_MIPMAP_NEAREST=9984]="NEAREST_MIPMAP_NEAREST",e[e.LINEAR_MIPMAP_NEAREST=9985]="LINEAR_MIPMAP_NEAREST",e[e.NEAREST_MIPMAP_LINEAR=9986]="NEAREST_MIPMAP_LINEAR",e[e.LINEAR_MIPMAP_LINEAR=9987]="LINEAR_MIPMAP_LINEAR"}(_d||(_d={})),function(e){e[e.CLAMP_TO_EDGE=33071]="CLAMP_TO_EDGE",e[e.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT",e[e.REPEAT=10497]="REPEAT"}(yd||(yd={}));var gd=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.resource=null,t}return vd(t,e),Object.defineProperty(t.prototype,"nodeName",{get:function(){return"Sampler"},enumerable:!1,configurable:!0}),t.prototype.build=function(){},t.prototype.preload=function(){var e,t,r,n,o,i,a,s;return o=this,i=void 0,s=function(){return function(e,t){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}}(this,(function(o){return this.resource={magFilter:null!==(e=this.raw.magFilter)&&void 0!==e?e:_d.NEAREST,minFilter:null!==(t=this.raw.minFilter)&&void 0!==t?t:_d.NEAREST,wrapS:null!==(r=this.raw.wrapS)&&void 0!==r?r:yd.REPEAT,wrapT:null!==(n=this.raw.wrapT)&&void 0!==n?n:yd.REPEAT,extras:this.raw.extras},[2,this.resource]}))},new((a=Promise)||(a=Promise))((function(e,t){function r(e){try{u(s.next(e))}catch(e){t(e)}}function n(e){try{u(s.throw(e))}catch(e){t(e)}}function u(t){var o;t.done?e(t.value):(o=t.value,o instanceof a?o:new a((function(e){e(o)}))).then(r,n)}u((s=s.apply(o,i||[])).next())}))},t.prototype.getLoadedResource=function(){return this.resource},t}(qe);const bd=gd;var wd=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},e(t,r)};return function(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();const xd=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return wd(t,e),t.prototype.ChildCtor=function(e){return new bd(e,this)},Object.defineProperty(t.prototype,"nodeName",{get:function(){return"Samplers"},enumerable:!1,configurable:!0}),t.prototype.getLoadedResource=function(){return this.resources},t}(Ye);var Ed=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},e(t,r)};return function(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Sd=function(){return Sd=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Sd.apply(this,arguments)},Td=null,Od=null,Ad=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.resource=null,t}return Ed(t,e),Object.defineProperty(t.prototype,"nodeName",{get:function(){return"Texture"},enumerable:!1,configurable:!0}),t.prototype.build=function(){},t.prototype.preload=function(e){return t=this,r=void 0,o=function(){var t,r,n,o,i,a,s;return function(e,t){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}}(this,(function(u){switch(u.label){case 0:return this.validate(qr.UndefinedTextureSource),Td||function(e){var t,r;(t={})[_d.LINEAR]=e.EFilterMode.LINEAR,t[_d.LINEAR_MIPMAP_LINEAR]=e.EFilterMode.LINEAR_MIPMAP_LINEAR,t[_d.LINEAR_MIPMAP_NEAREST]=e.EFilterMode.LINEAR_MIPMAP_NEAREST,t[_d.NEAREST]=e.EFilterMode.NEAREST,t[_d.NEAREST_MIPMAP_LINEAR]=e.EFilterMode.NEAREST_MIPMAP_LINEAR,t[_d.NEAREST_MIPMAP_NEAREST]=e.EFilterMode.NEAREST_MIPMAP_NEAREST,Td=t,(r={})[yd.CLAMP_TO_EDGE]=e.EWrapMode.CLAMP_TO_EDGE,r[yd.MIRRORED_REPEAT]=e.EWrapMode.MIRRORED_REPEAT,r[yd.REPEAT]=e.EWrapMode.REPEAT,Od=r}(he(this.scene)),t=e[0],r=e[1],n=t[this.raw.source],o=r[this.raw.sampler],i={wrapU:ue.EWrapMode.REPEAT,wrapV:ue.EWrapMode.REPEAT},o&&(i={magFilter:Td[o.magFilter],minFilter:Td[o.minFilter],wrapU:Od[o.wrapS],wrapV:Od[o.wrapT]},(md(o.minFilter)||md(o.magFilter))&&(i.generateMipmaps=!0)),a={},n.kanataImage&&(a={source:[n.kanataImage],width:n.kanataImage.width,height:n.kanataImage.height}),[4,this.extensionSlot("ModifyTextureSource",{texSource:a})];case 1:return u.sent(),Math.log2(a.width)%1==0&&Math.log2(a.height)%1==0||i.wrapU===ue.EWrapMode.CLAMP_TO_EDGE&&i.wrapU===ue.EWrapMode.CLAMP_TO_EDGE||Ee.warn("[GLTF]A non-pot(power-of-two) texture uses WrapMode other than CLAMP_TO_EDGE, auto correction is applied to avoid misrendering. If you are intentionally using this texture with other WrapMode, we strongly suggest you use xr-frame-cli for auto texture resizing. Github location for xr-frame-cli: https://github.com/wechat-miniprogram/xr-frame-cli."),s=new(he(this.scene).Texture)(Sd(Sd({},a),i)),this.resource={texture:s,extras:this.raw.extras},[2,this.resource]}}))},new((n=Promise)||(n=Promise))((function(e,i){function a(e){try{u(o.next(e))}catch(e){i(e)}}function s(e){try{u(o.throw(e))}catch(e){i(e)}}function u(t){var r;t.done?e(t.value):(r=t.value,r instanceof n?r:new n((function(e){e(r)}))).then(a,s)}u((o=o.apply(t,r||[])).next())}));var t,r,n,o},t.prototype.getLoadedResource=function(){return this.resource},t}(qe);const Cd=Ad;var Md=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},e(t,r)};return function(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();const Pd=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Md(t,e),t.prototype.ChildCtor=function(e){return new Cd(e,this)},Object.defineProperty(t.prototype,"nodeName",{get:function(){return"Textures"},enumerable:!1,configurable:!0}),t.prototype.getLoadedResource=function(){return this.resources},t}(Ye);var Rd=function(e,t){for(var r=0,n=t.length,o=e.length;r<n;r++,o++)e[o]=t[r];return e},Dd=function(){function e(e,t){var r=this;this.gltfNode=e,this.promise=new Promise((function(e,t){r.resolve=e,r.reject=t})),t&&t.push(this)}return e.prototype.preload=function(e,t){var r=this;return void 0===e&&(e=[]),void 0===t&&(t=[]),Promise.all(e.map((function(e){return e.promise}))).then((function(){return r.gltfNode.preload(Rd(Rd([],e.map((function(e){return e.gltfNode.getLoadedResource()}))),t)).then((function(){r.resolve()}))})).catch((function(e){r.reject(e)})),this.promise},e}(),Nd=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},e(t,r)};return function(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Id=function(e){function t(t){var r,n,o,i=e.call(this,t.raw)||this;return i.extensionProfiles={},i.extensionGlobals={},i.resource=null,i.ignoreError={},i.scene=t.scene,i.uri=null!==(r=t.uri)&&void 0!==r?r:"",i.defaultBinary=null!==(n=t.defaultBinary)&&void 0!==n?n:null,i.nodesCollector={},i.nodesCollector[i.nodeName]=[i],i.setupIgnoreError(t.ignoreError),i.manageExtensions(null!==(o=t.extensionProfiles)&&void 0!==o?o:{}),i}return Nd(t,e),Object.defineProperty(t.prototype,"nodeName",{get:function(){return"Root"},enumerable:!1,configurable:!0}),t.prototype.build=function(){var e,t,r,n,o,i,a,s,u,c,l,f;this.buffersNode=new ph(null!==(e=this.raw.buffers)&&void 0!==e?e:[],this),this.bufferViewsNode=new mh(null!==(t=this.raw.bufferViews)&&void 0!==t?t:[],this),this.accessorsNode=new sh(null!==(r=this.raw.accessors)&&void 0!==r?r:[],this),this.imagesNode=new dd(null!==(n=this.raw.images)&&void 0!==n?n:[],this),this.samplersNode=new xd(null!==(o=this.raw.samplers)&&void 0!==o?o:[],this),this.texturesNode=new Pd(null!==(i=this.raw.textures)&&void 0!==i?i:[],this),this.materialsNode=new Yh(null!==(a=this.raw.materials)&&void 0!==a?a:[],this),this.meshesNode=new Th(null!==(s=this.raw.meshes)&&void 0!==s?s:[],this),this.nodesNode=new ed(null!==(u=this.raw.nodes)&&void 0!==u?u:[],this),this.scenesNode=new id(null!==(c=this.raw.scenes)&&void 0!==c?c:[],this),this.skinsNode=new cd(null!==(l=this.raw.skins)&&void 0!==l?l:[],this),this.animationsNode=new ih(null!==(f=this.raw.animations)&&void 0!==f?f:[],this),this.buffersNode.build(),this.bufferViewsNode.build(),this.accessorsNode.build(),this.imagesNode.build(),this.samplersNode.build(),this.texturesNode.build(),this.materialsNode.build(),this.meshesNode.build(),this.nodesNode.build(),this.scenesNode.build(),this.skinsNode.build(),this.animationsNode.build()},t.prototype.preload=function(e){var t,r,n,o,i;return r=this,n=void 0,i=function(){var r,n,o,i,a,s,u,c,l,f,p,h,d,_,y,v,m,g;return function(e,t){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}}(this,(function(b){switch(b.label){case 0:return n=function(e){return function(t){return new Dd(t,e)}}(r=[]),o=0,i=n(this.buffersNode),a=n(this.bufferViewsNode),s=n(this.accessorsNode),i.preload(),a.preload([i]),s.preload([a]).then((function(){o+=.4,null==e||e(o)})),u=n(this.imagesNode),c=n(this.samplersNode),l=n(this.texturesNode),u.preload([a]),c.preload(),l.preload([u,c]).then((function(){o+=.4,null==e||e(o)})),(f=n(this.materialsNode)).preload([l]),p=n(this.meshesNode),h=new Map,p.preload([f,s],[h]).then((function(){o+=.2,null==e||e(o)})),(d=n(this.skinsNode)).preload([s]),(_=n(this.nodesNode)).preload([p,d]),n(this.scenesNode).preload([_]),n(this.animationsNode).preload([s,_]),[4,Promise.all(r.map((function(e){return e.promise})))];case 1:for(b.sent(),null==e||e(1),this.resource={samplers:this.samplersNode.getLoadedResource(),textures:this.texturesNode.getLoadedResource(),materials:this.materialsNode.getLoadedResource(),meshes:this.meshesNode.getLoadedResource(),nodes:this.nodesNode.getLoadedResource(),scenes:this.scenesNode.getLoadedResource(),scene:this.scenesNode.getLoadedResource()[null!==(t=this.raw.scene)&&void 0!==t?t:0],skins:this.skinsNode.getLoadedResource(),animations:this.animationsNode.getLoadedResource()},y=0,v=Object.keys(this.extensionProfiles);y<v.length;y++)m=v[y],"function"==typeof(g=this.extensionProfiles[m]).postBuild&&g.postBuild(this,this.extensionGlobals[m]);return[2,this.resource]}}))},new((o=Promise)||(o=Promise))((function(e,t){function a(e){try{u(i.next(e))}catch(e){t(e)}}function s(e){try{u(i.throw(e))}catch(e){t(e)}}function u(t){var r;t.done?e(t.value):(r=t.value,r instanceof o?r:new o((function(e){e(r)}))).then(a,s)}u((i=i.apply(r,n||[])).next())}))},t.prototype.getLoadedResource=function(){return this.resource},t.prototype.getNodesByPath=function(e){var t;return null!==(t=this.nodesCollector[e])&&void 0!==t?t:[]},t.prototype.getRootExtensionRaw=function(e){var t;return null===(t=this.raw.extensions)||void 0===t?void 0:t[e]},t.prototype.manageExtensions=function(e){var t;if(this.extensionProfiles={},this.raw.extensionsRequired)for(var r=0,n=this.raw.extensionsRequired;r<n.length;r++)if(!e[u=n[r]])throw'[GLTF]required extension "'+u+'" not supported.';if(this.raw.extensionsUsed)for(var o=0,i=this.raw.extensionsUsed;o<i.length;o++)e[u=i[o]]?this.extensionProfiles[u]=e[u]:Ee.warn('[GLTF]used extension "'+u+'" not supported.');for(var a=0,s=Object.keys(this.extensionProfiles);a<s.length;a++){var u=s[a];this.extensionGlobals[u]={},this.extensionProfiles[u].rootInit&&(null===(t=this.raw.extensions)||void 0===t?void 0:t[u])&&this.extensionProfiles[u].rootInit(this.raw.extensions[u],this.extensionGlobals[u])}},t.prototype.releaseRawBuffer=function(){this.buffersNode.releaseLoadedResource(),this.bufferViewsNode.releaseLoadedResource(),this.accessorsNode.releaseLoadedResource(),this.imagesNode.releaseLoadedResource(),this.defaultBinary=null;for(var e=0,t=Object.values(this.nodesCollector);e<t.length;e++)for(var r=0,n=t[e];r<n.length;r++)n[r].raw={};this.raw={}},t.prototype.setupIgnoreError=function(e){for(var t=this,r=0,n=e=null!=e?e:[];r<n.length;r++){var o=n[r];if(Yr[o])this.ignoreError[o]=!0;else if(-1===o){this.ignoreError={},Object.keys(Yr).forEach((function(e){t.ignoreError[e]=!0}));break}}},t}(qe);const Ld=Id;var Fd,kd=function(){function e(e){this.preloads={},this.slotCodeMap=new Map,this.forceSlotCodeMap=new Map,this.name=e}return e.prototype.registerRootInit=function(e){this.rootInit=e},e.prototype.registerSubstitutePreload=function(e,t){if("Root"===e)throw"[GLTF]Extensions cannot replace root's method.";this.preloads[e]=t},e.prototype.registerPostBuild=function(e){this.postBuild=e},e.prototype.registerRunInSlot=function(e,t){this.slotCodeMap.set(e,t)},e.prototype.registerForceRunInSlot=function(e,t){this.forceSlotCodeMap.set(e,t)},e}(),Ud=function(){return Ud=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Ud.apply(this,arguments)},Bd="KHR_materials_clearcoat",jd=new kd(Bd);jd.registerRunInSlot("BeforeCreateMaterial",(function(e,t,r,n){var o,i,a,s,u,c,l,f,p,h,d;return f=this,p=void 0,d=function(){var t,f,p,h,d,_;return function(e,t){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}}(this,(function(y){switch(y.label){case 0:return e.clearcoatTexture&&(this.clearcoatTextureNode=new Mh(e.clearcoatTexture,this)),e.clearcoatRoughnessTexture&&(this.clearcoatRoughnessTextureNode=new Mh(e.clearcoatRoughnessTexture,this)),e.clearcoatNormalTexture&&(this.clearcoatNormalTextureNode=new Fh(e.clearcoatNormalTexture,this)),t=r[0],_={clearcoatFactor:null!==(o=e.clearcoatFactor)&&void 0!==o?o:0},[4,null===(i=this.clearcoatTextureNode)||void 0===i?void 0:i.preload()];case 1:return _.clearcoatTexture=y.sent(),_.clearcoatRoughnessFactor=null!==(a=e.clearcoatRoughnessFactor)&&void 0!==a?a:0,[4,null===(s=this.clearcoatRoughnessTextureNode)||void 0===s?void 0:s.preload()];case 2:return _.clearcoatRoughnessTexture=y.sent(),[4,null===(u=this.clearcoatNormalTextureNode)||void 0===u?void 0:u.preload()];case 3:return _.clearcoatNormalTexture=y.sent(),f=_,p=n.uniform,h=n.macros,Object.assign(p,{u_clearcoatFactor:[f.clearcoatFactor],u_clearcoatMap:f.clearcoatTexture?t[f.clearcoatTexture.index].texture:void 0,u_clearcoatRoughnessFactor:[f.clearcoatRoughnessFactor],u_clearcoatRoughnessMap:f.clearcoatRoughnessTexture?t[f.clearcoatRoughnessTexture.index].texture:void 0,u_clearcoatNormalScale:[null!==(l=null===(c=f.clearcoatNormalTexture)||void 0===c?void 0:c.scale)&&void 0!==l?l:1],u_clearcoatNormalMap:f.clearcoatNormalTexture?t[f.clearcoatNormalTexture.index].texture:void 0}),Object.assign(h,Ud(Ud(Ud({WX_USE_CLEARCOAT:!0},Lr("clearcoatMap",f.clearcoatTexture)),Lr("clearcoatRoughnessMap",f.clearcoatRoughnessTexture)),Lr("clearcoatNormalMap",f.clearcoatNormalTexture))),d=[],f.clearcoatTexture&&f.clearcoatTexture.transformInfo&&(d=f.clearcoatTexture.transformInfo.uvMatrixArray,h.WX_USE_UVTRANSFORM_CLEARCOAT=!0),f.clearcoatRoughnessTexture&&f.clearcoatRoughnessTexture.transformInfo&&(d=f.clearcoatRoughnessTexture.transformInfo.uvMatrixArray,h.WX_USE_UVTRANSFORM_CLEARCOATROUGNESS=!0),f.clearcoatNormalTexture&&f.clearcoatNormalTexture.transformInfo&&(d=f.clearcoatNormalTexture.transformInfo.uvMatrixArray,h.WX_USE_UVTRANSFORM_CLEARCOATNORMAL=!0),d.length>0&&(p.u_uvTransform=d,h.WX_USE_UVTRANSFORM=!0),[2]}}))},new((h=void 0)||(h=Promise))((function(e,t){function r(e){try{o(d.next(e))}catch(e){t(e)}}function n(e){try{o(d.throw(e))}catch(e){t(e)}}function o(t){var o;t.done?e(t.value):(o=t.value,o instanceof h?o:new h((function(e){e(o)}))).then(r,n)}o((d=d.apply(f,p||[])).next())}))}));const Vd=((Fd={})[Bd]=jd,Fd);var zd,Gd=new kd("KHR_materials_ior");Gd.registerRunInSlot("BeforeCreateMaterial",(function(e,t,r,n){var o,i,a,s,u;return i=this,a=void 0,u=function(){return function(e,t){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}}(this,(function(t){return n.uniform.u_ior=[null!==(o=e.ior)&&void 0!==o?o:1.5],[2]}))},new((s=void 0)||(s=Promise))((function(e,t){function r(e){try{o(u.next(e))}catch(e){t(e)}}function n(e){try{o(u.throw(e))}catch(e){t(e)}}function o(t){var o;t.done?e(t.value):(o=t.value,o instanceof s?o:new s((function(e){e(o)}))).then(r,n)}o((u=u.apply(i,a||[])).next())}))}));const Wd=((zd={}).KHR_materials_ior=Gd,zd);var Xd,Hd=function(){return Hd=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Hd.apply(this,arguments)},qd=new kd("KHR_materials_pbrSpecularGlossiness");qd.registerSubstitutePreload("Root-Materials-Material",(function(e,t,r){var n,o,i,a,s,u,c,l,f;return u=this,c=void 0,f=function(){var t,u,c,l,f,p,h,d,_,y;return function(e,t){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}}(this,(function(v){switch(v.label){case 0:return e.diffuseTexture&&(this.diffuseTextureNode=new Mh(e.diffuseTexture,this)),e.specularGlossinessTexture&&(this.specularGlossinessTextureNode=new Mh(e.specularGlossinessTexture,this)),t=r[0],y={},[4,this.preloadWithoutPBR(r)];case 1:return y.ownProperties=v.sent(),y.diffuseFactor=null!==(n=e.diffuseFactor)&&void 0!==n?n:[1,1,1,1],y.specularFactor=null!==(o=e.specularFactor)&&void 0!==o?o:[1,1,1],y.glossinessFactor=null!==(i=e.glossinessFactor)&&void 0!==i?i:1,[4,null===(a=this.diffuseTextureNode)||void 0===a?void 0:a.preload()];case 2:return y.diffuseTexture=v.sent(),[4,null===(s=this.specularGlossinessTextureNode)||void 0===s?void 0:s.preload()];case 3:return y.specularGlossinessTexture=v.sent(),u=y,c=this.scene.assets.getAsset("effect","standard"),l=Hd(Hd({},u.ownProperties.uniform),{u_baseColorFactor:u.diffuseFactor,u_baseColorMap:u.diffuseTexture?t[u.diffuseTexture.index].texture:void 0,u_specularFactor:u.specularFactor,u_glossinessFactor:[u.glossinessFactor],u_specularGlossinessMap:u.specularGlossinessTexture?t[u.specularGlossinessTexture.index].texture:void 0}),f=Hd({},u.ownProperties.renderStates),p=Hd(Hd(Hd(Hd({},u.ownProperties.macros),Lr("baseColorMap",u.diffuseTexture)),Lr("specularGlossinessMap",u.specularGlossinessTexture)),{WX_USE_SPECULARGLOSSINESS:!0}),h=[],u.diffuseTexture&&u.diffuseTexture.transformInfo&&(h=u.diffuseTexture.transformInfo.uvMatrixArray,p.WX_USE_UVTRANSFORM_BASECOLOR=!0),u.specularGlossinessTexture&&u.specularGlossinessTexture.transformInfo&&(h=u.specularGlossinessTexture.transformInfo.uvMatrixArray,p.WX_USE_UVTRANSFORM_SPECULARGLOSSINESS=!0),h.length>0&&(l.u_uvTransform=h,p.WX_USE_UVTRANSFORM=!0),d={uniform:l,renderStates:f,macros:p},[4,this.extensionSlot("BeforeCreateMaterial",d)];case 4:return v.sent(),(_=new Ir(this.scene)).initByEffect(c,l),Fr(_,f),_.setMacros(p),this.resource={material:_,extras:this.raw.extras},[2,this.resource]}}))},new((l=void 0)||(l=Promise))((function(e,t){function r(e){try{o(f.next(e))}catch(e){t(e)}}function n(e){try{o(f.throw(e))}catch(e){t(e)}}function o(t){var o;t.done?e(t.value):(o=t.value,o instanceof l?o:new l((function(e){e(o)}))).then(r,n)}o((f=f.apply(u,c||[])).next())}))}));const Yd=((Xd={}).KHR_materials_pbrSpecularGlossiness=qd,Xd);var Zd,Kd=function(){return Kd=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Kd.apply(this,arguments)},Qd=new kd("KHR_materials_sheen");Qd.registerRunInSlot("BeforeCreateMaterial",(function(e,t,r,n){var o,i,a,s,u,c,l,f;return u=this,c=void 0,f=function(){var t,u,c,l,f,p;return function(e,t){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}}(this,(function(h){switch(h.label){case 0:return e.sheenColorTexture&&(this.sheenColorTextureNode=new Mh(e.sheenColorTexture,this)),e.sheenRoughnessTexture&&(this.sheenRoughnessTextureNode=new Mh(e.sheenRoughnessTexture,this)),t=r[0],p={sheenColorFactor:null!==(o=e.sheenColorFactor)&&void 0!==o?o:[0,0,0]},[4,null===(i=this.sheenColorTextureNode)||void 0===i?void 0:i.preload()];case 1:return p.sheenColorTexture=h.sent(),p.sheenRoughnessFactor=null!==(a=e.sheenRoughnessFactor)&&void 0!==a?a:0,[4,null===(s=this.sheenRoughnessTextureNode)||void 0===s?void 0:s.preload()];case 2:return p.sheenRoughnessTexture=h.sent(),u=p,c=n.uniform,l=n.macros,c.u_sheenColorFactor=u.sheenColorFactor,c.u_sheenColorMap=u.sheenColorTexture?t[u.sheenColorTexture.index]:void 0,c.u_sheenRoughnessFactor=[u.sheenRoughnessFactor],c.u_sheenRoughnessMap=u.sheenRoughnessTexture?t[u.sheenRoughnessTexture.index]:void 0,Object.assign(l,Kd(Kd({WX_USE_SHEEN:!0},Lr("sheenColorMap",u.sheenColorTexture)),Lr("sheenRoughnessMap",u.sheenRoughnessTexture))),f=[],u.sheenColorTexture&&u.sheenColorTexture.transformInfo&&(f=u.sheenColorTexture.transformInfo.uvMatrixArray,l.WX_USE_UVTRANSFORM_SHEENCOLOR=!0),u.sheenRoughnessTexture&&u.sheenRoughnessTexture.transformInfo&&(f=u.sheenRoughnessTexture.transformInfo.uvMatrixArray,l.WX_USE_UVTRANSFORM_SHEENROUGHNESS=!0),f.length>0&&(c.u_uvTransform=f,l.WX_USE_UVTRANSFORM=!0),[2]}}))},new((l=void 0)||(l=Promise))((function(e,t){function r(e){try{o(f.next(e))}catch(e){t(e)}}function n(e){try{o(f.throw(e))}catch(e){t(e)}}function o(t){var o;t.done?e(t.value):(o=t.value,o instanceof l?o:new l((function(e){e(o)}))).then(r,n)}o((f=f.apply(u,c||[])).next())}))}));const $d=((Zd={}).KHR_materials_sheen=Qd,Zd);var Jd,e_=new kd("KHR_materials_specular");e_.registerRunInSlot("BeforeCreateMaterial",(function(e,t,r,n){var o,i,a,s,u,c,l,f;return u=this,c=void 0,f=function(){var t,u,c,l;return function(e,t){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}}(this,(function(f){switch(f.label){case 0:return e.specularTexture&&(this.specularTextureNode=new Mh(e.specularTexture,this)),e.specularColorTexture&&(this.specularColorTextureNode=new Mh(e.specularColorTexture,this)),t=r[0],l={specularFactor:null!==(o=e.specularFactor)&&void 0!==o?o:1},[4,null===(i=this.specularTextureNode)||void 0===i?void 0:i.preload()];case 1:return l.specularTexture=f.sent(),l.specularColorFactor=null!==(a=e.specularColorFactor)&&void 0!==a?a:[1,1,1],[4,null===(s=this.specularColorTextureNode)||void 0===s?void 0:s.preload()];case 2:return l.specularColorTexture=f.sent(),u=l,(c=n.uniform).u_specularFactor=[u.specularFactor],c.u_specularTexture=u.specularTexture?t[u.specularTexture.index]:void 0,c.u_specularColorFactor=u.specularColorFactor,c.u_specularColorTexture=u.specularColorTexture?t[u.specularColorTexture.index]:void 0,[2]}}))},new((l=void 0)||(l=Promise))((function(e,t){function r(e){try{o(f.next(e))}catch(e){t(e)}}function n(e){try{o(f.throw(e))}catch(e){t(e)}}function o(t){var o;t.done?e(t.value):(o=t.value,o instanceof l?o:new l((function(e){e(o)}))).then(r,n)}o((f=f.apply(u,c||[])).next())}))}));const t_=((Jd={}).KHR_materials_specular=e_,Jd);var r_,n_=new kd("KHR_materials_transmission");n_.registerRunInSlot("BeforeCreateMaterial",(function(e,t,r,n){var o,i,a,s,u,c;return a=this,s=void 0,c=function(){var t,a,s,u,c;return function(e,t){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}}(this,(function(l){switch(l.label){case 0:return e.transmissionTexture&&(this.transmissionTextureNode=new Mh(e.transmissionTexture,this)),t=r[0],c={transmissionFactor:null!==(o=e.transmissionFactor)&&void 0!==o?o:0},[4,null===(i=this.transmissionTextureNode)||void 0===i?void 0:i.preload()];case 1:return c.transmissionTexture=l.sent(),a=c,s=n.uniform,u=n.macros,s.u_transmissionFactor=[a.transmissionFactor],s.u_transmissionTexture=a.transmissionTexture?t[a.transmissionTexture.index]:void 0,u.WX_USE_TRANSMISSION=!0,[2]}}))},new((u=void 0)||(u=Promise))((function(e,t){function r(e){try{o(c.next(e))}catch(e){t(e)}}function n(e){try{o(c.throw(e))}catch(e){t(e)}}function o(t){var o;t.done?e(t.value):(o=t.value,o instanceof u?o:new u((function(e){e(o)}))).then(r,n)}o((c=c.apply(a,s||[])).next())}))}));const o_=((r_={}).KHR_materials_transmission=n_,r_);var i_,a_=new kd("KHR_texture_transform");const s_=((i_={}).KHR_texture_transform=a_,i_);var u_,c_=function(){return c_=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},c_.apply(this,arguments)},l_=new kd("KHR_materials_unlit");l_.registerSubstitutePreload("Root-Materials-Material",(function(e,t,r){var n,o,i,a,s,u,c,l;return s=this,u=void 0,l=function(){var e,t,s,u,c,l,f,p;return function(e,t){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}}(this,(function(h){switch(h.label){case 0:return p={},[4,null===(n=this.pbrMetallicRoughness)||void 0===n?void 0:n.preload(r)];case 1:return p.pbrMetallicRoughness=h.sent(),p.alphaMode=null!==(o=jh[this.raw.alphaMode])&&void 0!==o?o:jh.OPAQUE,p.alphaCutoff=null!==(i=this.raw.alphaCutoff)&&void 0!==i?i:.5,p.doubleSided=!!this.raw.doubleSided,e=p,t=this.scene.assets.getAsset("effect","simple"),s=e.pbrMetallicRoughness,u=s.uniform,c=s.macros,u.alphaCutoff=[e.alphaCutoff],l=c_({cullFace:e.doubleSided?ue.ECullMode.NONE:ue.ECullMode.FRONT,blendOn:e.alphaMode===jh.BLEND,renderQueue:e.alphaMode===jh.BLEND?2500:1e3},null===(a=e.pbrMetallicRoughness)||void 0===a?void 0:a.renderStates),(f=new Ir(this.scene)).initByEffect(t,u),Fr(f,l),f.setMacros(c),e.alphaMode===jh.BLEND&&f.setMacro("WX_USE_BLEND",!0),e.alphaMode===jh.MASK&&f.setMacro("WX_USE_ALPHA_CUTOFF",!0),this.resource={material:f,extras:this.raw.extras},[2,this.resource]}}))},new((c=void 0)||(c=Promise))((function(e,t){function r(e){try{o(l.next(e))}catch(e){t(e)}}function n(e){try{o(l.throw(e))}catch(e){t(e)}}function o(t){var o;t.done?e(t.value):(o=t.value,o instanceof c?o:new c((function(e){e(o)}))).then(r,n)}o((l=l.apply(s,u||[])).next())}))}));const f_=((u_={}).KHR_materials_unlit=l_,u_);var p_,h_=function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function a(e){try{u(n.next(e))}catch(e){i(e)}}function s(e){try{u(n.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}u((n=n.apply(e,t||[])).next())}))},d_=function(e,t){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},__=new kd("WX_processed_model");function y_(e,t){var r,n;t.trustMaxAndMin=null===(r=e.trustMaxAndMin)||void 0===r||r,t.simpleAttribNodeDontCheckTangent=null===(n=e.simpleAttribNodeDontCheckTangent)||void 0===n||n}function v_(e,t,r){return h_(this,void 0,void 0,(function(){return d_(this,(function(t){return e.trustMaxAndMin&&(r.trust=!0),[2]}))}))}function m_(e,t,r){return h_(this,void 0,void 0,(function(){return d_(this,(function(t){return e.simpleAttribNodeDontCheckTangent&&(r.check=!1),[2]}))}))}function g_(e,t,r,n){return h_(this,void 0,void 0,(function(){return d_(this,(function(t){return e.dontNeedNormal&&(n.needNormal=!1),[2]}))}))}__.registerRootInit(y_),__.registerForceRunInSlot("trustMaxAndMin",v_),__.registerForceRunInSlot("simpleAttribNodeDontCheckTangent",m_),__.registerRunInSlot("needNormal",g_);const b_=((p_={}).WX_processed_model=__,p_);var w_,x_=new kd("SEIN_processed");x_.registerRootInit(y_),x_.registerForceRunInSlot("trustMaxAndMin",v_),x_.registerForceRunInSlot("simpleAttribNodeDontCheckTangent",m_),x_.registerRunInSlot("needNormal",g_);const E_=((w_={}).SEIN_processed=x_,w_);var S_,T_="KHR_lights_punctual",O_=new kd(T_);O_.registerPostBuild((function(e,t){return r=this,n=void 0,i=function(){var r,n,o,i,a,s,u,c,l;return function(e,t){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}}(this,(function(f){if(!(r=e.getRootExtensionRaw(T_)).lights)return[2];for(t.light=[],n=0,o=r.lights;n<o.length;n++)i=o[n],t.light.push(i);for(a=0,s=e.nodesNode.children;a<s.length;a++)if((u=s[a]).raw&&u.raw.extensions&&u.raw.extensions.KHR_lights_punctual&&(c=u.raw.extensions.KHR_lights_punctual,l=e.getRootExtensionRaw(T_).lights[c.light]))switch(c.lightInfo={color:l.color?[l.color[0],l.color[1],l.color[2],1]:[1,1,1,1],intensity:1},l.intensity&&(c.lightInfo.color=[c.lightInfo.color[0]*l.intensity,c.lightInfo.color[1]*l.intensity,c.lightInfo.color[2]*l.intensity,1]),l.type){case"point":c.lightInfo.type="point",c.lightInfo.range=void 0===l.range?1/0:l.range;break;case"spot":c.lightInfo.type="spot",c.lightInfo.range=void 0===l.range?1/0:l.range,c.lightInfo.innerConeAngle=l.innerConeAngle||0,c.lightInfo.outerConeAngle=l.outerConeAngle||Math.PI/4;break;case"directional":c.lightInfo.type="directional"}return[2]}))},new((o=void 0)||(o=Promise))((function(e,t){function a(e){try{u(i.next(e))}catch(e){t(e)}}function s(e){try{u(i.throw(e))}catch(e){t(e)}}function u(t){var r;t.done?e(t.value):(r=t.value,r instanceof o?r:new o((function(e){e(r)}))).then(a,s)}u((i=i.apply(r,n||[])).next())}));var r,n,o,i}));const A_=((S_={}).KHR_lights_punctual=O_,S_);var C_,M_=function(){return M_=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},M_.apply(this,arguments)},P_=function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function a(e){try{u(n.next(e))}catch(e){i(e)}}function s(e){try{u(n.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}u((n=n.apply(e,t||[])).next())}))},R_=function(e,t){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},D_="KHR_draco_mesh_compression",N_=new kd(D_);N_.registerRunInSlot("PrimitiveModifyVertexBufferInfo",(function(e,t,r,n){return P_(this,void 0,void 0,(function(){var t,o,i,a,s,u,c,l,f,p,h,d,_,y,v,m,g,b,w,x,E,S,T,O,A,C;return R_(this,(function(M){for(t=M_({},n.vbInfo),(o=new Float32Array(t.buffer.length)).set(t.buffer),i=this.raw,a=this.findRoot().bufferViewsNode.getLoadedResource(),this.assert(a[e.bufferView],"Invalid draco bufferview."),s=a[e.bufferView].getUint8View(),u=he(this.scene).decodeDraco(s,ue.EDracoDecodeType.kDecodeTypeCross),this.assert(u.errCode===ue.EDracoErrorCode.kDecodeErrorNone,"Draco decode failed: "+ue.EDracoErrorCode[u.errCode]+"."),c=o,l=t.boundingBox,f=0,p=Object.entries(e.attributes);f<p.length;f++)for(h=p[f],d=h[0],_=h[1],y=0,v=t.layoutDesc.attributes;y<v.length;y++)if(m=v[y],Jt(d)===m.name)for(g=r[1][i.attributes[d]],b=m.format+1,w=g.elementLength,x=Xt[g.componentType],this.assert(x,"Unsupported accessor component type."),E=u.stride/g.bytesPerComponent,S=new x(u.buffer),T=0;T<Math.min(g.count,u.count);T++){for(O=(m.offset+T*t.layoutDesc.stride)/4,A=u.attrs[_].offset/S.BYTES_PER_ELEMENT,C=0;C<b;C++)c[O+C]=C<w?S[T*E+C+A]:3===C?1:0;"POSITION"===d&&(l.min.x=Math.min(l.min.x,c[O+0]),l.max.x=Math.max(l.max.x,c[O+0]),l.min.y=Math.min(l.min.y,c[O+1]),l.max.y=Math.max(l.max.y,c[O+1]),l.min.z=Math.min(l.min.z,c[O+2]),l.max.z=Math.max(l.max.z,c[O+2]))}return t.buffer=o,n.vbInfo=t,this.indexBuffer=new Uint32Array(u.buffer,u.buffer.byteLength-4*u.numIndices).slice(),[2]}))}))})),N_.registerRunInSlot("ModifyPrimitiveIndexBufferAccessor",(function(e,t,r,n){return P_(this,void 0,void 0,(function(){return R_(this,(function(e){return n.accessor.count=this.indexBuffer.length,n.accessor.view=this.indexBuffer,n.accessor.componentType=Gt.UNSIGNED_INT,this.indexBuffer=void 0,[2]}))}))}));const I_=((C_={})[D_]=N_,C_);var L_,F_,k_=function(){function e(t,r){this.pixelWidth=0,this.pixelHeight=0,this.numberOfArrayElements=0,this.numberOfFaces=0,this.numberOfMipmapLevels=0,this.bytesOfKeyValueData=0,this.arrayBuffer=t;var n=this.arrayBuffer.subarray(0,12);if(171!==n[0]||75!==n[1]||84!==n[2]||88!==n[3]||32!==n[4]||49!==n[5]||49!==n[6]||187!==n[7]||13!==n[8]||10!==n[9]||26!==n[10]||10!==n[11])throw"parse compressed texture failed: missing KTX identifier!";var o=Uint32Array.BYTES_PER_ELEMENT,i=new DataView(this.arrayBuffer.buffer,this.arrayBuffer.byteOffset+12,13*o),a=67305985===i.getUint32(0,!0);this.glType=i.getUint32(1*o,a),this.glTypeSize=i.getUint32(2*o,a),this.glFormat=i.getUint32(3*o,a),this.glInternalFormat=i.getUint32(4*o,a),this.glBaseInternalFormat=i.getUint32(5*o,a),this.pixelWidth=i.getUint32(6*o,a),this.pixelHeight=i.getUint32(7*o,a),this.pixelDepth=i.getUint32(8*o,a),this.numberOfArrayElements=i.getUint32(9*o,a),this.numberOfFaces=i.getUint32(10*o,a),this.numberOfMipmapLevels=i.getUint32(11*o,a),this.bytesOfKeyValueData=i.getUint32(12*o,a),0===this.glType?(this.numberOfMipmapLevels=Math.max(1,this.numberOfMipmapLevels),0!==this.pixelHeight&&0===this.pixelDepth?0===this.numberOfArrayElements?this.numberOfFaces===r?this.loadType=e.COMPRESSED_2D:console.warn("number of faces expected"+r+", but found "+this.numberOfFaces):console.warn("texture arrays not currently supported"):console.warn("only 2D textures currently supported")):console.warn("only compressed formats currently supported")}return e.prototype.mipmapsOffsets=function(t){for(var r=e.HEADER_LEN+this.bytesOfKeyValueData,n=this.pixelWidth,o=this.pixelHeight,i=t?this.numberOfMipmapLevels:1,a=[],s=0;s<i;s++){var u=new Int32Array(this.arrayBuffer.buffer,r+this.arrayBuffer.byteOffset,1)[0];r+=4,a[s]=[];for(var c=0;c<this.numberOfFaces;c++)a[s][c]=[r,u],r+=u,r+=3-(u+3)%4;n=Math.max(1,.5*n),o=Math.max(1,.5*o)}return a},e.prototype.getTextureFormat=function(){switch(this.glInternalFormat){case 37492:return ue.ETextureFormat.ETC2RGB8;case 37496:return ue.ETextureFormat.ETC2RGBA8;case 35841:return ue.ETextureFormat.PVRTC2RGBV1;case 35840:return ue.ETextureFormat.PVRTC4RGBV1;case 35843:return ue.ETextureFormat.PVRTC2RGBAV1;case 35842:return ue.ETextureFormat.PVRTC4RGBAV1;case 37808:return ue.ETextureFormat.ASTC4x4;case 37810:return ue.ETextureFormat.ASTC5x5;case 37812:return ue.ETextureFormat.ASTC6x6;case 37814:return ue.ETextureFormat.ASTC8x6;case 37815:return ue.ETextureFormat.ASTC8x8;case 33777:return ue.ETextureFormat.DXT1;case 33778:return ue.ETextureFormat.DXT3;case 33779:return ue.ETextureFormat.DXT5;default:return null}},e.HEADER_LEN=64,e.COMPRESSED_2D=0,e.COMPRESSED_3D=1,e.TEX_2D=2,e.TEX_3D=3,e}(),U_=function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function a(e){try{u(n.next(e))}catch(e){i(e)}}function s(e){try{u(n.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}u((n=n.apply(e,t||[])).next())}))},B_=function(e,t){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}};!function(e){e[e.etc1=0]="etc1",e[e.etc2=1]="etc2",e[e.astc=2]="astc",e[e.pvrtc=3]="pvrtc",e[e.s3tc=4]="s3tc"}(F_||(F_={}));var j_={astc:"astc",pvrtc:"pvrtc",etc2:"etc",s3tc:"s3tc"};function V_(){for(var e=0,t=["astc","pvrtc","etc2","s3tc"];e<t.length;e++){var r=t[e];if(he(this.scene).renderEnv.supportCompressTexture(r))return r}return null}var z_=new kd("WX_compressed_textures");z_.registerSubstitutePreload("Root-Buffers-Buffer",(function(e,t){return U_(this,void 0,void 0,(function(){var t,r;return B_(this,(function(n){return t=V_.call(this),r=j_[t],e.type===r?[2,this._preload()]:(this.resource={get buffer(){throw"trying to get buffer for an unused compressed type!"}},[2])}))}))})),z_.registerSubstitutePreload("Root-Images-Image",(function(e,t,r){return U_(this,void 0,void 0,(function(){var t,n,o,i,a;return B_(this,(function(s){switch(s.label){case 0:return(t=V_.call(this))?(n=e[j_[t]])?"number"!=typeof n.bufferView?[3,1]:(o=r[0],i=o[n.bufferView],n.mimeType,this.resource={compressedTex:new k_(i.getUint8View(),1),extras:this.raw.extras},[3,3]):(console.warn("[WX_compressed_textures] desired texture format not provided: "+t+", using plain image..."),[2,this._preload(r)]):(console.warn("[WX_compressed_textures] no valid compressed texture format found, using plain image..."),[2,this._preload(r)]);case 1:return(a=new lh({uri:n.uri,byteLength:-1},this)).build(),[4,a.preload()];case 2:s.sent(),this.resource={compressedTex:new k_(new Uint8Array(a.getLoadedResource().buffer),1),extras:this.raw.extras},s.label=3;case 3:return[2]}}))}))})),z_.registerForceRunInSlot("ModifyTextureSource",(function(e,t,r){return U_(this,void 0,void 0,(function(){var e,n,o,i,a,s;return B_(this,(function(u){if(e=r.texSource,n=t[0],o=n[this.raw.source],i=o.compressedTex,!e.source&&i){if(!(a=i.getTextureFormat()))throw"Invalid compressed texture format: "+Number(i.glFormat).toString(16)+"!";(function(e,t){for(var r=t.mipmapsOffsets(!0),n=0*r.length*2,o=e,i=0;i<r.length;i++)o[n+2*i]=r[i][0][0],o[n+2*i+1]=r[i][0][1]})(s=new Uint32Array(2*i.numberOfMipmapLevels),i),e.source=[i.arrayBuffer],e.width=i.pixelWidth,e.height=i.pixelHeight,e.pixelFormat=a,e.offsets=s,e.mips=i.numberOfMipmapLevels}return[2]}))}))}));const G_=((L_={}).WX_compressed_textures=z_,L_);var W_,X_=function(){return X_=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},X_.apply(this,arguments)},H_=X_(X_(X_(X_(X_(X_(X_(X_(X_(X_(X_(X_(X_({},E_),b_),Wd),f_),t_),Yd),o_),$d),Vd),s_),A_),I_),G_),q_=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},e(t,r)};return function(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Y_=function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function a(e){try{u(n.next(e))}catch(e){i(e)}}function s(e){try{u(n.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}u((n=n.apply(e,t||[])).next())}))},Z_=function(e,t){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}};!function(e){e[e.JSON=1313821514]="JSON",e[e.BIN=5130562]="BIN"}(W_||(W_={}));var K_=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.schema={ignoreError:{type:"number-array",defaultValue:[]},preserveRaw:{type:"boolean",defaultValue:!1}},t}return q_(t,e),t.prototype.load=function(e,r){return Y_(this,void 0,Promise,(function(){var n,o,i;return Z_(this,(function(a){switch(a.label){case 0:return a.trys.push([0,3,,4]),[4,wa(e.src,"binary")];case 1:return n=a.sent().data,r.onLoading(.2),[4,t.createGLTFModel(this.scene,n,e,r.onLoading)];case 2:return o=a.sent(),r.onLoaded(o),[3,4];case 3:return i=a.sent(),r.onError(i),[3,4];case 4:return[2]}}))}))},t.prototype.cancel=function(t){e.prototype.cancel.call(this,t)},t.prototype.release=function(e,t){},t.createGLTFModel=function(e,t,r,n){return Y_(this,void 0,Promise,(function(){var o,i,a,s,u,c,l;return Z_(this,(function(f){switch(f.label){case 0:return o=this.extractChunks(t),i=o[0],a=o[1],s={raw:i,scene:e,uri:r.src.split("/").slice(0,-1).join("/"),ignoreError:r.options.ignoreError,extensionProfiles:H_,defaultBinary:a},(u=new Ld(s)).build(),null==n||n(.3),[4,u.preload((function(e){null==n||n(.3+(.9-.3)*e)}))];case 1:return c=f.sent(),l=new Bp(e,c),r.options.preserveRaw&&(l.jsonRaw=i),u.releaseRawBuffer(),null==n||n(1),[2,l]}}))}))},t.extractChunks=function(e){var t=new qi(e);if(1179937895!==t.read(qi.Type.UInt32)){var r=Xi(e,"utf-8");return[JSON.parse(r),null]}var n=t.read(qi.Type.UInt32),o=t.read(qi.Type.UInt32);Wi(2===n,"[GLB]wrong version: "+n+"."),Wi(o===t.size,"[GLB] total length in glb is marked "+o+", while actual binary size is "+t.size+".");var i=t.read(qi.Type.UInt32),a=t.read(qi.Type.UInt32);Wi(a===W_.JSON,"[GLB]the first chunk should be of type 0x"+W_.JSON.toString(16)+" instead of type 0x"+a.toString(16)+"."),t.align(4);var s=t.readChunk(i);t.align(4);var u=null;return t.end()||(i=t.read(qi.Type.UInt32),Wi((a=t.read(qi.Type.UInt32))===W_.BIN,"[GLB]the second chunk should be of type 0x"+W_.BIN.toString(16)+" instead of type 0x"+a.toString(16)+"."),t.align(4),u=t.readChunk(i),t.align(4)),r=Xi(s,"utf-8"),[JSON.parse(r),u]},t}(xo);const Q_=K_;var $_=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},e(t,r)};return function(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();const J_=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.schema={},t}return $_(t,e),t.prototype.load=function(e,t){var r=this.scene.createImage();r.onload=function(){t.onLoaded(r)},r.onerror=function(e){t.onError(e)},r.src=e.src},t.prototype.release=function(e,t){},t}(xo);var ey,ty=Math.pow,ry=Math.sqrt,ny=Math.sin,oy=Math.cos,iy=Math.PI,ay=1.70158,sy=1.525*ay,uy=ay+1,cy=2*iy/3,ly=2*iy/4.5,fy=1e-6,py={"cubic-bezier":function(e,t){var r=t[0],n=t[1],o=t[2],i=t[3],a=3*r,s=3*(o-r)-a,u=1-a-s,c=3*n,l=3*(i-n)-c,f=1-c-l;function p(e){return((u*e+s)*e+a)*e}return function(e){return t=function(e){for(var t,r,n,o,i,c=e,l=0;l<8;l+=1){if(n=p(c)-e,Math.abs(n)<fy)return c;if(o=(3*u*(i=c)+2*s)*i+a,Math.abs(o)<fy)break;c-=n/o}if((c=e)<(t=0))return t;if(c>(r=1))return r;for(;t<r;){if(n=p(c),Math.abs(n-e)<fy)return c;e>n?t=c:r=c,c=.5*(r-t)+t}return c}(e),((f*t+l)*t+c)*t;var t}},steps:function(e,t){var r=e.length;return r?function(t){for(var n=r-1;n>=0;n-=1){var o=e[n];if(o<=t)return o}return 1}:function(e){return 1}}},hy=function(e){var t=7.5625,r=2.75;return e<1/r?t*e*e:e<2/r?t*(e-=1.5/r)*e+.75:e<2.5/r?t*(e-=2.25/r)*e+.9375:t*(e-=2.625/r)*e+.984375},dy={linear:function(e){return e},"ease-in":py["cubic-bezier"]([],[.42,0,1,1]),"ease-out":py["cubic-bezier"]([],[0,0,.58,1]),"ease-in-out":py["cubic-bezier"]([],[.42,0,.58,1]),"ease-in-quad":function(e){return e*e},"ease-out-quad":function(e){return 1-(1-e)*(1-e)},"ease-in-out-quad":function(e){return e<.5?2*e*e:1-ty(-2*e+2,2)/2},"ease-in-cubic":function(e){return e*e*e},"ease-out-cubic":function(e){return 1-ty(1-e,3)},"ease-in-out-cubic":function(e){return e<.5?4*e*e*e:1-ty(-2*e+2,3)/2},"ease-in-quart":function(e){return e*e*e*e},"ease-out-quart":function(e){return 1-ty(1-e,4)},"ease-in-out-quart":function(e){return e<.5?8*e*e*e*e:1-ty(-2*e+2,4)/2},"ease-in-quint":function(e){return e*e*e*e*e},"ease-out-quint":function(e){return 1-ty(1-e,5)},"ease-in-out-quint":function(e){return e<.5?16*e*e*e*e*e:1-ty(-2*e+2,5)/2},"ease-in-sine":function(e){return 1-oy(e*iy/2)},"ease-out-sine":function(e){return ny(e*iy/2)},"ease-in-out-sine":function(e){return-(oy(iy*e)-1)/2},"ease-in-expo":function(e){return 0===e?0:ty(2,10*e-10)},"ease-out-expo":function(e){return 1===e?1:1-ty(2,-10*e)},"ease-in-out-expo":function(e){return 0===e?0:1===e?1:e<.5?ty(2,20*e-10)/2:(2-ty(2,-20*e+10))/2},"ease-in-circ":function(e){return 1-ry(1-ty(e,2))},"ease-out-circ":function(e){return ry(1-ty(e-1,2))},"ease-in-out-circ":function(e){return e<.5?(1-ry(1-ty(2*e,2)))/2:(ry(1-ty(-2*e+2,2))+1)/2},"ease-in-back":function(e){return uy*e*e*e-ay*e*e},"ease-out-back":function(e){return 1+uy*ty(e-1,3)+ay*ty(e-1,2)},"ease-in-out-back":function(e){return e<.5?ty(2*e,2)*(7.189819*e-sy)/2:(ty(2*e-2,2)*((sy+1)*(2*e-2)+sy)+2)/2},"ease-in-elastic":function(e){return 0===e?0:1===e?1:-ty(2,10*e-10)*ny((10*e-10.75)*cy)},"ease-out-elastic":function(e){return 0===e?0:1===e?1:ty(2,-10*e)*ny((10*e-.75)*cy)+1},"ease-in-out-elastic":function(e){return 0===e?0:1===e?1:e<.5?-ty(2,20*e-10)*ny((20*e-11.125)*ly)/2:ty(2,-20*e+10)*ny((20*e-11.125)*ly)/2+1},"ease-in-bounce":function(e){return 1-hy(1-e)},"ease-out-bounce":hy,"ease-in-out-bounce":function(e){return e<.5?(1-hy(1-2*e))/2:(1+hy(2*e-1))/2}},_y=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},e(t,r)};return function(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),yy=function(e,t){for(var r=0,n=t.length,o=e.length;r<n;r++,o++)e[o]=t[r];return e};!function(e){e[e.Default=0]="Default",e[e.Math=1]="Math",e[e.Uniform=2]="Uniform",e[e.ComponentData=3]="ComponentData"}(ey||(ey={}));var vy={position:["transform","position"],scale:["transform","scale"],rotation:["transform","rotation"],material:["mesh","material","_uniforms"]};function my(e){return!!e.setArray}function gy(e){return!!e.slice}function by(e){return!!e.setUniform}var wy=function(){function e(e){var t,r=Object.keys(e).map((function(e){return parseInt(e,10)})).sort((function(e,t){return e-t}));this._times=r.map((function(e){return e/100})),this._seqInfos=[];for(var n={},o=0,i=0,a=r;i<a.length;i++){var s=e[a[i]];for(var u in s)if(void 0===n[u]){var c=u.split("."),l=vy[c[0]];l&&c.splice.apply(c,yy([0,1],l));var f=c.splice(0,1)[0],p=c.pop();this._seqInfos.push({prop:u,comp:f,path:c,key:p,value:void 0,values:[],times:[]}),n[u]=o,o+=1}}for(var h=0,d=this._seqInfos;h<d.length;h++){var _=d[h],y=(u=_.prop,_.values),v=_.times,m=null===(t=e[0])||void 0===t?void 0:t[u];if(void 0===m)for(var g=0,b=r;g<b.length&&!(m=e[E=b[g]][u]);g++);v.push(0),y.push(m),_.isArray=gy(m),_.value=gy(m)?m.slice():m,0===r[0]&&r.splice(0,1),o=0;for(var w=0,x=r;w<x.length;w++){var E,S=e[E=x[w]][u];S&&(v.push(E/100),y.push(S))}}}return Object.defineProperty(e.prototype,"times",{get:function(){return this._times},enumerable:!1,configurable:!0}),e.prototype.start=function(e){for(var t,r=this,n={},o=0,i=this._seqInfos;o<i.length;o++){var a=i[o],s=e.getComponent(a.comp);if(s){for(var u=s,c=0,l=a.path;c<l.length;c++)u=u[l[c]];if(by(u))n[a.prop]=[u,ey.Uniform];else{var f=u[a.key];if(void 0!==f){var p=my(f)?ey.Math:void 0!==(null===(t=null==u?void 0:u.getData)||void 0===t?void 0:t.call(u,a.key))?ey.ComponentData:ey.Default;n[a.prop]=[u,p]}}}}return function(e){return r._update(n,e)}},e.prototype._update=function(e,t){for(var r=0,n=this._seqInfos;r<n.length;r++){var o=n[r],i=o.prop,a=o.key,s=o.times,u=o.values,c=o.value,l=e[i];if(l){for(var f=l[0],p=l[1],h=void 0,d=void 0,_=void 0,y=void 0,v=0;v<s.length-1;v+=1)if(h=s[v],d=s[v+1],h<=t&&t<=d){_=u[v],y=u[v+1];break}if(void 0!==_&&void 0!==y){var m=(t-h)/(d-h),g=o.isArray?this._lerpArray(_,y,m,c):this._lerp(_,y,m);switch(p){case ey.Math:f[a].setArray(g);break;case ey.Uniform:f.setUniform(a,g);break;case ey.ComponentData:f.setDataOne(a,g);break;case ey.Default:f[a]=g}}}}},e.prototype._lerp=function(e,t,r){return e*(1-r)+t*r},e.prototype._lerpArray=function(e,t,r,n){for(var o=1-r,i=0;i<e.length;i+=1)n[i]=e[i]*o+t[i]*r;return n},e}();const xy=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return _y(t,e),t.prototype.onInit=function(e){var t=e.keyframe,r=e.animation;for(var n in this._keyframes={},this._clips={},this._playing={},t)this._keyframes[n]=new wy(t[n]);for(var n in r){var o=r[n];this._keyframes[o.keyframe]?(o.loop=-1===o.loop?1/0:o.loop,this._clips[n]=o):Ee.warn("Keyframe "+o.keyframe+" is not existed, ignore...")}this.clipNames=Object.keys(this._clips)},t.prototype.onPlay=function(e,t,r){var n=this._clips[t];if(n){var o=r.ease||n.ease,i=n.easeParams||[],a=this._keyframes[n.keyframe],s=py[o]?py[o](a.times,i):dy[o],u=a.start(e);return this._playing[e._elId]=function(e,t){return u(s(t?1-e:e))},n}},t.prototype.onUpdate=function(e,t,r){this._playing[e._elId](t,r)},t.prototype.onPause=function(e){},t.prototype.onResume=function(e){},t.prototype.onStop=function(e){delete this._playing[e._elId]},t}(Tp);var Ey=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},e(t,r)};return function(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Sy=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.schema={},t}return Ey(t,e),t.prototype.load=function(e,t){return r=this,n=void 0,i=function(){var r,n,o;return function(e,t){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}}(this,(function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),[4,wa(e.src,"json")];case 1:return r=i.sent().data,[3,3];case 2:return n=i.sent(),[2,t.onError(n)];case 3:return o=new xy(this.scene,r),t.onLoaded(o),[2]}}))},new((o=void 0)||(o=Promise))((function(e,t){function a(e){try{u(i.next(e))}catch(e){t(e)}}function s(e){try{u(i.throw(e))}catch(e){t(e)}}function u(t){var r;t.done?e(t.value):(r=t.value,r instanceof o?r:new o((function(e){e(r)}))).then(a,s)}u((i=i.apply(r,n||[])).next())}));var r,n,o,i},t}(xo);const Ty=Sy;var Oy=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},e(t,r)};return function(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Ay=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.schema={},t}return Oy(t,e),t.prototype.load=function(e,t){return r=this,n=void 0,i=function(){var r,n,o,i;return function(e,t){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}}(this,(function(a){switch(a.label){case 0:r=e.options,n=e.src,a.label=1;case 1:return a.trys.push([1,3,,4]),[4,wa(n,r.encoding||"binary")];case 2:return o=a.sent().data,t.onLoaded(o),[3,4];case 3:return i=a.sent(),t.onError(i),[3,4];case 4:return[2]}}))},new((o=void 0)||(o=Promise))((function(e,t){function a(e){try{u(i.next(e))}catch(e){t(e)}}function s(e){try{u(i.throw(e))}catch(e){t(e)}}function u(t){var r;t.done?e(t.value):(r=t.value,r instanceof o?r:new o((function(e){e(r)}))).then(a,s)}u((i=i.apply(r,n||[])).next())}));var r,n,o,i},t}(xo);const Cy=Ay;var My=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},e(t,r)};return function(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Py=function(){return Py=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Py.apply(this,arguments)},Ry=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.schema={autoPlay:{type:"boolean",defaultValue:!1},placeHolder:{type:"string"},loop:{type:"boolean",defaultValue:!1},abortAudio:{type:"boolean",defaultValue:!0},anisoLevel:{type:"number",defaultValue:1}},t}return My(t,e),t.prototype.load=function(e,t){return r=this,n=void 0,i=function(){var r,n,o,i,a,s,u=this;return function(e,t){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}}(this,(function(c){switch(c.label){case 0:return r=e.options,n=r.placeHolder,o=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(e,n[o])&&(r[n[o]]=e[n[o]])}return r}(r,["placeHolder"]),n?[4,new Promise((function(e){var t=u.scene.createImage();t.onload=function(){return e(t)},t.onerror=function(){return e(void 0)},t.src=n}))]:[3,2];case 1:i=c.sent(),c.label=2;case 2:return c.trys.push([2,4,,5]),[4,this.scene.createVideoTexture(Py({src:e.src,placeHolder:i},o))];case 3:return a=c.sent(),t.onLoaded(a),[3,5];case 4:return s=c.sent(),t.onError(s),[3,5];case 5:return[2]}}))},new((o=void 0)||(o=Promise))((function(e,t){function a(e){try{u(i.next(e))}catch(e){t(e)}}function s(e){try{u(i.throw(e))}catch(e){t(e)}}function u(t){var r;t.done?e(t.value):(r=t.value,r instanceof o?r:new o((function(e){e(r)}))).then(a,s)}u((i=i.apply(r,n||[])).next())}));var r,n,o,i},t.prototype.release=function(e,t){t.release()},t}(xo);const Dy=Ry;Oo("image",J_),Oo("texture",dp),Oo("cube-texture",vp),Oo("video-texture",Dy),Oo("env-data",Sp),Oo("gltf",Q_),Oo("keyframe",Ty),Oo("raw",Cy),Oo("atlas",lp);var Ny,Iy=Se.effect;function Ly(e){var t={elements:{name:[],meta:{}},components:{name:[],meta:{}}};for(var r in yo){var n=new(0,yo[r])(r,(function(){})),o=n.dataMapping,i=n.defaultComponents;t.elements.name.push(r);var a=(t.elements.meta[r]={defaultComps:Object.keys(i),mappings:{name:[],meta:{}},events:"scene"===r?["ready","tick"]:[],limitComps:"scene"===r?Object.keys(io).filter((function(e){return/-system/.test(e)})):[]}).mappings,s=a.name,u=a.meta;for(var c in o)s.push(c),u[c]=o[c]}for(var r in io){var l=io[r],f=(new l).schema;t.components.name.push(r);var p=t.components.meta[r]={keys:[],meta:{},events:l.Events||[]},h=p.keys;for(var c in u=p.meta,f)h.push(c),u[c]={type:f[c].type,defaultValue:f[c].defaultValue};"material"!==r&&"mesh"!==r||(u.uniforms.map=Fy(e,"standard"),u.states.map=ky()),"particles"===r&&(u.uniforms.map=Fy(e,"particle"),u.states.map=ky()),"gltf"===r&&(u.states.map=ky())}return t}function Fy(e,t){var r=Iy[t](e).description,n=r.properties,o=r.images,i={keys:[],meta:{}},a=i.keys,s=i.meta;return n.forEach((function(e){a.push(e.key),s[e.key]={type:"number-array",defaultValue:e.default.join(" ")}})),o.forEach((function(e){a.push(e.key),s[e.key]={type:"texture",defaultValue:e.default}})),i}function ky(){var e={renderQueue:{type:"number",defaultValue:2e3},alphaMode:{type:"string",defaultValue:"OPAQUE",enum:{values:[{value:"OPAQUE"},{value:"BLEND"},{value:"MASK"}]}},alphaCutOff:{type:"number",defaultValue:.5},cullOn:{type:"boolean",defaultValue:"true"},cullFace:{type:"number",defaultValue:ue.ECullMode.BACK,enum:{values:Object.keys(ue.ECullMode).filter((function(e){return isNaN(parseFloat(e))})).map((function(e){return{value:ue.ECullMode[e],desc:e}}))}},depthTestOn:{type:"boolean",defaultValue:"true"},depthTestComp:{type:"number",defaultValue:ue.ECompareFunc.LEQUAL,enum:{values:Object.keys(ue.ECompareFunc).filter((function(e){return isNaN(parseFloat(e))})).map((function(e){return{value:ue.ECompareFunc[e],desc:e}}))}},depthTestWrite:{type:"boolean",defaultValue:"true"},stencilTestOn:{type:"boolean",defaultValue:"false"},stencilComp:{type:"number",defaultValue:ue.ECompareFunc.LEQUAL,enum:{values:Object.keys(ue.ECompareFunc).filter((function(e){return isNaN(parseFloat(e))})).map((function(e){return{value:ue.ECompareFunc[e],desc:e}}))}},stencilRef:{type:"number",defaultValue:0},stencilReadMask:{type:"number",defaultValue:0},stencilWriteMask:{type:"number",defaultValue:0},stencilPass:{type:"number",defaultValue:ue.EStencilOp.ZERO,enum:{values:Object.keys(ue.EStencilOp).filter((function(e){return isNaN(parseFloat(e))})).map((function(e){return{value:ue.EStencilOp[e],desc:e}}))}},stencilFail:{type:"number",defaultValue:ue.EStencilOp.ZERO,enum:{values:Object.keys(ue.EStencilOp).filter((function(e){return isNaN(parseFloat(e))})).map((function(e){return{value:ue.EStencilOp[e],desc:e}}))}},stencilZFail:{type:"number",defaultValue:ue.EStencilOp.ZERO,enum:{values:Object.keys(ue.EStencilOp).filter((function(e){return isNaN(parseFloat(e))})).map((function(e){return{value:ue.EStencilOp[e],desc:e}}))}}};return{keys:Object.keys(e),meta:e}}!function(e){e[e.Alpha=0]="Alpha",e[e.RGB=1]="RGB",e[e.RGBA=2]="RGBA",e[e.None=3]="None"}(Ny||(Ny={}));var Uy={},By=new Tt,jy=function(){function e(e,t,r,n){e=e||0,t=t||0,r=r||0,n="number"==typeof n?n:255,this._value32=(n<<24>>>0)+(r<<16)+(t<<8)+e}return Object.defineProperty(e.prototype,"r",{get:function(){return 255&this._value32},set:function(e){e=Qe(e,0,255),this._value32=(4294967040&this._value32|e)>>>0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"g",{get:function(){return(65280&this._value32)>>>8},set:function(e){e=Qe(e,0,255)<<8,this._value32=(4294902015&this._value32|e)>>>0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"b",{get:function(){return(16711680&this._value32)>>>16},set:function(e){e=Qe(e,0,255)<<16,this._value32=(4278255615&this._value32|e)>>>0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"a",{get:function(){return(4278190080&this._value32)>>>24},set:function(e){e=Qe(e,0,255)<<24,this._value32=(16777215&this._value32|e)>>>0},enumerable:!1,configurable:!0}),Object.defineProperty(e,"WHITE",{get:function(){return new e(255,255,255,255)},enumerable:!1,configurable:!0}),Object.defineProperty(e,"BLACK",{get:function(){return new e(0,0,0,255)},enumerable:!1,configurable:!0}),Object.defineProperty(e,"TRANSPARENT",{get:function(){return new e(0,0,0,0)},enumerable:!1,configurable:!0}),e.blendColorHex=function(e,t,r){var n,o,i,a;switch(void 0===r&&(r=Ny.None),r){case Ny.Alpha:n=(((4278190080&e)>>>24)*((4278190080&t)>>>24)/255<<24>>>0)+(16777215&e);break;case Ny.RGB:n=(4278190080&e)+((o=.5)*((16711680&e)>>>16)+(i=.5)*((16711680&t)>>>16)<<16)+(o*((65280&e)>>>8)+i*((65280&t)>>>8)<<8)+(o*(255&e)+i*(255&t));break;case Ny.RGBA:n=(256*(a=1-(1-(o=((4278190080&e)>>>24)/256))*(1-(i=((4278190080&t)>>>24)/256)))<<24>>>0)+((o*((16711680&e)>>>16)+(1-o)*i*((16711680&t)>>>16))/a<<16)+((o*((65280&e)>>>8)+(1-o)*i*((65280&t)>>>8))/a<<8)+(o*(255&e)+(1-o)*i*(255&t))/a;break;case Ny.None:default:n=e}return n},e.multiplyColorHex=function(e,t,r){var n;switch(void 0===r&&(r=Ny.None),r){case Ny.Alpha:n=(((4278190080&e)>>>24)*((4278190080&t)>>>24)/255<<24>>>0)+(16777215&e);break;case Ny.RGB:n=(4278190080&e)+(((16711680&e)>>>16)*((16711680&t)>>>16)/255<<16)+(((65280&e)>>>8)*((65280&t)>>>8)/255<<8)+(255&e)*(255&t)/255;break;case Ny.RGBA:n=(((4278190080&e)>>>24)*((4278190080&t)>>>24)/255<<24>>>0)+(((16711680&e)>>>16)*((16711680&t)>>>16)/255<<16)+(((65280&e)>>>8)*((65280&t)>>>8)/255<<8)+(255&e)*(255&t)/255;break;case Ny.None:default:n=e}return n},e.getValue32FromRGBA=function(e,t,r,n){return(n<<24>>>0)+(r<<16)+(t<<8)+e},e.getValue32FromHSVA=function(){},e.percentRoundFn=function(e){return Math.round(100*e)/100},e.diffc=function(e,t,r){return(e-t)/6/r+.5},e.rgb2hsv=function(t,r,n,o){var i=0,a=0,s=0,u=0,c=0,l=t/255,f=r/255,p=n/255,h=Math.max(l,f,p),d=h-Math.min(l,f,p);return 0===d?i=a=0:(a=d/h,s=e.diffc(h,l,d),u=e.diffc(h,f,d),c=e.diffc(h,p,d),l===h?i=c-u:f===h?i=1/3+s-c:p===h&&(i=2/3+u-s),i<0?i+=1:i>1&&(i-=1)),o?(o.setValue(Math.round(360*i),e.percentRoundFn(100*a),e.percentRoundFn(100*h)),o):Tt.createFromNumber(Math.round(360*i),e.percentRoundFn(100*a),e.percentRoundFn(100*h))},e.hsvV2rgb=function(e,t,r,n){var o,i,a,s,u,c,l,f;switch(c=r*(1-t),l=r*(1-(u=6*e-(s=Math.floor(6*e)))*t),f=r*(1-(1-u)*t),s%6){case 0:o=r,i=f,a=c;break;case 1:o=l,i=r,a=c;break;case 2:o=c,i=r,a=f;break;case 3:o=c,i=l,a=r;break;case 4:o=f,i=c,a=r;break;case 5:o=r,i=c,a=l}return n?(n.setValue(Math.round(255*o),Math.round(255*i),Math.round(255*a)),n):Tt.createFromNumber(Math.round(255*o),Math.round(255*i),Math.round(255*a))},e.randomMix=function(t,r,n){if(void 0===n&&(n=Math.random()),t===r)return t;var o=255&t,i=(65280&t)>>>8,a=(16711680&t)>>>16,s=(4278190080&t)>>>24,u=255&r,c=(65280&r)>>>8,l=(16711680&r)>>>16,f=(4278190080&r)>>>24,p=e.rgb2hsv(o,i,a,By),h=p.x,d=p.y,_=p.z,y=e.rgb2hsv(u,c,l,By),v=y.x,m=y.y,g=y.z,b=Math.abs(h-v)*n+Math.min(h,v),w=Math.abs(d-m)*n+Math.min(d,m),x=Math.abs(_-g)*n+Math.min(_,g),E=Math.abs(s-f)*n+Math.min(s,f),S=e.hsvV2rgb(b/360,w/100,x/100,By);return this.getValue32FromRGBA(S.x,S.y,S.z,E)},e.fromHex=function(t){var r=new e(0,0,0,0);return r._value32=t,r},e.fromHexString=function(t){var r=new e(0,0,0,0);return r._value32=function(e){if(Uy[e])return Uy[e];var t=e.replace(/\#/,""),r=["F","F",t[4]||"F",t[5]||"F",t[2]||"F",t[3]||"F",t[0]||"F",t[1]||"F"];return Uy[e]=parseInt(r.join(""),16),Uy[e]}(t),r},e.fromFloatArray=function(t){return new e(Math.ceil(255*(t[0]||0)),Math.ceil(255*(t[1]||0)),Math.ceil(255*(t[2]||0)),t.length>=4?Math.ceil(255*(t[3]||0)):255)},e.prototype.clone=function(){var t=new e(0,0,0,0);return t._value32=this._value32,t},e.prototype.equals=function(e){return e._value32===this._value32},e.prototype.set=function(e){this._value32=e._value32},e.prototype.setRGBA=function(e,t,r,n){this._value32=(n<<24>>>0)+(r<<16)+(t<<8)+e},e.prototype.setValue32=function(e){this._value32=e},e.prototype.toNormalizedArray=function(){return[this.r/255,this.g/255,this.b/255,this.a/255]},e.prototype.toRGBAString=function(){return"rgba("+this.r+", "+this.g+", "+this.b+", "+this.a/255+")"},e.prototype.mix=function(t,r){return r?(r.r=this.r*t.r/255,r.g=this.g*t.g/255,r.b=this.b*t.b/255,r.a=this.a*t.a/255,r):new e(this.r*t.r/255,this.g*t.g/255,this.b*t.b/255,this.a*t.a/255)},e.BlendType=Ny,e}();const Vy=jy;var zy=Tt.createFromNumber(0,1,0);const Gy=function(){function e(){this._center=Tt.createFromNumber(0,0,0),this._AxisX=Tt.createFromNumber(1,0,0),this._AxisY=Tt.createFromNumber(0,1,0),this._AxisZ=Tt.createFromNumber(0,0,1),this._width=0,this._height=0,this._depth=0}return e.prototype.setValues=function(e,t,r,n,o,i,a){this._center.setValue(e,t,r),this.setForward(n),this._width=o,this._height=i,this._depth=a},Object.defineProperty(e.prototype,"center",{get:function(){return this._center},set:function(e){this._center=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"width",{get:function(){return this._width},set:function(e){this._width=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this._height},set:function(e){this._height=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"depth",{get:function(){return this._depth},set:function(e){this._depth=e},enumerable:!1,configurable:!0}),e.prototype.setForward=function(e){e.normalize(this._AxisZ),this._updateAxis()},Object.defineProperty(e.prototype,"AxisX",{get:function(){return this._AxisX},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"AxisY",{get:function(){return this._AxisY},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"AxisZ",{get:function(){return this._AxisZ},enumerable:!1,configurable:!0}),e.prototype._updateAxis=function(){zy.cross(this._AxisZ,this._AxisX),this._AxisX.cross(this._AxisZ,this._AxisY)},e}();var Wy=function(){function e(e){var t=this;this._type=e,this.__wxElement=void 0,this._children=[],this._attributes={},this._triggerEvent=function(e,r,n){ce.triggerEvent(t,e,r,n)},this.__xrElement=new(vo(e))(e,this._triggerEvent)}return e.prototype.release=function(){this.__xrElement._release(),this.__xrElement=void 0,this.__wxElement=void 0},e.prototype.associateComponent=function(e){this.__wxElement=e,this.__xrElement._associateValue(e)},e.prototype.cloneNode=function(){var t=new e(this._type);if("scene"===this._type)t.__xrElement=this.__xrElement;else for(var r in this._attributes)t.setAttribute(r,this._attributes[r]);return t},e.prototype.equal=function(e){return this.__xrElement===e.__xrElement},e.prototype.getParentNode=function(){return this._parent},e.prototype.getChildNode=function(e){return this._children[e]},e.prototype.appendChild=function(e){e._parent&&e._parent.removeChild(e._parent._children.indexOf(e)),this._children.push(e),this.__xrElement._appendChild(e.__xrElement)},e.prototype.removeChild=function(e){this._children.splice(e,1),this.__xrElement._removeChild(void 0,e)},e.prototype.insertChild=function(e,t){e._parent&&e._parent.removeChild(e._parent._children.indexOf(e)),this._children.splice(t,0,e),this.__xrElement._insertBefore(e.__xrElement,void 0,t)},e.prototype.replaceChild=function(e,t){e._parent&&e._parent.removeChild(e._parent._children.indexOf(e)),this.__xrElement._replaceChild(e.__xrElement,void 0,t)},e.prototype.splice=function(e,t,r){var n;(n=this._children).splice.apply(n,function(e,t){for(var r=0,n=t.length,o=e.length;r<n;r++,o++)e[o]=t[r];return e}([e,t],r._children)),this.__xrElement._spliceBefore(e,t,r.__xrElement)},e.prototype.findChildPosition=function(e){return this._children.indexOf(e)},e.prototype.length=function(){return this._children.length},e.prototype.setId=function(e){this.__xrElement._setId(e)},e.prototype.setStyleScope=function(e){this.__xrElement._setStyleScope(e)},e.prototype.setStyle=function(e){this.__xrElement._setStyle(e)},e.prototype.setClass=function(e){this.__xrElement._addClass(e)},e.prototype.removeClass=function(e,t){this.__xrElement._removeClass(e,t)},e.prototype.clearClasses=function(){this.__xrElement._clearClasses()},e.prototype.setAttribute=function(e,t){this._attributes[e]=t,this.__xrElement._setAttribute(e,t)},e.prototype.removeAttribute=function(e){delete this._attributes[e],this.__xrElement._removeAttribute(e)},e.prototype.setListenerOption=function(e,t,r){this.__xrElement._setWXMLListener(e)},e.prototype.setText=function(e){this.__xrElement._setText(e)},e}();const Xy=Wy,Hy=function(){function e(e,t,r,n){this._canvas=e,this._allContext=t,this._id=r,this._startTs=n,this._styleSheetIdInc=1,this._renderCallbacks=null,this._rootNode=new Xy(_o.TYPE),this._deferEvents=new Map}return e.prototype.processEvent=function(e,t){this._scene?this._scene._processEvent(e,t):this._deferEvents.set(e,t)},e.prototype.destroy=function(){this._allContext.delete(this._id),this._scene=void 0,this._rootNode=void 0,this._canvas=void 0,this._allContext=void 0},e.prototype.getWindowWidth=function(){return 1},e.prototype.getWindowHeight=function(){return 1},e.prototype.getDevicePixelRatio=function(){return 1},e.prototype.appendStyleSheet=function(e,t){var r=this._styleSheetIdInc;return this._styleSheetIdInc+=1,r},e.prototype.replaceStyleSheet=function(e,t,r){},e.prototype.clearStyleSheets=function(e){},e.prototype.render=function(e){Ee.log("render")},e.prototype.bindRootNode=function(e){this._rootNode=e},e.prototype.getRootNode=function(){return this._rootNode},e.prototype.createElement=function(e,t){var r=this;if("text"!==e&&"image"!==e||Ee.throw(new Error("Text and Image element was not supported in xr-frame !")),"fragment"===e||"slot"===t)return new Xy(_o.TYPE);if("wx-xr-"!==t.slice(0,6))return Ee.warn("Only support element with prefix 'xr-' !"),new Xy(_o.TYPE);var n=t.slice(6),o=vo(n);if(vo(n)){var i=new Xy(o.TYPE);return"scene"===n&&(this._scene&&Ee.throw(new Error("Only support one xr-scene in one xr component !")),this._scene=i.__xrElement,this._scene._setCanvas(this._canvas,this._id),this._deferEvents.forEach((function(e,t){return r._scene._processEvent(t,e)})),this._deferEvents.clear()),i}Ee.error(new Error("Element "+n+" was not registered !"))},e.prototype.getNodeUnderPoint=function(e,t){return this._rootNode},e}();function qy(){return le}ce.globalOptions.publicProperties=!0,ce.globalOptions.renderingMode="full",ce.globalOptions.documentBackend="custom",ce.globalOptions.domain="//",ce.globalOptions.classPrefix="",ce.globalOptions.hasDOMBackend=!1,ce.globalOptions.writeIdToDOM=!0,ce.globalOptions.listenerChangeLifeTimes=!0,ce.initBackend();var Yy=new Map,Zy=new Map;function Ky(e,t,r){var n;if(Yy.get(e))return Yy.get(e);ve(e,t.id,r);var o=new Hy(t,Yy,e,r);return Yy.set(e,o),null===(n=Zy.get(e))||void 0===n||n.forEach((function(e,t){return o.processEvent(t,e)})),Zy.delete(e),o}function Qy(e){}var $y=function(e){var t=e.extraWx,r=e.onCanvasEvent;void 0!==t&&Object.keys(t).forEach((function(e){fe[e]=t[e]})),"function"==typeof r&&r((function(e,t,r){var n=Yy.get(e);n?n.processEvent(t,r):(!Zy.has(e)&&Zy.set(e,new Map),Zy.get(e).set(t,r))}))}})(),xrFrame=__webpack_exports__})(),window.xrFrame=xrFrame}));